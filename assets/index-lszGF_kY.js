(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const y of h)if(y.type==="childList")for(const w of y.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function d(h){const y={};return h.integrity&&(y.integrity=h.integrity),h.referrerPolicy&&(y.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?y.credentials="include":h.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function c(h){if(h.ep)return;h.ep=!0;const y=d(h);fetch(h.href,y)}})();function xh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ul={exports:{}},qn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function mf(){if(ih)return qn;ih=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function d(c,h,y){var w=null;if(y!==void 0&&(w=""+y),h.key!==void 0&&(w=""+h.key),"key"in h){y={};for(var x in h)x!=="key"&&(y[x]=h[x])}else y=h;return h=y.ref,{$$typeof:o,type:c,key:w,ref:h!==void 0?h:null,props:y}}return qn.Fragment=r,qn.jsx=d,qn.jsxs=d,qn}var ah;function hf(){return ah||(ah=1,Ul.exports=mf()),Ul.exports}var i=hf(),Wl={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function pf(){if(nh)return he;nh=1;var o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),E=Symbol.iterator;function j(m){return m===null||typeof m!="object"?null:(m=E&&m[E]||m["@@iterator"],typeof m=="function"?m:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,X={};function Z(m,C,I){this.props=m,this.context=C,this.refs=X,this.updater=I||A}Z.prototype.isReactComponent={},Z.prototype.setState=function(m,C){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,C,"setState")},Z.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function q(){}q.prototype=Z.prototype;function se(m,C,I){this.props=m,this.context=C,this.refs=X,this.updater=I||A}var te=se.prototype=new q;te.constructor=se,L(te,Z.prototype),te.isPureReactComponent=!0;var J=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function ae(m,C,I,W,ne,xe){return I=xe.ref,{$$typeof:o,type:m,key:C,ref:I!==void 0?I:null,props:xe}}function ee(m,C){return ae(m.type,C,void 0,void 0,void 0,m.props)}function R(m){return typeof m=="object"&&m!==null&&m.$$typeof===o}function ie(m){var C={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(I){return C[I]})}var ue=/\/+/g;function T(m,C){return typeof m=="object"&&m!==null&&m.key!=null?ie(""+m.key):C.toString(36)}function U(){}function B(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then(U,U):(m.status="pending",m.then(function(C){m.status==="pending"&&(m.status="fulfilled",m.value=C)},function(C){m.status==="pending"&&(m.status="rejected",m.reason=C)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function O(m,C,I,W,ne){var xe=typeof m;(xe==="undefined"||xe==="boolean")&&(m=null);var me=!1;if(m===null)me=!0;else switch(xe){case"bigint":case"string":case"number":me=!0;break;case"object":switch(m.$$typeof){case o:case r:me=!0;break;case k:return me=m._init,O(me(m._payload),C,I,W,ne)}}if(me)return ne=ne(m),me=W===""?"."+T(m,0):W,J(ne)?(I="",me!=null&&(I=me.replace(ue,"$&/")+"/"),O(ne,C,I,"",function(pi){return pi})):ne!=null&&(R(ne)&&(ne=ee(ne,I+(ne.key==null||m&&m.key===ne.key?"":(""+ne.key).replace(ue,"$&/")+"/")+me)),C.push(ne)),1;me=0;var pt=W===""?".":W+":";if(J(m))for(var Me=0;Me<m.length;Me++)W=m[Me],xe=pt+T(W,Me),me+=O(W,C,I,xe,ne);else if(Me=j(m),typeof Me=="function")for(m=Me.call(m),Me=0;!(W=m.next()).done;)W=W.value,xe=pt+T(W,Me++),me+=O(W,C,I,xe,ne);else if(xe==="object"){if(typeof m.then=="function")return O(B(m),C,I,W,ne);throw C=String(m),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return me}function N(m,C,I){if(m==null)return m;var W=[],ne=0;return O(m,W,"","",function(xe){return C.call(I,xe,ne++)}),W}function V(m){if(m._status===-1){var C=m._result;C=C(),C.then(function(I){(m._status===0||m._status===-1)&&(m._status=1,m._result=I)},function(I){(m._status===0||m._status===-1)&&(m._status=2,m._result=I)}),m._status===-1&&(m._status=0,m._result=C)}if(m._status===1)return m._result.default;throw m._result}var M=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)};function v(){}return he.Children={map:N,forEach:function(m,C,I){N(m,function(){C.apply(this,arguments)},I)},count:function(m){var C=0;return N(m,function(){C++}),C},toArray:function(m){return N(m,function(C){return C})||[]},only:function(m){if(!R(m))throw Error("React.Children.only expected to receive a single React element child.");return m}},he.Component=Z,he.Fragment=d,he.Profiler=h,he.PureComponent=se,he.StrictMode=c,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,he.__COMPILER_RUNTIME={__proto__:null,c:function(m){return K.H.useMemoCache(m)}},he.cache=function(m){return function(){return m.apply(null,arguments)}},he.cloneElement=function(m,C,I){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var W=L({},m.props),ne=m.key,xe=void 0;if(C!=null)for(me in C.ref!==void 0&&(xe=void 0),C.key!==void 0&&(ne=""+C.key),C)!_.call(C,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&C.ref===void 0||(W[me]=C[me]);var me=arguments.length-2;if(me===1)W.children=I;else if(1<me){for(var pt=Array(me),Me=0;Me<me;Me++)pt[Me]=arguments[Me+2];W.children=pt}return ae(m.type,ne,void 0,void 0,xe,W)},he.createContext=function(m){return m={$$typeof:w,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:y,_context:m},m},he.createElement=function(m,C,I){var W,ne={},xe=null;if(C!=null)for(W in C.key!==void 0&&(xe=""+C.key),C)_.call(C,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ne[W]=C[W]);var me=arguments.length-2;if(me===1)ne.children=I;else if(1<me){for(var pt=Array(me),Me=0;Me<me;Me++)pt[Me]=arguments[Me+2];ne.children=pt}if(m&&m.defaultProps)for(W in me=m.defaultProps,me)ne[W]===void 0&&(ne[W]=me[W]);return ae(m,xe,void 0,void 0,null,ne)},he.createRef=function(){return{current:null}},he.forwardRef=function(m){return{$$typeof:x,render:m}},he.isValidElement=R,he.lazy=function(m){return{$$typeof:k,_payload:{_status:-1,_result:m},_init:V}},he.memo=function(m,C){return{$$typeof:f,type:m,compare:C===void 0?null:C}},he.startTransition=function(m){var C=K.T,I={};K.T=I;try{var W=m(),ne=K.S;ne!==null&&ne(I,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(v,M)}catch(xe){M(xe)}finally{K.T=C}},he.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},he.use=function(m){return K.H.use(m)},he.useActionState=function(m,C,I){return K.H.useActionState(m,C,I)},he.useCallback=function(m,C){return K.H.useCallback(m,C)},he.useContext=function(m){return K.H.useContext(m)},he.useDebugValue=function(){},he.useDeferredValue=function(m,C){return K.H.useDeferredValue(m,C)},he.useEffect=function(m,C,I){var W=K.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(m,C)},he.useId=function(){return K.H.useId()},he.useImperativeHandle=function(m,C,I){return K.H.useImperativeHandle(m,C,I)},he.useInsertionEffect=function(m,C){return K.H.useInsertionEffect(m,C)},he.useLayoutEffect=function(m,C){return K.H.useLayoutEffect(m,C)},he.useMemo=function(m,C){return K.H.useMemo(m,C)},he.useOptimistic=function(m,C){return K.H.useOptimistic(m,C)},he.useReducer=function(m,C,I){return K.H.useReducer(m,C,I)},he.useRef=function(m){return K.H.useRef(m)},he.useState=function(m){return K.H.useState(m)},he.useSyncExternalStore=function(m,C,I){return K.H.useSyncExternalStore(m,C,I)},he.useTransition=function(){return K.H.useTransition()},he.version="19.1.1",he}var sh;function nc(){return sh||(sh=1,Wl.exports=pf()),Wl.exports}var p=nc();const vh=xh(p);var Ql={exports:{}},Un={},$l={exports:{}},Kl={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh;function gf(){return rh||(rh=1,(function(o){function r(N,V){var M=N.length;N.push(V);e:for(;0<M;){var v=M-1>>>1,m=N[v];if(0<h(m,V))N[v]=V,N[M]=m,M=v;else break e}}function d(N){return N.length===0?null:N[0]}function c(N){if(N.length===0)return null;var V=N[0],M=N.pop();if(M!==V){N[0]=M;e:for(var v=0,m=N.length,C=m>>>1;v<C;){var I=2*(v+1)-1,W=N[I],ne=I+1,xe=N[ne];if(0>h(W,M))ne<m&&0>h(xe,W)?(N[v]=xe,N[ne]=M,v=ne):(N[v]=W,N[I]=M,v=I);else if(ne<m&&0>h(xe,M))N[v]=xe,N[ne]=M,v=ne;else break e}}return V}function h(N,V){var M=N.sortIndex-V.sortIndex;return M!==0?M:N.id-V.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;o.unstable_now=function(){return y.now()}}else{var w=Date,x=w.now();o.unstable_now=function(){return w.now()-x}}var g=[],f=[],k=1,E=null,j=3,A=!1,L=!1,X=!1,Z=!1,q=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function J(N){for(var V=d(f);V!==null;){if(V.callback===null)c(f);else if(V.startTime<=N)c(f),V.sortIndex=V.expirationTime,r(g,V);else break;V=d(f)}}function K(N){if(X=!1,J(N),!L)if(d(g)!==null)L=!0,_||(_=!0,T());else{var V=d(f);V!==null&&O(K,V.startTime-N)}}var _=!1,ae=-1,ee=5,R=-1;function ie(){return Z?!0:!(o.unstable_now()-R<ee)}function ue(){if(Z=!1,_){var N=o.unstable_now();R=N;var V=!0;try{e:{L=!1,X&&(X=!1,se(ae),ae=-1),A=!0;var M=j;try{t:{for(J(N),E=d(g);E!==null&&!(E.expirationTime>N&&ie());){var v=E.callback;if(typeof v=="function"){E.callback=null,j=E.priorityLevel;var m=v(E.expirationTime<=N);if(N=o.unstable_now(),typeof m=="function"){E.callback=m,J(N),V=!0;break t}E===d(g)&&c(g),J(N)}else c(g);E=d(g)}if(E!==null)V=!0;else{var C=d(f);C!==null&&O(K,C.startTime-N),V=!1}}break e}finally{E=null,j=M,A=!1}V=void 0}}finally{V?T():_=!1}}}var T;if(typeof te=="function")T=function(){te(ue)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=ue,T=function(){B.postMessage(null)}}else T=function(){q(ue,0)};function O(N,V){ae=q(function(){N(o.unstable_now())},V)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(N){N.callback=null},o.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<N?Math.floor(1e3/N):5},o.unstable_getCurrentPriorityLevel=function(){return j},o.unstable_next=function(N){switch(j){case 1:case 2:case 3:var V=3;break;default:V=j}var M=j;j=V;try{return N()}finally{j=M}},o.unstable_requestPaint=function(){Z=!0},o.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var M=j;j=N;try{return V()}finally{j=M}},o.unstable_scheduleCallback=function(N,V,M){var v=o.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?v+M:v):M=v,N){case 1:var m=-1;break;case 2:m=250;break;case 5:m=1073741823;break;case 4:m=1e4;break;default:m=5e3}return m=M+m,N={id:k++,callback:V,priorityLevel:N,startTime:M,expirationTime:m,sortIndex:-1},M>v?(N.sortIndex=M,r(f,N),d(g)===null&&N===d(f)&&(X?(se(ae),ae=-1):X=!0,O(K,M-v))):(N.sortIndex=m,r(g,N),L||A||(L=!0,_||(_=!0,T()))),N},o.unstable_shouldYield=ie,o.unstable_wrapCallback=function(N){var V=j;return function(){var M=j;j=V;try{return N.apply(this,arguments)}finally{j=M}}}})(Kl)),Kl}var oh;function ff(){return oh||(oh=1,$l.exports=gf()),$l.exports}var Xl={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function yf(){if(lh)return Je;lh=1;var o=nc();function r(g){var f="https://react.dev/errors/"+g;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)f+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+g+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var c={d:{f:d,r:function(){throw Error(r(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},h=Symbol.for("react.portal");function y(g,f,k){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:E==null?null:""+E,children:g,containerInfo:f,implementation:k}}var w=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(g,f){if(g==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Je.createPortal=function(g,f){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return y(g,f,null,k)},Je.flushSync=function(g){var f=w.T,k=c.p;try{if(w.T=null,c.p=2,g)return g()}finally{w.T=f,c.p=k,c.d.f()}},Je.preconnect=function(g,f){typeof g=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,c.d.C(g,f))},Je.prefetchDNS=function(g){typeof g=="string"&&c.d.D(g)},Je.preinit=function(g,f){if(typeof g=="string"&&f&&typeof f.as=="string"){var k=f.as,E=x(k,f.crossOrigin),j=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;k==="style"?c.d.S(g,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:E,integrity:j,fetchPriority:A}):k==="script"&&c.d.X(g,{crossOrigin:E,integrity:j,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Je.preinitModule=function(g,f){if(typeof g=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var k=x(f.as,f.crossOrigin);c.d.M(g,{crossOrigin:k,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&c.d.M(g)},Je.preload=function(g,f){if(typeof g=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var k=f.as,E=x(k,f.crossOrigin);c.d.L(g,k,{crossOrigin:E,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Je.preloadModule=function(g,f){if(typeof g=="string")if(f){var k=x(f.as,f.crossOrigin);c.d.m(g,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:k,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else c.d.m(g)},Je.requestFormReset=function(g){c.d.r(g)},Je.unstable_batchedUpdates=function(g,f){return g(f)},Je.useFormState=function(g,f,k){return w.H.useFormState(g,f,k)},Je.useFormStatus=function(){return w.H.useHostTransitionStatus()},Je.version="19.1.1",Je}var ch;function bf(){if(ch)return Xl.exports;ch=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Xl.exports=yf(),Xl.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function xf(){if(dh)return Un;dh=1;var o=ff(),r=nc(),d=bf();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function w(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(y(e)!==e)throw Error(c(188))}function g(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,n=t;;){var s=a.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){a=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===a)return x(s),e;if(l===n)return x(s),t;l=l.sibling}throw Error(c(188))}if(a.return!==n.return)a=s,n=l;else{for(var u=!1,b=s.child;b;){if(b===a){u=!0,a=s,n=l;break}if(b===n){u=!0,n=s,a=l;break}b=b.sibling}if(!u){for(b=l.child;b;){if(b===a){u=!0,a=l,n=s;break}if(b===n){u=!0,n=l,a=s;break}b=b.sibling}if(!u)throw Error(c(189))}}if(a.alternate!==n)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function f(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=f(e),t!==null)return t;e=e.sibling}return null}var k=Object.assign,E=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),te=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function T(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var U=Symbol.for("react.client.reference");function B(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===U?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case Z:return"Profiler";case X:return"StrictMode";case K:return"Suspense";case _:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case te:return(e.displayName||"Context")+".Provider";case se:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:B(e.type)||"Memo";case ee:t=e._payload,e=e._init;try{return B(e(t))}catch{}}return null}var O=Array.isArray,N=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},v=[],m=-1;function C(e){return{current:e}}function I(e){0>m||(e.current=v[m],v[m]=null,m--)}function W(e,t){m++,v[m]=e.current,e.current=t}var ne=C(null),xe=C(null),me=C(null),pt=C(null);function Me(e,t){switch(W(me,t),W(xe,e),W(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Tm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Tm(t),e=Mm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ne),W(ne,e)}function pi(){I(ne),I(xe),I(me)}function Dr(e){e.memoizedState!==null&&W(pt,e);var t=ne.current,a=Mm(t,e.type);t!==a&&(W(xe,e),W(ne,a))}function os(e){xe.current===e&&(I(ne),I(xe)),pt.current===e&&(I(pt),On._currentValue=M)}var Tr=Object.prototype.hasOwnProperty,Mr=o.unstable_scheduleCallback,Rr=o.unstable_cancelCallback,_h=o.unstable_shouldYield,qh=o.unstable_requestPaint,_t=o.unstable_now,Uh=o.unstable_getCurrentPriorityLevel,dc=o.unstable_ImmediatePriority,uc=o.unstable_UserBlockingPriority,ls=o.unstable_NormalPriority,Wh=o.unstable_LowPriority,mc=o.unstable_IdlePriority,Qh=o.log,$h=o.unstable_setDisableYieldValue,Wa=null,gt=null;function gi(e){if(typeof Qh=="function"&&$h(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Wa,e)}catch{}}var ft=Math.clz32?Math.clz32:Yh,Kh=Math.log,Xh=Math.LN2;function Yh(e){return e>>>=0,e===0?32:31-(Kh(e)/Xh|0)|0}var cs=256,ds=4194304;function Gi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function us(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,u=e.pingedLanes;e=e.warmLanes;var b=n&134217727;return b!==0?(n=b&~l,n!==0?s=Gi(n):(u&=b,u!==0?s=Gi(u):a||(a=b&~e,a!==0&&(s=Gi(a))))):(b=n&~l,b!==0?s=Gi(b):u!==0?s=Gi(u):a||(a=n&~e,a!==0&&(s=Gi(a)))),s===0?0:t!==0&&t!==s&&(t&l)===0&&(l=s&-s,a=t&-t,l>=a||l===32&&(a&4194048)!==0)?t:s}function Qa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Zh(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var e=cs;return cs<<=1,(cs&4194048)===0&&(cs=256),e}function pc(){var e=ds;return ds<<=1,(ds&62914560)===0&&(ds=4194304),e}function Pr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function $a(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jh(e,t,a,n,s,l){var u=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,S=e.expirationTimes,H=e.hiddenUpdates;for(a=u&~a;0<a;){var Q=31-ft(a),Y=1<<Q;b[Q]=0,S[Q]=-1;var G=H[Q];if(G!==null)for(H[Q]=null,Q=0;Q<G.length;Q++){var F=G[Q];F!==null&&(F.lane&=-536870913)}a&=~Y}n!==0&&gc(e,n,0),l!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=l&~(u&~t))}function gc(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ft(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function fc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-ft(a),s=1<<n;s&t|e[n]&t&&(e[n]|=t),a&=~s}}function Br(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ir(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yc(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:Xm(e.type))}function ep(e,t){var a=V.p;try{return V.p=e,t()}finally{V.p=a}}var fi=Math.random().toString(36).slice(2),Ye="__reactFiber$"+fi,ct="__reactProps$"+fi,ra="__reactContainer$"+fi,Lr="__reactEvents$"+fi,tp="__reactListeners$"+fi,ip="__reactHandles$"+fi,bc="__reactResources$"+fi,Ka="__reactMarker$"+fi;function zr(e){delete e[Ye],delete e[ct],delete e[Lr],delete e[tp],delete e[ip]}function oa(e){var t=e[Ye];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ra]||a[Ye]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Im(e);e!==null;){if(a=e[Ye])return a;e=Im(e)}return t}e=a,a=e.parentNode}return null}function la(e){if(e=e[Ye]||e[ra]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Xa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function ca(e){var t=e[bc];return t||(t=e[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Ka]=!0}var xc=new Set,vc={};function Fi(e,t){da(e,t),da(e+"Capture",t)}function da(e,t){for(vc[e]=t,e=0;e<t.length;e++)xc.add(t[e])}var ap=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},kc={};function np(e){return Tr.call(kc,e)?!0:Tr.call(wc,e)?!1:ap.test(e)?kc[e]=!0:(wc[e]=!0,!1)}function ms(e,t,a){if(np(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Xt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}var Hr,Cc;function ua(e){if(Hr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Hr=t&&t[1]||"",Cc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hr+e+Cc}var Or=!1;function Gr(e,t){if(!e||Or)return"";Or=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(F){var G=F}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(F){G=F}e.call(Y.prototype)}}else{try{throw Error()}catch(F){G=F}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(F){if(F&&G&&typeof F.stack=="string")return[F.stack,G.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),u=l[0],b=l[1];if(u&&b){var S=u.split(`
`),H=b.split(`
`);for(s=n=0;n<S.length&&!S[n].includes("DetermineComponentFrameRoot");)n++;for(;s<H.length&&!H[s].includes("DetermineComponentFrameRoot");)s++;if(n===S.length||s===H.length)for(n=S.length-1,s=H.length-1;1<=n&&0<=s&&S[n]!==H[s];)s--;for(;1<=n&&0<=s;n--,s--)if(S[n]!==H[s]){if(n!==1||s!==1)do if(n--,s--,0>s||S[n]!==H[s]){var Q=`
`+S[n].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=n&&0<=s);break}}}finally{Or=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ua(a):""}function sp(e){switch(e.tag){case 26:case 27:case 5:return ua(e.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 15:return Gr(e.type,!1);case 11:return Gr(e.type.render,!1);case 1:return Gr(e.type,!0);case 31:return ua("Activity");default:return""}}function Ac(e){try{var t="";do t+=sp(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rp(e){var t=Sc(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,l=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){n=""+u,l.call(this,u)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=rp(e))}function Nc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Sc(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var op=/[\n"\\]/g;function Tt(e){return e.replace(op,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fr(e,t,a,n,s,l,u,b){e.name="",u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"?e.type=u:e.removeAttribute("type"),t!=null?u==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):u!=="submit"&&u!=="reset"||e.removeAttribute("value"),t!=null?Vr(e,u,Dt(t)):a!=null?Vr(e,u,Dt(a)):n!=null&&e.removeAttribute("value"),s==null&&l!=null&&(e.defaultChecked=!!l),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Dt(b):e.removeAttribute("name")}function jc(e,t,a,n,s,l,u,b){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||a!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;a=a!=null?""+Dt(a):"",t=t!=null?""+Dt(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=b?e.checked:!!n,e.defaultChecked=!!n,u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.name=u)}function Vr(e,t,a){t==="number"&&gs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ma(e,t,a,n){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Dt(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ec(e,t,a){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Dt(a):""}function Dc(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(c(92));if(O(n)){if(1<n.length)throw Error(c(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Dt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function ha(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var lp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||lp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Mc(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&a[s]!==n&&Tc(e,s,n)}else for(var l in t)t.hasOwnProperty(l)&&Tc(e,l,t[l])}function _r(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(e){return dp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var qr=null;function Ur(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pa=null,ga=null;function Rc(e){var t=la(e);if(t&&(e=t.stateNode)){var a=e[ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var s=n[ct]||null;if(!s)throw Error(c(90));Fr(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Nc(n)}break e;case"textarea":Ec(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ma(e,!!a.multiple,t,!1)}}}var Wr=!1;function Pc(e,t,a){if(Wr)return e(t,a);Wr=!0;try{var n=e(t);return n}finally{if(Wr=!1,(pa!==null||ga!==null)&&(tr(),pa&&(t=pa,e=ga,ga=pa=null,Rc(t),e)))for(t=0;t<e.length;t++)Rc(e[t])}}function Ya(e,t){var a=e.stateNode;if(a===null)return null;var n=a[ct]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qr=!1;if(Yt)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Qr=!1}var yi=null,$r=null,ys=null;function Bc(){if(ys)return ys;var e,t=$r,a=t.length,n,s="value"in yi?yi.value:yi.textContent,l=s.length;for(e=0;e<a&&t[e]===s[e];e++);var u=a-e;for(n=1;n<=u&&t[a-n]===s[l-n];n++);return ys=s.slice(e,1<n?1-n:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xs(){return!0}function Ic(){return!1}function dt(e){function t(a,n,s,l,u){this._reactName=a,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(l):l[b]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?xs:Ic,this.isPropagationStopped=Ic,this}return k(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),t}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=dt(Vi),Ja=k({},Vi,{view:0,detail:0}),up=dt(Ja),Kr,Xr,en,ws=k({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&e.type==="mousemove"?(Kr=e.screenX-en.screenX,Xr=e.screenY-en.screenY):Xr=Kr=0,en=e),Kr)},movementY:function(e){return"movementY"in e?e.movementY:Xr}}),Lc=dt(ws),mp=k({},ws,{dataTransfer:0}),hp=dt(mp),pp=k({},Ja,{relatedTarget:0}),Yr=dt(pp),gp=k({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),fp=dt(gp),yp=k({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bp=dt(yp),xp=k({},Vi,{data:0}),zc=dt(xp),vp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kp[e])?!!t[e]:!1}function Zr(){return Cp}var Ap=k({},Ja,{key:function(e){if(e.key){var t=vp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sp=dt(Ap),Np=k({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=dt(Np),jp=k({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),Ep=dt(jp),Dp=k({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tp=dt(Dp),Mp=k({},ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rp=dt(Mp),Pp=k({},Vi,{newState:0,oldState:0}),Bp=dt(Pp),Ip=[9,13,27,32],Jr=Yt&&"CompositionEvent"in window,tn=null;Yt&&"documentMode"in document&&(tn=document.documentMode);var Lp=Yt&&"TextEvent"in window&&!tn,Oc=Yt&&(!Jr||tn&&8<tn&&11>=tn),Gc=" ",Fc=!1;function Vc(e,t){switch(e){case"keyup":return Ip.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _c(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fa=!1;function zp(e,t){switch(e){case"compositionend":return _c(t);case"keypress":return t.which!==32?null:(Fc=!0,Gc);case"textInput":return e=t.data,e===Gc&&Fc?null:e;default:return null}}function Hp(e,t){if(fa)return e==="compositionend"||!Jr&&Vc(e,t)?(e=Bc(),ys=$r=yi=null,fa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oc&&t.locale!=="ko"?null:t.data;default:return null}}var Op={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Op[e.type]:t==="textarea"}function Uc(e,t,a,n){pa?ga?ga.push(n):ga=[n]:pa=n,t=or(t,"onChange"),0<t.length&&(a=new vs("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var an=null,nn=null;function Gp(e){Sm(e,0)}function ks(e){var t=Xa(e);if(Nc(t))return e}function Wc(e,t){if(e==="change")return t}var Qc=!1;if(Yt){var eo;if(Yt){var to="oninput"in document;if(!to){var $c=document.createElement("div");$c.setAttribute("oninput","return;"),to=typeof $c.oninput=="function"}eo=to}else eo=!1;Qc=eo&&(!document.documentMode||9<document.documentMode)}function Kc(){an&&(an.detachEvent("onpropertychange",Xc),nn=an=null)}function Xc(e){if(e.propertyName==="value"&&ks(nn)){var t=[];Uc(t,nn,e,Ur(e)),Pc(Gp,t)}}function Fp(e,t,a){e==="focusin"?(Kc(),an=t,nn=a,an.attachEvent("onpropertychange",Xc)):e==="focusout"&&Kc()}function Vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ks(nn)}function _p(e,t){if(e==="click")return ks(t)}function qp(e,t){if(e==="input"||e==="change")return ks(t)}function Up(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:Up;function sn(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var s=a[n];if(!Tr.call(t,s)||!yt(e[s],t[s]))return!1}return!0}function Yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zc(e,t){var a=Yc(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yc(a)}}function Jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ed(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=gs(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=gs(e.document)}return t}function io(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Wp=Yt&&"documentMode"in document&&11>=document.documentMode,ya=null,ao=null,rn=null,no=!1;function td(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;no||ya==null||ya!==gs(n)||(n=ya,"selectionStart"in n&&io(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rn&&sn(rn,n)||(rn=n,n=or(ao,"onSelect"),0<n.length&&(t=new vs("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=ya)))}function _i(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ba={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},so={},id={};Yt&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function qi(e){if(so[e])return so[e];if(!ba[e])return e;var t=ba[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in id)return so[e]=t[a];return e}var ad=qi("animationend"),nd=qi("animationiteration"),sd=qi("animationstart"),Qp=qi("transitionrun"),$p=qi("transitionstart"),Kp=qi("transitioncancel"),rd=qi("transitionend"),od=new Map,ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ro.push("scrollEnd");function Ht(e,t){od.set(e,t),Fi(t,[e])}var ld=new WeakMap;function Mt(e,t){if(typeof e=="object"&&e!==null){var a=ld.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ac(t)},ld.set(e,t),t)}return{value:e,source:t,stack:Ac(t)}}var Rt=[],xa=0,oo=0;function Cs(){for(var e=xa,t=oo=xa=0;t<e;){var a=Rt[t];Rt[t++]=null;var n=Rt[t];Rt[t++]=null;var s=Rt[t];Rt[t++]=null;var l=Rt[t];if(Rt[t++]=null,n!==null&&s!==null){var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}l!==0&&cd(a,s,l)}}function As(e,t,a,n){Rt[xa++]=e,Rt[xa++]=t,Rt[xa++]=a,Rt[xa++]=n,oo|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function lo(e,t,a,n){return As(e,t,a,n),Ss(e)}function va(e,t){return As(e,null,null,t),Ss(e)}function cd(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var s=!1,l=e.return;l!==null;)l.childLanes|=a,n=l.alternate,n!==null&&(n.childLanes|=a),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(s=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,s&&t!==null&&(s=31-ft(a),e=l.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=a|536870912),l):null}function Ss(e){if(50<Mn)throw Mn=0,gl=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var wa={};function Xp(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,a,n){return new Xp(e,t,a,n)}function co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zt(e,t){var a=e.alternate;return a===null?(a=bt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function dd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ns(e,t,a,n,s,l){var u=0;if(n=e,typeof e=="function")co(e)&&(u=1);else if(typeof e=="string")u=Zg(e,a,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case R:return e=bt(31,a,t,s),e.elementType=R,e.lanes=l,e;case L:return Ui(a.children,s,l,t);case X:u=8,s|=24;break;case Z:return e=bt(12,a,t,s|2),e.elementType=Z,e.lanes=l,e;case K:return e=bt(13,a,t,s),e.elementType=K,e.lanes=l,e;case _:return e=bt(19,a,t,s),e.elementType=_,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case te:u=10;break e;case se:u=9;break e;case J:u=11;break e;case ae:u=14;break e;case ee:u=16,n=null;break e}u=29,a=Error(c(130,e===null?"null":typeof e,"")),n=null}return t=bt(u,a,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function Ui(e,t,a,n){return e=bt(7,e,n,t),e.lanes=a,e}function uo(e,t,a){return e=bt(6,e,null,t),e.lanes=a,e}function mo(e,t,a){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ka=[],Ca=0,js=null,Es=0,Pt=[],Bt=0,Wi=null,Jt=1,ei="";function Qi(e,t){ka[Ca++]=Es,ka[Ca++]=js,js=e,Es=t}function ud(e,t,a){Pt[Bt++]=Jt,Pt[Bt++]=ei,Pt[Bt++]=Wi,Wi=e;var n=Jt;e=ei;var s=32-ft(n)-1;n&=~(1<<s),a+=1;var l=32-ft(t)+s;if(30<l){var u=s-s%5;l=(n&(1<<u)-1).toString(32),n>>=u,s-=u,Jt=1<<32-ft(t)+s|a<<s|n,ei=l+e}else Jt=1<<l|a<<s|n,ei=e}function ho(e){e.return!==null&&(Qi(e,1),ud(e,1,0))}function po(e){for(;e===js;)js=ka[--Ca],ka[Ca]=null,Es=ka[--Ca],ka[Ca]=null;for(;e===Wi;)Wi=Pt[--Bt],Pt[Bt]=null,ei=Pt[--Bt],Pt[Bt]=null,Jt=Pt[--Bt],Pt[Bt]=null}var et=null,Ie=null,ke=!1,$i=null,qt=!1,go=Error(c(519));function Ki(e){var t=Error(c(418,""));throw cn(Mt(t,e)),go}function md(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ye]=e,t[ct]=n,a){case"dialog":be("cancel",t),be("close",t);break;case"iframe":case"object":case"embed":be("load",t);break;case"video":case"audio":for(a=0;a<Pn.length;a++)be(Pn[a],t);break;case"source":be("error",t);break;case"img":case"image":case"link":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"input":be("invalid",t),jc(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ps(t);break;case"select":be("invalid",t);break;case"textarea":be("invalid",t),Dc(t,n.value,n.defaultValue,n.children),ps(t)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Dm(t.textContent,a)?(n.popover!=null&&(be("beforetoggle",t),be("toggle",t)),n.onScroll!=null&&be("scroll",t),n.onScrollEnd!=null&&be("scrollend",t),n.onClick!=null&&(t.onclick=lr),t=!0):t=!1,t||Ki(e)}function hd(e){for(et=e.return;et;)switch(et.tag){case 5:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:et=et.return}}function on(e){if(e!==et)return!1;if(!ke)return hd(e),ke=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ml(e.type,e.memoizedProps)),a=!a),a&&Ie&&Ki(e),hd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ie=Gt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ie=null}}else t===27?(t=Ie,Pi(e.type)?(e=Il,Il=null,Ie=e):Ie=t):Ie=et?Gt(e.stateNode.nextSibling):null;return!0}function ln(){Ie=et=null,ke=!1}function pd(){var e=$i;return e!==null&&(ht===null?ht=e:ht.push.apply(ht,e),$i=null),e}function cn(e){$i===null?$i=[e]:$i.push(e)}var fo=C(null),Xi=null,ti=null;function bi(e,t,a){W(fo,t._currentValue),t._currentValue=a}function ii(e){e._currentValue=fo.current,I(fo)}function yo(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function bo(e,t,a,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){var u=s.child;l=l.firstContext;e:for(;l!==null;){var b=l;l=s;for(var S=0;S<t.length;S++)if(b.context===t[S]){l.lanes|=a,b=l.alternate,b!==null&&(b.lanes|=a),yo(l.return,a,e),n||(u=null);break e}l=b.next}}else if(s.tag===18){if(u=s.return,u===null)throw Error(c(341));u.lanes|=a,l=u.alternate,l!==null&&(l.lanes|=a),yo(u,a,e),u=null}else u=s.child;if(u!==null)u.return=s;else for(u=s;u!==null;){if(u===e){u=null;break}if(s=u.sibling,s!==null){s.return=u.return,u=s;break}u=u.return}s=u}}function dn(e,t,a,n){e=null;for(var s=t,l=!1;s!==null;){if(!l){if((s.flags&524288)!==0)l=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var u=s.alternate;if(u===null)throw Error(c(387));if(u=u.memoizedProps,u!==null){var b=s.type;yt(s.pendingProps.value,u.value)||(e!==null?e.push(b):e=[b])}}else if(s===pt.current){if(u=s.alternate,u===null)throw Error(c(387));u.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(On):e=[On])}s=s.return}e!==null&&bo(t,e,a,n),t.flags|=262144}function Ds(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yi(e){Xi=e,ti=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return gd(Xi,e)}function Ts(e,t){return Xi===null&&Yi(e),gd(e,t)}function gd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ti===null){if(e===null)throw Error(c(308));ti=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ti=ti.next=t;return a}var Yp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Zp=o.unstable_scheduleCallback,Jp=o.unstable_NormalPriority,Fe={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xo(){return{controller:new Yp,data:new Map,refCount:0}}function un(e){e.refCount--,e.refCount===0&&Zp(Jp,function(){e.controller.abort()})}var mn=null,vo=0,Aa=0,Sa=null;function eg(e,t){if(mn===null){var a=mn=[];vo=0,Aa=kl(),Sa={status:"pending",value:void 0,then:function(n){a.push(n)}}}return vo++,t.then(fd,fd),t}function fd(){if(--vo===0&&mn!==null){Sa!==null&&(Sa.status="fulfilled");var e=mn;mn=null,Aa=0,Sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tg(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(s){a.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<a.length;s++)(0,a[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<a.length;s++)(0,a[s])(void 0)}),n}var yd=N.S;N.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&eg(e,t),yd!==null&&yd(e,t)};var Zi=C(null);function wo(){var e=Zi.current;return e!==null?e:Te.pooledCache}function Ms(e,t){t===null?W(Zi,Zi.current):W(Zi,t.pool)}function bd(){var e=wo();return e===null?null:{parent:Fe._currentValue,pool:e}}var hn=Error(c(460)),xd=Error(c(474)),Rs=Error(c(542)),ko={then:function(){}};function vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ps(){}function wd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ps,Ps),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e;default:if(typeof t.status=="string")t.then(Ps,Ps);else{if(e=Te,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cd(e),e}throw pn=t,hn}}var pn=null;function kd(){if(pn===null)throw Error(c(459));var e=pn;return pn=null,e}function Cd(e){if(e===hn||e===Rs)throw Error(c(483))}var xi=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wi(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ce&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Ss(e),cd(e,null,a),t}return As(e,n,t,a),Ss(e)}function gn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,fc(e,a)}}function So(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var s=null,l=null;if(a=a.firstBaseUpdate,a!==null){do{var u={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};l===null?s=l=u:l=l.next=u,a=a.next}while(a!==null);l===null?s=l=t:l=l.next=t}else s=l=t;a={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var No=!1;function fn(){if(No){var e=Sa;if(e!==null)throw e}}function yn(e,t,a,n){No=!1;var s=e.updateQueue;xi=!1;var l=s.firstBaseUpdate,u=s.lastBaseUpdate,b=s.shared.pending;if(b!==null){s.shared.pending=null;var S=b,H=S.next;S.next=null,u===null?l=H:u.next=H,u=S;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==u&&(b===null?Q.firstBaseUpdate=H:b.next=H,Q.lastBaseUpdate=S))}if(l!==null){var Y=s.baseState;u=0,Q=H=S=null,b=l;do{var G=b.lane&-536870913,F=G!==b.lane;if(F?(ve&G)===G:(n&G)===G){G!==0&&G===Aa&&(No=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var de=e,le=b;G=t;var je=a;switch(le.tag){case 1:if(de=le.payload,typeof de=="function"){Y=de.call(je,Y,G);break e}Y=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=le.payload,G=typeof de=="function"?de.call(je,Y,G):de,G==null)break e;Y=k({},Y,G);break e;case 2:xi=!0}}G=b.callback,G!==null&&(e.flags|=64,F&&(e.flags|=8192),F=s.callbacks,F===null?s.callbacks=[G]:F.push(G))}else F={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(H=Q=F,S=Y):Q=Q.next=F,u|=G;if(b=b.next,b===null){if(b=s.shared.pending,b===null)break;F=b,b=F.next,F.next=null,s.lastBaseUpdate=F,s.shared.pending=null}}while(!0);Q===null&&(S=Y),s.baseState=S,s.firstBaseUpdate=H,s.lastBaseUpdate=Q,l===null&&(s.shared.lanes=0),Di|=u,e.lanes=u,e.memoizedState=Y}}function Ad(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Sd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ad(a[e],t)}var Na=C(null),Bs=C(0);function Nd(e,t){e=ci,W(Bs,e),W(Na,t),ci=e|t.baseLanes}function jo(){W(Bs,ci),W(Na,Na.current)}function Eo(){ci=Bs.current,I(Na),I(Bs)}var ki=0,pe=null,Se=null,Oe=null,Is=!1,ja=!1,Ji=!1,Ls=0,bn=0,Ea=null,ig=0;function ze(){throw Error(c(321))}function Do(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function To(e,t,a,n,s,l){return ki=l,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?cu:du,Ji=!1,l=a(n,s),Ji=!1,ja&&(l=Ed(t,a,n,s)),jd(e),l}function jd(e){N.H=Vs;var t=Se!==null&&Se.next!==null;if(ki=0,Oe=Se=pe=null,Is=!1,bn=0,Ea=null,t)throw Error(c(300));e===null||Ue||(e=e.dependencies,e!==null&&Ds(e)&&(Ue=!0))}function Ed(e,t,a,n){pe=e;var s=0;do{if(ja&&(Ea=null),bn=0,ja=!1,25<=s)throw Error(c(301));if(s+=1,Oe=Se=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}N.H=cg,l=t(a,n)}while(ja);return l}function ag(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?xn(t):t,e=e.useState()[0],(Se!==null?Se.memoizedState:null)!==e&&(pe.flags|=1024),t}function Mo(){var e=Ls!==0;return Ls=0,e}function Ro(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Po(e){if(Is){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Is=!1}ki=0,Oe=Se=pe=null,ja=!1,bn=Ls=0,Ea=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?pe.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Ge(){if(Se===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Oe===null?pe.memoizedState:Oe.next;if(t!==null)Oe=t,Se=e;else{if(e===null)throw pe.alternate===null?Error(c(467)):Error(c(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Oe===null?pe.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function Bo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xn(e){var t=bn;return bn+=1,Ea===null&&(Ea=[]),e=wd(Ea,e,t),t=pe,(Oe===null?t.memoizedState:Oe.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?cu:du),e}function zs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xn(e);if(e.$$typeof===te)return Ze(e)}throw Error(c(438,String(e)))}function Io(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=pe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Bo(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=ie;return t.index++,a}function ai(e,t){return typeof t=="function"?t(e):t}function Hs(e){var t=Ge();return Lo(t,Se,e)}function Lo(e,t,a){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=a;var s=e.baseQueue,l=n.pending;if(l!==null){if(s!==null){var u=s.next;s.next=l.next,l.next=u}t.baseQueue=s=l,n.pending=null}if(l=e.baseState,s===null)e.memoizedState=l;else{t=s.next;var b=u=null,S=null,H=t,Q=!1;do{var Y=H.lane&-536870913;if(Y!==H.lane?(ve&Y)===Y:(ki&Y)===Y){var G=H.revertLane;if(G===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Y===Aa&&(Q=!0);else if((ki&G)===G){H=H.next,G===Aa&&(Q=!0);continue}else Y={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},S===null?(b=S=Y,u=l):S=S.next=Y,pe.lanes|=G,Di|=G;Y=H.action,Ji&&a(l,Y),l=H.hasEagerState?H.eagerState:a(l,Y)}else G={lane:Y,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},S===null?(b=S=G,u=l):S=S.next=G,pe.lanes|=Y,Di|=Y;H=H.next}while(H!==null&&H!==t);if(S===null?u=l:S.next=b,!yt(l,e.memoizedState)&&(Ue=!0,Q&&(a=Sa,a!==null)))throw a;e.memoizedState=l,e.baseState=u,e.baseQueue=S,n.lastRenderedState=l}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function zo(e){var t=Ge(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var n=a.dispatch,s=a.pending,l=t.memoizedState;if(s!==null){a.pending=null;var u=s=s.next;do l=e(l,u.action),u=u.next;while(u!==s);yt(l,t.memoizedState)||(Ue=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),a.lastRenderedState=l}return[l,n]}function Dd(e,t,a){var n=pe,s=Ge(),l=ke;if(l){if(a===void 0)throw Error(c(407));a=a()}else a=t();var u=!yt((Se||s).memoizedState,a);u&&(s.memoizedState=a,Ue=!0),s=s.queue;var b=Rd.bind(null,n,s,e);if(vn(2048,8,b,[e]),s.getSnapshot!==t||u||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Da(9,Os(),Md.bind(null,n,s,a,t),null),Te===null)throw Error(c(349));l||(ki&124)!==0||Td(n,t,a)}return a}function Td(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=Bo(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Md(e,t,a,n){t.value=a,t.getSnapshot=n,Pd(t)&&Bd(e)}function Rd(e,t,a){return a(function(){Pd(t)&&Bd(e)})}function Pd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function Bd(e){var t=va(e,2);t!==null&&Ct(t,e,2)}function Ho(e){var t=ut();if(typeof e=="function"){var a=e;if(e=a(),Ji){gi(!0);try{a()}finally{gi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:e},t}function Id(e,t,a,n){return e.baseState=a,Lo(e,Se,typeof n=="function"?n:ai)}function ng(e,t,a,n,s){if(Fs(e))throw Error(c(485));if(e=t.action,e!==null){var l={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(u){l.listeners.push(u)}};N.T!==null?a(!0):l.isTransition=!1,n(l),a=t.pending,a===null?(l.next=t.pending=l,Ld(t,l)):(l.next=a.next,t.pending=a.next=l)}}function Ld(e,t){var a=t.action,n=t.payload,s=e.state;if(t.isTransition){var l=N.T,u={};N.T=u;try{var b=a(s,n),S=N.S;S!==null&&S(u,b),zd(e,t,b)}catch(H){Oo(e,t,H)}finally{N.T=l}}else try{l=a(s,n),zd(e,t,l)}catch(H){Oo(e,t,H)}}function zd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Hd(e,t,n)},function(n){return Oo(e,t,n)}):Hd(e,t,a)}function Hd(e,t,a){t.status="fulfilled",t.value=a,Od(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ld(e,a)))}function Oo(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Od(t),t=t.next;while(t!==n)}e.action=null}function Od(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gd(e,t){return t}function Fd(e,t){if(ke){var a=Te.formState;if(a!==null){e:{var n=pe;if(ke){if(Ie){t:{for(var s=Ie,l=qt;s.nodeType!==8;){if(!l){s=null;break t}if(s=Gt(s.nextSibling),s===null){s=null;break t}}l=s.data,s=l==="F!"||l==="F"?s:null}if(s){Ie=Gt(s.nextSibling),n=s.data==="F!";break e}}Ki(n)}n=!1}n&&(t=a[0])}}return a=ut(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},a.queue=n,a=ru.bind(null,pe,n),n.dispatch=a,n=Ho(!1),l=qo.bind(null,pe,!1,n.queue),n=ut(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,a=ng.bind(null,pe,s,l,a),s.dispatch=a,n.memoizedState=e,[t,a,!1]}function Vd(e){var t=Ge();return _d(t,Se,e)}function _d(e,t,a){if(t=Lo(e,t,Gd)[0],e=Hs(ai)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=xn(t)}catch(u){throw u===hn?Rs:u}else n=t;t=Ge();var s=t.queue,l=s.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,Da(9,Os(),sg.bind(null,s,a),null)),[n,l,e]}function sg(e,t){e.action=t}function qd(e){var t=Ge(),a=Se;if(a!==null)return _d(t,a,e);Ge(),t=t.memoizedState,a=Ge();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Da(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Bo(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Os(){return{destroy:void 0,resource:void 0}}function Ud(){return Ge().memoizedState}function Gs(e,t,a,n){var s=ut();n=n===void 0?null:n,pe.flags|=e,s.memoizedState=Da(1|t,Os(),a,n)}function vn(e,t,a,n){var s=Ge();n=n===void 0?null:n;var l=s.memoizedState.inst;Se!==null&&n!==null&&Do(n,Se.memoizedState.deps)?s.memoizedState=Da(t,l,a,n):(pe.flags|=e,s.memoizedState=Da(1|t,l,a,n))}function Wd(e,t){Gs(8390656,8,e,t)}function Qd(e,t){vn(2048,8,e,t)}function $d(e,t){return vn(4,2,e,t)}function Kd(e,t){return vn(4,4,e,t)}function Xd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yd(e,t,a){a=a!=null?a.concat([e]):null,vn(4,4,Xd.bind(null,t,e),a)}function Go(){}function Zd(e,t){var a=Ge();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Do(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Jd(e,t){var a=Ge();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Do(t,n[1]))return n[0];if(n=e(),Ji){gi(!0);try{e()}finally{gi(!1)}}return a.memoizedState=[n,t],n}function Fo(e,t,a){return a===void 0||(ki&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=im(),pe.lanes|=e,Di|=e,a)}function eu(e,t,a,n){return yt(a,t)?a:Na.current!==null?(e=Fo(e,a,n),yt(e,t)||(Ue=!0),e):(ki&42)===0?(Ue=!0,e.memoizedState=a):(e=im(),pe.lanes|=e,Di|=e,t)}function tu(e,t,a,n,s){var l=V.p;V.p=l!==0&&8>l?l:8;var u=N.T,b={};N.T=b,qo(e,!1,t,a);try{var S=s(),H=N.S;if(H!==null&&H(b,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var Q=tg(S,n);wn(e,t,Q,kt(e))}else wn(e,t,n,kt(e))}catch(Y){wn(e,t,{then:function(){},status:"rejected",reason:Y},kt())}finally{V.p=l,N.T=u}}function rg(){}function Vo(e,t,a,n){if(e.tag!==5)throw Error(c(476));var s=iu(e).queue;tu(e,s,t,M,a===null?rg:function(){return au(e),a(n)})}function iu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:M},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function au(e){var t=iu(e).next.queue;wn(e,t,{},kt())}function _o(){return Ze(On)}function nu(){return Ge().memoizedState}function su(){return Ge().memoizedState}function og(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=kt();e=vi(a);var n=wi(t,e,a);n!==null&&(Ct(n,t,a),gn(n,t,a)),t={cache:xo()},e.payload=t;return}t=t.return}}function lg(e,t,a){var n=kt();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fs(e)?ou(t,a):(a=lo(e,t,a,n),a!==null&&(Ct(a,e,n),lu(a,t,n)))}function ru(e,t,a){var n=kt();wn(e,t,a,n)}function wn(e,t,a,n){var s={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fs(e))ou(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var u=t.lastRenderedState,b=l(u,a);if(s.hasEagerState=!0,s.eagerState=b,yt(b,u))return As(e,t,s,0),Te===null&&Cs(),!1}catch{}finally{}if(a=lo(e,t,s,n),a!==null)return Ct(a,e,n),lu(a,t,n),!0}return!1}function qo(e,t,a,n){if(n={lane:2,revertLane:kl(),action:n,hasEagerState:!1,eagerState:null,next:null},Fs(e)){if(t)throw Error(c(479))}else t=lo(e,a,n,2),t!==null&&Ct(t,e,2)}function Fs(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function ou(e,t){ja=Is=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function lu(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,fc(e,a)}}var Vs={readContext:Ze,use:zs,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze},cu={readContext:Ze,use:zs,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ze,useEffect:Wd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Gs(4194308,4,Xd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Gs(4194308,4,e,t)},useInsertionEffect:function(e,t){Gs(4,2,e,t)},useMemo:function(e,t){var a=ut();t=t===void 0?null:t;var n=e();if(Ji){gi(!0);try{e()}finally{gi(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ut();if(a!==void 0){var s=a(t);if(Ji){gi(!0);try{a(t)}finally{gi(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=lg.bind(null,pe,e),[n.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=Ho(e);var t=e.queue,a=ru.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Go,useDeferredValue:function(e,t){var a=ut();return Fo(a,e,t)},useTransition:function(){var e=Ho(!1);return e=tu.bind(null,pe,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=pe,s=ut();if(ke){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),Te===null)throw Error(c(349));(ve&124)!==0||Td(n,t,a)}s.memoizedState=a;var l={value:a,getSnapshot:t};return s.queue=l,Wd(Rd.bind(null,n,l,e),[e]),n.flags|=2048,Da(9,Os(),Md.bind(null,n,l,a,t),null),a},useId:function(){var e=ut(),t=Te.identifierPrefix;if(ke){var a=ei,n=Jt;a=(n&~(1<<32-ft(n)-1)).toString(32)+a,t="«"+t+"R"+a,a=Ls++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=ig++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:_o,useFormState:Fd,useActionState:Fd,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=qo.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Io,useCacheRefresh:function(){return ut().memoizedState=og.bind(null,pe)}},du={readContext:Ze,use:zs,useCallback:Zd,useContext:Ze,useEffect:Qd,useImperativeHandle:Yd,useInsertionEffect:$d,useLayoutEffect:Kd,useMemo:Jd,useReducer:Hs,useRef:Ud,useState:function(){return Hs(ai)},useDebugValue:Go,useDeferredValue:function(e,t){var a=Ge();return eu(a,Se.memoizedState,e,t)},useTransition:function(){var e=Hs(ai)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:xn(e),t]},useSyncExternalStore:Dd,useId:nu,useHostTransitionStatus:_o,useFormState:Vd,useActionState:Vd,useOptimistic:function(e,t){var a=Ge();return Id(a,Se,e,t)},useMemoCache:Io,useCacheRefresh:su},cg={readContext:Ze,use:zs,useCallback:Zd,useContext:Ze,useEffect:Qd,useImperativeHandle:Yd,useInsertionEffect:$d,useLayoutEffect:Kd,useMemo:Jd,useReducer:zo,useRef:Ud,useState:function(){return zo(ai)},useDebugValue:Go,useDeferredValue:function(e,t){var a=Ge();return Se===null?Fo(a,e,t):eu(a,Se.memoizedState,e,t)},useTransition:function(){var e=zo(ai)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:xn(e),t]},useSyncExternalStore:Dd,useId:nu,useHostTransitionStatus:_o,useFormState:qd,useActionState:qd,useOptimistic:function(e,t){var a=Ge();return Se!==null?Id(a,Se,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Io,useCacheRefresh:su},Ta=null,kn=0;function _s(e){var t=kn;return kn+=1,Ta===null&&(Ta=[]),wd(Ta,e,t)}function Cn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qs(e,t){throw t.$$typeof===E?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uu(e){var t=e._init;return t(e._payload)}function mu(e){function t(P,D){if(e){var z=P.deletions;z===null?(P.deletions=[D],P.flags|=16):z.push(D)}}function a(P,D){if(!e)return null;for(;D!==null;)t(P,D),D=D.sibling;return null}function n(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function s(P,D){return P=Zt(P,D),P.index=0,P.sibling=null,P}function l(P,D,z){return P.index=z,e?(z=P.alternate,z!==null?(z=z.index,z<D?(P.flags|=67108866,D):z):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function u(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function b(P,D,z,$){return D===null||D.tag!==6?(D=uo(z,P.mode,$),D.return=P,D):(D=s(D,z),D.return=P,D)}function S(P,D,z,$){var re=z.type;return re===L?Q(P,D,z.props.children,$,z.key):D!==null&&(D.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ee&&uu(re)===D.type)?(D=s(D,z.props),Cn(D,z),D.return=P,D):(D=Ns(z.type,z.key,z.props,null,P.mode,$),Cn(D,z),D.return=P,D)}function H(P,D,z,$){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=mo(z,P.mode,$),D.return=P,D):(D=s(D,z.children||[]),D.return=P,D)}function Q(P,D,z,$,re){return D===null||D.tag!==7?(D=Ui(z,P.mode,$,re),D.return=P,D):(D=s(D,z),D.return=P,D)}function Y(P,D,z){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=uo(""+D,P.mode,z),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case j:return z=Ns(D.type,D.key,D.props,null,P.mode,z),Cn(z,D),z.return=P,z;case A:return D=mo(D,P.mode,z),D.return=P,D;case ee:var $=D._init;return D=$(D._payload),Y(P,D,z)}if(O(D)||T(D))return D=Ui(D,P.mode,z,null),D.return=P,D;if(typeof D.then=="function")return Y(P,_s(D),z);if(D.$$typeof===te)return Y(P,Ts(P,D),z);qs(P,D)}return null}function G(P,D,z,$){var re=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return re!==null?null:b(P,D,""+z,$);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return z.key===re?S(P,D,z,$):null;case A:return z.key===re?H(P,D,z,$):null;case ee:return re=z._init,z=re(z._payload),G(P,D,z,$)}if(O(z)||T(z))return re!==null?null:Q(P,D,z,$,null);if(typeof z.then=="function")return G(P,D,_s(z),$);if(z.$$typeof===te)return G(P,D,Ts(P,z),$);qs(P,z)}return null}function F(P,D,z,$,re){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(z)||null,b(D,P,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case j:return P=P.get($.key===null?z:$.key)||null,S(D,P,$,re);case A:return P=P.get($.key===null?z:$.key)||null,H(D,P,$,re);case ee:var ge=$._init;return $=ge($._payload),F(P,D,z,$,re)}if(O($)||T($))return P=P.get(z)||null,Q(D,P,$,re,null);if(typeof $.then=="function")return F(P,D,z,_s($),re);if($.$$typeof===te)return F(P,D,z,Ts(D,$),re);qs(D,$)}return null}function de(P,D,z,$){for(var re=null,ge=null,oe=D,ce=D=0,Qe=null;oe!==null&&ce<z.length;ce++){oe.index>ce?(Qe=oe,oe=null):Qe=oe.sibling;var we=G(P,oe,z[ce],$);if(we===null){oe===null&&(oe=Qe);break}e&&oe&&we.alternate===null&&t(P,oe),D=l(we,D,ce),ge===null?re=we:ge.sibling=we,ge=we,oe=Qe}if(ce===z.length)return a(P,oe),ke&&Qi(P,ce),re;if(oe===null){for(;ce<z.length;ce++)oe=Y(P,z[ce],$),oe!==null&&(D=l(oe,D,ce),ge===null?re=oe:ge.sibling=oe,ge=oe);return ke&&Qi(P,ce),re}for(oe=n(oe);ce<z.length;ce++)Qe=F(oe,P,ce,z[ce],$),Qe!==null&&(e&&Qe.alternate!==null&&oe.delete(Qe.key===null?ce:Qe.key),D=l(Qe,D,ce),ge===null?re=Qe:ge.sibling=Qe,ge=Qe);return e&&oe.forEach(function(Hi){return t(P,Hi)}),ke&&Qi(P,ce),re}function le(P,D,z,$){if(z==null)throw Error(c(151));for(var re=null,ge=null,oe=D,ce=D=0,Qe=null,we=z.next();oe!==null&&!we.done;ce++,we=z.next()){oe.index>ce?(Qe=oe,oe=null):Qe=oe.sibling;var Hi=G(P,oe,we.value,$);if(Hi===null){oe===null&&(oe=Qe);break}e&&oe&&Hi.alternate===null&&t(P,oe),D=l(Hi,D,ce),ge===null?re=Hi:ge.sibling=Hi,ge=Hi,oe=Qe}if(we.done)return a(P,oe),ke&&Qi(P,ce),re;if(oe===null){for(;!we.done;ce++,we=z.next())we=Y(P,we.value,$),we!==null&&(D=l(we,D,ce),ge===null?re=we:ge.sibling=we,ge=we);return ke&&Qi(P,ce),re}for(oe=n(oe);!we.done;ce++,we=z.next())we=F(oe,P,ce,we.value,$),we!==null&&(e&&we.alternate!==null&&oe.delete(we.key===null?ce:we.key),D=l(we,D,ce),ge===null?re=we:ge.sibling=we,ge=we);return e&&oe.forEach(function(uf){return t(P,uf)}),ke&&Qi(P,ce),re}function je(P,D,z,$){if(typeof z=="object"&&z!==null&&z.type===L&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case j:e:{for(var re=z.key;D!==null;){if(D.key===re){if(re=z.type,re===L){if(D.tag===7){a(P,D.sibling),$=s(D,z.props.children),$.return=P,P=$;break e}}else if(D.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ee&&uu(re)===D.type){a(P,D.sibling),$=s(D,z.props),Cn($,z),$.return=P,P=$;break e}a(P,D);break}else t(P,D);D=D.sibling}z.type===L?($=Ui(z.props.children,P.mode,$,z.key),$.return=P,P=$):($=Ns(z.type,z.key,z.props,null,P.mode,$),Cn($,z),$.return=P,P=$)}return u(P);case A:e:{for(re=z.key;D!==null;){if(D.key===re)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(P,D.sibling),$=s(D,z.children||[]),$.return=P,P=$;break e}else{a(P,D);break}else t(P,D);D=D.sibling}$=mo(z,P.mode,$),$.return=P,P=$}return u(P);case ee:return re=z._init,z=re(z._payload),je(P,D,z,$)}if(O(z))return de(P,D,z,$);if(T(z)){if(re=T(z),typeof re!="function")throw Error(c(150));return z=re.call(z),le(P,D,z,$)}if(typeof z.then=="function")return je(P,D,_s(z),$);if(z.$$typeof===te)return je(P,D,Ts(P,z),$);qs(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,D!==null&&D.tag===6?(a(P,D.sibling),$=s(D,z),$.return=P,P=$):(a(P,D),$=uo(z,P.mode,$),$.return=P,P=$),u(P)):a(P,D)}return function(P,D,z,$){try{kn=0;var re=je(P,D,z,$);return Ta=null,re}catch(oe){if(oe===hn||oe===Rs)throw oe;var ge=bt(29,oe,null,P.mode);return ge.lanes=$,ge.return=P,ge}finally{}}}var Ma=mu(!0),hu=mu(!1),It=C(null),Ut=null;function Ci(e){var t=e.alternate;W(Ve,Ve.current&1),W(It,e),Ut===null&&(t===null||Na.current!==null||t.memoizedState!==null)&&(Ut=e)}function pu(e){if(e.tag===22){if(W(Ve,Ve.current),W(It,e),Ut===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ut=e)}}else Ai()}function Ai(){W(Ve,Ve.current),W(It,It.current)}function ni(e){I(It),Ut===e&&(Ut=null),I(Ve)}var Ve=C(0);function Us(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Bl(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uo(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:k({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Wo={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=kt(),s=vi(n);s.payload=t,a!=null&&(s.callback=a),t=wi(e,s,n),t!==null&&(Ct(t,e,n),gn(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=kt(),s=vi(n);s.tag=1,s.payload=t,a!=null&&(s.callback=a),t=wi(e,s,n),t!==null&&(Ct(t,e,n),gn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=kt(),n=vi(a);n.tag=2,t!=null&&(n.callback=t),t=wi(e,n,a),t!==null&&(Ct(t,e,a),gn(t,e,a))}};function gu(e,t,a,n,s,l,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,u):t.prototype&&t.prototype.isPureReactComponent?!sn(a,n)||!sn(s,l):!0}function fu(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function ea(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=k({},a));for(var s in e)a[s]===void 0&&(a[s]=e[s])}return a}var Ws=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yu(e){Ws(e)}function bu(e){console.error(e)}function xu(e){Ws(e)}function Qs(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function vu(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Qo(e,t,a){return a=vi(a),a.tag=3,a.payload={element:null},a.callback=function(){Qs(e,t)},a}function wu(e){return e=vi(e),e.tag=3,e}function ku(e,t,a,n){var s=a.type.getDerivedStateFromError;if(typeof s=="function"){var l=n.value;e.payload=function(){return s(l)},e.callback=function(){vu(t,a,n)}}var u=a.stateNode;u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){vu(t,a,n),typeof s!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})})}function dg(e,t,a,n,s){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&dn(t,a,s,!0),a=It.current,a!==null){switch(a.tag){case 13:return Ut===null?yl():a.alternate===null&&Le===0&&(Le=3),a.flags&=-257,a.flags|=65536,a.lanes=s,n===ko?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),xl(e,n,s)),!1;case 22:return a.flags|=65536,n===ko?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),xl(e,n,s)),!1}throw Error(c(435,a.tag))}return xl(e,n,s),yl(),!1}if(ke)return t=It.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==go&&(e=Error(c(422),{cause:n}),cn(Mt(e,a)))):(n!==go&&(t=Error(c(423),{cause:n}),cn(Mt(t,a))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Mt(n,a),s=Qo(e.stateNode,n,s),So(e,s),Le!==4&&(Le=2)),!1;var l=Error(c(520),{cause:n});if(l=Mt(l,a),Tn===null?Tn=[l]:Tn.push(l),Le!==4&&(Le=2),t===null)return!0;n=Mt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=s&-s,a.lanes|=e,e=Qo(a.stateNode,n,e),So(a,e),!1;case 1:if(t=a.type,l=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Ti===null||!Ti.has(l))))return a.flags|=65536,s&=-s,a.lanes|=s,s=wu(s),ku(s,e,a,n),So(a,s),!1}a=a.return}while(a!==null);return!1}var Cu=Error(c(461)),Ue=!1;function $e(e,t,a,n){t.child=e===null?hu(t,null,a,n):Ma(t,e.child,a,n)}function Au(e,t,a,n,s){a=a.render;var l=t.ref;if("ref"in n){var u={};for(var b in n)b!=="ref"&&(u[b]=n[b])}else u=n;return Yi(t),n=To(e,t,a,u,l,s),b=Mo(),e!==null&&!Ue?(Ro(e,t,s),si(e,t,s)):(ke&&b&&ho(t),t.flags|=1,$e(e,t,n,s),t.child)}function Su(e,t,a,n,s){if(e===null){var l=a.type;return typeof l=="function"&&!co(l)&&l.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=l,Nu(e,t,l,n,s)):(e=Ns(a.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!tl(e,s)){var u=l.memoizedProps;if(a=a.compare,a=a!==null?a:sn,a(u,n)&&e.ref===t.ref)return si(e,t,s)}return t.flags|=1,e=Zt(l,n),e.ref=t.ref,e.return=t,t.child=e}function Nu(e,t,a,n,s){if(e!==null){var l=e.memoizedProps;if(sn(l,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=l,tl(e,s))(e.flags&131072)!==0&&(Ue=!0);else return t.lanes=e.lanes,si(e,t,s)}return $o(e,t,a,n,s)}function ju(e,t,a){var n=t.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=l!==null?l.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;t.childLanes=l&~n}else t.childLanes=0,t.child=null;return Eu(e,t,n,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ms(t,l!==null?l.cachePool:null),l!==null?Nd(t,l):jo(),pu(t);else return t.lanes=t.childLanes=536870912,Eu(e,t,l!==null?l.baseLanes|a:a,a)}else l!==null?(Ms(t,l.cachePool),Nd(t,l),Ai(),t.memoizedState=null):(e!==null&&Ms(t,null),jo(),Ai());return $e(e,t,s,a),t.child}function Eu(e,t,a,n){var s=wo();return s=s===null?null:{parent:Fe._currentValue,pool:s},t.memoizedState={baseLanes:a,cachePool:s},e!==null&&Ms(t,null),jo(),pu(t),e!==null&&dn(e,t,n,!0),null}function $s(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function $o(e,t,a,n,s){return Yi(t),a=To(e,t,a,n,void 0,s),n=Mo(),e!==null&&!Ue?(Ro(e,t,s),si(e,t,s)):(ke&&n&&ho(t),t.flags|=1,$e(e,t,a,s),t.child)}function Du(e,t,a,n,s,l){return Yi(t),t.updateQueue=null,a=Ed(t,n,a,s),jd(e),n=Mo(),e!==null&&!Ue?(Ro(e,t,l),si(e,t,l)):(ke&&n&&ho(t),t.flags|=1,$e(e,t,a,l),t.child)}function Tu(e,t,a,n,s){if(Yi(t),t.stateNode===null){var l=wa,u=a.contextType;typeof u=="object"&&u!==null&&(l=Ze(u)),l=new a(n,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Wo,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=n,l.state=t.memoizedState,l.refs={},Co(t),u=a.contextType,l.context=typeof u=="object"&&u!==null?Ze(u):wa,l.state=t.memoizedState,u=a.getDerivedStateFromProps,typeof u=="function"&&(Uo(t,a,u,n),l.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(u=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),u!==l.state&&Wo.enqueueReplaceState(l,l.state,null),yn(t,n,l,s),fn(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){l=t.stateNode;var b=t.memoizedProps,S=ea(a,b);l.props=S;var H=l.context,Q=a.contextType;u=wa,typeof Q=="object"&&Q!==null&&(u=Ze(Q));var Y=a.getDerivedStateFromProps;Q=typeof Y=="function"||typeof l.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,Q||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(b||H!==u)&&fu(t,l,n,u),xi=!1;var G=t.memoizedState;l.state=G,yn(t,n,l,s),fn(),H=t.memoizedState,b||G!==H||xi?(typeof Y=="function"&&(Uo(t,a,Y,n),H=t.memoizedState),(S=xi||gu(t,a,S,n,G,H,u))?(Q||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=H),l.props=n,l.state=H,l.context=u,n=S):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Ao(e,t),u=t.memoizedProps,Q=ea(a,u),l.props=Q,Y=t.pendingProps,G=l.context,H=a.contextType,S=wa,typeof H=="object"&&H!==null&&(S=Ze(H)),b=a.getDerivedStateFromProps,(H=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==Y||G!==S)&&fu(t,l,n,S),xi=!1,G=t.memoizedState,l.state=G,yn(t,n,l,s),fn();var F=t.memoizedState;u!==Y||G!==F||xi||e!==null&&e.dependencies!==null&&Ds(e.dependencies)?(typeof b=="function"&&(Uo(t,a,b,n),F=t.memoizedState),(Q=xi||gu(t,a,Q,n,G,F,S)||e!==null&&e.dependencies!==null&&Ds(e.dependencies))?(H||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,F,S),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,F,S)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),l.props=n,l.state=F,l.context=S,n=Q):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),n=!1)}return l=n,$s(e,t),n=(t.flags&128)!==0,l||n?(l=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&n?(t.child=Ma(t,e.child,null,s),t.child=Ma(t,null,a,s)):$e(e,t,a,s),t.memoizedState=l.state,e=t.child):e=si(e,t,s),e}function Mu(e,t,a,n){return ln(),t.flags|=256,$e(e,t,a,n),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:bd()}}function Yo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Lt),e}function Ru(e,t,a){var n=t.pendingProps,s=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),u&&(s=!0,t.flags&=-129),u=(t.flags&32)!==0,t.flags&=-33,e===null){if(ke){if(s?Ci(t):Ai(),ke){var b=Ie,S;if(S=b){e:{for(S=b,b=qt;S.nodeType!==8;){if(!b){b=null;break e}if(S=Gt(S.nextSibling),S===null){b=null;break e}}b=S}b!==null?(t.memoizedState={dehydrated:b,treeContext:Wi!==null?{id:Jt,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},S=bt(18,null,null,0),S.stateNode=b,S.return=t,t.child=S,et=t,Ie=null,S=!0):S=!1}S||Ki(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Bl(b)?t.lanes=32:t.lanes=536870912,null;ni(t)}return b=n.children,n=n.fallback,s?(Ai(),s=t.mode,b=Ks({mode:"hidden",children:b},s),n=Ui(n,s,a,null),b.return=t,n.return=t,b.sibling=n,t.child=b,s=t.child,s.memoizedState=Xo(a),s.childLanes=Yo(e,u,a),t.memoizedState=Ko,n):(Ci(t),Zo(t,b))}if(S=e.memoizedState,S!==null&&(b=S.dehydrated,b!==null)){if(l)t.flags&256?(Ci(t),t.flags&=-257,t=Jo(e,t,a)):t.memoizedState!==null?(Ai(),t.child=e.child,t.flags|=128,t=null):(Ai(),s=n.fallback,b=t.mode,n=Ks({mode:"visible",children:n.children},b),s=Ui(s,b,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,Ma(t,e.child,null,a),n=t.child,n.memoizedState=Xo(a),n.childLanes=Yo(e,u,a),t.memoizedState=Ko,t=s);else if(Ci(t),Bl(b)){if(u=b.nextSibling&&b.nextSibling.dataset,u)var H=u.dgst;u=H,n=Error(c(419)),n.stack="",n.digest=u,cn({value:n,source:null,stack:null}),t=Jo(e,t,a)}else if(Ue||dn(e,t,a,!1),u=(a&e.childLanes)!==0,Ue||u){if(u=Te,u!==null&&(n=a&-a,n=(n&42)!==0?1:Br(n),n=(n&(u.suspendedLanes|a))!==0?0:n,n!==0&&n!==S.retryLane))throw S.retryLane=n,va(e,n),Ct(u,e,n),Cu;b.data==="$?"||yl(),t=Jo(e,t,a)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Ie=Gt(b.nextSibling),et=t,ke=!0,$i=null,qt=!1,e!==null&&(Pt[Bt++]=Jt,Pt[Bt++]=ei,Pt[Bt++]=Wi,Jt=e.id,ei=e.overflow,Wi=t),t=Zo(t,n.children),t.flags|=4096);return t}return s?(Ai(),s=n.fallback,b=t.mode,S=e.child,H=S.sibling,n=Zt(S,{mode:"hidden",children:n.children}),n.subtreeFlags=S.subtreeFlags&65011712,H!==null?s=Zt(H,s):(s=Ui(s,b,a,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,b=e.child.memoizedState,b===null?b=Xo(a):(S=b.cachePool,S!==null?(H=Fe._currentValue,S=S.parent!==H?{parent:H,pool:H}:S):S=bd(),b={baseLanes:b.baseLanes|a,cachePool:S}),s.memoizedState=b,s.childLanes=Yo(e,u,a),t.memoizedState=Ko,n):(Ci(t),a=e.child,e=a.sibling,a=Zt(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(u=t.deletions,u===null?(t.deletions=[e],t.flags|=16):u.push(e)),t.child=a,t.memoizedState=null,a)}function Zo(e,t){return t=Ks({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ks(e,t){return e=bt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Jo(e,t,a){return Ma(t,e.child,null,a),e=Zo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pu(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yo(e.return,t,a)}function el(e,t,a,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=a,l.tailMode=s)}function Bu(e,t,a){var n=t.pendingProps,s=n.revealOrder,l=n.tail;if($e(e,t,n.children,a),n=Ve.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pu(e,a,t);else if(e.tag===19)Pu(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(W(Ve,n),s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&Us(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),el(t,!1,s,a,l);break;case"backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Us(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}el(t,!0,a,null,l);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function si(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(dn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=Zt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Zt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function tl(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ds(e)))}function ug(e,t,a){switch(t.tag){case 3:Me(t,t.stateNode.containerInfo),bi(t,Fe,e.memoizedState.cache),ln();break;case 27:case 5:Dr(t);break;case 4:Me(t,t.stateNode.containerInfo);break;case 10:bi(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ci(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ru(e,t,a):(Ci(t),e=si(e,t,a),e!==null?e.sibling:null);Ci(t);break;case 19:var s=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(dn(e,t,a,!1),n=(a&t.childLanes)!==0),s){if(n)return Bu(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),W(Ve,Ve.current),n)break;return null;case 22:case 23:return t.lanes=0,ju(e,t,a);case 24:bi(t,Fe,e.memoizedState.cache)}return si(e,t,a)}function Iu(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ue=!0;else{if(!tl(e,a)&&(t.flags&128)===0)return Ue=!1,ug(e,t,a);Ue=(e.flags&131072)!==0}else Ue=!1,ke&&(t.flags&1048576)!==0&&ud(t,Es,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,typeof n=="function")co(n)?(e=ea(n,e),t.tag=1,t=Tu(null,t,n,e,a)):(t.tag=0,t=$o(null,t,n,e,a));else{if(n!=null){if(s=n.$$typeof,s===J){t.tag=11,t=Au(null,t,n,e,a);break e}else if(s===ae){t.tag=14,t=Su(null,t,n,e,a);break e}}throw t=B(n)||n,Error(c(306,t,""))}}return t;case 0:return $o(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,s=ea(n,t.pendingProps),Tu(e,t,n,s,a);case 3:e:{if(Me(t,t.stateNode.containerInfo),e===null)throw Error(c(387));n=t.pendingProps;var l=t.memoizedState;s=l.element,Ao(e,t),yn(t,n,null,a);var u=t.memoizedState;if(n=u.cache,bi(t,Fe,n),n!==l.cache&&bo(t,[Fe],a,!0),fn(),n=u.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:u.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Mu(e,t,n,a);break e}else if(n!==s){s=Mt(Error(c(424)),t),cn(s),t=Mu(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ie=Gt(e.firstChild),et=t,ke=!0,$i=null,qt=!0,a=hu(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ln(),n===s){t=si(e,t,a);break e}$e(e,t,n,a)}t=t.child}return t;case 26:return $s(e,t),e===null?(a=Om(t.type,null,t.pendingProps,null))?t.memoizedState=a:ke||(a=t.type,e=t.pendingProps,n=cr(me.current).createElement(a),n[Ye]=t,n[ct]=e,Xe(n,a,e),qe(n),t.stateNode=n):t.memoizedState=Om(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Dr(t),e===null&&ke&&(n=t.stateNode=Lm(t.type,t.pendingProps,me.current),et=t,qt=!0,s=Ie,Pi(t.type)?(Il=s,Ie=Gt(n.firstChild)):Ie=s),$e(e,t,t.pendingProps.children,a),$s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ke&&((s=n=Ie)&&(n=Og(n,t.type,t.pendingProps,qt),n!==null?(t.stateNode=n,et=t,Ie=Gt(n.firstChild),qt=!1,s=!0):s=!1),s||Ki(t)),Dr(t),s=t.type,l=t.pendingProps,u=e!==null?e.memoizedProps:null,n=l.children,Ml(s,l)?n=null:u!==null&&Ml(s,u)&&(t.flags|=32),t.memoizedState!==null&&(s=To(e,t,ag,null,null,a),On._currentValue=s),$s(e,t),$e(e,t,n,a),t.child;case 6:return e===null&&ke&&((e=a=Ie)&&(a=Gg(a,t.pendingProps,qt),a!==null?(t.stateNode=a,et=t,Ie=null,e=!0):e=!1),e||Ki(t)),null;case 13:return Ru(e,t,a);case 4:return Me(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ma(t,null,n,a):$e(e,t,n,a),t.child;case 11:return Au(e,t,t.type,t.pendingProps,a);case 7:return $e(e,t,t.pendingProps,a),t.child;case 8:return $e(e,t,t.pendingProps.children,a),t.child;case 12:return $e(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,bi(t,t.type,n.value),$e(e,t,n.children,a),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Yi(t),s=Ze(s),n=n(s),t.flags|=1,$e(e,t,n,a),t.child;case 14:return Su(e,t,t.type,t.pendingProps,a);case 15:return Nu(e,t,t.type,t.pendingProps,a);case 19:return Bu(e,t,a);case 31:return n=t.pendingProps,a=t.mode,n={mode:n.mode,children:n.children},e===null?(a=Ks(n,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Zt(e.child,n),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return ju(e,t,a);case 24:return Yi(t),n=Ze(Fe),e===null?(s=wo(),s===null&&(s=Te,l=xo(),s.pooledCache=l,l.refCount++,l!==null&&(s.pooledCacheLanes|=a),s=l),t.memoizedState={parent:n,cache:s},Co(t),bi(t,Fe,s)):((e.lanes&a)!==0&&(Ao(e,t),yn(t,null,null,a),fn()),s=e.memoizedState,l=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),bi(t,Fe,n)):(n=l.cache,bi(t,Fe,n),n!==s.cache&&bo(t,[Fe],a,!0))),$e(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function ri(e){e.flags|=4}function Lu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qm(t)){if(t=It.current,t!==null&&((ve&4194048)===ve?Ut!==null:(ve&62914560)!==ve&&(ve&536870912)===0||t!==Ut))throw pn=ko,xd;e.flags|=8192}}function Xs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pc():536870912,e.lanes|=t,Ia|=t)}function An(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function mg(e,t,a){var n=t.pendingProps;switch(po(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(t),null;case 1:return Pe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ii(Fe),pi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(on(t)?ri(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pd())),Pe(t),null;case 26:return a=t.memoizedState,e===null?(ri(t),a!==null?(Pe(t),Lu(t,a)):(Pe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(ri(t),Pe(t),Lu(t,a)):(Pe(t),t.flags&=-16777217):(e.memoizedProps!==n&&ri(t),Pe(t),t.flags&=-16777217),null;case 27:os(t),a=me.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ri(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return Pe(t),null}e=ne.current,on(t)?md(t):(e=Lm(s,n,a),t.stateNode=e,ri(t))}return Pe(t),null;case 5:if(os(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ri(t);else{if(!n){if(t.stateNode===null)throw Error(c(166));return Pe(t),null}if(e=ne.current,on(t))md(t);else{switch(s=cr(me.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?s.createElement(a,{is:n.is}):s.createElement(a)}}e[Ye]=t,e[ct]=n;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Xe(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ri(t)}}return Pe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ri(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(c(166));if(e=me.current,on(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,s=et,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Ye]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Dm(e.nodeValue,a)),e||Ki(t)}else e=cr(e).createTextNode(n),e[Ye]=t,t.stateNode=e}return Pe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=on(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(c(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(c(317));s[Ye]=t}else ln(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pe(t),s=!1}else s=pd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ni(t),t):(ni(t),null)}if(ni(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var l=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==s&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Xs(t,t.updateQueue),Pe(t),null;case 4:return pi(),e===null&&Nl(t.stateNode.containerInfo),Pe(t),null;case 10:return ii(t.type),Pe(t),null;case 19:if(I(Ve),s=t.memoizedState,s===null)return Pe(t),null;if(n=(t.flags&128)!==0,l=s.rendering,l===null)if(n)An(s,!1);else{if(Le!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=Us(e),l!==null){for(t.flags|=128,An(s,!1),e=l.updateQueue,t.updateQueue=e,Xs(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)dd(a,e),a=a.sibling;return W(Ve,Ve.current&1|2),t.child}e=e.sibling}s.tail!==null&&_t()>Js&&(t.flags|=128,n=!0,An(s,!1),t.lanes=4194304)}else{if(!n)if(e=Us(l),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Xs(t,e),An(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!ke)return Pe(t),null}else 2*_t()-s.renderingStartTime>Js&&a!==536870912&&(t.flags|=128,n=!0,An(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(e=s.last,e!==null?e.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=_t(),t.sibling=null,e=Ve.current,W(Ve,n?e&1|2:e&1),t):(Pe(t),null);case 22:case 23:return ni(t),Eo(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Pe(t),t.subtreeFlags&6&&(t.flags|=8192)):Pe(t),a=t.updateQueue,a!==null&&Xs(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&I(Zi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ii(Fe),Pe(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function hg(e,t){switch(po(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(Fe),pi(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return os(t),null;case 13:if(ni(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Ve),null;case 4:return pi(),null;case 10:return ii(t.type),null;case 22:case 23:return ni(t),Eo(),e!==null&&I(Zi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ii(Fe),null;case 25:return null;default:return null}}function zu(e,t){switch(po(t),t.tag){case 3:ii(Fe),pi();break;case 26:case 27:case 5:os(t);break;case 4:pi();break;case 13:ni(t);break;case 19:I(Ve);break;case 10:ii(t.type);break;case 22:case 23:ni(t),Eo(),e!==null&&I(Zi);break;case 24:ii(Fe)}}function Sn(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var s=n.next;a=s;do{if((a.tag&e)===e){n=void 0;var l=a.create,u=a.inst;n=l(),u.destroy=n}a=a.next}while(a!==s)}}catch(b){De(t,t.return,b)}}function Si(e,t,a){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var l=s.next;n=l;do{if((n.tag&e)===e){var u=n.inst,b=u.destroy;if(b!==void 0){u.destroy=void 0,s=t;var S=a,H=b;try{H()}catch(Q){De(s,S,Q)}}}n=n.next}while(n!==l)}}catch(Q){De(t,t.return,Q)}}function Hu(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Sd(t,a)}catch(n){De(e,e.return,n)}}}function Ou(e,t,a){a.props=ea(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){De(e,t,n)}}function Nn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(s){De(e,t,s)}}function Wt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(s){De(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(s){De(e,t,s)}else a.current=null}function Gu(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(s){De(e,e.return,s)}}function il(e,t,a){try{var n=e.stateNode;Bg(n,e.type,a,t),n[ct]=t}catch(s){De(e,e.return,s)}}function Fu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pi(e.type)||e.tag===4}function al(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nl(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=lr));else if(n!==4&&(n===27&&Pi(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(nl(e,t,a),e=e.sibling;e!==null;)nl(e,t,a),e=e.sibling}function Ys(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Pi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ys(e,t,a),e=e.sibling;e!==null;)Ys(e,t,a),e=e.sibling}function Vu(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Xe(t,n,a),t[Ye]=e,t[ct]=a}catch(l){De(e,e.return,l)}}var oi=!1,He=!1,sl=!1,_u=typeof WeakSet=="function"?WeakSet:Set,We=null;function pg(e,t){if(e=e.containerInfo,Dl=gr,e=ed(e),io(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var u=0,b=-1,S=-1,H=0,Q=0,Y=e,G=null;t:for(;;){for(var F;Y!==a||s!==0&&Y.nodeType!==3||(b=u+s),Y!==l||n!==0&&Y.nodeType!==3||(S=u+n),Y.nodeType===3&&(u+=Y.nodeValue.length),(F=Y.firstChild)!==null;)G=Y,Y=F;for(;;){if(Y===e)break t;if(G===a&&++H===s&&(b=u),G===l&&++Q===n&&(S=u),(F=Y.nextSibling)!==null)break;Y=G,G=Y.parentNode}Y=F}a=b===-1||S===-1?null:{start:b,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tl={focusedElem:e,selectionRange:a},gr=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,a=t,s=l.memoizedProps,l=l.memoizedState,n=a.stateNode;try{var de=ea(a.type,s,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(de,l),n.__reactInternalSnapshotBeforeUpdate=e}catch(le){De(a,a.return,le)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Pl(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pl(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function qu(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Ni(e,a),n&4&&Sn(5,a);break;case 1:if(Ni(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(u){De(a,a.return,u)}else{var s=ea(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(u){De(a,a.return,u)}}n&64&&Hu(a),n&512&&Nn(a,a.return);break;case 3:if(Ni(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Sd(e,t)}catch(u){De(a,a.return,u)}}break;case 27:t===null&&n&4&&Vu(a);case 26:case 5:Ni(e,a),t===null&&n&4&&Gu(a),n&512&&Nn(a,a.return);break;case 12:Ni(e,a);break;case 13:Ni(e,a),n&4&&Qu(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Cg.bind(null,a),Fg(e,a))));break;case 22:if(n=a.memoizedState!==null||oi,!n){t=t!==null&&t.memoizedState!==null||He,s=oi;var l=He;oi=n,(He=t)&&!l?ji(e,a,(a.subtreeFlags&8772)!==0):Ni(e,a),oi=s,He=l}break;case 30:break;default:Ni(e,a)}}function Uu(e){var t=e.alternate;t!==null&&(e.alternate=null,Uu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Re=null,mt=!1;function li(e,t,a){for(a=a.child;a!==null;)Wu(e,t,a),a=a.sibling}function Wu(e,t,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Wa,a)}catch{}switch(a.tag){case 26:He||Wt(a,t),li(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:He||Wt(a,t);var n=Re,s=mt;Pi(a.type)&&(Re=a.stateNode,mt=!1),li(e,t,a),In(a.stateNode),Re=n,mt=s;break;case 5:He||Wt(a,t);case 6:if(n=Re,s=mt,Re=null,li(e,t,a),Re=n,mt=s,Re!==null)if(mt)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(a.stateNode)}catch(l){De(a,t,l)}else try{Re.removeChild(a.stateNode)}catch(l){De(a,t,l)}break;case 18:Re!==null&&(mt?(e=Re,Bm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),_n(e)):Bm(Re,a.stateNode));break;case 4:n=Re,s=mt,Re=a.stateNode.containerInfo,mt=!0,li(e,t,a),Re=n,mt=s;break;case 0:case 11:case 14:case 15:He||Si(2,a,t),He||Si(4,a,t),li(e,t,a);break;case 1:He||(Wt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Ou(a,t,n)),li(e,t,a);break;case 21:li(e,t,a);break;case 22:He=(n=He)||a.memoizedState!==null,li(e,t,a),He=n;break;default:li(e,t,a)}}function Qu(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_n(e)}catch(a){De(t,t.return,a)}}function gg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _u),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _u),t;default:throw Error(c(435,e.tag))}}function rl(e,t){var a=gg(e);t.forEach(function(n){var s=Ag.bind(null,e,n);a.has(n)||(a.add(n),n.then(s,s))})}function xt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n],l=e,u=t,b=u;e:for(;b!==null;){switch(b.tag){case 27:if(Pi(b.type)){Re=b.stateNode,mt=!1;break e}break;case 5:Re=b.stateNode,mt=!1;break e;case 3:case 4:Re=b.stateNode.containerInfo,mt=!0;break e}b=b.return}if(Re===null)throw Error(c(160));Wu(l,u,s),Re=null,mt=!1,l=s.alternate,l!==null&&(l.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)$u(t,e),t=t.sibling}var Ot=null;function $u(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),vt(e),n&4&&(Si(3,e,e.return),Sn(3,e),Si(5,e,e.return));break;case 1:xt(t,e),vt(e),n&512&&(He||a===null||Wt(a,a.return)),n&64&&oi&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var s=Ot;if(xt(t,e),vt(e),n&512&&(He||a===null||Wt(a,a.return)),n&4){var l=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":l=s.getElementsByTagName("title")[0],(!l||l[Ka]||l[Ye]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=s.createElement(n),s.head.insertBefore(l,s.querySelector("head > title"))),Xe(l,n,a),l[Ye]=e,qe(l),n=l;break e;case"link":var u=Vm("link","href",s).get(n+(a.href||""));if(u){for(var b=0;b<u.length;b++)if(l=u[b],l.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&l.getAttribute("rel")===(a.rel==null?null:a.rel)&&l.getAttribute("title")===(a.title==null?null:a.title)&&l.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){u.splice(b,1);break t}}l=s.createElement(n),Xe(l,n,a),s.head.appendChild(l);break;case"meta":if(u=Vm("meta","content",s).get(n+(a.content||""))){for(b=0;b<u.length;b++)if(l=u[b],l.getAttribute("content")===(a.content==null?null:""+a.content)&&l.getAttribute("name")===(a.name==null?null:a.name)&&l.getAttribute("property")===(a.property==null?null:a.property)&&l.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&l.getAttribute("charset")===(a.charSet==null?null:a.charSet)){u.splice(b,1);break t}}l=s.createElement(n),Xe(l,n,a),s.head.appendChild(l);break;default:throw Error(c(468,n))}l[Ye]=e,qe(l),n=l}e.stateNode=n}else _m(s,e.type,e.stateNode);else e.stateNode=Fm(s,n,e.memoizedProps);else l!==n?(l===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):l.count--,n===null?_m(s,e.type,e.stateNode):Fm(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&il(e,e.memoizedProps,a.memoizedProps)}break;case 27:xt(t,e),vt(e),n&512&&(He||a===null||Wt(a,a.return)),a!==null&&n&4&&il(e,e.memoizedProps,a.memoizedProps);break;case 5:if(xt(t,e),vt(e),n&512&&(He||a===null||Wt(a,a.return)),e.flags&32){s=e.stateNode;try{ha(s,"")}catch(F){De(e,e.return,F)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,il(e,s,a!==null?a.memoizedProps:s)),n&1024&&(sl=!0);break;case 6:if(xt(t,e),vt(e),n&4){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(F){De(e,e.return,F)}}break;case 3:if(mr=null,s=Ot,Ot=dr(t.containerInfo),xt(t,e),Ot=s,vt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{_n(t.containerInfo)}catch(F){De(e,e.return,F)}sl&&(sl=!1,Ku(e));break;case 4:n=Ot,Ot=dr(e.stateNode.containerInfo),xt(t,e),vt(e),Ot=n;break;case 12:xt(t,e),vt(e);break;case 13:xt(t,e),vt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ml=_t()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,rl(e,n)));break;case 22:s=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,H=oi,Q=He;if(oi=H||s,He=Q||S,xt(t,e),He=Q,oi=H,vt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(a===null||S||oi||He||ta(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(l=S.stateNode,s)u=l.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{b=S.stateNode;var Y=S.memoizedProps.style,G=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(F){De(S,S.return,F)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=s?"":S.memoizedProps}catch(F){De(S,S.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,rl(e,a))));break;case 19:xt(t,e),vt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,rl(e,n)));break;case 30:break;case 21:break;default:xt(t,e),vt(e)}}function vt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Fu(n)){a=n;break}n=n.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var s=a.stateNode,l=al(e);Ys(e,l,s);break;case 5:var u=a.stateNode;a.flags&32&&(ha(u,""),a.flags&=-33);var b=al(e);Ys(e,b,u);break;case 3:case 4:var S=a.stateNode.containerInfo,H=al(e);nl(e,H,S);break;default:throw Error(c(161))}}catch(Q){De(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ku(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ku(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ni(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)qu(e,t.alternate,t),t=t.sibling}function ta(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Si(4,t,t.return),ta(t);break;case 1:Wt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Ou(t,t.return,a),ta(t);break;case 27:In(t.stateNode);case 26:case 5:Wt(t,t.return),ta(t);break;case 22:t.memoizedState===null&&ta(t);break;case 30:ta(t);break;default:ta(t)}e=e.sibling}}function ji(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,l=t,u=l.flags;switch(l.tag){case 0:case 11:case 15:ji(s,l,a),Sn(4,l);break;case 1:if(ji(s,l,a),n=l,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(H){De(n,n.return,H)}if(n=l,s=n.updateQueue,s!==null){var b=n.stateNode;try{var S=s.shared.hiddenCallbacks;if(S!==null)for(s.shared.hiddenCallbacks=null,s=0;s<S.length;s++)Ad(S[s],b)}catch(H){De(n,n.return,H)}}a&&u&64&&Hu(l),Nn(l,l.return);break;case 27:Vu(l);case 26:case 5:ji(s,l,a),a&&n===null&&u&4&&Gu(l),Nn(l,l.return);break;case 12:ji(s,l,a);break;case 13:ji(s,l,a),a&&u&4&&Qu(s,l);break;case 22:l.memoizedState===null&&ji(s,l,a),Nn(l,l.return);break;case 30:break;default:ji(s,l,a)}t=t.sibling}}function ol(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&un(a))}function ll(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e))}function Qt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xu(e,t,a,n),t=t.sibling}function Xu(e,t,a,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,a,n),s&2048&&Sn(9,t);break;case 1:Qt(e,t,a,n);break;case 3:Qt(e,t,a,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&un(e)));break;case 12:if(s&2048){Qt(e,t,a,n),e=t.stateNode;try{var l=t.memoizedProps,u=l.id,b=l.onPostCommit;typeof b=="function"&&b(u,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){De(t,t.return,S)}}else Qt(e,t,a,n);break;case 13:Qt(e,t,a,n);break;case 23:break;case 22:l=t.stateNode,u=t.alternate,t.memoizedState!==null?l._visibility&2?Qt(e,t,a,n):jn(e,t):l._visibility&2?Qt(e,t,a,n):(l._visibility|=2,Ra(e,t,a,n,(t.subtreeFlags&10256)!==0)),s&2048&&ol(u,t);break;case 24:Qt(e,t,a,n),s&2048&&ll(t.alternate,t);break;default:Qt(e,t,a,n)}}function Ra(e,t,a,n,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,u=t,b=a,S=n,H=u.flags;switch(u.tag){case 0:case 11:case 15:Ra(l,u,b,S,s),Sn(8,u);break;case 23:break;case 22:var Q=u.stateNode;u.memoizedState!==null?Q._visibility&2?Ra(l,u,b,S,s):jn(l,u):(Q._visibility|=2,Ra(l,u,b,S,s)),s&&H&2048&&ol(u.alternate,u);break;case 24:Ra(l,u,b,S,s),s&&H&2048&&ll(u.alternate,u);break;default:Ra(l,u,b,S,s)}t=t.sibling}}function jn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,s=n.flags;switch(n.tag){case 22:jn(a,n),s&2048&&ol(n.alternate,n);break;case 24:jn(a,n),s&2048&&ll(n.alternate,n);break;default:jn(a,n)}t=t.sibling}}var En=8192;function Pa(e){if(e.subtreeFlags&En)for(e=e.child;e!==null;)Yu(e),e=e.sibling}function Yu(e){switch(e.tag){case 26:Pa(e),e.flags&En&&e.memoizedState!==null&&ef(Ot,e.memoizedState,e.memoizedProps);break;case 5:Pa(e);break;case 3:case 4:var t=Ot;Ot=dr(e.stateNode.containerInfo),Pa(e),Ot=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=En,En=16777216,Pa(e),En=t):Pa(e));break;default:Pa(e)}}function Zu(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Dn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];We=n,em(n,e)}Zu(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ju(e),e=e.sibling}function Ju(e){switch(e.tag){case 0:case 11:case 15:Dn(e),e.flags&2048&&Si(9,e,e.return);break;case 3:Dn(e);break;case 12:Dn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zs(e)):Dn(e);break;default:Dn(e)}}function Zs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];We=n,em(n,e)}Zu(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Si(8,t,t.return),Zs(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Zs(t));break;default:Zs(t)}e=e.sibling}}function em(e,t){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:Si(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:un(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,We=n;else e:for(a=e;We!==null;){n=We;var s=n.sibling,l=n.return;if(Uu(n),n===a){We=null;break e}if(s!==null){s.return=l,We=s;break e}We=l}}}var fg={getCacheForType:function(e){var t=Ze(Fe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},yg=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Te=null,ye=null,ve=0,Ae=0,wt=null,Ei=!1,Ba=!1,cl=!1,ci=0,Le=0,Di=0,ia=0,dl=0,Lt=0,Ia=0,Tn=null,ht=null,ul=!1,ml=0,Js=1/0,er=null,Ti=null,Ke=0,Mi=null,La=null,za=0,hl=0,pl=null,tm=null,Mn=0,gl=null;function kt(){if((Ce&2)!==0&&ve!==0)return ve&-ve;if(N.T!==null){var e=Aa;return e!==0?e:kl()}return yc()}function im(){Lt===0&&(Lt=(ve&536870912)===0||ke?hc():536870912);var e=It.current;return e!==null&&(e.flags|=32),Lt}function Ct(e,t,a){(e===Te&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),Ri(e,ve,Lt,!1)),$a(e,a),((Ce&2)===0||e!==Te)&&(e===Te&&((Ce&2)===0&&(ia|=a),Le===4&&Ri(e,ve,Lt,!1)),$t(e))}function am(e,t,a){if((Ce&6)!==0)throw Error(c(327));var n=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Qa(e,t),s=n?vg(e,t):bl(e,t,!0),l=n;do{if(s===0){Ba&&!n&&Ri(e,t,0,!1);break}else{if(a=e.current.alternate,l&&!bg(a)){s=bl(e,t,!1),l=!1;continue}if(s===2){if(l=t,e.errorRecoveryDisabledLanes&l)var u=0;else u=e.pendingLanes&-536870913,u=u!==0?u:u&536870912?536870912:0;if(u!==0){t=u;e:{var b=e;s=Tn;var S=b.current.memoizedState.isDehydrated;if(S&&(Ha(b,u).flags|=256),u=bl(b,u,!1),u!==2){if(cl&&!S){b.errorRecoveryDisabledLanes|=l,ia|=l,s=4;break e}l=ht,ht=s,l!==null&&(ht===null?ht=l:ht.push.apply(ht,l))}s=u}if(l=!1,s!==2)continue}}if(s===1){Ha(e,0),Ri(e,t,0,!0);break}e:{switch(n=e,l=s,l){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Ri(n,t,Lt,!Ei);break e;case 2:ht=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(s=ml+300-_t(),10<s)){if(Ri(n,t,Lt,!Ei),us(n,0,!0)!==0)break e;n.timeoutHandle=Rm(nm.bind(null,n,a,ht,er,ul,t,Lt,ia,Ia,Ei,l,2,-0,0),s);break e}nm(n,a,ht,er,ul,t,Lt,ia,Ia,Ei,l,0,-0,0)}}break}while(!0);$t(e)}function nm(e,t,a,n,s,l,u,b,S,H,Q,Y,G,F){if(e.timeoutHandle=-1,Y=t.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(Hn={stylesheets:null,count:0,unsuspend:Jg},Yu(t),Y=tf(),Y!==null)){e.cancelPendingCommit=Y(um.bind(null,e,t,l,a,n,s,u,b,S,Q,1,G,F)),Ri(e,l,u,!H);return}um(e,t,l,a,n,s,u,b,S)}function bg(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var s=a[n],l=s.getSnapshot;s=s.value;try{if(!yt(l(),s))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ri(e,t,a,n){t&=~dl,t&=~ia,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var l=31-ft(s),u=1<<l;n[l]=-1,s&=~u}a!==0&&gc(e,a,t)}function tr(){return(Ce&6)===0?(Rn(0),!1):!0}function fl(){if(ye!==null){if(Ae===0)var e=ye.return;else e=ye,ti=Xi=null,Po(e),Ta=null,kn=0,e=ye;for(;e!==null;)zu(e.alternate,e),e=e.return;ye=null}}function Ha(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Lg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),fl(),Te=e,ye=a=Zt(e.current,null),ve=t,Ae=0,wt=null,Ei=!1,Ba=Qa(e,t),cl=!1,Ia=Lt=dl=ia=Di=Le=0,ht=Tn=null,ul=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-ft(n),l=1<<s;t|=e[s],n&=~l}return ci=t,Cs(),a}function sm(e,t){pe=null,N.H=Vs,t===hn||t===Rs?(t=kd(),Ae=3):t===xd?(t=kd(),Ae=4):Ae=t===Cu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,ye===null&&(Le=1,Qs(e,Mt(t,e.current)))}function rm(){var e=N.H;return N.H=Vs,e===null?Vs:e}function om(){var e=N.A;return N.A=fg,e}function yl(){Le=4,Ei||(ve&4194048)!==ve&&It.current!==null||(Ba=!0),(Di&134217727)===0&&(ia&134217727)===0||Te===null||Ri(Te,ve,Lt,!1)}function bl(e,t,a){var n=Ce;Ce|=2;var s=rm(),l=om();(Te!==e||ve!==t)&&(er=null,Ha(e,t)),t=!1;var u=Le;e:do try{if(Ae!==0&&ye!==null){var b=ye,S=wt;switch(Ae){case 8:fl(),u=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(t=!0);var H=Ae;if(Ae=0,wt=null,Oa(e,b,S,H),a&&Ba){u=0;break e}break;default:H=Ae,Ae=0,wt=null,Oa(e,b,S,H)}}xg(),u=Le;break}catch(Q){sm(e,Q)}while(!0);return t&&e.shellSuspendCounter++,ti=Xi=null,Ce=n,N.H=s,N.A=l,ye===null&&(Te=null,ve=0,Cs()),u}function xg(){for(;ye!==null;)lm(ye)}function vg(e,t){var a=Ce;Ce|=2;var n=rm(),s=om();Te!==e||ve!==t?(er=null,Js=_t()+500,Ha(e,t)):Ba=Qa(e,t);e:do try{if(Ae!==0&&ye!==null){t=ye;var l=wt;t:switch(Ae){case 1:Ae=0,wt=null,Oa(e,t,l,1);break;case 2:case 9:if(vd(l)){Ae=0,wt=null,cm(t);break}t=function(){Ae!==2&&Ae!==9||Te!==e||(Ae=7),$t(e)},l.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:vd(l)?(Ae=0,wt=null,cm(t)):(Ae=0,wt=null,Oa(e,t,l,7));break;case 5:var u=null;switch(ye.tag){case 26:u=ye.memoizedState;case 5:case 27:var b=ye;if(!u||qm(u)){Ae=0,wt=null;var S=b.sibling;if(S!==null)ye=S;else{var H=b.return;H!==null?(ye=H,ir(H)):ye=null}break t}}Ae=0,wt=null,Oa(e,t,l,5);break;case 6:Ae=0,wt=null,Oa(e,t,l,6);break;case 8:fl(),Le=6;break e;default:throw Error(c(462))}}wg();break}catch(Q){sm(e,Q)}while(!0);return ti=Xi=null,N.H=n,N.A=s,Ce=a,ye!==null?0:(Te=null,ve=0,Cs(),Le)}function wg(){for(;ye!==null&&!_h();)lm(ye)}function lm(e){var t=Iu(e.alternate,e,ci);e.memoizedProps=e.pendingProps,t===null?ir(e):ye=t}function cm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Du(a,t,t.pendingProps,t.type,void 0,ve);break;case 11:t=Du(a,t,t.pendingProps,t.type.render,t.ref,ve);break;case 5:Po(t);default:zu(a,t),t=ye=dd(t,ci),t=Iu(a,t,ci)}e.memoizedProps=e.pendingProps,t===null?ir(e):ye=t}function Oa(e,t,a,n){ti=Xi=null,Po(t),Ta=null,kn=0;var s=t.return;try{if(dg(e,s,t,a,ve)){Le=1,Qs(e,Mt(a,e.current)),ye=null;return}}catch(l){if(s!==null)throw ye=s,l;Le=1,Qs(e,Mt(a,e.current)),ye=null;return}t.flags&32768?(ke||n===1?e=!0:Ba||(ve&536870912)!==0?e=!1:(Ei=e=!0,(n===2||n===9||n===3||n===6)&&(n=It.current,n!==null&&n.tag===13&&(n.flags|=16384))),dm(t,e)):ir(t)}function ir(e){var t=e;do{if((t.flags&32768)!==0){dm(t,Ei);return}e=t.return;var a=mg(t.alternate,t,ci);if(a!==null){ye=a;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Le===0&&(Le=5)}function dm(e,t){do{var a=hg(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Le=6,ye=null}function um(e,t,a,n,s,l,u,b,S){e.cancelPendingCommit=null;do ar();while(Ke!==0);if((Ce&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(l=t.lanes|t.childLanes,l|=oo,Jh(e,a,l,u,b,S),e===Te&&(ye=Te=null,ve=0),La=t,Mi=e,za=a,hl=l,pl=s,tm=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Sg(ls,function(){return fm(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=N.T,N.T=null,s=V.p,V.p=2,u=Ce,Ce|=4;try{pg(e,t,a)}finally{Ce=u,V.p=s,N.T=n}}Ke=1,mm(),hm(),pm()}}function mm(){if(Ke===1){Ke=0;var e=Mi,t=La,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var n=V.p;V.p=2;var s=Ce;Ce|=4;try{$u(t,e);var l=Tl,u=ed(e.containerInfo),b=l.focusedElem,S=l.selectionRange;if(u!==b&&b&&b.ownerDocument&&Jc(b.ownerDocument.documentElement,b)){if(S!==null&&io(b)){var H=S.start,Q=S.end;if(Q===void 0&&(Q=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(Q,b.value.length);else{var Y=b.ownerDocument||document,G=Y&&Y.defaultView||window;if(G.getSelection){var F=G.getSelection(),de=b.textContent.length,le=Math.min(S.start,de),je=S.end===void 0?le:Math.min(S.end,de);!F.extend&&le>je&&(u=je,je=le,le=u);var P=Zc(b,le),D=Zc(b,je);if(P&&D&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==D.node||F.focusOffset!==D.offset)){var z=Y.createRange();z.setStart(P.node,P.offset),F.removeAllRanges(),le>je?(F.addRange(z),F.extend(D.node,D.offset)):(z.setEnd(D.node,D.offset),F.addRange(z))}}}}for(Y=[],F=b;F=F.parentNode;)F.nodeType===1&&Y.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Y.length;b++){var $=Y[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}gr=!!Dl,Tl=Dl=null}finally{Ce=s,V.p=n,N.T=a}}e.current=t,Ke=2}}function hm(){if(Ke===2){Ke=0;var e=Mi,t=La,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var n=V.p;V.p=2;var s=Ce;Ce|=4;try{qu(e,t.alternate,t)}finally{Ce=s,V.p=n,N.T=a}}Ke=3}}function pm(){if(Ke===4||Ke===3){Ke=0,qh();var e=Mi,t=La,a=za,n=tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ke=5:(Ke=0,La=Mi=null,gm(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Ti=null),Ir(a),t=t.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Wa,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=N.T,s=V.p,V.p=2,N.T=null;try{for(var l=e.onRecoverableError,u=0;u<n.length;u++){var b=n[u];l(b.value,{componentStack:b.stack})}}finally{N.T=t,V.p=s}}(za&3)!==0&&ar(),$t(e),s=e.pendingLanes,(a&4194090)!==0&&(s&42)!==0?e===gl?Mn++:(Mn=0,gl=e):Mn=0,Rn(0)}}function gm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,un(t)))}function ar(e){return mm(),hm(),pm(),fm()}function fm(){if(Ke!==5)return!1;var e=Mi,t=hl;hl=0;var a=Ir(za),n=N.T,s=V.p;try{V.p=32>a?32:a,N.T=null,a=pl,pl=null;var l=Mi,u=za;if(Ke=0,La=Mi=null,za=0,(Ce&6)!==0)throw Error(c(331));var b=Ce;if(Ce|=4,Ju(l.current),Xu(l,l.current,u,a),Ce=b,Rn(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Wa,l)}catch{}return!0}finally{V.p=s,N.T=n,gm(e,t)}}function ym(e,t,a){t=Mt(a,t),t=Qo(e.stateNode,t,2),e=wi(e,t,2),e!==null&&($a(e,2),$t(e))}function De(e,t,a){if(e.tag===3)ym(e,e,a);else for(;t!==null;){if(t.tag===3){ym(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ti===null||!Ti.has(n))){e=Mt(a,e),a=wu(2),n=wi(t,a,2),n!==null&&(ku(a,n,t,e),$a(n,2),$t(n));break}}t=t.return}}function xl(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new yg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(a)||(cl=!0,s.add(a),e=kg.bind(null,e,t,a),t.then(e,e))}function kg(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Te===e&&(ve&a)===a&&(Le===4||Le===3&&(ve&62914560)===ve&&300>_t()-ml?(Ce&2)===0&&Ha(e,0):dl|=a,Ia===ve&&(Ia=0)),$t(e)}function bm(e,t){t===0&&(t=pc()),e=va(e,t),e!==null&&($a(e,t),$t(e))}function Cg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),bm(e,a)}function Ag(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(t),bm(e,a)}function Sg(e,t){return Mr(e,t)}var nr=null,Ga=null,vl=!1,sr=!1,wl=!1,aa=0;function $t(e){e!==Ga&&e.next===null&&(Ga===null?nr=Ga=e:Ga=Ga.next=e),sr=!0,vl||(vl=!0,jg())}function Rn(e,t){if(!wl&&sr){wl=!0;do for(var a=!1,n=nr;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var l=0;else{var u=n.suspendedLanes,b=n.pingedLanes;l=(1<<31-ft(42|e)+1)-1,l&=s&~(u&~b),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(a=!0,km(n,l))}else l=ve,l=us(n,n===Te?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(l&3)===0||Qa(n,l)||(a=!0,km(n,l));n=n.next}while(a);wl=!1}}function Ng(){xm()}function xm(){sr=vl=!1;var e=0;aa!==0&&(Ig()&&(e=aa),aa=0);for(var t=_t(),a=null,n=nr;n!==null;){var s=n.next,l=vm(n,t);l===0?(n.next=null,a===null?nr=s:a.next=s,s===null&&(Ga=a)):(a=n,(e!==0||(l&3)!==0)&&(sr=!0)),n=s}Rn(e)}function vm(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var u=31-ft(l),b=1<<u,S=s[u];S===-1?((b&a)===0||(b&n)!==0)&&(s[u]=Zh(b,t)):S<=t&&(e.expiredLanes|=b),l&=~b}if(t=Te,a=ve,a=us(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Rr(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Qa(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Rr(n),Ir(a)){case 2:case 8:a=uc;break;case 32:a=ls;break;case 268435456:a=mc;break;default:a=ls}return n=wm.bind(null,e),a=Mr(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Rr(n),e.callbackPriority=2,e.callbackNode=null,2}function wm(e,t){if(Ke!==0&&Ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ar()&&e.callbackNode!==a)return null;var n=ve;return n=us(e,e===Te?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(am(e,n,t),vm(e,_t()),e.callbackNode!=null&&e.callbackNode===a?wm.bind(null,e):null)}function km(e,t){if(ar())return null;am(e,t,!0)}function jg(){zg(function(){(Ce&6)!==0?Mr(dc,Ng):xm()})}function kl(){return aa===0&&(aa=hc()),aa}function Cm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fs(""+e)}function Am(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Eg(e,t,a,n,s){if(t==="submit"&&a&&a.stateNode===s){var l=Cm((s[ct]||null).action),u=n.submitter;u&&(t=(t=u[ct]||null)?Cm(t.formAction):u.getAttribute("formAction"),t!==null&&(l=t,u=null));var b=new vs("action","action",null,n,s);e.push({event:b,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(aa!==0){var S=u?Am(s,u):new FormData(s);Vo(a,{pending:!0,data:S,method:s.method,action:l},null,S)}}else typeof l=="function"&&(b.preventDefault(),S=u?Am(s,u):new FormData(s),Vo(a,{pending:!0,data:S,method:s.method,action:l},l,S))},currentTarget:s}]})}}for(var Cl=0;Cl<ro.length;Cl++){var Al=ro[Cl],Dg=Al.toLowerCase(),Tg=Al[0].toUpperCase()+Al.slice(1);Ht(Dg,"on"+Tg)}Ht(ad,"onAnimationEnd"),Ht(nd,"onAnimationIteration"),Ht(sd,"onAnimationStart"),Ht("dblclick","onDoubleClick"),Ht("focusin","onFocus"),Ht("focusout","onBlur"),Ht(Qp,"onTransitionRun"),Ht($p,"onTransitionStart"),Ht(Kp,"onTransitionCancel"),Ht(rd,"onTransitionEnd"),da("onMouseEnter",["mouseout","mouseover"]),da("onMouseLeave",["mouseout","mouseover"]),da("onPointerEnter",["pointerout","pointerover"]),da("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pn));function Sm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var u=n.length-1;0<=u;u--){var b=n[u],S=b.instance,H=b.currentTarget;if(b=b.listener,S!==l&&s.isPropagationStopped())break e;l=b,s.currentTarget=H;try{l(s)}catch(Q){Ws(Q)}s.currentTarget=null,l=S}else for(u=0;u<n.length;u++){if(b=n[u],S=b.instance,H=b.currentTarget,b=b.listener,S!==l&&s.isPropagationStopped())break e;l=b,s.currentTarget=H;try{l(s)}catch(Q){Ws(Q)}s.currentTarget=null,l=S}}}}function be(e,t){var a=t[Lr];a===void 0&&(a=t[Lr]=new Set);var n=e+"__bubble";a.has(n)||(Nm(t,e,2,!1),a.add(n))}function Sl(e,t,a){var n=0;t&&(n|=4),Nm(a,e,n,t)}var rr="_reactListening"+Math.random().toString(36).slice(2);function Nl(e){if(!e[rr]){e[rr]=!0,xc.forEach(function(a){a!=="selectionchange"&&(Mg.has(a)||Sl(a,!1,e),Sl(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rr]||(t[rr]=!0,Sl("selectionchange",!1,t))}}function Nm(e,t,a,n){switch(Xm(t)){case 2:var s=sf;break;case 8:s=rf;break;default:s=Gl}a=s.bind(null,t,a,e),s=void 0,!Qr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function jl(e,t,a,n,s){var l=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var b=n.stateNode.containerInfo;if(b===s)break;if(u===4)for(u=n.return;u!==null;){var S=u.tag;if((S===3||S===4)&&u.stateNode.containerInfo===s)return;u=u.return}for(;b!==null;){if(u=oa(b),u===null)return;if(S=u.tag,S===5||S===6||S===26||S===27){n=l=u;continue e}b=b.parentNode}}n=n.return}Pc(function(){var H=l,Q=Ur(a),Y=[];e:{var G=od.get(e);if(G!==void 0){var F=vs,de=e;switch(e){case"keypress":if(bs(a)===0)break e;case"keydown":case"keyup":F=Sp;break;case"focusin":de="focus",F=Yr;break;case"focusout":de="blur",F=Yr;break;case"beforeblur":case"afterblur":F=Yr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=hp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Ep;break;case ad:case nd:case sd:F=fp;break;case rd:F=Tp;break;case"scroll":case"scrollend":F=up;break;case"wheel":F=Rp;break;case"copy":case"cut":case"paste":F=bp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Hc;break;case"toggle":case"beforetoggle":F=Bp}var le=(t&4)!==0,je=!le&&(e==="scroll"||e==="scrollend"),P=le?G!==null?G+"Capture":null:G;le=[];for(var D=H,z;D!==null;){var $=D;if(z=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||z===null||P===null||($=Ya(D,P),$!=null&&le.push(Bn(D,$,z))),je)break;D=D.return}0<le.length&&(G=new F(G,de,null,a,Q),Y.push({event:G,listeners:le}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",G&&a!==qr&&(de=a.relatedTarget||a.fromElement)&&(oa(de)||de[ra]))break e;if((F||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,F?(de=a.relatedTarget||a.toElement,F=H,de=de?oa(de):null,de!==null&&(je=y(de),le=de.tag,de!==je||le!==5&&le!==27&&le!==6)&&(de=null)):(F=null,de=H),F!==de)){if(le=Lc,$="onMouseLeave",P="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(le=Hc,$="onPointerLeave",P="onPointerEnter",D="pointer"),je=F==null?G:Xa(F),z=de==null?G:Xa(de),G=new le($,D+"leave",F,a,Q),G.target=je,G.relatedTarget=z,$=null,oa(Q)===H&&(le=new le(P,D+"enter",de,a,Q),le.target=z,le.relatedTarget=je,$=le),je=$,F&&de)t:{for(le=F,P=de,D=0,z=le;z;z=Fa(z))D++;for(z=0,$=P;$;$=Fa($))z++;for(;0<D-z;)le=Fa(le),D--;for(;0<z-D;)P=Fa(P),z--;for(;D--;){if(le===P||P!==null&&le===P.alternate)break t;le=Fa(le),P=Fa(P)}le=null}else le=null;F!==null&&jm(Y,G,F,le,!1),de!==null&&je!==null&&jm(Y,je,de,le,!0)}}e:{if(G=H?Xa(H):window,F=G.nodeName&&G.nodeName.toLowerCase(),F==="select"||F==="input"&&G.type==="file")var re=Wc;else if(qc(G))if(Qc)re=qp;else{re=Vp;var ge=Fp}else F=G.nodeName,!F||F.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&_r(H.elementType)&&(re=Wc):re=_p;if(re&&(re=re(e,H))){Uc(Y,re,a,Q);break e}ge&&ge(e,G,H),e==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Vr(G,"number",G.value)}switch(ge=H?Xa(H):window,e){case"focusin":(qc(ge)||ge.contentEditable==="true")&&(ya=ge,ao=H,rn=null);break;case"focusout":rn=ao=ya=null;break;case"mousedown":no=!0;break;case"contextmenu":case"mouseup":case"dragend":no=!1,td(Y,a,Q);break;case"selectionchange":if(Wp)break;case"keydown":case"keyup":td(Y,a,Q)}var oe;if(Jr)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else fa?Vc(e,a)&&(ce="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ce="onCompositionStart");ce&&(Oc&&a.locale!=="ko"&&(fa||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&fa&&(oe=Bc()):(yi=Q,$r="value"in yi?yi.value:yi.textContent,fa=!0)),ge=or(H,ce),0<ge.length&&(ce=new zc(ce,e,null,a,Q),Y.push({event:ce,listeners:ge}),oe?ce.data=oe:(oe=_c(a),oe!==null&&(ce.data=oe)))),(oe=Lp?zp(e,a):Hp(e,a))&&(ce=or(H,"onBeforeInput"),0<ce.length&&(ge=new zc("onBeforeInput","beforeinput",null,a,Q),Y.push({event:ge,listeners:ce}),ge.data=oe)),Eg(Y,e,H,a,Q)}Sm(Y,t)})}function Bn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function or(e,t){for(var a=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||l===null||(s=Ya(e,a),s!=null&&n.unshift(Bn(e,s,l)),s=Ya(e,t),s!=null&&n.push(Bn(e,s,l))),e.tag===3)return n;e=e.return}return[]}function Fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jm(e,t,a,n,s){for(var l=t._reactName,u=[];a!==null&&a!==n;){var b=a,S=b.alternate,H=b.stateNode;if(b=b.tag,S!==null&&S===n)break;b!==5&&b!==26&&b!==27||H===null||(S=H,s?(H=Ya(a,l),H!=null&&u.unshift(Bn(a,H,S))):s||(H=Ya(a,l),H!=null&&u.push(Bn(a,H,S)))),a=a.return}u.length!==0&&e.push({event:t,listeners:u})}var Rg=/\r\n?/g,Pg=/\u0000|\uFFFD/g;function Em(e){return(typeof e=="string"?e:""+e).replace(Rg,`
`).replace(Pg,"")}function Dm(e,t){return t=Em(t),Em(e)===t}function lr(){}function Ne(e,t,a,n,s,l){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||ha(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&ha(e,""+n);break;case"className":hs(e,"class",n);break;case"tabIndex":hs(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,n);break;case"style":Mc(e,n,l);break;case"data":if(t!=="object"){hs(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=fs(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(a==="formAction"?(t!=="input"&&Ne(e,t,"name",s.name,s,null),Ne(e,t,"formEncType",s.formEncType,s,null),Ne(e,t,"formMethod",s.formMethod,s,null),Ne(e,t,"formTarget",s.formTarget,s,null)):(Ne(e,t,"encType",s.encType,s,null),Ne(e,t,"method",s.method,s,null),Ne(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=fs(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=lr);break;case"onScroll":n!=null&&be("scroll",e);break;case"onScrollEnd":n!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=fs(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":be("beforetoggle",e),be("toggle",e),ms(e,"popover",n);break;case"xlinkActuate":Xt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Xt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Xt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Xt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Xt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Xt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ms(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cp.get(a)||a,ms(e,a,n))}}function El(e,t,a,n,s,l){switch(a){case"style":Mc(e,n,l);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof n=="string"?ha(e,n):(typeof n=="number"||typeof n=="bigint")&&ha(e,""+n);break;case"onScroll":n!=null&&be("scroll",e);break;case"onScrollEnd":n!=null&&be("scrollend",e);break;case"onClick":n!=null&&(e.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(s=a.endsWith("Capture"),t=a.slice(2,s?a.length-7:void 0),l=e[ct]||null,l=l!=null?l[a]:null,typeof l=="function"&&e.removeEventListener(t,l,s),typeof n=="function")){typeof l!="function"&&l!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,s);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):ms(e,a,n)}}}function Xe(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var n=!1,s=!1,l;for(l in a)if(a.hasOwnProperty(l)){var u=a[l];if(u!=null)switch(l){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ne(e,t,l,u,a,null)}}s&&Ne(e,t,"srcSet",a.srcSet,a,null),n&&Ne(e,t,"src",a.src,a,null);return;case"input":be("invalid",e);var b=l=u=s=null,S=null,H=null;for(n in a)if(a.hasOwnProperty(n)){var Q=a[n];if(Q!=null)switch(n){case"name":s=Q;break;case"type":u=Q;break;case"checked":S=Q;break;case"defaultChecked":H=Q;break;case"value":l=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(c(137,t));break;default:Ne(e,t,n,Q,a,null)}}jc(e,l,b,S,H,u,s,!1),ps(e);return;case"select":be("invalid",e),n=u=l=null;for(s in a)if(a.hasOwnProperty(s)&&(b=a[s],b!=null))switch(s){case"value":l=b;break;case"defaultValue":u=b;break;case"multiple":n=b;default:Ne(e,t,s,b,a,null)}t=l,a=u,e.multiple=!!n,t!=null?ma(e,!!n,t,!1):a!=null&&ma(e,!!n,a,!0);return;case"textarea":be("invalid",e),l=s=n=null;for(u in a)if(a.hasOwnProperty(u)&&(b=a[u],b!=null))switch(u){case"value":n=b;break;case"defaultValue":s=b;break;case"children":l=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:Ne(e,t,u,b,a,null)}Dc(e,n,s,l),ps(e);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(n=a[S],n!=null))switch(S){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ne(e,t,S,n,a,null)}return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(n=0;n<Pn.length;n++)be(Pn[n],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(n=a[H],n!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ne(e,t,H,n,a,null)}return;default:if(_r(t)){for(Q in a)a.hasOwnProperty(Q)&&(n=a[Q],n!==void 0&&El(e,t,Q,n,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(n=a[b],n!=null&&Ne(e,t,b,n,a,null))}function Bg(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,l=null,u=null,b=null,S=null,H=null,Q=null;for(F in a){var Y=a[F];if(a.hasOwnProperty(F)&&Y!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":S=Y;default:n.hasOwnProperty(F)||Ne(e,t,F,null,n,Y)}}for(var G in n){var F=n[G];if(Y=a[G],n.hasOwnProperty(G)&&(F!=null||Y!=null))switch(G){case"type":l=F;break;case"name":s=F;break;case"checked":H=F;break;case"defaultChecked":Q=F;break;case"value":u=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(c(137,t));break;default:F!==Y&&Ne(e,t,G,F,n,Y)}}Fr(e,u,b,S,H,Q,l,s);return;case"select":F=u=b=G=null;for(l in a)if(S=a[l],a.hasOwnProperty(l)&&S!=null)switch(l){case"value":break;case"multiple":F=S;default:n.hasOwnProperty(l)||Ne(e,t,l,null,n,S)}for(s in n)if(l=n[s],S=a[s],n.hasOwnProperty(s)&&(l!=null||S!=null))switch(s){case"value":G=l;break;case"defaultValue":b=l;break;case"multiple":u=l;default:l!==S&&Ne(e,t,s,l,n,S)}t=b,a=u,n=F,G!=null?ma(e,!!a,G,!1):!!n!=!!a&&(t!=null?ma(e,!!a,t,!0):ma(e,!!a,a?[]:"",!1));return;case"textarea":F=G=null;for(b in a)if(s=a[b],a.hasOwnProperty(b)&&s!=null&&!n.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ne(e,t,b,null,n,s)}for(u in n)if(s=n[u],l=a[u],n.hasOwnProperty(u)&&(s!=null||l!=null))switch(u){case"value":G=s;break;case"defaultValue":F=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(c(91));break;default:s!==l&&Ne(e,t,u,s,n,l)}Ec(e,G,F);return;case"option":for(var de in a)if(G=a[de],a.hasOwnProperty(de)&&G!=null&&!n.hasOwnProperty(de))switch(de){case"selected":e.selected=!1;break;default:Ne(e,t,de,null,n,G)}for(S in n)if(G=n[S],F=a[S],n.hasOwnProperty(S)&&G!==F&&(G!=null||F!=null))switch(S){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ne(e,t,S,G,n,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in a)G=a[le],a.hasOwnProperty(le)&&G!=null&&!n.hasOwnProperty(le)&&Ne(e,t,le,null,n,G);for(H in n)if(G=n[H],F=a[H],n.hasOwnProperty(H)&&G!==F&&(G!=null||F!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(c(137,t));break;default:Ne(e,t,H,G,n,F)}return;default:if(_r(t)){for(var je in a)G=a[je],a.hasOwnProperty(je)&&G!==void 0&&!n.hasOwnProperty(je)&&El(e,t,je,void 0,n,G);for(Q in n)G=n[Q],F=a[Q],!n.hasOwnProperty(Q)||G===F||G===void 0&&F===void 0||El(e,t,Q,G,n,F);return}}for(var P in a)G=a[P],a.hasOwnProperty(P)&&G!=null&&!n.hasOwnProperty(P)&&Ne(e,t,P,null,n,G);for(Y in n)G=n[Y],F=a[Y],!n.hasOwnProperty(Y)||G===F||G==null&&F==null||Ne(e,t,Y,G,n,F)}var Dl=null,Tl=null;function cr(e){return e.nodeType===9?e:e.ownerDocument}function Tm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ml(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rl=null;function Ig(){var e=window.event;return e&&e.type==="popstate"?e===Rl?!1:(Rl=e,!0):(Rl=null,!1)}var Rm=typeof setTimeout=="function"?setTimeout:void 0,Lg=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,zg=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(e){return Pm.resolve(null).then(e).catch(Hg)}:Rm;function Hg(e){setTimeout(function(){throw e})}function Pi(e){return e==="head"}function Bm(e,t){var a=t,n=0,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(0<n&&8>n){a=n;var u=e.ownerDocument;if(a&1&&In(u.documentElement),a&2&&In(u.body),a&4)for(a=u.head,In(a),u=a.firstChild;u;){var b=u.nextSibling,S=u.nodeName;u[Ka]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=b}}if(s===0){e.removeChild(l),_n(t);return}s--}else a==="$"||a==="$?"||a==="$!"?s++:n=a.charCodeAt(0)-48;else n=0;a=l}while(a);_n(t)}function Pl(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pl(a),zr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Og(e,t,a,n){for(;e.nodeType===1;){var s=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Ka])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=Gt(e.nextSibling),e===null)break}return null}function Gg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gt(e.nextSibling),e===null))return null;return e}function Bl(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Fg(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Il=null;function Im(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Lm(e,t,a){switch(t=cr(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function In(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zr(e)}var zt=new Map,zm=new Set;function dr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var di=V.d;V.d={f:Vg,r:_g,D:qg,C:Ug,L:Wg,m:Qg,X:Kg,S:$g,M:Xg};function Vg(){var e=di.f(),t=tr();return e||t}function _g(e){var t=la(e);t!==null&&t.tag===5&&t.type==="form"?au(t):di.r(e)}var Va=typeof document>"u"?null:document;function Hm(e,t,a){var n=Va;if(n&&typeof t=="string"&&t){var s=Tt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof a=="string"&&(s+='[crossorigin="'+a+'"]'),zm.has(s)||(zm.add(s),e={rel:e,crossOrigin:a,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Xe(t,"link",e),qe(t),n.head.appendChild(t)))}}function qg(e){di.D(e),Hm("dns-prefetch",e,null)}function Ug(e,t){di.C(e,t),Hm("preconnect",e,t)}function Wg(e,t,a){di.L(e,t,a);var n=Va;if(n&&e&&t){var s='link[rel="preload"][as="'+Tt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(s+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(s+='[imagesizes="'+Tt(a.imageSizes)+'"]')):s+='[href="'+Tt(e)+'"]';var l=s;switch(t){case"style":l=_a(e);break;case"script":l=qa(e)}zt.has(l)||(e=k({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),zt.set(l,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(Ln(l))||t==="script"&&n.querySelector(zn(l))||(t=n.createElement("link"),Xe(t,"link",e),qe(t),n.head.appendChild(t)))}}function Qg(e,t){di.m(e,t);var a=Va;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Tt(n)+'"][href="'+Tt(e)+'"]',l=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=qa(e)}if(!zt.has(l)&&(e=k({rel:"modulepreload",href:e},t),zt.set(l,e),a.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zn(l)))return}n=a.createElement("link"),Xe(n,"link",e),qe(n),a.head.appendChild(n)}}}function $g(e,t,a){di.S(e,t,a);var n=Va;if(n&&e){var s=ca(n).hoistableStyles,l=_a(e);t=t||"default";var u=s.get(l);if(!u){var b={loading:0,preload:null};if(u=n.querySelector(Ln(l)))b.loading=5;else{e=k({rel:"stylesheet",href:e,"data-precedence":t},a),(a=zt.get(l))&&Ll(e,a);var S=u=n.createElement("link");qe(S),Xe(S,"link",e),S._p=new Promise(function(H,Q){S.onload=H,S.onerror=Q}),S.addEventListener("load",function(){b.loading|=1}),S.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ur(u,t,n)}u={type:"stylesheet",instance:u,count:1,state:b},s.set(l,u)}}}function Kg(e,t){di.X(e,t);var a=Va;if(a&&e){var n=ca(a).hoistableScripts,s=qa(e),l=n.get(s);l||(l=a.querySelector(zn(s)),l||(e=k({src:e,async:!0},t),(t=zt.get(s))&&zl(e,t),l=a.createElement("script"),qe(l),Xe(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(s,l))}}function Xg(e,t){di.M(e,t);var a=Va;if(a&&e){var n=ca(a).hoistableScripts,s=qa(e),l=n.get(s);l||(l=a.querySelector(zn(s)),l||(e=k({src:e,async:!0,type:"module"},t),(t=zt.get(s))&&zl(e,t),l=a.createElement("script"),qe(l),Xe(l,"link",e),a.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(s,l))}}function Om(e,t,a,n){var s=(s=me.current)?dr(s):null;if(!s)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=_a(a.href),a=ca(s).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=_a(a.href);var l=ca(s).hoistableStyles,u=l.get(e);if(u||(s=s.ownerDocument||s,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,u),(l=s.querySelector(Ln(e)))&&!l._p&&(u.instance=l,u.state.loading=5),zt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zt.set(e,a),l||Yg(s,e,a,u.state))),t&&n===null)throw Error(c(528,""));return u}if(t&&n!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qa(a),a=ca(s).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function _a(e){return'href="'+Tt(e)+'"'}function Ln(e){return'link[rel="stylesheet"]['+e+"]"}function Gm(e){return k({},e,{"data-precedence":e.precedence,precedence:null})}function Yg(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Xe(t,"link",a),qe(t),e.head.appendChild(t))}function qa(e){return'[src="'+Tt(e)+'"]'}function zn(e){return"script[async]"+e}function Fm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(n)return t.instance=n,qe(n),n;var s=k({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),qe(n),Xe(n,"style",s),ur(n,a.precedence,e),t.instance=n;case"stylesheet":s=_a(a.href);var l=e.querySelector(Ln(s));if(l)return t.state.loading|=4,t.instance=l,qe(l),l;n=Gm(a),(s=zt.get(s))&&Ll(n,s),l=(e.ownerDocument||e).createElement("link"),qe(l);var u=l;return u._p=new Promise(function(b,S){u.onload=b,u.onerror=S}),Xe(l,"link",n),t.state.loading|=4,ur(l,a.precedence,e),t.instance=l;case"script":return l=qa(a.src),(s=e.querySelector(zn(l)))?(t.instance=s,qe(s),s):(n=a,(s=zt.get(l))&&(n=k({},a),zl(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),qe(s),Xe(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ur(n,a.precedence,e));return t.instance}function ur(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,l=s,u=0;u<n.length;u++){var b=n[u];if(b.dataset.precedence===t)l=b;else if(l!==s)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ll(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zl(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var mr=null;function Vm(e,t,a){if(mr===null){var n=new Map,s=mr=new Map;s.set(a,n)}else s=mr,n=s.get(a),n||(n=new Map,s.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),s=0;s<a.length;s++){var l=a[s];if(!(l[Ka]||l[Ye]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var u=l.getAttribute(t)||"";u=e+u;var b=n.get(u);b?b.push(l):n.set(u,[l])}}return n}function _m(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Zg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function qm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Hn=null;function Jg(){}function ef(e,t,a){if(Hn===null)throw Error(c(475));var n=Hn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var s=_a(a.href),l=e.querySelector(Ln(s));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=hr.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=l,qe(l);return}l=e.ownerDocument||e,a=Gm(a),(s=zt.get(s))&&Ll(a,s),l=l.createElement("link"),qe(l);var u=l;u._p=new Promise(function(b,S){u.onload=b,u.onerror=S}),Xe(l,"link",a),t.instance=l}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=hr.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function tf(){if(Hn===null)throw Error(c(475));var e=Hn;return e.stylesheets&&e.count===0&&Hl(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Hl(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function hr(){if(this.count--,this.count===0){if(this.stylesheets)Hl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pr=null;function Hl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pr=new Map,t.forEach(af,e),pr=null,hr.call(e))}function af(e,t){if(!(t.state.loading&4)){var a=pr.get(e);if(a)var n=a.get(null);else{a=new Map,pr.set(e,a);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<s.length;l++){var u=s[l];(u.nodeName==="LINK"||u.getAttribute("media")!=="not all")&&(a.set(u.dataset.precedence,u),n=u)}n&&a.set(null,n)}s=t.instance,u=s.getAttribute("data-precedence"),l=a.get(u)||n,l===n&&a.set(null,s),a.set(u,s),this.count++,n=hr.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),l?l.parentNode.insertBefore(s,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var On={$$typeof:te,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function nf(e,t,a,n,s,l,u,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=l,this.onRecoverableError=u,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Um(e,t,a,n,s,l,u,b,S,H,Q,Y){return e=new nf(e,t,a,u,b,S,H,Y),t=1,l===!0&&(t|=24),l=bt(3,null,null,t),e.current=l,l.stateNode=e,t=xo(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:n,isDehydrated:a,cache:t},Co(l),e}function Wm(e){return e?(e=wa,e):wa}function Qm(e,t,a,n,s,l){s=Wm(s),n.context===null?n.context=s:n.pendingContext=s,n=vi(t),n.payload={element:a},l=l===void 0?null:l,l!==null&&(n.callback=l),a=wi(e,n,t),a!==null&&(Ct(a,e,t),gn(a,e,t))}function $m(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Ol(e,t){$m(e,t),(e=e.alternate)&&$m(e,t)}function Km(e){if(e.tag===13){var t=va(e,67108864);t!==null&&Ct(t,e,67108864),Ol(e,67108864)}}var gr=!0;function sf(e,t,a,n){var s=N.T;N.T=null;var l=V.p;try{V.p=2,Gl(e,t,a,n)}finally{V.p=l,N.T=s}}function rf(e,t,a,n){var s=N.T;N.T=null;var l=V.p;try{V.p=8,Gl(e,t,a,n)}finally{V.p=l,N.T=s}}function Gl(e,t,a,n){if(gr){var s=Fl(n);if(s===null)jl(e,t,n,fr,a),Ym(e,n);else if(lf(s,e,t,a,n))n.stopPropagation();else if(Ym(e,n),t&4&&-1<of.indexOf(e)){for(;s!==null;){var l=la(s);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=Gi(l.pendingLanes);if(u!==0){var b=l;for(b.pendingLanes|=2,b.entangledLanes|=2;u;){var S=1<<31-ft(u);b.entanglements[1]|=S,u&=~S}$t(l),(Ce&6)===0&&(Js=_t()+500,Rn(0))}}break;case 13:b=va(l,2),b!==null&&Ct(b,l,2),tr(),Ol(l,2)}if(l=Fl(n),l===null&&jl(e,t,n,fr,a),l===s)break;s=l}s!==null&&n.stopPropagation()}else jl(e,t,n,null,a)}}function Fl(e){return e=Ur(e),Vl(e)}var fr=null;function Vl(e){if(fr=null,e=oa(e),e!==null){var t=y(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=w(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fr=e,null}function Xm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uh()){case dc:return 2;case uc:return 8;case ls:case Wh:return 32;case mc:return 268435456;default:return 32}default:return 32}}var _l=!1,Bi=null,Ii=null,Li=null,Gn=new Map,Fn=new Map,zi=[],of="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ym(e,t){switch(e){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Gn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function Vn(e,t,a,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=la(t),t!==null&&Km(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function lf(e,t,a,n,s){switch(t){case"focusin":return Bi=Vn(Bi,e,t,a,n,s),!0;case"dragenter":return Ii=Vn(Ii,e,t,a,n,s),!0;case"mouseover":return Li=Vn(Li,e,t,a,n,s),!0;case"pointerover":var l=s.pointerId;return Gn.set(l,Vn(Gn.get(l)||null,e,t,a,n,s)),!0;case"gotpointercapture":return l=s.pointerId,Fn.set(l,Vn(Fn.get(l)||null,e,t,a,n,s)),!0}return!1}function Zm(e){var t=oa(e.target);if(t!==null){var a=y(t);if(a!==null){if(t=a.tag,t===13){if(t=w(a),t!==null){e.blockedOn=t,ep(e.priority,function(){if(a.tag===13){var n=kt();n=Br(n);var s=va(a,n);s!==null&&Ct(s,a,n),Ol(a,n)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Fl(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);qr=n,a.target.dispatchEvent(n),qr=null}else return t=la(a),t!==null&&Km(t),e.blockedOn=a,!1;t.shift()}return!0}function Jm(e,t,a){yr(e)&&a.delete(t)}function cf(){_l=!1,Bi!==null&&yr(Bi)&&(Bi=null),Ii!==null&&yr(Ii)&&(Ii=null),Li!==null&&yr(Li)&&(Li=null),Gn.forEach(Jm),Fn.forEach(Jm)}function br(e,t){e.blockedOn===t&&(e.blockedOn=null,_l||(_l=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,cf)))}var xr=null;function eh(e){xr!==e&&(xr=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){xr===e&&(xr=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Vl(n||a)===null)continue;break}var l=la(a);l!==null&&(e.splice(t,3),t-=3,Vo(l,{pending:!0,data:s,method:a.method,action:n},n,s))}}))}function _n(e){function t(S){return br(S,e)}Bi!==null&&br(Bi,e),Ii!==null&&br(Ii,e),Li!==null&&br(Li,e),Gn.forEach(t),Fn.forEach(t);for(var a=0;a<zi.length;a++){var n=zi[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<zi.length&&(a=zi[0],a.blockedOn===null);)Zm(a),a.blockedOn===null&&zi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var s=a[n],l=a[n+1],u=s[ct]||null;if(typeof l=="function")u||eh(a);else if(u){var b=null;if(l&&l.hasAttribute("formAction")){if(s=l,u=l[ct]||null)b=u.formAction;else if(Vl(s)!==null)continue}else b=u.action;typeof b=="function"?a[n+1]=b:(a.splice(n,3),n-=3),eh(a)}}}function ql(e){this._internalRoot=e}vr.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,n=kt();Qm(a,n,e,t,null,null)},vr.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qm(e.current,2,null,e,null,null),tr(),t[ra]=null}};function vr(e){this._internalRoot=e}vr.prototype.unstable_scheduleHydration=function(e){if(e){var t=yc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<zi.length&&t!==0&&t<zi[a].priority;a++);zi.splice(a,0,e),a===0&&Zm(e)}};var th=r.version;if(th!=="19.1.1")throw Error(c(527,th,"19.1.1"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=g(t),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var df={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wr.isDisabled&&wr.supportsFiber)try{Wa=wr.inject(df),gt=wr}catch{}}return Un.createRoot=function(e,t){if(!h(e))throw Error(c(299));var a=!1,n="",s=yu,l=bu,u=xu,b=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(u=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=Um(e,1,!1,null,null,a,n,s,l,u,b,null),e[ra]=t.current,Nl(e),new ql(t)},Un.hydrateRoot=function(e,t,a){if(!h(e))throw Error(c(299));var n=!1,s="",l=yu,u=bu,b=xu,S=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(l=a.onUncaughtError),a.onCaughtError!==void 0&&(u=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),t=Um(e,1,!0,t,a??null,n,s,l,u,b,S,H),t.context=Wm(null),a=t.current,n=kt(),n=Br(n),s=vi(n),s.callback=null,wi(a,s,n),a=n,t.current.lanes=a,$a(t,a),$t(t),e[ra]=t.current,Nl(e),new vr(t)},Un.version="19.1.1",Un}var uh;function vf(){if(uh)return Ql.exports;uh=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(r){console.error(r)}}return o(),Ql.exports=xf(),Ql.exports}var wf=vf();const kf=xh(wf);/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mh="popstate";function Cf(o={}){function r(h,y){let{pathname:w="/",search:x="",hash:g=""}=na(h.location.hash.substring(1));return!w.startsWith("/")&&!w.startsWith(".")&&(w="/"+w),tc("",{pathname:w,search:x,hash:g},y.state&&y.state.usr||null,y.state&&y.state.key||"default")}function d(h,y){let w=h.document.querySelector("base"),x="";if(w&&w.getAttribute("href")){let g=h.location.href,f=g.indexOf("#");x=f===-1?g:g.slice(0,f)}return x+"#"+(typeof y=="string"?y:Kn(y))}function c(h,y){Ft(h.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(y)})`)}return Sf(r,d,c,o)}function Be(o,r){if(o===!1||o===null||typeof o>"u")throw new Error(r)}function Ft(o,r){if(!o){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Af(){return Math.random().toString(36).substring(2,10)}function hh(o,r){return{usr:o.state,key:o.key,idx:r}}function tc(o,r,d=null,c){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof r=="string"?na(r):r,state:d,key:r&&r.key||c||Af()}}function Kn({pathname:o="/",search:r="",hash:d=""}){return r&&r!=="?"&&(o+=r.charAt(0)==="?"?r:"?"+r),d&&d!=="#"&&(o+=d.charAt(0)==="#"?d:"#"+d),o}function na(o){let r={};if(o){let d=o.indexOf("#");d>=0&&(r.hash=o.substring(d),o=o.substring(0,d));let c=o.indexOf("?");c>=0&&(r.search=o.substring(c),o=o.substring(0,c)),o&&(r.pathname=o)}return r}function Sf(o,r,d,c={}){let{window:h=document.defaultView,v5Compat:y=!1}=c,w=h.history,x="POP",g=null,f=k();f==null&&(f=0,w.replaceState({...w.state,idx:f},""));function k(){return(w.state||{idx:null}).idx}function E(){x="POP";let Z=k(),q=Z==null?null:Z-f;f=Z,g&&g({action:x,location:X.location,delta:q})}function j(Z,q){x="PUSH";let se=tc(X.location,Z,q);d&&d(se,Z),f=k()+1;let te=hh(se,f),J=X.createHref(se);try{w.pushState(te,"",J)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;h.location.assign(J)}y&&g&&g({action:x,location:X.location,delta:1})}function A(Z,q){x="REPLACE";let se=tc(X.location,Z,q);d&&d(se,Z),f=k();let te=hh(se,f),J=X.createHref(se);w.replaceState(te,"",J),y&&g&&g({action:x,location:X.location,delta:0})}function L(Z){return Nf(Z)}let X={get action(){return x},get location(){return o(h,w)},listen(Z){if(g)throw new Error("A history only accepts one active listener");return h.addEventListener(mh,E),g=Z,()=>{h.removeEventListener(mh,E),g=null}},createHref(Z){return r(h,Z)},createURL:L,encodeLocation(Z){let q=L(Z);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:j,replace:A,go(Z){return w.go(Z)}};return X}function Nf(o,r=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Be(d,"No window.location.(origin|href) available to create URL");let c=typeof o=="string"?o:Kn(o);return c=c.replace(/ $/,"%20"),!r&&c.startsWith("//")&&(c=d+c),new URL(c,d)}function wh(o,r,d="/"){return jf(o,r,d,!1)}function jf(o,r,d,c){let h=typeof r=="string"?na(r):r,y=mi(h.pathname||"/",d);if(y==null)return null;let w=kh(o);Ef(w);let x=null;for(let g=0;x==null&&g<w.length;++g){let f=Of(y);x=zf(w[g],f,c)}return x}function kh(o,r=[],d=[],c="",h=!1){let y=(w,x,g=h,f)=>{let k={relativePath:f===void 0?w.path||"":f,caseSensitive:w.caseSensitive===!0,childrenIndex:x,route:w};if(k.relativePath.startsWith("/")){if(!k.relativePath.startsWith(c)&&g)return;Be(k.relativePath.startsWith(c),`Absolute route path "${k.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(c.length)}let E=ui([c,k.relativePath]),j=d.concat(k);w.children&&w.children.length>0&&(Be(w.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),kh(w.children,r,j,E,g)),!(w.path==null&&!w.index)&&r.push({path:E,score:If(E,w.index),routesMeta:j})};return o.forEach((w,x)=>{if(w.path===""||!w.path?.includes("?"))y(w,x);else for(let g of Ch(w.path))y(w,x,!0,g)}),r}function Ch(o){let r=o.split("/");if(r.length===0)return[];let[d,...c]=r,h=d.endsWith("?"),y=d.replace(/\?$/,"");if(c.length===0)return h?[y,""]:[y];let w=Ch(c.join("/")),x=[];return x.push(...w.map(g=>g===""?y:[y,g].join("/"))),h&&x.push(...w),x.map(g=>o.startsWith("/")&&g===""?"/":g)}function Ef(o){o.sort((r,d)=>r.score!==d.score?d.score-r.score:Lf(r.routesMeta.map(c=>c.childrenIndex),d.routesMeta.map(c=>c.childrenIndex)))}var Df=/^:[\w-]+$/,Tf=3,Mf=2,Rf=1,Pf=10,Bf=-2,ph=o=>o==="*";function If(o,r){let d=o.split("/"),c=d.length;return d.some(ph)&&(c+=Bf),r&&(c+=Mf),d.filter(h=>!ph(h)).reduce((h,y)=>h+(Df.test(y)?Tf:y===""?Rf:Pf),c)}function Lf(o,r){return o.length===r.length&&o.slice(0,-1).every((c,h)=>c===r[h])?o[o.length-1]-r[r.length-1]:0}function zf(o,r,d=!1){let{routesMeta:c}=o,h={},y="/",w=[];for(let x=0;x<c.length;++x){let g=c[x],f=x===c.length-1,k=y==="/"?r:r.slice(y.length)||"/",E=Nr({path:g.relativePath,caseSensitive:g.caseSensitive,end:f},k),j=g.route;if(!E&&f&&d&&!c[c.length-1].route.index&&(E=Nr({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},k)),!E)return null;Object.assign(h,E.params),w.push({params:h,pathname:ui([y,E.pathname]),pathnameBase:_f(ui([y,E.pathnameBase])),route:j}),E.pathnameBase!=="/"&&(y=ui([y,E.pathnameBase]))}return w}function Nr(o,r){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[d,c]=Hf(o.path,o.caseSensitive,o.end),h=r.match(d);if(!h)return null;let y=h[0],w=y.replace(/(.)\/+$/,"$1"),x=h.slice(1);return{params:c.reduce((f,{paramName:k,isOptional:E},j)=>{if(k==="*"){let L=x[j]||"";w=y.slice(0,y.length-L.length).replace(/(.)\/+$/,"$1")}const A=x[j];return E&&!A?f[k]=void 0:f[k]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:y,pathnameBase:w,pattern:o}}function Hf(o,r=!1,d=!0){Ft(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let c=[],h="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,x,g)=>(c.push({paramName:x,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return o.endsWith("*")?(c.push({paramName:"*"}),h+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?h+="\\/*$":o!==""&&o!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,r?void 0:"i"),c]}function Of(o){try{return o.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ft(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),o}}function mi(o,r){if(r==="/")return o;if(!o.toLowerCase().startsWith(r.toLowerCase()))return null;let d=r.endsWith("/")?r.length-1:r.length,c=o.charAt(d);return c&&c!=="/"?null:o.slice(d)||"/"}function Gf(o,r="/"){let{pathname:d,search:c="",hash:h=""}=typeof o=="string"?na(o):o;return{pathname:d?d.startsWith("/")?d:Ff(d,r):r,search:qf(c),hash:Uf(h)}}function Ff(o,r){let d=r.replace(/\/+$/,"").split("/");return o.split("/").forEach(h=>{h===".."?d.length>1&&d.pop():h!=="."&&d.push(h)}),d.length>1?d.join("/"):"/"}function Yl(o,r,d,c){return`Cannot include a '${o}' character in a manually specified \`to.${r}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vf(o){return o.filter((r,d)=>d===0||r.route.path&&r.route.path.length>0)}function Ah(o){let r=Vf(o);return r.map((d,c)=>c===r.length-1?d.pathname:d.pathnameBase)}function Sh(o,r,d,c=!1){let h;typeof o=="string"?h=na(o):(h={...o},Be(!h.pathname||!h.pathname.includes("?"),Yl("?","pathname","search",h)),Be(!h.pathname||!h.pathname.includes("#"),Yl("#","pathname","hash",h)),Be(!h.search||!h.search.includes("#"),Yl("#","search","hash",h)));let y=o===""||h.pathname==="",w=y?"/":h.pathname,x;if(w==null)x=d;else{let E=r.length-1;if(!c&&w.startsWith("..")){let j=w.split("/");for(;j[0]==="..";)j.shift(),E-=1;h.pathname=j.join("/")}x=E>=0?r[E]:"/"}let g=Gf(h,x),f=w&&w!=="/"&&w.endsWith("/"),k=(y||w===".")&&d.endsWith("/");return!g.pathname.endsWith("/")&&(f||k)&&(g.pathname+="/"),g}var ui=o=>o.join("/").replace(/\/\/+/g,"/"),_f=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),qf=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,Uf=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Wf(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var Nh=["POST","PUT","PATCH","DELETE"];new Set(Nh);var Qf=["GET",...Nh];new Set(Qf);var Ua=p.createContext(null);Ua.displayName="DataRouter";var jr=p.createContext(null);jr.displayName="DataRouterState";p.createContext(!1);var jh=p.createContext({isTransitioning:!1});jh.displayName="ViewTransition";var $f=p.createContext(new Map);$f.displayName="Fetchers";var Kf=p.createContext(null);Kf.displayName="Await";var Kt=p.createContext(null);Kt.displayName="Navigation";var ns=p.createContext(null);ns.displayName="Location";var hi=p.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var sc=p.createContext(null);sc.displayName="RouteError";function Xf(o,{relative:r}={}){Be(ss(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:c}=p.useContext(Kt),{hash:h,pathname:y,search:w}=rs(o,{relative:r}),x=y;return d!=="/"&&(x=y==="/"?d:ui([d,y])),c.createHref({pathname:x,search:w,hash:h})}function ss(){return p.useContext(ns)!=null}function sa(){return Be(ss(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(ns).location}var Eh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dh(o){p.useContext(Kt).static||p.useLayoutEffect(o)}function Vt(){let{isDataRoute:o}=p.useContext(hi);return o?cy():Yf()}function Yf(){Be(ss(),"useNavigate() may be used only in the context of a <Router> component.");let o=p.useContext(Ua),{basename:r,navigator:d}=p.useContext(Kt),{matches:c}=p.useContext(hi),{pathname:h}=sa(),y=JSON.stringify(Ah(c)),w=p.useRef(!1);return Dh(()=>{w.current=!0}),p.useCallback((g,f={})=>{if(Ft(w.current,Eh),!w.current)return;if(typeof g=="number"){d.go(g);return}let k=Sh(g,JSON.parse(y),h,f.relative==="path");o==null&&r!=="/"&&(k.pathname=k.pathname==="/"?r:ui([r,k.pathname])),(f.replace?d.replace:d.push)(k,f.state,f)},[r,d,y,h,o])}p.createContext(null);function rs(o,{relative:r}={}){let{matches:d}=p.useContext(hi),{pathname:c}=sa(),h=JSON.stringify(Ah(d));return p.useMemo(()=>Sh(o,JSON.parse(h),c,r==="path"),[o,h,c,r])}function Zf(o,r){return Th(o,r)}function Th(o,r,d,c){Be(ss(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=p.useContext(Kt),{matches:y}=p.useContext(hi),w=y[y.length-1],x=w?w.params:{},g=w?w.pathname:"/",f=w?w.pathnameBase:"/",k=w&&w.route;{let q=k&&k.path||"";Mh(g,!k||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let E=sa(),j;if(r){let q=typeof r=="string"?na(r):r;Be(f==="/"||q.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${q.pathname}" was given in the \`location\` prop.`),j=q}else j=E;let A=j.pathname||"/",L=A;if(f!=="/"){let q=f.replace(/^\//,"").split("/");L="/"+A.replace(/^\//,"").split("/").slice(q.length).join("/")}let X=wh(o,{pathname:L});Ft(k||X!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Ft(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=ay(X&&X.map(q=>Object.assign({},q,{params:Object.assign({},x,q.params),pathname:ui([f,h.encodeLocation?h.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?f:ui([f,h.encodeLocation?h.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),y,d,c);return r&&Z?p.createElement(ns.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},Z):Z}function Jf(){let o=ly(),r=Wf(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),d=o instanceof Error?o.stack:null,c="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:c},y={padding:"2px 4px",backgroundColor:c},w=null;return console.error("Error handled by React Router default ErrorBoundary:",o),w=p.createElement(p.Fragment,null,p.createElement("p",null,"💿 Hey developer 👋"),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:y},"ErrorBoundary")," or"," ",p.createElement("code",{style:y},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},r),d?p.createElement("pre",{style:h},d):null,w)}var ey=p.createElement(Jf,null),ty=class extends p.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,r){return r.location!==o.location||r.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:r.error,location:r.location,revalidation:o.revalidation||r.revalidation}}componentDidCatch(o,r){console.error("React Router caught the following error during render",o,r)}render(){return this.state.error!==void 0?p.createElement(hi.Provider,{value:this.props.routeContext},p.createElement(sc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iy({routeContext:o,match:r,children:d}){let c=p.useContext(Ua);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(hi.Provider,{value:o},d)}function ay(o,r=[],d=null,c=null){if(o==null){if(!d)return null;if(d.errors)o=d.matches;else if(r.length===0&&!d.initialized&&d.matches.length>0)o=d.matches;else return null}let h=o,y=d?.errors;if(y!=null){let g=h.findIndex(f=>f.route.id&&y?.[f.route.id]!==void 0);Be(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),h=h.slice(0,Math.min(h.length,g+1))}let w=!1,x=-1;if(d)for(let g=0;g<h.length;g++){let f=h[g];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(x=g),f.route.id){let{loaderData:k,errors:E}=d,j=f.route.loader&&!k.hasOwnProperty(f.route.id)&&(!E||E[f.route.id]===void 0);if(f.route.lazy||j){w=!0,x>=0?h=h.slice(0,x+1):h=[h[0]];break}}}return h.reduceRight((g,f,k)=>{let E,j=!1,A=null,L=null;d&&(E=y&&f.route.id?y[f.route.id]:void 0,A=f.route.errorElement||ey,w&&(x<0&&k===0?(Mh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,L=null):x===k&&(j=!0,L=f.route.hydrateFallbackElement||null)));let X=r.concat(h.slice(0,k+1)),Z=()=>{let q;return E?q=A:j?q=L:f.route.Component?q=p.createElement(f.route.Component,null):f.route.element?q=f.route.element:q=g,p.createElement(iy,{match:f,routeContext:{outlet:g,matches:X,isDataRoute:d!=null},children:q})};return d&&(f.route.ErrorBoundary||f.route.errorElement||k===0)?p.createElement(ty,{location:d.location,revalidation:d.revalidation,component:A,error:E,children:Z(),routeContext:{outlet:null,matches:X,isDataRoute:!0}}):Z()},null)}function rc(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ny(o){let r=p.useContext(Ua);return Be(r,rc(o)),r}function sy(o){let r=p.useContext(jr);return Be(r,rc(o)),r}function ry(o){let r=p.useContext(hi);return Be(r,rc(o)),r}function oc(o){let r=ry(o),d=r.matches[r.matches.length-1];return Be(d.route.id,`${o} can only be used on routes that contain a unique "id"`),d.route.id}function oy(){return oc("useRouteId")}function ly(){let o=p.useContext(sc),r=sy("useRouteError"),d=oc("useRouteError");return o!==void 0?o:r.errors?.[d]}function cy(){let{router:o}=ny("useNavigate"),r=oc("useNavigate"),d=p.useRef(!1);return Dh(()=>{d.current=!0}),p.useCallback(async(h,y={})=>{Ft(d.current,Eh),d.current&&(typeof h=="number"?o.navigate(h):await o.navigate(h,{fromRouteId:r,...y}))},[o,r])}var gh={};function Mh(o,r,d){!r&&!gh[o]&&(gh[o]=!0,Ft(!1,d))}p.memo(dy);function dy({routes:o,future:r,state:d}){return Th(o,void 0,d,r)}function fe(o){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uy({basename:o="/",children:r=null,location:d,navigationType:c="POP",navigator:h,static:y=!1}){Be(!ss(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=o.replace(/^\/*/,"/"),x=p.useMemo(()=>({basename:w,navigator:h,static:y,future:{}}),[w,h,y]);typeof d=="string"&&(d=na(d));let{pathname:g="/",search:f="",hash:k="",state:E=null,key:j="default"}=d,A=p.useMemo(()=>{let L=mi(g,w);return L==null?null:{location:{pathname:L,search:f,hash:k,state:E,key:j},navigationType:c}},[w,g,f,k,E,j,c]);return Ft(A!=null,`<Router basename="${w}"> is not able to match the URL "${g}${f}${k}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:p.createElement(Kt.Provider,{value:x},p.createElement(ns.Provider,{children:r,value:A}))}function my({children:o,location:r}){return Zf(ic(o),r)}function ic(o,r=[]){let d=[];return p.Children.forEach(o,(c,h)=>{if(!p.isValidElement(c))return;let y=[...r,h];if(c.type===p.Fragment){d.push.apply(d,ic(c.props.children,y));return}Be(c.type===fe,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!c.props.index||!c.props.children,"An index route cannot have child routes.");let w={id:c.props.id||y.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(w.children=ic(c.props.children,y)),d.push(w)}),d}var Ar="get",Sr="application/x-www-form-urlencoded";function Er(o){return o!=null&&typeof o.tagName=="string"}function hy(o){return Er(o)&&o.tagName.toLowerCase()==="button"}function py(o){return Er(o)&&o.tagName.toLowerCase()==="form"}function gy(o){return Er(o)&&o.tagName.toLowerCase()==="input"}function fy(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function yy(o,r){return o.button===0&&(!r||r==="_self")&&!fy(o)}var kr=null;function by(){if(kr===null)try{new FormData(document.createElement("form"),0),kr=!1}catch{kr=!0}return kr}var xy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zl(o){return o!=null&&!xy.has(o)?(Ft(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sr}"`),null):o}function vy(o,r){let d,c,h,y,w;if(py(o)){let x=o.getAttribute("action");c=x?mi(x,r):null,d=o.getAttribute("method")||Ar,h=Zl(o.getAttribute("enctype"))||Sr,y=new FormData(o)}else if(hy(o)||gy(o)&&(o.type==="submit"||o.type==="image")){let x=o.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=o.getAttribute("formaction")||x.getAttribute("action");if(c=g?mi(g,r):null,d=o.getAttribute("formmethod")||x.getAttribute("method")||Ar,h=Zl(o.getAttribute("formenctype"))||Zl(x.getAttribute("enctype"))||Sr,y=new FormData(x,o),!by()){let{name:f,type:k,value:E}=o;if(k==="image"){let j=f?`${f}.`:"";y.append(`${j}x`,"0"),y.append(`${j}y`,"0")}else f&&y.append(f,E)}}else{if(Er(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=Ar,c=null,h=Sr,w=o}return y&&h==="text/plain"&&(w=y,y=void 0),{action:c,method:d.toLowerCase(),encType:h,formData:y,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lc(o,r){if(o===!1||o===null||typeof o>"u")throw new Error(r)}function wy(o,r,d){let c=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return c.pathname==="/"?c.pathname=`_root.${d}`:r&&mi(c.pathname,r)==="/"?c.pathname=`${r.replace(/\/$/,"")}/_root.${d}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${d}`,c}async function ky(o,r){if(o.id in r)return r[o.id];try{let d=await import(o.module);return r[o.id]=d,d}catch(d){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cy(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function Ay(o,r,d){let c=await Promise.all(o.map(async h=>{let y=r.routes[h.route.id];if(y){let w=await ky(y,d);return w.links?w.links():[]}return[]}));return Ey(c.flat(1).filter(Cy).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function fh(o,r,d,c,h,y){let w=(g,f)=>d[f]?g.route.id!==d[f].route.id:!0,x=(g,f)=>d[f].pathname!==g.pathname||d[f].route.path?.endsWith("*")&&d[f].params["*"]!==g.params["*"];return y==="assets"?r.filter((g,f)=>w(g,f)||x(g,f)):y==="data"?r.filter((g,f)=>{let k=c.routes[g.route.id];if(!k||!k.hasLoader)return!1;if(w(g,f)||x(g,f))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function Sy(o,r,{includeHydrateFallback:d}={}){return Ny(o.map(c=>{let h=r.routes[c.route.id];if(!h)return[];let y=[h.module];return h.clientActionModule&&(y=y.concat(h.clientActionModule)),h.clientLoaderModule&&(y=y.concat(h.clientLoaderModule)),d&&h.hydrateFallbackModule&&(y=y.concat(h.hydrateFallbackModule)),h.imports&&(y=y.concat(h.imports)),y}).flat(1))}function Ny(o){return[...new Set(o)]}function jy(o){let r={},d=Object.keys(o).sort();for(let c of d)r[c]=o[c];return r}function Ey(o,r){let d=new Set;return new Set(r),o.reduce((c,h)=>{let y=JSON.stringify(jy(h));return d.has(y)||(d.add(y),c.push({key:y,link:h})),c},[])}function Rh(){let o=p.useContext(Ua);return lc(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function Dy(){let o=p.useContext(jr);return lc(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var cc=p.createContext(void 0);cc.displayName="FrameworkContext";function Ph(){let o=p.useContext(cc);return lc(o,"You must render this element inside a <HydratedRouter> element"),o}function Ty(o,r){let d=p.useContext(cc),[c,h]=p.useState(!1),[y,w]=p.useState(!1),{onFocus:x,onBlur:g,onMouseEnter:f,onMouseLeave:k,onTouchStart:E}=r,j=p.useRef(null);p.useEffect(()=>{if(o==="render"&&w(!0),o==="viewport"){let X=q=>{q.forEach(se=>{w(se.isIntersecting)})},Z=new IntersectionObserver(X,{threshold:.5});return j.current&&Z.observe(j.current),()=>{Z.disconnect()}}},[o]),p.useEffect(()=>{if(c){let X=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(X)}}},[c]);let A=()=>{h(!0)},L=()=>{h(!1),w(!1)};return d?o!=="intent"?[y,j,{}]:[y,j,{onFocus:Wn(x,A),onBlur:Wn(g,L),onMouseEnter:Wn(f,A),onMouseLeave:Wn(k,L),onTouchStart:Wn(E,A)}]:[!1,j,{}]}function Wn(o,r){return d=>{o&&o(d),d.defaultPrevented||r(d)}}function My({page:o,...r}){let{router:d}=Rh(),c=p.useMemo(()=>wh(d.routes,o,d.basename),[d.routes,o,d.basename]);return c?p.createElement(Py,{page:o,matches:c,...r}):null}function Ry(o){let{manifest:r,routeModules:d}=Ph(),[c,h]=p.useState([]);return p.useEffect(()=>{let y=!1;return Ay(o,r,d).then(w=>{y||h(w)}),()=>{y=!0}},[o,r,d]),c}function Py({page:o,matches:r,...d}){let c=sa(),{manifest:h,routeModules:y}=Ph(),{basename:w}=Rh(),{loaderData:x,matches:g}=Dy(),f=p.useMemo(()=>fh(o,r,g,h,c,"data"),[o,r,g,h,c]),k=p.useMemo(()=>fh(o,r,g,h,c,"assets"),[o,r,g,h,c]),E=p.useMemo(()=>{if(o===c.pathname+c.search+c.hash)return[];let L=new Set,X=!1;if(r.forEach(q=>{let se=h.routes[q.route.id];!se||!se.hasLoader||(!f.some(te=>te.route.id===q.route.id)&&q.route.id in x&&y[q.route.id]?.shouldRevalidate||se.hasClientLoader?X=!0:L.add(q.route.id))}),L.size===0)return[];let Z=wy(o,w,"data");return X&&L.size>0&&Z.searchParams.set("_routes",r.filter(q=>L.has(q.route.id)).map(q=>q.route.id).join(",")),[Z.pathname+Z.search]},[w,x,c,h,f,r,o,y]),j=p.useMemo(()=>Sy(k,h),[k,h]),A=Ry(k);return p.createElement(p.Fragment,null,E.map(L=>p.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...d})),j.map(L=>p.createElement("link",{key:L,rel:"modulepreload",href:L,...d})),A.map(({key:L,link:X})=>p.createElement("link",{key:L,nonce:d.nonce,...X})))}function By(...o){return r=>{o.forEach(d=>{typeof d=="function"?d(r):d!=null&&(d.current=r)})}}var Bh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bh&&(window.__reactRouterVersion="7.8.1")}catch{}function Iy({basename:o,children:r,window:d}){let c=p.useRef();c.current==null&&(c.current=Cf({window:d,v5Compat:!0}));let h=c.current,[y,w]=p.useState({action:h.action,location:h.location}),x=p.useCallback(g=>{p.startTransition(()=>w(g))},[w]);return p.useLayoutEffect(()=>h.listen(x),[h,x]),p.createElement(uy,{basename:o,children:r,location:y.location,navigationType:y.action,navigator:h})}var Ih=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=p.forwardRef(function({onClick:r,discover:d="render",prefetch:c="none",relative:h,reloadDocument:y,replace:w,state:x,target:g,to:f,preventScrollReset:k,viewTransition:E,...j},A){let{basename:L}=p.useContext(Kt),X=typeof f=="string"&&Ih.test(f),Z,q=!1;if(typeof f=="string"&&X&&(Z=f,Bh))try{let R=new URL(window.location.href),ie=f.startsWith("//")?new URL(R.protocol+f):new URL(f),ue=mi(ie.pathname,L);ie.origin===R.origin&&ue!=null?f=ue+ie.search+ie.hash:q=!0}catch{Ft(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=Xf(f,{relative:h}),[te,J,K]=Ty(c,j),_=Oy(f,{replace:w,state:x,target:g,preventScrollReset:k,relative:h,viewTransition:E});function ae(R){r&&r(R),R.defaultPrevented||_(R)}let ee=p.createElement("a",{...j,...K,href:Z||se,onClick:q||y?r:ae,ref:By(A,J),target:g,"data-discover":!X&&d==="render"?"true":void 0});return te&&!X?p.createElement(p.Fragment,null,ee,p.createElement(My,{page:se})):ee});Ee.displayName="Link";var Ly=p.forwardRef(function({"aria-current":r="page",caseSensitive:d=!1,className:c="",end:h=!1,style:y,to:w,viewTransition:x,children:g,...f},k){let E=rs(w,{relative:f.relative}),j=sa(),A=p.useContext(jr),{navigator:L,basename:X}=p.useContext(Kt),Z=A!=null&&qy(E)&&x===!0,q=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,se=j.pathname,te=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;d||(se=se.toLowerCase(),te=te?te.toLowerCase():null,q=q.toLowerCase()),te&&X&&(te=mi(te,X)||te);const J=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let K=se===q||!h&&se.startsWith(q)&&se.charAt(J)==="/",_=te!=null&&(te===q||!h&&te.startsWith(q)&&te.charAt(q.length)==="/"),ae={isActive:K,isPending:_,isTransitioning:Z},ee=K?r:void 0,R;typeof c=="function"?R=c(ae):R=[c,K?"active":null,_?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let ie=typeof y=="function"?y(ae):y;return p.createElement(Ee,{...f,"aria-current":ee,className:R,ref:k,style:ie,to:w,viewTransition:x},typeof g=="function"?g(ae):g)});Ly.displayName="NavLink";var zy=p.forwardRef(({discover:o="render",fetcherKey:r,navigate:d,reloadDocument:c,replace:h,state:y,method:w=Ar,action:x,onSubmit:g,relative:f,preventScrollReset:k,viewTransition:E,...j},A)=>{let L=Vy(),X=_y(x,{relative:f}),Z=w.toLowerCase()==="get"?"get":"post",q=typeof x=="string"&&Ih.test(x),se=te=>{if(g&&g(te),te.defaultPrevented)return;te.preventDefault();let J=te.nativeEvent.submitter,K=J?.getAttribute("formmethod")||w;L(J||te.currentTarget,{fetcherKey:r,method:K,navigate:d,replace:h,state:y,relative:f,preventScrollReset:k,viewTransition:E})};return p.createElement("form",{ref:A,method:Z,action:X,onSubmit:c?g:se,...j,"data-discover":!q&&o==="render"?"true":void 0})});zy.displayName="Form";function Hy(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lh(o){let r=p.useContext(Ua);return Be(r,Hy(o)),r}function Oy(o,{target:r,replace:d,state:c,preventScrollReset:h,relative:y,viewTransition:w}={}){let x=Vt(),g=sa(),f=rs(o,{relative:y});return p.useCallback(k=>{if(yy(k,r)){k.preventDefault();let E=d!==void 0?d:Kn(g)===Kn(f);x(o,{replace:E,state:c,preventScrollReset:h,relative:y,viewTransition:w})}},[g,x,f,d,c,r,o,h,y,w])}var Gy=0,Fy=()=>`__${String(++Gy)}__`;function Vy(){let{router:o}=Lh("useSubmit"),{basename:r}=p.useContext(Kt),d=oy();return p.useCallback(async(c,h={})=>{let{action:y,method:w,encType:x,formData:g,body:f}=vy(c,r);if(h.navigate===!1){let k=h.fetcherKey||Fy();await o.fetch(k,d,h.action||y,{preventScrollReset:h.preventScrollReset,formData:g,body:f,formMethod:h.method||w,formEncType:h.encType||x,flushSync:h.flushSync})}else await o.navigate(h.action||y,{preventScrollReset:h.preventScrollReset,formData:g,body:f,formMethod:h.method||w,formEncType:h.encType||x,replace:h.replace,state:h.state,fromRouteId:d,flushSync:h.flushSync,viewTransition:h.viewTransition})},[o,r,d])}function _y(o,{relative:r}={}){let{basename:d}=p.useContext(Kt),c=p.useContext(hi);Be(c,"useFormAction must be used inside a RouteContext");let[h]=c.matches.slice(-1),y={...rs(o||".",{relative:r})},w=sa();if(o==null){y.search=w.search;let x=new URLSearchParams(y.search),g=x.getAll("index");if(g.some(k=>k==="")){x.delete("index"),g.filter(E=>E).forEach(E=>x.append("index",E));let k=x.toString();y.search=k?`?${k}`:""}}return(!o||o===".")&&h.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(y.pathname=y.pathname==="/"?d:ui([d,y.pathname])),Kn(y)}function qy(o,{relative:r}={}){let d=p.useContext(jh);Be(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Lh("useViewTransitionState"),h=rs(o,{relative:r});if(!d.isTransitioning)return!1;let y=mi(d.currentLocation.pathname,c)||d.currentLocation.pathname,w=mi(d.nextLocation.pathname,c)||d.nextLocation.pathname;return Nr(h.pathname,w)!=null||Nr(h.pathname,y)!=null}const Uy=[{key:"UKMLA",title:"UKMLA",desc:"High-yield SBAs aligned with the MLA blueprint."},{key:"PLAB",title:"PLAB",desc:"Targeted practice and explanations to ace PLAB 1."},{key:"USMLE",title:"USMLE",desc:"Systems-based mastery for Step 1/2."}],Wy=[{title:"Plabable",href:"/plabable",blurb:"Exam-style stems, concise notes, smart filters."},{title:"Pastest",href:"#pastest",blurb:"Large bank, analytics, timed mocks."}],Qy=[{title:"B&B (Boards & Beyond)",href:"#bnb",blurb:"Concept-first videos + checks."},{title:"UWorld",href:"#uworld",blurb:"Gold-standard NBME-style Qs."}],zh=[{key:"cardiovascular",title:"Cardiovascular",blurb:"Ischemia, arrhythmias, valvular, heart failure."},{key:"respiratory",title:"Respiratory",blurb:"Asthma, COPD, pneumonia, ILD, PE."},{key:"gastrointestinal",title:"Gastrointestinal & Hepatology",blurb:"Liver, biliary, IBD, ulcers, pancreatitis, cirrhosis."},{key:"renal",title:"Renal/Genitourinary",blurb:"AKI, CKD, nephritic/nephrotic, stones."},{key:"endocrine",title:"Endocrine",blurb:"Diabetes, thyroid, adrenal, pituitary."},{key:"neurology",title:"Neurology",blurb:"Stroke, seizures, demyelination, neuropathies."},{key:"msk",title:"MSK/Rheumatology",blurb:"OA/RA, SLE, vasculitides, gout."},{key:"hematology",title:"Hematology",blurb:"Anemias, hemoglobinopathies, coagulopathies."},{key:"oncology",title:"Oncology",blurb:"Solid tumors, staging, chemo/radiation principles."},{key:"infectious",title:"Infectious Diseases",blurb:"Sepsis, TB, HIV, tropical, antimicrobials."},{key:"allergy-immunology",title:"Allergy & Immunology",blurb:"Anaphylaxis, urticaria, immunodeficiencies."},{key:"psychiatry",title:"Psychiatry",blurb:"Mood, anxiety, psychosis, substance use."},{key:"dermatology",title:"Dermatology",blurb:"Eczema, psoriasis, bullous, skin cancers."},{key:"reproductive",title:"Reproductive (Ob/Gyn)",blurb:"Obstetrics, contraception, infertility, STIs."},{key:"pediatrics",title:"Pediatrics",blurb:"Congenital, infections, development."},{key:"ophthalmology",title:"Ophthalmology",blurb:"Red eye, glaucoma, cataract, retinal disease."},{key:"ent",title:"ENT (Otolaryngology)",blurb:"Otitis, sinusitis, epistaxis, head & neck masses."},{key:"geriatrics",title:"Geriatrics",blurb:"Falls, frailty, delirium, polypharmacy."},{key:"emergency",title:"Emergency Medicine",blurb:"Resuscitation, trauma, toxidromes, ACS."},{key:"toxicology",title:"Toxicology",blurb:"Overdose management, antidotes, toxidromes."},{key:"palliative",title:"Palliative Care",blurb:"Symptom control, EOL discussions, ethics."}];function Jl({heading:o,subtitle:r,options:d}){return i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 mb-3",children:[i.jsx("h4",{className:"text-xl md:text-2xl font-bold text-slate-900",children:o}),i.jsx("p",{className:"text-sm text-slate-600",children:r})]}),i.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:d.map(c=>i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"p-5 flex items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-lg text-slate-900",children:c.title}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:c.blurb})]}),c.href.startsWith("/")?i.jsxs(Ee,{to:c.href,className:"inline-flex items-center gap-2 rounded-xl px-4 py-2 font-bold bg-gradient-to-r from-emerald-400 to-sky-400 text-emerald-950 shadow",children:["Open ",i.jsx("span",{children:"→"})]}):i.jsxs("a",{href:c.href,className:"inline-flex items-center gap-2 rounded-xl px-4 py-2 font-bold bg-gradient-to-r from-emerald-400 to-sky-400 text-emerald-950 shadow",children:["Open ",i.jsx("span",{children:"→"})]})]})},c.title))})]})}function ec({title:o,blurb:r}){return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:o}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:r})]})}function $y({system:o}){return i.jsx("div",{className:"group rounded-2xl border border-slate-200 bg-white shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"p-5 flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-slate-900",children:o.title}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:o.blurb})]}),i.jsxs(Ee,{to:`/diseases/${o.key}`,className:"shrink-0 inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-bold bg-gradient-to-r from-emerald-400 to-sky-400 text-emerald-950 shadow",children:["Browse ",i.jsx("span",{children:"→"})]})]})})}function Ky(){const[o,r]=p.useState(null),d=p.useMemo(()=>new Date().getFullYear(),[]),c=p.useCallback(h=>{if(typeof document>"u")return;const y=document.getElementById(h);y&&y.scrollIntoView({behavior:"smooth",block:"start"})},[]);return i.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-50 backdrop-blur bg-white/80 border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-emerald-300 to-sky-400 shadow-sm flex items-center justify-center text-emerald-950 font-extrabold",children:"MW"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xl font-extrabold tracking-tight",children:"Mediwise"}),i.jsx("p",{className:"text-xs text-slate-500 -mt-0.5",children:"Study smarter. Score higher."})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm text-slate-600",children:[i.jsx("a",{href:"#exams",className:"hover:text-slate-900 transition",children:"Exams"}),i.jsx("a",{href:"#diseases",className:"hover:text-slate-900 transition",children:"Diseases"}),i.jsx("a",{href:"#why",className:"hover:text-slate-900 transition",children:"Why Mediwise"}),i.jsx("a",{href:"#contact",className:"hover:text-slate-900 transition",children:"Contact"})]})]})}),i.jsxs("section",{className:"relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(80rem_40rem_at_20%_-10%,rgba(16,185,129,0.08),transparent_60%),radial-gradient(60rem_30rem_at_80%_10%,rgba(56,189,248,0.08),transparent_60%)]"}),i.jsxs("div",{className:"relative mx-auto max-w-7xl px-4 py-16 md:py-20",children:[i.jsxs("h1",{className:"text-4xl md:text-6xl font-black leading-tighter tracking-tight max-w-3xl",children:["Master your exam with a"," ",i.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 via-teal-600 to-sky-600",children:"wise"})," ","plan."]}),i.jsx("p",{className:"mt-5 text-lg md:text-xl text-slate-700 max-w-3xl",children:"Curated question banks for UKMLA, PLAB, and USMLE—organized, beautiful, and laser-focused on exam-day performance."}),i.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[i.jsx("span",{className:"border border-emerald-200 bg-emerald-50 text-emerald-700 rounded-full py-1 px-3 text-sm",children:"Green / Blue Theme"}),i.jsx("span",{className:"border border-sky-200 bg-sky-50 text-sky-700 rounded-full py-1 px-3 text-sm",children:"View-Only • No Login"}),i.jsx("span",{className:"border border-slate-200 bg-white text-slate-700 rounded-full py-1 px-3 text-sm",children:"High-Yield • Clean UI"})]}),i.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[i.jsx("button",{onClick:()=>c("exams"),className:"inline-flex items-center gap-2 rounded-2xl shadow bg-gradient-to-r from-emerald-400 to-sky-400 text-emerald-950 font-bold px-5 py-3",children:"Explore Question Banks →"}),i.jsx("button",{onClick:()=>c("diseases"),className:"inline-flex items-center gap-2 rounded-2xl shadow bg-white border border-slate-200 text-slate-800 font-bold px-5 py-3",children:"Learn Diseases →"})]})]})]}),i.jsxs("section",{id:"exams",className:"mx-auto max-w-7xl px-4 pb-14",children:[i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold",children:"Choose your exam"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Click a card to reveal provider options."})]}),i.jsx("div",{className:"mt-6 grid md:grid-cols-3 gap-5",children:Uy.map(h=>i.jsx("div",{onClick:()=>r(h.key),className:["group cursor-pointer rounded-2xl border border-slate-200 bg-white shadow-sm hover:shadow-md",o===h.key?"ring-2 ring-emerald-400/60":""].join(" "),children:i.jsxs("div",{className:"p-5 flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-semibold",children:h.title}),i.jsx("p",{className:"text-slate-600 mt-1",children:h.desc})]}),i.jsx("button",{className:"rounded-xl bg-slate-100 hover:bg-slate-200 border border-slate-300 text-slate-700 px-3 py-2 text-sm",children:o===h.key?"Selected":"Select"})]})},h.key))}),i.jsxs("div",{className:"mt-8 space-y-6",children:[o==="UKMLA"&&i.jsx(Jl,{heading:"UKMLA Question Bank",subtitle:"Mapped to the MLA content map with SBAs and practical clinical scenarios.",options:[{title:"Explore UKMLA Bank",href:"#ukmla",blurb:"Blueprint-aligned practice sets and explanations."}]}),o==="PLAB"&&i.jsx(Jl,{heading:"PLAB Providers",subtitle:"Pick your preferred platform and start practicing.",options:Wy}),o==="USMLE"&&i.jsx(Jl,{heading:"USMLE Providers",subtitle:"Choose a resource that fits your study style.",options:Qy})]})]}),i.jsxs("section",{id:"diseases",className:"mx-auto max-w-7xl px-4 pb-16",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold",children:"Diseases by System"}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Choose a body system to browse high-yield disease summaries and differentials."})]}),i.jsx(Xy,{})]}),i.jsx("div",{className:"mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-5",children:zh.map(h=>i.jsx($y,{system:h},h.key))})]}),i.jsx("section",{id:"why",className:"mx-auto max-w-7xl px-4 pb-20",children:i.jsxs("div",{className:"rounded-3xl p-8 md:p-10 bg-white border border-slate-200 shadow-sm",children:[i.jsx("h3",{className:"text-2xl md:text-3xl font-extrabold",children:"Why Mediwise?"}),i.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-6",children:[i.jsx(ec,{title:"Organized & Aesthetic",blurb:"Clutter-free layout with smooth spacing for focus."}),i.jsx(ec,{title:"High-Yield Focus",blurb:"Mapped to exam blueprints—no fluff, just what moves the needle."}),i.jsx(ec,{title:"Green/Blue Accents",blurb:"A calm yet energizing palette used sparingly on white."})]})]})}),i.jsx("footer",{id:"contact",className:"border-t border-slate-200 bg-white",children:i.jsx("div",{className:"mx-auto max-w-7xl px-4 py-10",children:i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"font-semibold",children:"Mediwise"}),i.jsxs("p",{className:"text-sm text-slate-600",children:["For feedback or partnerships, email"," ",i.jsx("a",{className:"underline underline-offset-4 text-sky-700",href:"mailto:hello@mediwise.app",children:"hello@mediwise.app"})]})]}),i.jsxs("div",{className:"md:text-right text-sm text-slate-600",children:["© ",d," Mediwise. All rights reserved."]})]})})})]})}function Xy(){const[o,r]=p.useState(""),d=vh.useMemo(()=>{const c=o.trim().toLowerCase();return c?zh.filter(h=>h.title.toLowerCase().includes(c)||h.key.includes(c)).slice(0,5):[]},[o]);return i.jsxs("div",{className:"w-full md:w-80",children:[i.jsx("label",{className:"sr-only",htmlFor:"system-search",children:"Search systems"}),i.jsx("input",{id:"system-search",value:o,onChange:c=>r(c.target.value),placeholder:"Search systems...",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60"}),o&&i.jsx("div",{className:"mt-2 rounded-2xl border border-slate-200 bg-white shadow-sm divide-y",children:d.length===0?i.jsx("div",{className:"p-3 text-sm text-slate-500",children:"No matches."}):d.map(c=>i.jsx(Ee,{to:`/diseases/${c.key}`,className:"block p-3 text-sm hover:bg-slate-50",children:c.title},c.key))})]})}const Yy=["Acute & emergency","Cancer","Cardiovascular","Child health","Clinical haematology","Clinical imaging","Dermatology","Ear, nose & throat (ENT)","Endocrine & metabolic","Gastrointestinal (incl. liver)","General practice & primary healthcare","Infection","Medicine of older adult","Mental health","Musculoskeletal (incl. trauma, orthopaedics, rheumatology)","Neurosciences (incl. neurosurgery)","Obstetrics & gynaecology","Ophthalmology","Palliative & end-of-life care","Perioperative medicine & anaesthesia","Renal & urology","Respiratory (incl. thoracic surgery)","Sexual health","Surgery (general, plastic, breast, OMFS, transplantation)"];function Zy(){return i.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 backdrop-blur bg-white/80 border-b border-slate-200",children:i.jsx("div",{className:"mx-auto max-w-7xl px-4 py-3 flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ee,{to:"/",className:"text-slate-600 hover:text-slate-900",children:"← Home"}),i.jsx("span",{className:"text-slate-400",children:"/"}),i.jsx("span",{className:"font-semibold",children:"PLAB"}),i.jsx("span",{className:"text-slate-400",children:"/"}),i.jsx("span",{children:"Plabable"})]})})}),i.jsxs("main",{className:"mx-auto max-w-7xl px-4 py-10",children:[i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Plabable Subjects"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Choose a subject to start studying."})]}),i.jsx("div",{className:"mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Yy.map(o=>{const r=o.toLowerCase().startsWith("acute & emergency")?"/plabable/acute-emergency":void 0,d=({children:c})=>i.jsx("div",{className:"text-left rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:c});return r?i.jsx(Ee,{to:r,className:"block",children:i.jsxs(d,{children:[i.jsx("p",{className:"font-semibold",children:o}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Study questions, notes, and quick reviews."})]})},o):i.jsx("button",{className:"text-left",children:i.jsxs(d,{children:[i.jsx("p",{className:"font-semibold",children:o}),i.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Coming soon."})]})},o)})})]})]})}const Oi=[{id:"EM-1155",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 20 year old man is rushed into the Emergency Department following a major road traffic accident. Upon examination, he exhibits significant difficulty in breathing and complains of intense chest pain. Vital signs show a systolic blood pressure of 70 mmHg and a pulse rate of 130 beats/minute. What is the SINGLE most appropriate initial action?",options:[{key:"A",text:"Antibiotics"},{key:"B",text:"Analgesia"},{key:"C",text:"High flow oxygen"},{key:"D",text:"Secure venous access"},{key:"E",text:"Refer to surgeon"}],correct:"C",explanation_plabable:["In this question, the examiners want you to know the basics of life-threatening emergencies. ABC — airway, breathing, circulation should always be addressed first.","This patient is in shock. In reality, high flow oxygen, securing venous access and analgesia would all be done simultaneously. But for the purpose of the exam, we follow NHS-style priorities: secure the airway and give oxygen first. Thus, ‘High flow oxygen’ is the best single initial action."],explanation_detail:["Primary survey principles (DRABC) take precedence in the multi-trauma patient: ensure a patent airway and adequate oxygenation before circulation interventions. Profound hypotension with tachycardia is consistent with shock; immediate high-flow oxygen improves tissue delivery and buys time for definitive management."]},{id:"CA-2221",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",image:"/ecg-pe.png",stem:"A 35 year old woman presents to the Emergency Department with sudden onset of shortness of breath and pleuritic chest pain. She describes feeling breathless over the past hour and denies any history of fever or cough. Her symptoms began while she was sitting at her desk at work. She has no significant past medical history. On examination, she appears tachypnoeic (RR 26). Her oxygen saturation is 91% on room air. Her pulse is 110 beats per minute and regular, and her blood pressure is 110/70 mmHg. ECG is seen below. What is the most likely diagnosis?",options:[{key:"A",text:"Acute myocardial infarction"},{key:"B",text:"Anxiety attack"},{key:"C",text:"Aortic dissection"},{key:"D",text:"Pericarditis"},{key:"E",text:"Pulmonary embolism"}],correct:"E",explanation_plabable:["The presentation of sudden onset shortness of breath and pleuritic chest pain, coupled with tachypnoea (respiratory rate of 26), hypoxia (oxygen saturation of 91% on room air), and tachycardia (pulse of 110 beats per minute) is highly suggestive of a pulmonary embolism (PE).","The ECG shows a right bundle branch block (RBBB) which can be associated with a PE. Even if a right bundle branch block (RBBB) is not evident on the ECG, the absence of ST elevation in a 35 year old woman should still raise suspicion for a pulmonary embolism (PE). Myocardial infarctions (MIs) are relatively uncommon in young individuals without significant cardiovascular risk factors.","Anxiety could cause hyperventilation but would not typically result in hypoxia.","Plabable tip: Not all exam questions on pulmonary embolism (PE) will present with the classic or textbook features (e.g. recent surgery, long-haul flights, active cancer, use of combined oral contraception, or a prior history of deep vein thrombosis (DVT))."],explanation_detail:["Why PE fits best: sudden pleuritic chest pain + acute dyspnoea with tachycardia, tachypnoea and resting hypoxaemia are classic for pulmonary embolism. Normal BP and regular pulse suggest submassive PE rather than massive PE (no persistent hypotension).","ECG in PE: often non-specific but can show sinus tachycardia (commonest), right heart strain patterns—RBBB (complete or incomplete), T-wave inversions V1–V4, right axis deviation, and occasionally S1Q3T3. The provided tracing demonstrates features consistent with right ventricular strain rather than ischaemic ST-segment elevation.","Why other options are less likely: MI typically causes crushing central pain, risk factors, and ST-segment changes; pericarditis produces pleuritic pain classically better when leaning forward with diffuse ST elevation and PR depression; aortic dissection causes tearing pain radiating to the back with pulse/BP differentials; panic/anxiety may cause tachypnoea but not true hypoxaemia.","Initial ED approach: assess stability (ABCs). Give oxygen to target SpO₂ ≥94% (or ≥90% if COPD), establish IV access and send labs including D-dimer if pre-test probability is low/intermediate. Calculate a Wells score (e.g., signs of DVT, HR >100, recent immob/surgery, haemoptysis, cancer, alternative diagnosis less likely). High probability or positive D-dimer → proceed to CTPA. If CTPA contraindicated (e.g., contrast allergy, pregnancy) use V/Q scan. Consider bedside leg ultrasound if DVT suspected.","Treatment: haemodynamically stable PE → prompt anticoagulation (e.g., LMWH or DOAC per local guidance). Haemodynamically unstable (massive) PE → thrombolysis is indicated unless contraindicated; consider surgical or catheter-directed therapy if lysis is contraindicated/unsuccessful. Provide analgesia for pleuritic pain and treat precipitating factors.","Prognosis & follow-up: risk-stratify (PESI/sPESI), screen for provoking factors (recent immobility, OCP, malignancy); typical anticoagulation duration is 3 months if provoked, longer if unprovoked or with persistent risk. Educate on recurrence signs and when to seek care."]},{id:"SS-0003",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"An 18 month old boy accidentally pulled a cup of hot tea off a high table. The hot liquid splashed over him, and he now presents with a partial thickness burn covering 6% of his total body surface area (TBSA), localised to his chest. What is the best treatment for him?",options:[{key:"A",text:"IV crystalloids"},{key:"B",text:"IV colloids"},{key:"C",text:"No need for IV treatment"},{key:"D",text:"IV dextrose bolus"},{key:"E",text:"IV albumin infusion"}],correct:"C",explanation_plabable:["Any child with more than <mark>10% of the total body surface area (TBSA)</mark> burned requires fluid replacement. Here, there is only <strong>6%</strong>.","Further reading: <a class='underline text-purple-700' href='http://patient.info/doctor/burns-assessment-and-management' target='_blank' rel='noreferrer'>patient.info — Burns: assessment & management</a>."],explanation_detail:["<strong>Why C is correct:</strong> This is a scald in an <em>18-month-old</em> with a <em>partial-thickness</em> burn of <strong>6% TBSA</strong>, confined to the chest. In children, formal IV fluid <mark>resuscitation is generally started when TBSA ≥10%</mark> (adults ≥15%). Below these thresholds, manage with oral fluids, analgesia and wound care; monitor clinically rather than reflex IV therapy.","<strong>Initial management (NICE-aligned first aid):</strong> Cool the burn under <em>cool running water</em> for 20 minutes (ideally within 3 hours). Remove clothing/jewellery. <strong>Do not use ice</strong> or creams. Cover with <em>cling film</em> or a non-adherent sterile dressing. Give weight-appropriate analgesia (paracetamol/ibuprofen). Keep warm to avoid hypothermia. Check <strong>tetanus</strong> status.","<strong>Assessment points:</strong> Estimate TBSA using the <em>Lund & Browder</em> chart in children (or the child’s palm incl. fingers ≈ <strong>1% TBSA</strong>). Determine depth (superficial ↔ full thickness). Assess ABCs and <strong>consider non-accidental injury</strong> if history/pattern is atypical.","<strong>When to give IV fluids:</strong> Start IV crystalloid (e.g., Hartmann’s) when <mark>TBSA ≥10% in children</mark> or if there are signs of shock/dehydration. Use a formula such as <em>Parkland</em> (4 mL × weight(kg) × %TBSA over 24 h — half in first 8 h) <em>plus paediatric maintenance fluids</em>. Target urine output ≈ <strong>1 mL/kg/h</strong>. <strong>Avoid colloids/albumin early</strong>; they’re not first-line for initial resuscitation. Dextrose bolus is for documented hypoglycaemia only.","<strong>Referral / escalation (typical UK criteria):</strong> Refer early to a burns service for <mark>≥5% TBSA in children</mark>, any full-thickness burn, burns of the <em>face, hands, feet, perineum/genitals, or major joints</em>, circumferential burns, electrical/chemical/inhalation injury, or safeguarding concerns.","<strong>Disposition & safety-netting:</strong> With <strong>6% TBSA</strong> and good oral intake, outpatient care is reasonable: clear return advice (reduced urine output, fever, increasing pain/redness suggesting infection, lethargy), review/dressing plan, and precise analgesia dosing."]},{id:"EM-0507",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 23 year old woman presents to the Emergency Department with symptoms of dizziness, sweating, and tinnitus. She admits to having ingested a large number of aspirin tablets approximately three hours prior to arrival. On examination, she is tachypnoeic with a respiratory rate of 30 breaths per minute and appears agitated. An arterial blood gas (ABG) analysis reveals the following:<br/><br/>pH 7.49 (7.35 – 7.45)<br/>PaO2 12.0 kPa (10–14)<br/>PaCO2 2.9 kPa (4.7–6.0)<br/>Bicarbonate 22 mmol/L (22–26)<br/><br/>Which of the following best describes the primary acid-base disturbance in this patient?",options:[{key:"A",text:"Respiratory acidosis"},{key:"B",text:"Respiratory acidosis with compensation"},{key:"C",text:"Respiratory alkalosis"},{key:"D",text:"Metabolic acidosis"},{key:"E",text:"Mixed respiratory alkalosis and metabolic acidosis"}],correct:"C",explanation_plabable:["The patient has an elevated pH indicating alkalosis. The low PaCO2 suggests a primary respiratory cause, as it reflects hyperventilation.","Aspirin overdose, or salicylate poisoning, has a characteristic pathophysiological effect on the acid-base balance of the body, which can sometimes lead to a mixed picture of disturbances.","In the early stages of salicylate (aspirin) toxicity, respiratory alkalosis often occurs first. This is due to direct stimulation of the respiratory center in the brain by salicylates, leading to increased breathing rate and depth (hyperventilation), which lowers carbon dioxide levels and raises the blood pH.","As the toxicity progresses, metabolic acidosis can develop. This occurs because salicylates interfere with cellular metabolism, leading to an accumulation of organic acids in the blood. The body's efforts to compensate for this acidosis can be overwhelmed, especially if the toxicity is severe or prolonged.","Therefore, it is important to monitor for any changes in her acid-base status. However, based on the provided ABG values, the primary disturbance at this time is respiratory alkalosis.","The patient's bicarbonate level is within the normal range at 22 mmol/L, suggesting that there is no significant metabolic compensation occurring at this stage."],explanation_detail:["<strong>Stepwise ABG interpretation</strong>: (1) pH 7.49 → <mark>alkalaemia</mark>. (2) PaCO₂ 2.9 kPa (low) → points toward a <strong>respiratory alkalosis</strong>. (3) HCO₃⁻ 22 mmol/L is ~normal → <em>little/no metabolic process</em> influencing the pH right now. Therefore, the <strong>primary disturbance = respiratory alkalosis</strong>.","<strong>Why salicylates do this</strong>: Salicylates stimulate the medullary respiratory centre → <em>hyperventilation</em> → <mark>↓PaCO₂</mark> → <strong>respiratory alkalosis</strong> (often within the first few hours). Later, salicylates uncouple oxidative phosphorylation and increase organic acid production, generating an <strong>anion gap metabolic acidosis</strong>. Many patients ultimately have a <em>mixed</em> picture, but <u>this ABG</u> still shows predominant respiratory alkalosis (normal HCO₃⁻, alkalemic pH).","<strong>Why the other options are wrong</strong>:","• <strong>A/B (respiratory acidosis)</strong>—would require <mark>high</mark> PaCO₂ with low/normal pH; here PaCO₂ is <em>low</em> and pH is high.<br/>• <strong>D (metabolic acidosis)</strong>—would show low HCO₃⁻ and acidemia (pH &lt; 7.35); neither is present.<br/>• <strong>E (mixed)</strong>—possible in salicylate toxicity, but you’d expect <em>alkalaemia with a <strong>low</strong> HCO₃⁻</em> (or a more equivocal pH). Here HCO₃⁻ is 22 mmol/L and the findings fit a <strong>primary respiratory alkalosis</strong> best.","<strong>Immediate management pearls in suspected salicylate overdose</strong>:","• <mark>ABCs</mark>, repeat vitals, IV access, glucose check (treat hypoglycaemia).<br/>• Measure salicylate level, VBG/ABG, U&amp;Es, glucose, lactate, LFTs; consider co-ingestants (e.g., paracetamol).<br/>• <strong>Avoid intubation if possible</strong>—loss of hyperventilation can rapidly worsen acidaemia and CNS salicylate entry. If intubation is unavoidable, <em>match pre-intubation minute ventilation</em> and use high rates to keep PaCO₂ low.<br/>• <strong>Alkalinise serum/urine</strong> with IV sodium bicarbonate when indicated (e.g., significant levels/symptoms): target serum pH 7.45–7.55 and urine pH &gt; 7.5; maintain potassium &gt; 4.0 mmol/L to enable urine alkalinisation.<br/>• <strong>Haemodialysis</strong> for severe toxicity (very high levels, severe acidosis, renal failure, pulmonary/cerebral oedema, refractory symptoms).<br/>• Activated charcoal if early and airway protected (per local toxicology guidance).","<strong>Exam takeaway</strong>: In early salicylate poisoning, think <mark>respiratory alkalosis</mark>. If a later ABG shows <em>low HCO₃⁻</em> with near-normal pH, suspect a <strong>mixed respiratory alkalosis + metabolic acidosis</strong>. Here, normal HCO₃⁻ and high pH make <strong>Respiratory alkalosis</strong> the best single answer."]},{id:"EM-3139",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 21 year old lady after a heavy bout of drinking last night comes to the emergency department with vomiting blood, feeling dizzy, and having intense abdominal pain. On examination, her limbs feel cold. She has a pulse of <strong>130 beats/minute</strong> and blood pressure of <strong>85/58 mmHg</strong>. After initial resuscitation with oxygen and fluids, she still continues to bleed and continues to vomit blood. <br/><br/><strong>What is the SINGLE next best step?</strong>",options:[{key:"A",text:"Clotting screen"},{key:"B",text:"Ultrasound"},{key:"C",text:"Computed tomography"},{key:"D",text:"Endoscopy"},{key:"E",text:"Intravenous omeprazole"}],correct:"D",explanation_plabable:["This is a classic presentation of Mallory-Weiss syndrome (MWS). It is characterised by upper gastrointestinal bleeding (UGIB) from mucosal lacerations in the upper gastrointestinal tract, usually at the gastro-oesophageal junction or gastric cardia.","Excessive alcohol ingestion is one of the main causes as prolonged or forceful bout of vomiting can cause a tear in the upper gastrointestinal tract.","Light-headedness and dizziness and features associated with the initial cause of the vomiting - eg, abdominal pain may be seen and are seen in this stem.","Resuscitation is a priority - maintain airway, provide high-flow oxygen, correct fluid losses by giving IV fluids. Intravenous blood can also be given in severe cases.","Haemodynamically unstable patients like in this stem should have endoscopy immediately after resuscitation. It is the primary diagnostic investigation and can be used to stop the bleeding.","Note proton pump inhibitor (PPI) use is not recommended prior to diagnosis by endoscopy. A Cochrane review found PPI use at this stage was not associated with a reduction in re-bleeding, need for surgery or mortality.","Reference:","<a class='underline text-purple-700' href='http://patient.info/doctor/mallory-weiss-syndrome-pro' target='_blank' rel='noreferrer'>http://patient.info/doctor/mallory-weiss-syndrome-pro</a>"],explanation_detail:["<strong>Why the answer is <mark>Endoscopy</mark>:</strong> She remains <em>haemodynamically unstable</em> (HR 130, BP 85/58) and is <em>still vomiting blood</em> after initial resuscitation. NICE CG141 (<em>Acute upper GI bleeding in over-16s</em>) recommends <mark>urgent endoscopy immediately after resuscitation in unstable patients with severe ongoing bleeding</mark>, both to diagnose the source and to deliver endoscopic haemostasis. Therefore, <strong>endoscopy</strong> is the single next best step.","<strong>Typical cause in this stem—Mallory–Weiss tear:</strong> A mucosal laceration at the <em>gastro-oesophageal junction</em> or <em>gastric cardia</em> after forceful retching, commonly precipitated by alcohol binges. Most tears stop spontaneously, but a subset bleed briskly and require endoscopic therapy (e.g., <em>adrenaline injection</em> plus a second modality such as <em>clips</em> or <em>thermal coagulation</em>).","<strong>Initial ED priorities (resuscitation) — ABC:</strong> Secure airway if ongoing haematemesis threatens aspiration; give high-flow oxygen, obtain two large-bore IV cannulae, draw blood (FBC, U&amp;Es, LFTs, group &amp; save/crossmatch ± coagulation profile), start IV crystalloids and activate massive haemorrhage protocols if needed. <em>Restrictive transfusion</em> strategy is recommended (generally Hb threshold around <strong>70 g/L</strong>, or <strong>80 g/L</strong> if ACS). Transfuse platelets if <strong>&lt;50 ×10⁹/L</strong> with active bleeding; correct coagulopathy (vitamin K, PCC for warfarin; specific reversal for DOACs where indicated).","<strong>Risk scoring:</strong> At first assessment, calculate the <em>Glasgow-Blatchford Score (GBS)</em> to stratify risk and need for admission/intervention. After endoscopy, use the <em>full Rockall score</em> to estimate re-bleeding/mortality. In this case, shock vital signs mandate admission and urgent endoscopy regardless of score.","<strong>Timing of endoscopy:</strong> NICE advises endoscopy <em>within 24 hours</em> for most suspected UGIB; <mark>sooner (immediate)</mark> after resuscitation if unstable or with continued haematemesis—this patient qualifies.","<strong>What happens at endoscopy (non-variceal UGIB):</strong> For actively bleeding non-variceal lesions, use <em>adrenaline</em> injection plus a <em>second modality</em> (mechanical clip or thermal coagulation) to secure haemostasis. For Mallory–Weiss tears, clips or thermal methods are commonly effective; banding can also be used. If endoscopic therapy fails, consider <em>interventional radiology</em> (embolisation) or <em>surgery</em>.","<strong>PPI timing:</strong> Do <mark>not</mark> start PPI <em>before</em> diagnostic endoscopy (no outcome benefit for re-bleeding, surgery or mortality). After endoscopic haemostasis for high-risk non-variceal lesions, start <strong>high-dose IV PPI</strong> (e.g., bolus + infusion for 72 h) then step down to oral. If a clean-based, low-risk lesion is found, routine PPI infusion is unnecessary.","<strong>Why the other options are wrong <em>as the next step</em>:</strong><br/>• <strong>A. Clotting screen</strong> — appropriate work-up but <em>should not delay</em> life-saving haemostasis when bleeding continues after resuscitation.<br/>• <strong>B. Ultrasound</strong> — not useful for diagnosing the source of UGIB or stopping the bleed.<br/>• <strong>C. CT</strong> — may be used if endoscopy and IR fail or diagnosis is uncertain, but it <em>doesn’t provide immediate haemostasis</em> and is not first line in active haematemesis.<br/>• <strong>E. IV omeprazole</strong> — <mark>not recommended prior to endoscopy</mark>; evidence (including Cochrane) shows no reduction in re-bleeding/need for surgery/mortality when given pre-diagnosis.","<strong>Differentials to keep in mind:</strong> <em>Variceal bleeding</em> (cirrhosis, stigmata of chronic liver disease) — give <strong>IV antibiotics</strong> and <strong>terlipressin</strong> early; endoscopic <em>band ligation</em> is preferred. <em>Peptic ulcer</em> (NSAIDs/H. pylori), <em>gastritis</em>, <em>Dieulafoy lesion</em>, <em>Boerhaave</em> (if severe chest/neck pain and mediastinal signs after vomiting).","<strong>Aftercare & disposition:</strong> Observe for re-bleeding (tachycardia, falling Hb, fresh haematemesis/melaena). Optimise analgesia and anti-emetics, treat alcohol-related issues, and plan follow-up. Use the <em>post-endoscopy Rockall</em> to decide ward vs higher level care.","<strong>Key exam takeaways:</strong> (1) <mark>Ongoing haematemesis + haemodynamic instability → urgent endoscopy after resuscitation</mark>. (2) Don’t give a pre-endoscopy PPI. (3) For non-variceal bleeds, adrenaline <em>plus</em> a second modality. (4) Risk-assess with GBS (pre-scope) and Rockall (post-scope)."]},{id:"EM-1023",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 58 year old woman presents to the Emergency Department with shortness of breath that started 12 hours ago. Her blood pressure is <strong>145/98 mmHg</strong>, heart rate is <strong>111 beats/minute</strong>, respiratory rate is <strong>23 breaths/minute</strong>, and oxygen saturation is <strong>92% on room air</strong>. Physical examination reveals a mildly distressed woman with tachypnoea. <br/><br/>What is the most appropriate <strong>initial investigation</strong>?",options:[{key:"A",text:"Immediate computed tomography pulmonary angiography (CTPA)"},{key:"B",text:"Echocardiogram"},{key:"C",text:"Creatine kinase"},{key:"D",text:"Lower limb venous Doppler ultrasound"},{key:"E",text:"Chest X-ray"}],correct:"E",explanation_plabable:["A chest X-ray is quick, widely available, and can provide crucial information on a range of potential issues including heart failure, pneumonia, pneumothorax and other causes of acute respiratory distress. Even if one suspects a pulmonary embolism, it would be prudent to perform a chest X-ray first to rule out other pathologies before proceeding with a CTPA."],explanation_detail:["<strong>Why E (Chest X-ray) is the best initial investigation:</strong> In an undifferentiated patient with <em>acute dyspnoea</em> and abnormal vitals (SpO₂ 92%, RR 23, HR 111), a <mark>portable chest radiograph</mark> is fast, widely available, low-radiation, and helps identify or exclude common life-threatening causes such as <strong>pneumonia</strong>, <strong>pulmonary oedema/heart failure</strong>, <strong>pneumothorax</strong>, large pleural effusion, or gross lung collapse. It also provides a baseline before further imaging and can reveal alternative diagnoses that would change the immediate plan.","<strong>What about suspected PE?</strong> CXR is <em>not diagnostic</em> for PE, but guidelines favour obtaining it early because it may explain hypoxaemia (e.g., consolidation, pneumothorax) and helps interpret/plan subsequent imaging. After CXR, if PE remains a concern, assess pre-test probability (e.g., Wells). <em>Low/intermediate</em> probability → D-dimer then CTPA if positive. <em>High</em> probability and haemodynamically stable → proceed to CTPA directly; if unstable, consider bedside echo for right-heart strain and treat empirically as per local protocol.","<strong>Why the other options are not the first step here:</strong><br/>• <strong>A. Immediate CTPA</strong> — appropriate only after clinical risk assessment or if high pre-test probability; as an <em>initial</em> test in undifferentiated dyspnoea it is premature, higher radiation/contrast risk, and may miss alternative diagnoses found on CXR.<br/>• <strong>B. Echocardiogram</strong> — useful for suspected acute heart failure, pericardial tamponade, or to look for RV strain in massive PE, but it is not the routine first investigation in a stable dyspnoeic patient.<br/>• <strong>C. Creatine kinase</strong> — CK is for myopathy/rhabdomyolysis or some cardiac workups but is not helpful in the immediate evaluation of dyspnoea.<br/>• <strong>D. Lower limb venous Doppler</strong> — may support a PE diagnosis if DVT is found, but it does not evaluate primary thoracic causes of dyspnoea and is not the first test in this presentation.","<strong>Initial ED bundle for undifferentiated dyspnoea (quick checklist):</strong> ABCs and continuous monitoring; pulse oximetry ± arterial/venous blood gas if needed; ECG; <mark>portable CXR</mark>; basic labs (FBC, U&amp;Es, CRP, troponin if chest pain/ischemia suspected); consider D-dimer guided by pre-test probability; bedside lung ultrasound if skilled operator available (can rapidly detect pneumothorax, B-lines in pulmonary oedema, consolidation, effusion).","<strong>Exam takeaway:</strong> When the stem asks for the <em>most appropriate initial investigation</em> for acute breathlessness without a definite diagnosis, choose the <strong>Chest X-ray</strong> first, then escalate testing according to the evolving differential."]},{id:"EM-2473",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 45 year old man is brought to the Emergency Department by ambulance following an intentional overdose of propranolol. He is drowsy and pale, and initial observations reveal a heart rate of 45 beats per minute and a blood pressure of 80/50 mmHg. The man reports feeling lightheaded, and examination shows cold peripheries with delayed capillary refill time. He was commenced on intravenous fluids en route. ECG shows sinus bradycardia without evidence of heart block. Which of the following is the most appropriate antidote?",options:[{key:"A",text:"Atropine"},{key:"B",text:"Calcium chloride"},{key:"C",text:"Glucagon"},{key:"D",text:"Insulin and glucose"},{key:"E",text:"Sodium bicarbonate"}],correct:"C",explanation_plabable:["Glucagon is the most appropriate antidote for beta-blocker overdose, as it increases heart rate and myocardial contractility through a mechanism independent of beta-adrenergic receptors.","Atropine is commonly used for bradycardia as it blocks vagal activity at the sinoatrial (SA) node, which can increase heart rate. It can be used first line here, but it is NOT considered an antidote."],explanation_detail:["Why glucagon: Propranolol blocks β1 receptors, reducing chronotropy/inotropy and causing hypotension and bradycardia. Glucagon activates its own receptors, increasing cAMP via a β-independent pathway to restore heart rate and contractility—hence the specific antidote.","Dosing (adult exam level): IV bolus 5–10 mg (or 50–150 micrograms/kg), repeat if needed; then infusion 2–5 mg/h titrated to effect. Monitor for nausea/vomiting, hyperglycaemia and hypokalaemia.","ED algorithm: ABCs, monitors, large-bore IV access; check glucose (β-blockers can cause hypoglycaemia). Consider activated charcoal if early and airway protected. If bradycardic/hypotensive: fluids → atropine (symptomatic, not antidote) → glucagon. If inadequate response, start high-dose insulin euglycaemia therapy (regular insulin 1 U/kg bolus, then 1–10 U/kg/h with dextrose; maintain K⁺ > 4). Add vasopressors as needed; consider lipid emulsion (lipophilic agents like propranolol), pacing, and ECMO for refractory shock.","Other options: Calcium chloride helps CCB toxicity more than β-blocker poisoning. Insulin/glucose is escalation therapy but not the specific antidote. Sodium bicarbonate is for QRS widening/ventricular arrhythmias (membrane-stabilising effect), not routine in isolated sinus bradycardia."]},{id:"CK-2900",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 12 year old comes into the Emergency Department with <strong>severe burns</strong> all over his body from a house fire. There is <strong>oropharyngeal swelling</strong> and <strong>soot in the mouth</strong>. He is in severe pain. <br/><br/>What is the <strong>SINGLE</strong> most appropriate management?",options:[{key:"A",text:"Refer to burn unit"},{key:"B",text:"Intravenous fluids"},{key:"C",text:"Intravenous antibiotic"},{key:"D",text:"Intravenous analgesia"},{key:"E",text:"Call a senior anaesthetist"}],correct:"E",explanation_plabable:["After major burns, If there is any evidence of impending airway obstruction (stridor, oropharyngeal swelling, call for senior ED help and a senior anaesthetist immediately. Urgent general anaesthesia and tracheal intubation may be life-saving.","Airway, breathing, and circulation — Always in this order","Smoke inhalation injury is a common cause of death in burn victims. Initial assessment may reveal no evidence of injury, but laryngeal oedema can develop suddenly and unexpectedly thus early intubation is warranted if there is evidence of inhalation injury.","Signs and symptoms of smoke inhalation injury","<ul class='list-disc ml-5'><li>Persistent cough</li><li>Stridor</li><li>Wheezing</li><li>Black sputum suggests excessive exposure to soot</li><li>Use of accessory muscles of respiration</li><li>Blistering or oedema of the oropharynx</li><li>Hypoxia or hypercapnia</li></ul>","Further reading:","<a class='underline text-purple-700' href='http://patient.info/doctor/inhalation-injury' target='_blank' rel='noreferrer'>http://patient.info/doctor/inhalation-injury</a>"],explanation_detail:["<strong>Why <mark>Call a senior anaesthetist</mark> is the best single step:</strong> The child has <em>oropharyngeal swelling</em> and <em>soot in the mouth</em> after an enclosed-space fire — classic red flags for <strong>impending airway obstruction</strong> from inhalational injury. Airway oedema can progress rapidly; attempts at late intubation may fail. Therefore, per ABC priorities and UK practice, <strong>early senior anaesthetic involvement for urgent RSI and tracheal intubation</strong> is potentially life-saving and supersedes fluids/analgesia/referral as the <em>immediate</em> step.","<strong>Key airway indicators for early intubation in burns/smoke inhalation:</strong> facial burns or singed nasal hairs; hoarseness/stridor; carbonaceous sputum or soot; oropharyngeal blisters/oedema; enclosed-space fire; progressive swelling; GCS reduction; hypoxia/hypercapnia. <em>Any of these in a child</em> should prompt <strong>senior airway help now</strong>.","<strong>Practical airway approach (ED):</strong> Prepare for <em>rapid sequence induction</em> with experienced anaesthetist; anticipate difficult view and choose a <strong>smaller ETT size</strong> due to swelling; have adjuncts/backup (video laryngoscope, bougie, supraglottic, front-of-neck access kit). Give <strong>100% oxygen</strong> via non-rebreather while setting up. Maintain cervical spine precautions if trauma suspected.","<strong>Concurrent priorities after calling anaesthetics (do not delay airway):</strong><br/>• <mark>High-flow O₂</mark> for potential carbon monoxide (CO) exposure; send co-oximetry if available. Consider <strong>hydroxocobalamin</strong> for suspected cyanide toxicity (soot + AMS + lactic acidosis).<br/>• Stop the burning process, remove constricting items, keep the child <strong>warm</strong> (hypothermia worsens outcomes). Cover burns with clean dry film/dressings; <em>no ice</em>.<br/>• Establish two IV lines (or IO) after airway is secure; draw labs (FBC, U&amp;Es, VBG/ABG with co-oximetry, lactate, carboxyhaemoglobin).","<strong>Fluids — when and how (children):</strong> After the airway is secured, calculate TBSA (Lund &amp; Browder chart). For children, start formal IV fluid resuscitation when <strong>TBSA ≥ 10%</strong> (adults ≥ 15%) or if there are signs of shock. Use a burn formula (e.g., Parkland <em>4 mL × weight(kg) × %TBSA</em> over 24 h) <em>plus paediatric maintenance</em>. Give half in the first 8 h from time of burn. Titrate to <strong>urine output ≈ 1 mL/kg/h</strong>; avoid over-resuscitation (risk of oedema/compartment syndrome).","<strong>Pain & wound care:</strong> Give <em>intravenous</em> analgesia (e.g., morphine titrated) once airway/ventilation are secured; consider ketamine if haemodynamically unstable and airway protected. Cover wounds with film; cleanse/debride later in specialised care. Check <strong>tetanus</strong> status.","<strong>When to involve the burns centre (children):</strong> <mark>All suspected inhalational injuries</mark>; ≥5% TBSA; any full-thickness burn; burns to face, hands, feet, genitalia, perineum or major joints; circumferential limb/torso burns; electrical/chemical burns; safeguarding concerns. Initiate early discussion even while stabilising.","<strong>Why the other options are not the single best next step:</strong><br/>• <strong>Refer to burn unit (A)</strong> — necessary, but <em>not</em> before the airway is secured; deterioration may occur en route.<br/>• <strong>IV fluids (B)</strong> — important after the airway; starting them <em>before</em> addressing impeding obstruction risks losing the airway.<br/>• <strong>IV antibiotic (C)</strong> — not indicated routinely in acute thermal burns without infection.<br/>• <strong>IV analgesia (D)</strong> — appropriate, but analgesia must not precede management of a threatened airway; opioids can depress respiration.","<strong>Exam takeaways:</strong> (1) In burns from a house fire with <mark>soot/oropharyngeal swelling/stridor</mark> → <strong>call senior anaesthetist; intubate early</strong>. (2) Give 100% O₂ and consider CO/cyanide. (3) Warm, cover, then fluids using paediatric thresholds/formulae. (4) Early burns-centre involvement and safeguarding assessment."]},{id:"EM-0241",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 4 year old girl is brought to the Emergency Department after pulling a kettle of boiling water onto herself. She has sustained a <strong>3% total body surface area</strong> burn across her chest. The affected area is red, blistered, and very painful. She is distressed, crying, and unable to tolerate assessment due to pain. She is haemodynamically stable. <strong>She does not have an IV line.</strong> <br/><br/>What is the most appropriate pain management?",options:[{key:"A",text:"Intranasal diamorphine"},{key:"B",text:"IV morphine"},{key:"C",text:"Rectal diclofenac"},{key:"D",text:"Oral paracetamol"},{key:"E",text:"Buccal midazolam"}],correct:"A",explanation_plabable:["This child has a superficial partial-thickness burn, as indicated by blistering, redness, and significant pain. She is highly distressed and unable to tolerate assessment, making intranasal diamorphine the most appropriate choice for rapid, effective pain relief. Intranasal diamorphine has a fast onset of action, is less invasive than IV opioids, and is well tolerated in young children.","IV morphine is also suitable but in this case, it is less ideal. While effective, it requires IV access, which may be difficult to achieve quickly in a distressed, crying child.","Oral paracetamol is insufficient here as the scenario describes a superficial partial-thickness burn with severe pain.","Further Reading:","https://www.nn.nhs.scot/cobis/wp-content/uploads/sites/9/2024/02/NSD610-006.15-Pa...","https://www.evelinalondon.nhs.uk/resources/our-services/hospital/south-thames-ret..."],explanation_detail:["<strong>Why <mark>Intranasal diamorphine</mark> is best here:</strong> The child has a <em>small TBSA (3%) superficial partial-thickness</em> scald but is <strong>very distressed</strong> and <strong>has no IV access</strong>. Intranasal (IN) opioid provides <mark>rapid, titratable analgesia</mark> without cannulation, which is ideal for painful burns in young children.","<strong>How to use it (ED practice, UK):</strong> Typical IN diamorphine dose <strong>0.1 mg/kg</strong> (max commonly 5 mg), delivered via mucosal atomiser, onset ~<em>5–10 min</em>. Reassess after 10 minutes; repeat small doses if needed. If diamorphine is unavailable, many EDs use <strong>IN fentanyl 1.5–2 micrograms/kg</strong> (max per local policy) with similar onset.","<strong>Why the other options are not first choice in this stem:</strong><br/>• <strong>IV morphine</strong>—effective, but requires cannulation; securing IV access in a crying 4-year-old with a painful burn <em>delays</em> timely analgesia.<br/>• <strong>Rectal diclofenac</strong>—NSAID route/absorption is unreliable in acute severe burn pain and provides <em>insufficient</em> relief as monotherapy; also avoid NSAIDs if dehydration/AKI risk.<br/>• <strong>Oral paracetamol</strong>—useful adjunct, but onset is slower and inadequate alone for severe partial-thickness burn pain.<br/>• <strong>Buccal midazolam</strong>—a sedative/anticonvulsant, <em>not an analgesic</em>; may worsen airway/respiratory status without treating pain.","<strong>Immediate burn care alongside analgesia:</strong> Cool the burn with <em>cool running water</em> for 20 minutes (if within ~3 hours), remove clothing/jewellery, avoid ice/creams. Cover with <strong>cling film</strong>/non-adherent dressing; keep child <strong>warm</strong> to prevent hypothermia. Check <strong>tetanus</strong> status.","<strong>Escalation/adjuncts:</strong> Add oral paracetamol and (if no contraindication) ibuprofen once the child can tolerate PO. If ongoing severe pain or wound care required, proceed to <em>IV opioids</em> once access is obtained or consider <strong>ketamine procedural sedation</strong> via a senior-led pathway.","<strong>When to involve a burns service:</strong> Children with ≥5% TBSA, any <em>full-thickness</em> burn, burns to face/hands/feet/genitals/perineum/major joints, circumferential burns, chemical/electrical/inhalational injury, suspicion of non-accidental injury, or concerns about pain control / dressing tolerance.","<strong>Exam takeaways:</strong> (1) Severe pain + no IV → choose a <mark>rapid intranasal opioid</mark>. (2) Paracetamol/NSAIDs are <em>adjuncts</em>, not primary therapy here. (3) Midazolam is <em>not</em> an analgesic."]},{id:"NE-1352",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 5 year old boy with a febrile convulsion lasting eight minutes. He has been given intravenous lorazepam to control his seizures. What is the SINGLE most likely side effect of intravenous lorazepam that is potentially life-threatening?",options:[{key:"A",text:"Amnesia"},{key:"B",text:"Anaphylactic shock"},{key:"C",text:"Respiratory depression"},{key:"D",text:"Bronchospasm"},{key:"E",text:"Cardiac arrhythmia"}],correct:"C",explanation_plabable:["Lorazepam is a benzodiazepine. Respiratory depression is a known effect of benzodiazepine overdose. Amnesia can occur as well, but it will not be life-threatening.","Side effects of benzodiazepines include:","<ul class='list-disc ml-5'><li>Sedation</li><li>Cognitive impairment</li><li>Respiratory depression</li><li>Hypotension</li><li>Anterograde amnesia</li></ul>"],explanation_detail:["<strong>Why <mark>Respiratory depression</mark> is the most likely life-threatening effect:</strong> Lorazepam is a <em>benzodiazepine</em> that enhances GABA<sub>A</sub>-mediated inhibition. At therapeutic/especially repeated doses it can <strong>reduce ventilatory drive</strong> and <strong>decrease upper-airway tone</strong>, causing hypoventilation/obstruction. In children treated for seizures, this is the key danger to anticipate and monitor for.","<strong>Paediatric status/febrile seizure dosing (APLS-style):</strong> IV lorazepam <strong>0.1 mg/kg</strong> (max 4 mg) may be repeated once after 5–10 min (max cumulative 0.2 mg/kg). If no IV access, use buccal midazolam. <em>Risk of respiratory depression increases with repeated benzodiazepine doses</em> or co-administration of other CNS depressants.","<strong>Monitoring & management after benzodiazepine:</strong> Continuous SpO₂ and cardiorespiratory monitoring; consider capnography if available. Have airway equipment and bag-valve-mask ready; provide high-flow oxygen and support ventilation if needed. Treat hypotension with fluids. <strong>Avoid routine flumazenil</strong> in seizure patients (can precipitate seizures, particularly with mixed overdoses or chronic benzodiazepine use).","<strong>Why the other options are less appropriate:</strong><br/>• <strong>Amnesia (A)</strong> — common (anterograde) but usually not dangerous.<br/>• <strong>Anaphylactic shock (B)</strong> — extremely rare with lorazepam.<br/>• <strong>Bronchospasm (D)</strong> — not a typical benzodiazepine effect.<br/>• <strong>Cardiac arrhythmia (E)</strong> — uncommon; benzodiazepines are generally cardio-stable.","<strong>Next steps if seizures persist (&gt;5–10 min after two benzos):</strong> Escalate to second-line anti-seizure therapy (e.g., IV levetiracetam or phenytoin/fosphenytoin per local protocol) while maintaining airway/ventilation.","<strong>Exam takeaways:</strong> After giving lorazepam to a child for seizures, the <mark>danger you must watch for is respiratory depression</mark>. Prepare for airway support; avoid flumazenil in seizure contexts; escalate antiepileptic therapy if seizures continue."]},{id:"EM-3780",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 65 year old woman presented to the Emergency Department. She has developed a productive cough over the last 3 days and started feeling short of breath a few hours ago. She has not passed urine for the past 8 hours and feels unwell. She is tired with generalised body aches. On examination, her heart rate is <strong>135 beats/minute</strong>, blood pressure is <strong>86/60 mmHg</strong>, respiratory rate is <strong>22 breaths/minute</strong>, and body temperature is <strong>38.9°C</strong>.<br/><br/>Which of the following is the <strong>SINGLE</strong> most appropriate management plan?",options:[{key:"A",text:"Perform a lumbar puncture"},{key:"B",text:"Admission with oral amoxicillin"},{key:"C",text:"Admission with oral co-amoxiclav"},{key:"D",text:"Home treatment with oral amoxicillin and follow up with GP"},{key:"E",text:"Admission and in-patient management"}],correct:"E",explanation_plabable:["The question tests one's ability to recognise the features of sepsis.","Sepsis is a life-threatening organ dysfunction caused by a dysregulated host response to infection. In this case, the patient's source of infection is most likely a lower respiratory tract infection.","The patient is grossly unwell and meets a few of the red flags of sepsis. It is important to be familiar with the red flags as 1 or more warrants the completion of the 'sepsis six' within 1 hour. Therefore, the most appropriate step would be admitting the patient for further management.","As part of sepsis 6, intravenous antibiotics are given (not oral). You can scratch off all options with oral antibiotics as the answer.","Discharging the patient is inappropriate as she will deteriorate.","There is no indication for a lumbar puncture as she does not elicit the features of meningitis or meningococcal sepsis."],explanation_detail:["<strong>Why <mark>Admission and in-patient management</mark> is correct:</strong> She is hypotensive (<strong>86/60</strong>), tachycardic (<strong>135</strong>), febrile (<strong>38.9°C</strong>) with new breathlessness and reduced urine output. These findings meet <em>high-risk/red-flag</em> criteria for suspected <strong>sepsis</strong> from a likely <em>lower respiratory tract infection</em>. She requires urgent hospital admission for immediate resuscitation and sepsis care.","<strong>Sepsis Six — complete within 1 hour:</strong> <ul class='list-disc ml-5'><li>Give <strong>high-flow oxygen</strong> to maintain SpO₂ targets.</li><li><strong>Take blood cultures</strong> (and other cultures) <em>before</em> antibiotics.</li><li><strong>Give IV broad-spectrum antibiotics</strong> (not oral) per local pneumonia/sepsis guidelines (e.g., IV co-amoxiclav ± macrolide, or piperacillin-tazobactam if severe/penicillin allergy alternatives as per policy).</li><li><strong>Give IV fluids</strong> — crystalloid bolus (e.g., 500 mL) and reassess; repeat as needed if no fluid overload; aim MAP ≥65 mmHg.</li><li><strong>Measure lactate</strong> (VBG/ABG) and send sepsis bloods (FBC, U&amp;Es, CRP).</li><li><strong>Monitor urine output</strong> (catheterise if appropriate).</li></ul>","<strong>Further ED work-up:</strong> ECG, <strong>chest X-ray</strong>, sputum culture if possible, viral swabs as indicated. Early senior review; consider escalation to critical care if persistent hypotension after fluids or lactate ≥4 mmol/L.","<strong>Why other options are wrong:</strong><br/>• <strong>A. Lumbar puncture</strong> — no meningitic features; unsafe in an unstable patient.<br/>• <strong>B/C. Admission with <em>oral</em> antibiotics</strong> — oral therapy is inadequate in suspected sepsis; IV antibiotics are required within 1 hour.<br/>• <strong>D. Home with oral antibiotics</strong> — unsafe given hypotension/tachycardia and likely deterioration.","<strong>Exam takeaways:</strong> Recognise red flags (hypotension, tachycardia, fever, altered urine output). In suspected sepsis: <mark>Admit, start the Sepsis Six, and give IV antibiotics</mark>—do not discharge or use oral agents."]},{id:"EM-0308",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 38 year old man presents to the Emergency Department visibly distressed, reporting a sudden and overwhelming episode of chest pain, palpitations, and shortness of breath that started about 30 minutes ago. He experienced noticeable tremors in his hands and felt excessively warm and sweaty. His father had a myocardial infarction at the age of 61. He has a heart rate of 102 beats/minute, blood pressure of 120/75 mmHg, respiratory rate of 25 breaths/minute and an oxygen saturation of 98%. An electrocardiogram (ECG) shows no evidence of ischaemia, and blood tests reveal a negative troponin. Which is the most likely diagnosis?",options:[{key:"A",text:"Pulmonary embolism"},{key:"B",text:"Acute coronary syndrome"},{key:"C",text:"Costochondritis"},{key:"D",text:"Panic attack"},{key:"E",text:"Gastro-oesophageal reflux disease"}],correct:"D",explanation_plabable:["The most likely diagnosis for this man is a panic attack. The sudden onset of symptoms, the negative troponin, and the absence of ischaemic changes on ECG are consistent with this diagnosis.","His father's myocardial infarction at age 61, while relevant for long-term cardiovascular risk, does not necessarily increase his immediate risk significantly at his current age.",`In the context of evaluating a young individual's risk for cardiovascular diseases, a family history of premature cardiovascular events can be significant. A family history of myocardial infarction or other cardiovascular events in a first-degree relative at a young age (for instance, before age 55 for men and before age 65 for women) would increase an individual's risk. The age of 61 in the stem is NOT considered "premature" for an MI.`,"Costochondritis is incorrect. While it can cause chest pain, it does not usually cause palpitations or shortness of breath."],explanation_detail:["<strong>Why panic attack fits best:</strong> Sudden onset of chest pain, palpitations, dyspnoea, tremor, diaphoresis, and a sense of overwhelming distress are classic <em>panic attack</em> features. Objective data are reassuring: normal BP/SpO₂, sinus tachycardia only, <strong>ECG without ischaemia</strong>, and <strong>negative troponin</strong> shortly after symptom onset.","<strong>Risk context:</strong> A family history of MI in a first-degree relative is considered <em>premature</em> if <strong>&lt;55 years (men)</strong> or <strong>&lt;65 years (women)</strong>. The father’s MI at 61 is <em>not</em> premature for a male relative; it does not meaningfully elevate short-term ACS probability in a 38-year-old with otherwise low-risk presentation.","<strong>Ruling out the distractors:</strong><br/>• <strong>Pulmonary embolism</strong> usually has pleuritic pain, risk factors, hypoxaemia, or clear PE signs; normal SpO₂ 98% and a benign ECG make PE less likely (though always consider if risk factors exist).<br/>• <strong>Acute coronary syndrome</strong> classically has pressure-like chest pain ± radiation, dynamic ECG changes, and rising troponin; here ECG/troponin are negative and symptoms are highly autonomic/anxious.<br/>• <strong>Costochondritis</strong> causes localized, reproducible chest wall tenderness without palpitations/dyspnoea and lacks autonomic surge.<br/>• <strong>GORD</strong> gives burning retrosternal pain related to meals/lying; it does not cause tremor, tachypnoea, or marked autonomic symptoms.","<strong>ED approach when panic suspected (after life-threatening causes screened):</strong> Provide calm reassurance, breathing coaching (slow diaphragmatic breathing), consider a brief-acting anxiolytic if severe and safe (e.g., low-dose benzodiazepine), and arrange follow-up for CBT/psychological support. Safety-net for recurrent/worsening chest pain, syncope, or new risk features.","<strong>Exam tip:</strong> When a young patient has abrupt chest pain with prominent autonomic symptoms, normal ECG and negative troponin, pick <mark>Panic attack</mark> over ACS/PE—unless the stem adds red flags or high-risk features."]},{id:"EM-4310",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 70 year old male presents with a 2 day history of productive cough and shortness of breath. He complains of chills and rigors. He is ill-looking. He has a temperature of <strong>38.5°C</strong>, respiratory rate of <strong>26 breaths/minute</strong>, and a pulse rate of <strong>125 beats/min</strong>. His blood pressure is <strong>88/45 mmHg</strong> and oxygen saturation is <strong>90% on room air</strong>. On auscultation, bronchial breath sounds are heard in the periphery. He is given a fluid challenge of 1 L normal saline. His blood pressure post fluid challenge is <strong>90/40 mmHg</strong>.<br/><br/>What is the <strong>SINGLE best term</strong> to use in his condition?",options:[{key:"A",text:"Sepsis"},{key:"B",text:"Severe sepsis"},{key:"C",text:"Septic shock"},{key:"D",text:"Systemic inflammatory response syndrome (SIRS)"},{key:"E",text:"Infection"}],correct:"C",explanation_plabable:["Although, infection, sepsis and SIRS are correct terms to use, the best term, in this case, is septic shock.","Septic shock is defined as severe sepsis with persistently low blood pressure which has failed to respond to the administration of intravenous fluids."],explanation_detail:["<strong>Why <mark>Septic shock</mark> is the best term here:</strong> The patient has suspected infection (productive cough, fever, bronchial breath sounds) with <strong>hypotension</strong> that <em>persists after a fluid challenge</em> (88/45 → 90/40 mmHg after 1 L). Fluid-refractory hypotension in the context of sepsis = <strong>septic shock</strong> in exam terminology.","<strong>Definitions you should know (exam + Sepsis-3 context):</strong><br/>• <strong>Infection</strong> — suspected/confirmed microbial cause.<br/>• <strong>SIRS</strong> — physiological response criteria (legacy term; no longer used to define sepsis).<br/>• <strong>Sepsis</strong> — life-threatening organ dysfunction from a dysregulated host response to infection (often inferred by hypotension, hypoxia, altered mentation, oliguria).<br/>• <strong>Severe sepsis</strong> — legacy term (sepsis + organ dysfunction).<br/>• <strong>Septic shock</strong> — sepsis with <em>persistent hypotension despite adequate fluids</em> (and, in Sepsis-3, need for vasopressors to keep MAP ≥65 mmHg with lactate &gt;2 mmol/L). On exams that still use older labels, the key trigger is <mark>fluid-refractory hypotension</mark>.","<strong>Immediate management priorities (Sepsis Six within 1 hour):</strong> <ul class='list-disc ml-5'><li>Give <strong>high-flow oxygen</strong> to target saturations.</li><li><strong>Take blood cultures</strong> before antibiotics (do not delay therapy).</li><li><strong>Start IV broad-spectrum antibiotics</strong> promptly as per local policy for severe CAP/HCAP.</li><li><strong>Give IV crystalloids</strong> (e.g., 30 mL/kg cumulative or repeated boluses with reassessment).</li><li><strong>Measure lactate</strong> (VBG/ABG) and send sepsis labs.</li><li><strong>Monitor urine output</strong> (consider catheterisation).</li></ul> If hypotension persists after fluids, begin <strong>vasopressors (noradrenaline)</strong> and consider ICU; arrange early senior/critical-care review and source control.","<strong>Why the other options are not the single best term:</strong><br/>• <strong>Infection</strong> and <strong>Sepsis</strong> are true but <em>not specific enough</em> for persistent hypotension.<br/>• <strong>Severe sepsis</strong> (legacy) implies organ dysfunction, but the stem emphasises <mark>fluid-refractory hypotension</mark>, which upgrades to <strong>septic shock</strong>.<br/>• <strong>SIRS</strong> is outdated and nonspecific.","<strong>Exam takeaways:</strong> In a hypotensive, febrile patient whose BP remains low after fluids, choose <strong>Septic shock</strong> and initiate the full sepsis bundle with early vasopressors and critical-care involvement."]},{id:"RM-0453",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 54 year old smoker is seen in the Emergency Department with extensive wheeze and breathlessness. He is known to have COPD. On auscultation, he has widespread wheezing throughout his chest. He has a temperature of <strong>36.7°C</strong>, heart rate of <strong>115 beats/minute</strong>, blood pressure of <strong>130/80 mmHg</strong>, respiratory rate of <strong>28 breaths/minute</strong> and an oxygen saturation of <strong>85%</strong>. He is started on <strong>24% oxygen</strong> by Venturi face mask. What is the most appropriate next step in management?",options:[{key:"A",text:"Oral amoxicillin"},{key:"B",text:"Intravenous co-amoxiclav"},{key:"C",text:"Intubation"},{key:"D",text:"Intravenous aminophylline"},{key:"E",text:"Salbutamol nebulizers"}],correct:"E",explanation_plabable:["This question is testing your knowledge on the management of acute exacerbation of COPD.","Salbutamol nebulisers, ipratropium nebulisers, oral/IV corticosteroids, and oxygen are usually the first-line medical therapy.","Oral antibiotics should ONLY be given if there is purulent sputum or clinical signs of pneumonia. While it is common practice for all patients with an exacerbation of COPD to receive antibiotics in the hospital, it is not according to NICE guidelines and for the purpose of this exam, antibiotics should not be administered to manage acute exacerbation COPD unless we suspect pneumonia."],explanation_detail:["<strong>Why <mark>Salbutamol nebulizers</mark> are the next step:</strong> He has an acute exacerbation of COPD (AECOPD) with hypoxaemia (SpO₂ 85%). Controlled oxygen has already been started via 24% Venturi (appropriate target <strong>88–92%</strong>). The next immediate therapy is a <strong>short-acting bronchodilator</strong> delivered by nebuliser—<em>salbutamol</em>—often given <em>with</em> ipratropium.","<strong>Initial AECOPD bundle (NICE/BTS style):</strong><ul class='list-disc ml-5'><li><strong>Controlled O₂</strong> to 88–92% (Venturi 24–28%); obtain ABG if saturations are low or patient is acidotic/drowsy.</li><li><strong>Nebulised bronchodilators:</strong> salbutamol 2.5–5 mg via air-driven nebuliser, repeat 4-hourly (or more frequently early); add <strong>ipratropium</strong> 500 micrograms 4-6-hourly.</li><li><strong>Systemic corticosteroid:</strong> oral <strong>prednisolone 30–40 mg daily for 5 days</strong> (or IV hydrocortisone if unable to take PO).</li><li><strong>Antibiotics</strong> only if there is <em>increased sputum purulence/volume</em> or clinical/radiographic pneumonia (fever, focal consolidation).</li><li><strong>Escalation:</strong> consider <strong>NIV (BiPAP)</strong> if pH &lt; 7.35 with PaCO₂ &gt; 6 kPa and respiratory acidosis despite optimal medical therapy; ICU/intubation if NIV fails or there’s impending arrest.</li></ul>","<strong>Why the other options are not first:</strong><br/>• <strong>A. Oral amoxicillin</strong> — not indicated without purulent sputum or pneumonia; antibiotics are not routine for all AECOPD.<br/>• <strong>B. IV co-amoxiclav</strong> — same rationale; IV reserved for severe pneumonia/sepsis or inability to take PO.<br/>• <strong>C. Intubation</strong> — premature; use medical therapy ± NIV first unless arrest/impending failure (coma, peri-arrest, refractory hypoxaemia).<br/>• <strong>D. IV aminophylline</strong> — <em>not</em> first-line; consider only if poor response to maximal nebulised β₂-agonist + antimuscarinic and after checking for contraindications/toxicity; monitor levels and interactions.","<strong>Practical notes:</strong> Use air-driven nebulisers (to avoid excessive O₂ delivery in CO₂ retainers) or adjust FiO₂ if O₂-driven. Reassess RR, SpO₂, work of breathing, and ABG after starting therapy. Provide venous thromboembolism prophylaxis if admitted, smoking cessation support, and inhaler technique/plan on discharge.","<strong>Exam takeaway:</strong> In AECOPD on controlled oxygen, the immediate next step is <mark>nebulised bronchodilator therapy (salbutamol ± ipratropium)</mark>; steroids follow early; antibiotics only with evidence of bacterial infection."]},{id:"CT-3120",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 32 year old woman presents to the Emergency Department with a sudden onset of <strong>high fever, vomiting, diarrhoea, and a diffuse rash</strong>. She reports feeling generally unwell for the past 24 hours. On examination, her temperature is <strong>39.5°C</strong>, heart rate is <strong>120 beats per minute</strong>, blood pressure is <strong>90/60 mmHg</strong>, and she appears <strong>confused</strong>. There is a widespread erythematous rash, including <strong>desquamation on the palms and soles</strong>. Her menstrual period began three days ago, and she has been using tampons. Laboratory tests reveal <strong>leukocytosis</strong>. What is the most likely diagnosis?",options:[{key:"A",text:"Meningococcal septicaemia"},{key:"B",text:"Dengue fever"},{key:"C",text:"Staphylococcal scalded skin syndrome"},{key:"D",text:"Systemic lupus erythematosus"},{key:"E",text:"Toxic shock syndrome"}],correct:"E",explanation_plabable:["Toxic shock syndrome (TSS) is a severe condition typically associated with tampon use in menstruating women, though it can also occur in men, children, and postmenopausal women. It is characterised by high fever, hypotension, multi-organ involvement, and a diffuse erythematous rash with subsequent desquamation.","The management of suspected TSS involves immediate hospital admission, removal of the source of infection (e.g., tampon), and aggressive supportive care, including fluids and antibiotics targeting Staphylococcus aureus and Streptococcus pyogenes."],explanation_detail:["<strong>Why <mark>Toxic shock syndrome (TSS)</mark> is most likely:</strong> The stem links <em>tampon use</em> with <strong>high fever</strong>, <strong>hypotension</strong>, <strong>GI upset</strong> (vomiting/diarrhoea), <strong>confusion</strong>, and a <mark>diffuse erythematous rash with desquamation of palms/soles</mark> — the classic toxin-mediated picture.","<strong>Pathophysiology & organisms:</strong> Classically due to <em>Staphylococcus aureus</em> producing TSST-1; a similar syndrome occurs with <em>Streptococcus pyogenes</em> (invasive GAS). Superantigen toxins trigger massive cytokine release → shock and multi-organ dysfunction.","<strong>Diagnostic pointers (Severe TSS pattern):</strong><ul class='list-disc ml-5'><li>Fever ≥38.9°C</li><li>Hypotension (SBP ≤90 mmHg)</li><li>Diffuse macular erythroderma → <em>desquamation</em> 1–2 weeks later</li><li>Involvement of ≥3 organ systems (GI, renal, hepatic, muscular, mucous membranes, CNS, haematologic)</li><li>Leukocytosis common; cultures may be negative in staphylococcal TSS</li></ul>","<strong>Immediate management (ED):</strong><ul class='list-disc ml-5'><li><mark>Source control</mark>: <strong>remove the tampon</strong>; inspect/drain any wounds or abscesses; send cultures.</li><li><strong>Aggressive fluids</strong> (balanced crystalloids) for shock; early vasopressors (noradrenaline) if fluid-refractory.</li><li><strong>Empiric antibiotics</strong>: cover staph and strep and <em>block toxin production</em>. A typical regimen: <strong>IV clindamycin</strong> (protein synthesis/toxin suppression) + <strong>anti-staphylococcal agent</strong> (e.g., flucloxacillin; use <strong>vancomycin</strong> if MRSA risk). If streptococcal TSS suspected, add <strong>benzylpenicillin</strong> + clindamycin.</li><li>Consider <strong>IVIG</strong> in severe refractory cases (to neutralise toxin).</li><li>Monitor and correct organ dysfunction (renal/hepatic, coagulopathy); manage electrolyte/acid–base issues; ICU referral early.</li></ul>","<strong>Why the other options are less likely:</strong><br/>• <strong>Meningococcal septicaemia</strong> → typically <em>petechial/purpuric</em> non-blanching rash, meningism; not classic desquamation and tampon link.<br/>• <strong>Dengue</strong> → travel history to endemic area, severe myalgia, thrombocytopenia/haemorrhagic features.<br/>• <strong>Staphylococcal scalded skin syndrome</strong> → tender erythema with <em>superficial</em> blistering/positive Nikolsky; usually children, <em>no shock</em> or multiorgan failure.<br/>• <strong>SLE</strong> → chronic autoimmune features; does not present with acute toxin-mediated shock and desquamating rash.","<strong>Exam takeaways:</strong> In a menstruating patient with shock, GI symptoms and <mark>diffuse erythroderma + desquamation</mark> after tampon use, choose <strong>Toxic shock syndrome</strong>. Treat with <em>source control</em>, <em>fluids/vasopressors</em>, and <em>clindamycin-based antibiotics</em>; consider <em>IVIG</em> if severe."]},{id:"EM-2570",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 32 year old man is found unconscious in a park late in the evening. Emergency services are called, and on arrival, paramedics note that the man is breathing but unresponsive. His pupils are markedly dilated. He is promptly transported to the hospital. In the Emergency Department, his vital signs are as follows: blood pressure <strong>110/70 mmHg</strong>, heart rate <strong>120 bpm</strong>, respiratory rate <strong>16 per minute</strong>, and oxygen saturation <strong>98% on room air</strong>. His temperature is <strong>37.2°C</strong>. He gains consciousness and is restless and agitated. His Glasgow Coma Scale score is 10. There is no evidence of head injury, trauma, or injection sites. A toxicology screen is performed, which reveals an <strong>ethanol level of 40 mmol/L</strong> and a <strong>salicylate level of 10 mg/dL</strong>. An ECG is performed shows sinus tachycardia with no abnormalities. Which substance is most likely to have been taken by this man?",options:[{key:"A",text:"Alcohol"},{key:"B",text:"Amphetamines"},{key:"C",text:"Amitriptyline"},{key:"D",text:"Morphine"},{key:"E",text:"Aspirin"}],correct:"B",explanation_plabable:["The clinical presentation of this man – agitation, dilated pupils and increased heart rate – is consistent with amphetamine use. Amphetamines typically cause sympathomimetic effects such as tachycardia, hypertension, and dilated pupils (mydriasis). The presence of ethanol can compound these effects.","To contextualise the ethanol level of 40 mmol/L, it's important to understand the typical reference ranges for blood ethanol levels and their associated effects:","<em>Legal Driving Limit in the UK:</em> The legal limit for driving in the UK is 80 mg/dL (17.4 mmol/L). A level of 40 mmol/L is more than double this limit.","<em>Levels and Effects:</em>","<ul class='list-disc ml-5'><li>20–100 mg/dL (4.3–21.7 mmol/L): This range can cause mild euphoria, decreased coordination, and impaired judgment.</li><li>100–200 mg/dL (21.7–43.4 mmol/L): At this level, individuals might experience increased impairment of motor coordination and judgment, mood swings, and possibly nausea or vomiting. → <em>This is where the patient's blood value sits</em></li><li>200–300 mg/dL (43.4–65.1 mmol/L): This range is associated with confusion, disorientation, and profound impairment of motor functions.</li><li>Over 300 mg/dL (65.1 mmol/L): Levels in this range can lead to stupor, unconsciousness, or even coma.</li></ul>","Let's again revisit why all the other options are less appropriate:","<strong>Alcohol:</strong> While the ethanol level is elevated, alcohol intoxication alone does not typically cause marked pupil dilation. The ethanol level of 40 mmol/L as well would not generally cause unconsciousness.","<strong>Amitriptyline:</strong> This tricyclic antidepressant can cause dilated pupils and altered mental status, but it typically leads to other signs like urinary retention, dry skin, and cardiac arrhythmias, which are not mentioned in the vignette. The ECG in this vignette is normal.","<strong>Morphine:</strong> An opioid like morphine would likely cause pinpoint pupils (miosis), respiratory depression.","<em>Aspirin:</em> Aspirin (acetylsalicylic acid) overdose could account for the salicylate level, but the clinical presentation of an aspirin overdose often includes tinnitus, hyperventilation due to respiratory alkalosis, and gastrointestinal symptoms, which are not prominent in this case. The value given (10 mg/dL) is not very significant. The therapeutic blood concentration for aspirin (salicylate) typically ranges from 10 to 30 mg/dL and toxic levels are above 30 mg/dL. Only at values of around 70 mg/dL would one expect to start becoming unconscious.","This question is very difficult to answer. One can expect some values of blood tests in the exam that need to be contextualised. We recommend remembering two values for ethanol and for salicylates:","<ul class='list-disc ml-5'><li>Ethanol level of &gt;65.1 mmol/L → Consider the aetiology of the unconscious patient to be alcohol intoxication</li><li>Salicylate level of &gt;70 mg/dL → Consider the aetiology of the unconscious patient to be aspirin intoxication</li></ul>","Lastly, remember to focus on the units too!"],explanation_detail:["<strong>Why <mark>Amphetamines</mark> fit best:</strong> The triad of <em>agitation/restlessness</em>, <strong>mydriasis</strong>, and <strong>sinus tachycardia</strong> with normal oxygenation and temperature in a young adult is classic for a <em>sympathomimetic toxidrome</em> (amphetamines, cocaine, MDMA). The ECG shows no QRS/QT abnormalities (argues against TCA toxicity), and miosis/respiratory depression that would suggest opioids is absent.","<strong>Interpreting the labs:</strong> The <em>ethanol 40 mmol/L ≈ 184 mg/dL</em> — intoxicated but not typically enough alone to cause coma in a tolerant adult; it can, however, <em>augment agitation</em> or cloud the picture. The salicylate <em>10 mg/dL</em> is low and not compatible with symptomatic salicylate poisoning.","<strong>ED management of suspected amphetamine/stimulant toxicity:</strong><ul class='list-disc ml-5'><li><mark>Support ABCs</mark>, place on continuous cardiac/SpO₂ monitoring; check glucose.</li><li><strong>Benzodiazepines</strong> are first-line for agitation, tachycardia, hypertension and to prevent hyperthermia (e.g., diazepam IV/lorazepam). Avoid antipsychotics that lower seizure threshold or impair thermoregulation if severe stimulant toxicity.</li><li><strong>Active cooling</strong> and IV fluids if hyperthermic; check CK and renal function for rhabdomyolysis risk.</li><li>Treat severe hypertension with titratable agents (e.g., <em>labetalol</em> or <em>nitroprusside</em>); avoid isolated beta-blockade in pure stimulant toxicity.</li><li>Consider screening for co-ingestants (ethanol present here), and observe until settled with normal vitals and mentation.</li></ul>","<strong>Why the other options don’t fit:</strong><br/>• <strong>Alcohol</strong> — usually causes ataxia, dysarthria, nystagmus; <em>not</em> marked mydriasis; level here unlikely to cause deep coma on its own.<br/>• <strong>Amitriptyline (TCA)</strong> — would more likely show anticholinergic features <em>plus</em> ECG changes (widened QRS, right axis, terminal R in aVR); absent here.<br/>• <strong>Morphine</strong> — causes <mark>miosis</mark>, hypoventilation, and ↓GCS; opposite to findings.<br/>• <strong>Aspirin</strong> — would give tinnitus, vomiting, <em>respiratory alkalosis progressing to metabolic acidosis</em>; not suggested by the story or numbers.","<strong>Exam takeaway:</strong> Young patient with agitation + tachycardia + dilated pupils and clean ECG → pick a <mark>sympathomimetic</mark> (here, <strong>Amphetamines</strong>). Treat with <strong>benzodiazepines</strong>, fluids, and cooling; look for complications (hyperthermia, rhabdomyolysis, dysrhythmia)."]},{id:"EM-2390",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 35 year old woman presents to the Emergency department with a history of asthma. She reports increasing difficulty in breathing over the past 6 hours. Upon arrival, she was given nebulised salbutamol, ipratropium bromide, intravenous corticosteroids and intravenous magnesium sulphate. On examination, she appears dyspnoeic and is using accessory muscles to breathe. Her respiratory rate is noted to be <strong>10 breaths per minute</strong>. Oxygen saturation on room air is <strong>88%</strong>. Auscultation of the chest reveals widespread wheezes.<br/><br/>pH 7.21 (7.35 – 7.45)<br/>PaO2: 7.8 kPa (10–14)<br/>PaCO2: 7.1 kPa (4.7–6.0)<br/>Bicarbonate 24 mmol/L (22–26)<br/><br/>Her peak expiratory flow rate is <strong>45%</strong> of her predicted normal value. What is the most appropriate <strong>immediate</strong> action?",options:[{key:"A",text:"Start intravenous antibiotics"},{key:"B",text:"Admit to the Intensive Care Unit"},{key:"C",text:"Administer intravenous morphine"},{key:"D",text:"Admit to the medical ward"},{key:"E",text:"Request a chest X-ray"}],correct:"B",explanation_plabable:["The patient’s clinical presentation suggests a severe asthma exacerbation, characterised by a significantly reduced respiratory rate, low oxygen saturation, hypercapnia, and poor peak expiratory flow rate. These signs indicate impending respiratory failure. The most appropriate immediate action is to admit the patient to the Intensive Care Unit for close monitoring and consideration for mechanical ventilation.","<em>In the context of this vignette, the patient with asthma exhibits a low respiratory rate (10 breaths per minute) because of respiratory muscle fatigue. In severe asthma attacks, there is often a significant increase in the work of breathing due to airway obstruction, bronchospasm, and inflammation. Over time, this can lead to respiratory muscle fatigue. When the respiratory muscles are exhausted, the patient may not be able to maintain a high respiratory rate, resulting in a lower respiratory rate.</em>"],explanation_detail:["<strong>ABG interpretation:</strong> pH 7.21 (acidaemia) with <strong>high PaCO₂ 7.1 kPa</strong> = <mark>hypercapnic respiratory failure</mark> (type 2). Low PaO₂ 7.8 kPa and SpO₂ 88% confirm significant hypoxaemia. In acute asthma, a <em>normal or high</em> PaCO₂ is a red flag for <strong>impending ventilatory failure</strong> due to exhaustion.","<strong>Severity:</strong> PEF 45% predicted suggests at least <em>acute severe</em> asthma; combined with hypercapnia, acidaemia, altered effort (RR 10 with accessory use) → treat as <strong>life-threatening / near-fatal asthma</strong>.","<strong>Immediate action = ICU admission:</strong> Needs continuous monitoring, senior review and readiness for <strong>mechanical ventilation</strong> if deterioration (worsening acidosis/CO₂, falling consciousness, refractory hypoxaemia). <em>NIV is generally not recommended in acute asthma</em>; proceed to intubation/ventilation if failing.","<strong>Ongoing ED/ICU management while arranging transfer:</strong><ul class='list-disc ml-5'><li><strong>High-flow oxygen</strong> to target SpO₂ 94–98% (titrate by ABG/VBG).</li><li><strong>Back-to-back nebulisers</strong> with salbutamol (2.5–5 mg) + ipratropium (500 μg) via oxygen/air as appropriate; consider continuous salbutamol.</li><li><strong>Systemic corticosteroid</strong> (e.g., prednisolone 40–50 mg PO or hydrocortisone 100 mg IV if unable to take PO).</li><li><strong>IV magnesium sulphate</strong> 2 g over 20 minutes has already been given; consider <em>IV salbutamol infusion</em> if poor response (specialist-led). <em>Aminophylline</em> is rarely used; seek senior advice.</li><li>Early arterial/venous gases and repeat after interventions; correct electrolytes (especially <strong>K⁺</strong>).</li></ul>","<strong>Why other options are wrong:</strong><br/>• <strong>IV antibiotics (A)</strong> — no evidence of bacterial infection; antibiotics don’t treat bronchospasm.<br/>• <strong>IV morphine (C)</strong> — contraindicated; depresses respiration and worsens CO₂ retention.<br/>• <strong>Medical ward (D)</strong> — inadequate level of care for impending respiratory failure.<br/>• <strong>Chest X-ray (E)</strong> — may be done later (rule out pneumothorax, infection) but <em>not</em> the immediate life-saving step.","<strong>Intubation triggers (know for exams):</strong> rising PaCO₂ or worsening acidaemia, exhaustion/confusion, silent chest/poor air entry, refractory hypoxaemia, peri-arrest. Use RSI with experienced operator (ketamine often preferred), then controlled ventilation with permissive hypercapnia and careful dynamic hyperinflation management.","<strong>Key exam takeaway:</strong> In acute asthma with <mark>hypercapnia + acidaemia</mark> despite maximal therapy → <strong>ICU now</strong> and prepare for ventilation."]},{id:"EN-1327",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 67 year old man presents to A&amp;E with generalised weakness and malaise for the past week. He has a history of chronic kidney disease.<br/><br/><strong>Investigations:</strong><br/>Sodium 137 mmol/L (135–145)<br/>Potassium <strong>6.8 mmol/L</strong> (3.5–5)<br/>Urea 28 mmol/L (2.0–7)<br/>Creatinine <strong>680 µmol/L</strong> (70–150)<br/>eGFR <strong>8 mL/min</strong> (&gt;90)<br/><br/>An ECG reveals <em>peaked T waves</em>, a <em>widened QRS</em> complex, and a <em>prolonged PR</em> interval. What is the most appropriate <strong>initial</strong> treatment for this patient?",options:[{key:"A",text:"Administering intravenous furosemide"},{key:"B",text:"Initiating intravenous fluids"},{key:"C",text:"Initiating insulin and dextrose infusion"},{key:"D",text:"Administering intravenous calcium chloride"},{key:"E",text:"Immediate haemodialysis"}],correct:"D",explanation_plabable:["His blood results show severe hyperkalaemia. He has ECG changes which are consistent with hyperkalaemia","Protecting the heart from the effects of hyperkalaemia, which can lead to fatal arrhythmias is the first action. This is done with calcium (either gluconate or chloride).","Following that, we should act with shifting potassium from the extracellular fluid to the intracellular compartment, typically with insulin and dextrose.","Then we should think about removing the potassium from the body altogether, often using haemodialysis in patients with renal failure.","Given the patient's symptoms, laboratory values, and especially the ECG changes, the immediate threat is the effect of hyperkalemia on cardiac myocytes. Calcium stabilizes the myocardial cell membranes and decreases the risk of a life-threatening arrhythmia. It works rapidly, within minutes, but does not lower the serum potassium level; it just mitigates its effects on the heart."],explanation_detail:["<strong>Why calcium <em>first</em>:</strong> The patient has <mark>severe hyperkalaemia (K⁺ 6.8)</mark> plus <strong>ECG changes</strong> (peaked T, wide QRS, prolonged PR) and advanced CKD. The immediate risk is <em>malignant arrhythmia</em>. Give IV <strong>calcium</strong> to <em>stabilise the myocardium</em> within minutes.","<strong>Which calcium?</strong> Use <em>10 mL of 10% calcium chloride</em> (via central line if possible) or <em>30 mL of 10% calcium gluconate</em> (peripheral OK). Chloride contains ~3× more elemental Ca and has a stronger effect but is more irritant peripherally. <em>Repeat</em> every 5–10 min if ECG changes persist; continuous cardiac monitoring.","<strong>Then shift K⁺ intracellularly:</strong> Start <strong>insulin + dextrose</strong> (e.g., 10 units soluble insulin IV with 25 g dextrose), reassess glucose at 15–30 min and hourly; consider <strong>nebulised salbutamol 10–20 mg</strong>. Give <strong>IV sodium bicarbonate</strong> if there is significant <em>metabolic acidosis</em>.","<strong>Remove K⁺ from the body:</strong> In ESRD/oliguric patients or refractory hyperkalaemia, arrange <strong>urgent haemodialysis</strong>. Other options include <em>loop diuretics</em> (if making urine), and potassium binders (e.g., sodium zirconium cyclosilicate or patiromer) as adjuncts—these are <em>not</em> immediate fixes.","<strong>Why the other options are not the <em>initial</em> step:</strong><br/>• <strong>A. IV furosemide</strong> — only helps if the patient has urine output and acts slowly; does not stabilise myocardium.<br/>• <strong>B. IV fluids</strong> — may be needed for volume depletion but won’t protect the heart.<br/>• <strong>C. Insulin + dextrose</strong> — crucial second step to <em>shift</em> K⁺, but you must <em>first</em> give calcium when ECG changes are present.<br/>• <strong>E. Immediate haemodialysis</strong> — likely required soon given eGFR 8 mL/min, but arranging dialysis takes time; <strong>calcium now</strong> prevents arrest while definitive therapy is organised.","<strong>ED checklist:</strong> Cardiac monitoring, large-bore IV access, repeat ECG after calcium, frequent K⁺/glucose checks, review meds (stop ACEi/ARB, K⁺-sparing diuretics), consider causes (AKI on CKD, tissue breakdown), and consult nephrology early.","<strong>Exam takeaway:</strong> Hyperkalaemia + ECG changes → <mark>IV calcium immediately</mark> to stabilise; then <em>shift</em> K⁺ (insulin/dextrose ± salbutamol ± bicarbonate), then <em>remove</em> K⁺ (dialysis/diuretics/binders)."]},{id:"CA-2220",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 68 year old man has sudden onset of shortness of breath and chest discomfort. He reports that the symptoms started while he was at rest. He had a knee replacement surgery 10 days ago. On examination, he appears anxious, diaphoretic, and tachypnoeic with a respiratory rate of <strong>28 breaths per minute</strong>. An ECG is done and is seen below:",image:"/ecg-q19.png",options:[{key:"A",text:"Acute myocardial infarction"},{key:"B",text:"Pulmonary embolism"},{key:"C",text:"Chronic obstructive pulmonary disease exacerbation"},{key:"D",text:"Pericarditis"},{key:"E",text:"Aortic dissection"}],correct:"B",explanation_plabable:["He has a recent knee replacement surgery (10 days ago), which is a significant risk factor for venous thromboembolism (VTE) due to immobility and potential deep vein thrombosis (DVT).","The specific findings on the electrocardiogram (ECG) of <strong>S1Q3T3</strong> pattern are characteristic of PE.","<div class='my-3'><img src='/ecg-q19a.png' alt='Annotated ECG highlighting S1Q3T3 pattern' class='rounded-md border max-w-full' /></div>","This pattern can help raise suspicion for PE, particularly in the appropriate clinical context.","<em>S1:</em> Refers to a deep S wave in lead I.<br/><em>Q3:</em> Refers to a Q wave in lead III.<br/><em>T3:</em> This is a T wave inversion in lead III.","The S1Q3T3 pattern is seen in about 10% of patients with pulmonary embolism. It has a low sensitivity for PE (meaning it is not present in the majority of PE cases). Its specificity is also not high enough to use it as a definitive marker for PE, as it can be observed in other conditions such as right heart strain from other causes. Therefore, it is important to use additional diagnostic methods when PE is suspected such as a computed tomography pulmonary angiography (CTPA).","Lastly, remember that the most common rhythm observed on an electrocardiogram (ECG) in patients with pulmonary embolism (PE) is <strong>sinus tachycardia</strong>. It is more commonly seen than the S1Q3T3 pattern, which many may incorrectly assume to be the most frequent ECG manifestation of PE.","<em>RBBB can also occur due to the increased strain or acute pressure on the right heart which is seen on this ECG too.</em>"],explanation_detail:["<strong>Why PE is most likely:</strong> Sudden dyspnoea and chest discomfort at rest, recent <em>major lower-limb surgery</em> (knee replacement 10 days ago), tachypnoea and anxiety are classic for PE. The ECG shows right-heart strain pattern (S1Q3T3 ± RBBB) which, while insensitive, fits the picture.","<strong>Risk framework:</strong> Recent surgery/immobility is a major Wells factor. Haemodynamic stability determines the pathway (massive vs submassive vs low-risk).","<strong>ECG in PE (exam pearls):</strong> <em>Sinus tachycardia</em> most common. Right-axis deviation, incomplete/complete RBBB, S1Q3T3, T-inversions V1–V4 and III/aVF can occur with acute RV strain.","<strong>Next steps:</strong> If stable, assess pre-test probability (Wells/Geneva). If low/intermediate → D-dimer then CTPA if positive. If high probability → <strong>CTPA</strong> directly (or V/Q if CTPA contraindicated). Start anticoagulation when suspicion is high and imaging not immediately available, unless contraindicated.","<strong>Management snapshot:</strong> Anticoagulation (DOAC/LMWH per local policy). Consider thrombolysis for <em>massive</em> PE (shock) or carefully selected submassive PE with RV dysfunction and clinical deterioration. Address oxygenation, analgesia, and precipitating factors; arrange early follow-up and PE education.","<strong>Exam takeaway:</strong> S1Q3T3 + recent surgery + sudden dyspnoea → think <mark>Pulmonary embolism</mark>; use CTPA for confirmation and treat promptly."]},{id:"NE-0111",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 35 year old woman presents to the Emergency Department with a 2-day history of vomiting and diarrhoea. She reports feeling weak, dizzy, and increasingly breathless. On examination, she appears mildly dehydrated, her respiratory rate is <strong>24 breaths/min</strong>, and her oxygen saturation is <strong>96% on room air</strong>. Arterial blood gas (ABG) analysis reveals the following:<br/><br/>pH <strong>7.32</strong> (7.35 – 7.45)<br/>PaO₂: <strong>12 kPa</strong> (10–14)<br/>PaCO₂: <strong>4.2 kPa</strong> (4.7–6.0)<br/>Bicarbonate <strong>18 mmol/L</strong> (22–26)<br/><br/>Which of the following is the most likely diagnosis based on the patient’s arterial blood gas results?",options:[{key:"A",text:"Metabolic acidosis with respiratory compensation"},{key:"B",text:"Metabolic alkalosis with compensation"},{key:"C",text:"Mixed respiratory and metabolic acidosis"},{key:"D",text:"Respiratory acidosis"},{key:"E",text:"Respiratory alkalosis"}],correct:"A",explanation_plabable:["Metabolic acidosis with partial respiratory compensation is the answer here.","<ul class='list-disc ml-5'><li><strong>pH: 7.32</strong>, which is below the normal range, indicating acidosis.</li><li><strong>Bicarbonate: 18 mmol/L</strong>, which is below the normal range, suggesting metabolic acidosis.</li><li><strong>PaCO2: 4.2 kPa</strong>, which is slightly lower than the normal range, suggesting a compensatory respiratory alkalosis (hyperventilation to reduce CO2).</li></ul>"],explanation_detail:["<strong>Stepwise read:</strong> (1) pH low → <em>acidaemia</em>. (2) HCO₃⁻ low (18) → primary <strong>metabolic acidosis</strong>. (3) PaCO₂ low (4.2 kPa ≈ 31.5 mmHg) → appropriate respiratory compensation (hyperventilation).","<strong>Winter’s formula</strong> (expected PaCO₂ in mmHg) = 1.5 × HCO₃⁻ + 8 ± 2 → 1.5×18 + 8 = 35 ± 2 mmHg (≈ 4.7–4.9 kPa). Observed ≈ 31.5 mmHg (4.2 kPa) is close and compatible with <em>compensation</em> rather than a second primary disorder.","<strong>Likely cause here:</strong> diarrhoea → loss of bicarbonate from the gut → <em>non–anion gap (hyperchloraemic) metabolic acidosis</em>. The raised RR in the stem supports compensatory respiratory alkalosis.","<strong>Management pearls:</strong> treat the cause and volume depletion (oral/IV rehydration with appropriate electrolytes), monitor U&amp;Es/ABG, consider bicarbonate only in severe acidaemia or specific indications per local guidance.","<strong>Exam tips:</strong> Low pH + low HCO₃⁻ with low PaCO₂ → think <mark>metabolic acidosis with respiratory compensation</mark>. Use Winter’s formula to check for mixed disorders."]},{id:"CA-1101",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 56 year old patient is brought in by his wife and friends to the Emergency Department unconscious. His wife reports that he suddenly lost consciousness in the car with no movement or response. He is not breathing, and you cannot feel his pulse. CPR starts immediately and the ECG monitor records the picture as shown below:<br/><br/>What is the most appropriate medication to give?",image:"/ecg-q21.png",options:[{key:"A",text:"Atropine"},{key:"B",text:"Ephedrine"},{key:"C",text:"Amiodarone"},{key:"D",text:"Adenosine"},{key:"E",text:"Epinephrine"}],correct:"E",explanation_plabable:["NICE guidelines recommend using epinephrine (adrenaline) as soon as possible in case of non-shockable rhythms such as asystole without delaying initiation or continuation of CPR.","The following sequence should be followed:","<ul class='list-disc ml-5'><li>CPR should be started with a 30:2 ratio of compressions to rescue breaths</li><li>Secure IV access</li><li>Administer adrenaline 1 mg intravenously</li><li>Continue CPR until the airway is secured</li><li>Recheck after 2 minutes for a pulse;</li></ul>","→ If still no pulse:","<ul class='list-disc ml-5'><li>Continue CPR</li><li>Recheck rhythm after 2 minutes</li><li>Repeat adrenaline injection every alternate rhythm check (if still no pulse)</li></ul>","Here is one of our diagrams which can be found on our Emergency Medicine Gems","<div class='my-3'><img src='/ALS.png' alt='ALS algorithm for pulseless non-shockable rhythms' class='rounded-md border max-w-full' /></div>"],explanation_detail:["<strong>Rhythm:</strong> Flat trace/asystole = <em>non-shockable</em>. Defibrillation is not indicated.","<strong>Drug & timing:</strong> Give <strong>epinephrine 1 mg IV/IO</strong> as soon as IV/IO access is obtained; continue high-quality CPR and give further epinephrine <strong>every 3–5 minutes</strong> (i.e., every alternate rhythm check). Secure airway when feasible.","<strong>Why the others are wrong:</strong><br/>• <strong>Atropine</strong> is no longer recommended in cardiac arrest due to asystole/PEA.<br/>• <strong>Ephedrine</strong> is for hypotension in anaesthesia, not cardiac arrest.<br/>• <strong>Amiodarone</strong> is for <em>shockable</em> rhythms (VF/pulseless VT) after defibrillation attempts.<br/>• <strong>Adenosine</strong> treats stable narrow-complex tachycardias and has no role in pulseless arrest.","<strong>Don’t forget Hs & Ts:</strong> hypoxia, hypovolaemia, hypo/hyperkalaemia & metabolic, hypothermia, tension pneumothorax, tamponade, toxins, thrombosis (coronary/pulmonary). Treat reversible causes while CPR continues."]},{id:"EN-1201",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 10 year old girl is brought to the Emergency Department by her parents approximately 2 hours after ingesting 10 paracetamol tablets. Her parents report that she had been experiencing bullying at school and had been increasingly withdrawn over the past month. On examination, the girl appears asymptomatic with stable vital signs, and a blood paracetamol level drawn on arrival is within the safe therapeutic range. Psychosocial assessment reveals she felt overwhelmed and took the tablets impulsively without understanding the potential consequences fully. Which of the following is the most appropriate next step in the management of this patient?",options:[{key:"A",text:"Refer to the psychiatric liaison team"},{key:"B",text:"Refer to a psychologist"},{key:"C",text:"Discharge with parental supervision"},{key:"D",text:"Admit to a psychiatric ward"},{key:"E",text:"Start antidepressants"}],correct:"A",explanation_plabable:["This scenario indicates a case of acute stress response and impulsive behaviour, possibly linked to underlying psychological distress or a mood disorder. The ingestion of paracetamol, although not currently posing a toxicological risk as indicated by the safe blood levels, signifies a serious cry for help and necessitates further assessment for underlying psychiatric conditions or psychosocial issues. Referral to a psychiatric liaison is appropriate to ensure comprehensive assessment and formulation of a management plan, which may include outpatient follow-up with mental health services as needed.","A psychiatric liaison service provides specialised mental health assessment and treatment to patients who are being treated in the hospital setting but have concurrent mental health needs. This service acts as a bridge between psychiatry and other medical specialities, ensuring that the psychological aspects of a patient's care are addressed. In A&E, the psychiatric liaison team member, who in most cases is a psychiatric liaison nurse, would take initial referrals. These nurses are specifically trained in mental health. They work as the initial triage and determine the urgency of the mental health concern. They decide whether the patient needs immediate psychiatric intervention, can be referred to community services, requires admission to a psychiatric unit or can be safely discharged.","Option B is incorrect. Psychologists do not work in A&E. If a referral for a psychologist is required, it will come from the psychiatric liaison team or the patient’s GP.","Option C is incorrect. It is recommended for any patient with an intentional overdose to first speak to a psychiatric liaison before discharge."],explanation_detail:["<strong>Why the liaison team first?</strong> Intentional ingestion—even with a <em>non-toxic paracetamol level</em>—is a <mark>red flag for self-harm</mark>. NICE self-harm guidance advocates a <strong>same-day psychosocial assessment</strong> by a trained mental-health professional before discharge. Liaison psychiatry in the ED coordinates risk assessment, safety planning, and appropriate follow-up (e.g., CAMHS).","<strong>Priorities in ED (child/young person):</strong><ul class='list-disc ml-5'><li><strong>Safeguarding</strong>: assess for bullying, abuse, neglect; involve paediatrics and the hospital safeguarding team early.</li><li><strong>Capacity & consent</strong>: under 16 → involve parents/guardians; document Gillick competence if applicable.</li><li><strong>Toxicology</strong>: timing/amount cross-checked; repeat levels if indicated by timing; provide <em>paracetamol overdose education</em> even when non-toxic.</li><li><strong>Psychosocial assessment</strong>: mood, anxiety, impulsivity, intent/lethality, protective factors, access to means, social supports.</li><li><strong>Safety plan</strong>: remove medicines/sharps at home, crisis numbers, follow-up with CAMHS/school counselling, anti-bullying plan.</li></ul>","<strong>Why other options are inappropriate now:</strong><br/>• <strong>Refer to a psychologist</strong>—route is via liaison/CAMHS; psychologists typically are not the initial ED pathway.<br/>• <strong>Discharge with parental supervision</strong>—unsafe until a full psychosocial assessment and safety plan are completed.<br/>• <strong>Admit to a psychiatric ward</strong>—reserved for high acute risk, psychosis, or inability to maintain safety; not automatically required here.<br/>• <strong>Start antidepressants</strong>—not started from ED for an impulsive ingestion; requires comprehensive assessment, diagnosis, and CAMHS follow-up.","<strong>Exam takeaway:</strong> In children/teens with <em>intentional overdose</em> but medically stable, the next step is <mark>ED psychiatric liaison assessment</mark> with safeguarding and CAMHS follow-up, not automatic discharge or immediate medications."]},{id:"EM-0303",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 25 year old woman has been feeling anxious and nervous for the last few months. She also complains of several episodes of palpitations and tremors in the past few weeks. Her symptoms develop <strong>rapidly</strong> and last for a <strong>few minutes</strong>. She mentions that taking alcohol initially helped her relieve her symptoms but now this effect is wearing off and she has palpitations and tremors even after drinking alcohol. What is the <strong>SINGLE</strong> most likely diagnosis?",options:[{key:"A",text:"Panic attacks"},{key:"B",text:"Depression"},{key:"C",text:"Obsessive–compulsive disorder (OCD)"},{key:"D",text:"Alcohol addiction"},{key:"E",text:"Generalised Anxiety Disorder (GAD)"}],correct:"A",explanation_plabable:["There is a fine line between Generalised Anxiety Disorder (GAD) and Panic attacks. They both can present similarly. However, in this question, her symptoms develop rapidly and only last for a few minutes. This is the key phrase that you should look out for that tells you this is Panic attacks rather than GAD."],explanation_detail:["<strong>Why this is panic attacks:</strong> A panic attack is a <em>sudden surge of intense fear</em> that <strong>peaks within minutes</strong> and is accompanied by autonomic symptoms such as palpitations, tremor, sweating, chest tightness, dyspnoea, derealisation, or fear of dying/losing control. The stem emphasises <mark>abrupt onset</mark> and <mark>brief duration (minutes)</mark>—classic for panic attacks.","<strong>How it differs from GAD:</strong> <em>Generalised Anxiety Disorder</em> is characterised by <strong>excessive, persistent worry for ≥6 months</strong> about multiple domains, with symptoms like fatigue, restlessness, poor concentration, irritability and muscle tension. GAD is more chronic and baseline; panic attacks are <em>paroxysmal</em>.","<strong>Panic disorder vs isolated attacks:</strong> Panic <em>disorder</em> requires recurrent unexpected attacks plus ≥1 month of persistent concern/behaviour change (avoidance). In ED stems, the immediate label is often “panic attacks” unless that persistence/avoidance criterion is provided.","<strong>Alcohol note:</strong> Some patients self-medicate with alcohol; rebound anxiety, tremor and palpitations can occur as the effect wears off and with withdrawal. This does <em>not</em> change the underlying diagnosis here.","<strong>ED approach:</strong> Rule out medical mimics (hypoglycaemia, thyrotoxicosis, arrhythmia, PE when risk factors, stimulant use). If benign work-up and typical history: reassurance, breathing coaching, short-acting benzodiazepine can be considered for severe acute distress (avoid routine use). Safety-net and arrange GP/primary care follow-up.","<strong>Long-term management (primary care/psych):</strong> First-line is <strong>CBT</strong>; pharmacotherapy with <strong>SSRIs/SNRIs</strong> (start low, go slow), consider propranolol for performance anxiety, and advise limiting caffeine/alcohol. Encourage sleep hygiene and graded exposure if avoidance behaviours develop.","<strong>Exam tips:</strong> <ul class='list-disc ml-5'><li><strong>Rapid onset + short duration</strong> → choose <mark>panic attacks</mark>.</li><li><strong>Persistent daily worry for months</strong> → choose <mark>GAD</mark>.</li><li>Don’t confuse alcohol self-medication with a primary alcohol-use diagnosis unless dependence features are provided (tolerance, loss of control, withdrawal pattern, continuing use despite harm).</li></ul>"]},{id:"CT-0220",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 78 year old woman presents to the Emergency Department with severe epigastric pain and vomiting for the past 2 days. The pain is referred to her right shoulder. Generalised rigidity of the abdomen is noted when examining. She denies chest pain. She has a temperature of <strong>37.2°C</strong>, a respiratory rate of <strong>22 breaths/minute</strong> and a pulse of <strong>102 beats/minute</strong>. Her medical history is significant for rheumatoid arthritis. Which of the following is the <strong>SINGLE</strong> most appropriate initial investigation?",options:[{key:"A",text:"Ultrasound abdomen"},{key:"B",text:"Pelvic X-ray"},{key:"C",text:"Colonoscopy"},{key:"D",text:"Erect chest X-ray"},{key:"E",text:"Upper gastrointestinal endoscopy"}],correct:"D",explanation_plabable:["The history of rheumatoid arthritis tells you that she is more than likely to be taking NSAIDS to manage with the pain. This is a risk factor for peptic ulcer which if perforates gives the signs and symptoms that she is describing.","Perforation of a peptic ulcer causes an acute abdomen with epigastric pain that may progress to generalised rigidity. Shoulder tip pain is seen in perforation.","A diagnosis is made by taking an erect abdominal/chest X-ray. Air under the diaphragm gives the diagnosis of a perforation.","Further reading:","http://patient.info/doctor/peptic-ulcer-disease","https://www.nice.org.uk/guidance/cg141/chapter/1-Guidance","https://pathways.nice.org.uk/pathways/acute-upper-gastrointestinal-bleeding"],explanation_detail:["<strong>Why erect chest X-ray first?</strong> Suspected <mark>perforated peptic ulcer</mark>—elderly patient, NSAID risk (rheumatoid arthritis), sudden severe epigastric pain, <em>generalised rigidity</em>, and <strong>right shoulder tip pain</strong> from diaphragmatic irritation via the phrenic nerve. The quickest, widely available test that can immediately confirm perforation is an <strong>erect CXR</strong> showing <em>free sub-diaphragmatic air</em>. (If the patient cannot stand, a left lateral decubitus abdominal film or CT is alternative.)","<strong>Initial ED management bundle:</strong> ABCs, keep <em>NPO</em>, large-bore IV access, <strong>IV fluids</strong>, broad-spectrum <strong>IV antibiotics</strong>, <strong>IV PPI</strong>, analgesia, bloods (FBC/U&amp;Es/LFTs/CRP/lactate), group & save/crossmatch, urgent <strong>surgical</strong> review. CT abdomen with contrast often follows for operative planning if CXR is equivocal.","<strong>Why other options are wrong now:</strong><br/>• <strong>Ultrasound abdomen</strong>—good for biliary pathology/AAA bedside, but insensitive for free intraperitoneal air.<br/>• <strong>Pelvic X-ray</strong>—no diagnostic value here.<br/>• <strong>Colonoscopy</strong>—contraindicated in suspected perforation; insufflation risks worsening free air.<br/>• <strong>Upper GI endoscopy</strong>—not the initial investigation when perforation is suspected (risk of further perforation and usually unnecessary to make the diagnosis).","<strong>Exam takeaway:</strong> Elderly on NSAIDs + acute epigastric pain with peritonism and shoulder tip pain → think <mark>perforated PUD</mark>; order an <strong>erect CXR</strong> to look for air under diaphragm and start resus + surgical referral."]},{id:"EM-0932",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 71 year old woman is admitted to the hospital with confusion and weakness. On examination, her blood pressure is <strong>90/55 mmHg</strong>. She has a history of diabetes insipidus and is currently on desmopressin. Over the past few days, she has had reduced oral intake. Her heart rate is <strong>110</strong> beats per minute, and skin turgor is poor.<br/><br/><strong>Investigations:</strong><br/>Sodium <strong>158 mmol/L</strong> (135–145)<br/>Potassium <strong>3.9 mmol/L</strong> (3.5–5)<br/><br/>Which of the following is the most appropriate <strong>initial</strong> management?",options:[{key:"A",text:"5% dextrose infusion"},{key:"B",text:"0.45% normal saline"},{key:"C",text:"0.9% normal saline"},{key:"D",text:"Hypertonic saline"},{key:"E",text:"Hydrocortisone"}],correct:"C",explanation_plabable:["The patient presents with signs of hypernatraemia and hypotension, likely due to hypovolaemia. The initial management focuses on stabilising her blood pressure and correcting the hypernatraemia. 0.9% normal saline is suitable for both expanding the intravascular volume and gradually lowering the serum sodium.","Option B, which is 0.45% normal saline, is a hypotonic solution. In the context of this patient's clinical presentation with severe hypernatraemia and signs of hypovolaemia, using a hypotonic solution like 0.45% normal saline could lower the sodium levels too quickly. Rapid correction of hypernatraemia can lead to serious neurological complications, including cerebral oedema and central pontine myelinolysis. 0.9% normal saline provides a safer initial approach by stabilising blood pressure and gradually correcting the sodium imbalance."],explanation_detail:["<strong>What’s going on?</strong> This is <mark>hypovolaemic hypernatraemia</mark> (Na⁺ 158) from reduced intake ± osmotic water loss (history of diabetes insipidus). She is clinically dehydrated and hypotensive (90/55) with tachycardia.","<strong>First step:</strong> In hypernatraemia with <em>hypovolaemia/haemodynamic instability</em>, restore intravascular volume with <strong>0.9% NaCl</strong>. Once perfusion is stabilised, switch to a <em>hypotonic</em> fluid (e.g., 5% dextrose or 0.45% saline) to replace free water <em>slowly</em>.","<strong>Correction targets:</strong> For chronic/unknown-duration hypernatraemia, lower Na⁺ by ≤ <strong>10–12 mmol/L per 24 h</strong> (≈0.5 mmol/L/h) to avoid cerebral oedema. Check U&amp;Es/Na⁺ every 2–4 h initially and adjust rate.","<strong>Role of desmopressin:</strong> After resuscitation, review DI control and continue/adjust desmopressin if central DI suspected; closely monitor urine output/osmolality and sodium trend.","<strong>Why the other options are wrong initially:</strong><br/>• <strong>5% dextrose</strong>—hypotonic; gives free water and may drop Na⁺ too quickly before circulation is restored.<br/>• <strong>0.45% saline</strong>—also hypotonic, same risk for rapid fall in Na⁺ at the outset.<br/>• <strong>Hypertonic saline</strong>—would <em>raise</em> Na⁺ further; used for <em>hyponatraemia</em>/raised ICP, not here.<br/>• <strong>Hydrocortisone</strong>—for adrenal crisis/shock with suspected adrenal insufficiency; the stem points to hypovolaemic hypernatraemia instead.","<strong>Exam takeaway:</strong> Hypernatraemia + hypotension/dehydration → <mark>volume first with 0.9% saline</mark>, then carefully correct free-water deficit to safe targets."]},{id:"EM-1331",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 64 year old man with a history of Alzheimer’s disease and poorly controlled type 2 diabetes mellitus presents to the Emergency Department with a three-day history of pain and redness affecting his left foot. His carer mentions that the man has become increasingly confused over the past week and has been complaining of pain in the affected foot.",image:"/burn-foot.png",options:[{key:"A",text:"Burn"},{key:"B",text:"Diabetic foot"},{key:"C",text:"Eczema"},{key:"D",text:"Necrotising fasciitis"},{key:"E",text:"Pressure ulcer"}],correct:"A",explanation_plabable:["The most likely diagnosis is burn. The clinical history indicates a three-day history of pain, redness with an image showing a raw exposed dermis.","The patient’s Alzheimer’s and diabetic status may have contributed to delayed recognition and treatment of this injury."],explanation_detail:["<strong>Why burn?</strong> The photo shows large areas of <em>denuded, pink ‘raw’ dermis</em> with sloughing—typical of a <strong>partial-thickness (superficial–deep) burn</strong>. The history is acute (days) and painful.","<strong>Why not the others?</strong><br/>• <strong>Diabetic foot</strong>: classically neuropathic/ischemic ulcers at pressure points with surrounding callus; often <em>painless</em> due to neuropathy.<br/>• <strong>Eczema</strong>: pruritic, chronic eczematous patches/lichenification, not large sheets of exposed dermis.<br/>• <strong>Necrotising fasciitis</strong>: rapidly progressive severe systemic toxicity, <em>pain out of proportion</em>, crepitus, dusky skin/bullae—emergency debridement.<br/>• <strong>Pressure ulcer</strong>: over bony prominences from prolonged pressure, not this appearance/distribution.","<strong>Initial ED management (adult):</strong> Analgesia; gently cleanse/irrigate; remove loose non-viable tissue; apply non-adherent dressing; check tetanus status. Assess <strong>TBSA</strong> and depth; consider burn service referral criteria (e.g., >3% TBSA partial-thickness in extremes of age, functional areas, circumferential burns, suspected inhalation/chemical/electrical). In diabetics, have a <em>low threshold</em> to review for superadded infection and optimise glucose/perfusion.","<strong>Follow-up:</strong> Early wound review (24–48 h), elevation, strict glucose control, safety-net for infection (increasing pain, spreading erythema, fever)."]},{id:"CU-2830",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 9 month old child aspirated a foreign object which was removed at the hospital. The child is now fine. His parents would like to know what they should do should this occur again. What is the SINGLE most appropriate advice to give them?",options:[{key:"A",text:"Heimlich maneuver"},{key:"B",text:"Turn the infant into a supine position and give chest thrust"},{key:"C",text:"Turn the infant into a prone position and give five sharp blows with heel of hand to the middle of the back"},{key:"D",text:"Place a clenched fist between the umbilicus and xiphisternum and give abdominal thrusts"},{key:"E",text:"Turn infant into recovery position and open infant’s mouth"}],correct:"C",explanation_plabable:["Choking and Foreign Body Airway Obstruction (FBAO) in Infants","","For infants :","<ul class='list-disc ml-5'><li>In a seated position, support the infant in a head-downwards, prone position to let gravity aid removal of the foreign body</li><li>Deliver up to five sharp blows with the heel of your hand to the middle of the back (between the shoulder blades)</li><li>After five unsuccessful back blows, use chest thrusts: turn the infant into a supine position and deliver five chest thrusts. These are similar to chest compressions for CPR, but sharper in nature and delivered at a slower rate.</li></ul>","Reference:","http://patient.info/doctor/choking-and-foreign-body-airway-obstruction-fbao","http://awesomema.com/what-to-do-when-your-child-is-choking/"],explanation_detail:["<strong>Why option C?</strong> For <em>infants &lt; 1 year</em> with suspected severe FBAO (ineffective cough/cry, silent cough, cyanosis): place the infant <strong>prone, head-down</strong> along your forearm or thigh and give <strong>up to 5 back blows</strong> with the <em>heel of the hand</em> between the scapulae. This uses gravity + percussion to dislodge the object.","<strong>If still obstructed</strong>: turn supine and perform <strong>up to 5 chest thrusts</strong>—on the lower half of the sternum, just below the nipple line, depth similar to compressions but <em>slower and sharper</em>. Alternate 5 back blows and 5 chest thrusts while you <em>call for help/EMS</em>.","<strong>Do NOT</strong> perform <em>abdominal (Heimlich) thrusts</em> in infants because of risk of abdominal organ injury and ineffectiveness in this age group. Avoid blind finger sweeps (may push the object deeper).","<strong>If the infant becomes unresponsive</strong>: start <strong>CPR</strong> (30:2 for a single rescuer; 15:2 if two trained rescuers), check the mouth for a visible object <em>before</em> each set of breaths, and remove only if you can see it. Continue until the airway clears or help arrives.","<strong>Recognising severity</strong>: Effective cough/cry with good air entry → encourage coughing and observe. Ineffective cough, stridor/silence, cyanosis, decreased responsiveness → treat as severe FBAO (algorithm above).","<strong>Parent advice essentials</strong>: keep small objects away, supervise feeds, cut food appropriately, and seek infant first-aid training. After any choking episode—even if resolved—have the child reviewed for residual airway oedema/aspiration."]},{id:"PE-2190",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 22 year old man presents to the Emergency Department with coughing and dyspnoea. He is a known asthmatic and usually uses salbutamol occasionally. His respiratory rate is <strong>30 breaths/minute</strong>, heart rate is <strong>110 beats/minute</strong>, and oxygen saturation is <strong>93%</strong>. He is given oxygen <strong>100%</strong> by face mask. What is the <strong>SINGLE</strong> most appropriate initial management?",options:[{key:"A",text:"Intravenous salbutamol"},{key:"B",text:"Intravenous corticosteroids"},{key:"C",text:"Nebulised salbutamol"},{key:"D",text:"Reduce oxygen"},{key:"E",text:"Intravenous antibiotics"}],correct:"C",explanation_plabable:["The next most important management is salbutamol nebulizers to reverse his obstructive airways. Steroids should follow shortly after."],explanation_detail:["<strong>Why nebulised salbutamol now?</strong> This is an <em>acute asthma exacerbation</em> with tachypnoea (RR 30), tachycardia (HR 110) and SpO₂ 93%. First-line bronchodilation is a <strong>short-acting β₂-agonist</strong> (salbutamol) delivered by <strong>nebuliser</strong>—often repeated or continuous early. Add ipratropium if moderate–severe.","<strong>Oxygen:</strong> Maintain saturations 94–98%. Starting with high-flow oxygen is acceptable initially; titrate to target once monitored. Do <em>not</em> reduce oxygen before stabilisation.","<strong>Steroids:</strong> Give <strong>oral prednisolone 40–50 mg</strong> (or IV hydrocortisone if unable to take PO) soon after bronchodilator therapy—onset is hours, so it’s the next step, not the immediate fix.","<strong>Why the other options are wrong:</strong><br/>• <strong>IV salbutamol</strong> — reserved for refractory cases after maximal nebulised therapy; more adverse effects.<br/>• <strong>IV corticosteroids</strong> — route isn’t needed if the patient can take oral; and steroids are adjuncts, not the immediate bronchodilator.<br/>• <strong>Reduce oxygen</strong> — inappropriate during acute hypoxaemia; keep target 94–98%.<br/>• <strong>IV antibiotics</strong> — no evidence of bacterial infection; antibiotics are not routine in asthma exacerbations.","<strong>ED bundle:</strong> O₂ to target 94–98%, <strong>nebulised salbutamol</strong> (± ipratropium), <strong>steroids</strong>, consider <strong>MgSO₄ IV</strong> if poor response, monitor with peak flow/ABG if severe, and safety-net/observe."]},{id:"EM-1036",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 75 year old man has sudden-onset shortness of breath and pleuritic chest pain. He underwent a transurethral resection of the prostate (TURP) three days ago for benign prostatic hyperplasia. On examination, he has a pulse of <strong>110 beats per minute</strong>, respiratory rate of <strong>24 breaths per minute</strong>, and oxygen saturation of <strong>94% on room air</strong>. His blood pressure is <strong>130/80 mmHg</strong>. Chest auscultation reveals clear lung fields with no added sounds. What is the most appropriate investigation?",options:[{key:"A",text:"CT pulmonary angiography (CTPA)"},{key:"B",text:"Chest X-ray"},{key:"C",text:"D-dimer"},{key:"D",text:"Lower limb ultrasound"},{key:"E",text:"Ventilation-perfusion (V/Q) scan"}],correct:"A",explanation_plabable:["The most appropriate next investigation is CT pulmonary angiography (CTPA), as the patient has a high clinical suspicion for pulmonary embolism (PE) following recent surgery.","A chest X-ray may be performed to rule out other causes but is not diagnostic for PE.","While a D-dimer is useful in low-risk patients, it is not appropriate in this case due to his high pre-test probability based on the Wells score","A lower limb ultrasound may confirm deep vein thrombosis (DVT) but does not exclude PE.","A ventilation-perfusion (V/Q) scan is an alternative when CTPA is contraindicated, such as in renal impairment or contrast allergy."],explanation_detail:["<strong>Why CTPA?</strong> Post-operative patient (TURP 3 days ago) with sudden pleuritic pain, tachycardia, tachypnoea and borderline hypoxia → <strong>high pre-test probability</strong> of PE. In high probability, go straight to <mark>CT pulmonary angiography</mark> unless contraindicated.","<strong>What about the other tests?</strong><br/>• <strong>CXR</strong> rules out alternative diagnoses (e.g., pneumothorax, pneumonia) but cannot confirm/deny PE.<br/>• <strong>D-dimer</strong> is only for <em>low</em> clinical probability; using it here delays definitive imaging and can be misleading.<br/>• <strong>Leg ultrasound</strong> may detect DVT, but a negative scan does not exclude PE and a positive scan still leaves the extent/management questions.<br/>• <strong>V/Q scan</strong> is reserved for when CTPA can’t be done (contrast allergy, significant renal impairment, pregnancy depending on local protocols) and requires a normal CXR for best accuracy.","<strong>Management preview (after confirmation):</strong> Initiate anticoagulation (DOAC/LMWH per local policy) unless contraindicated; consider thrombolysis if haemodynamically unstable (massive PE); address risk factors and plan duration of therapy."]},{id:"EM-0045",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Anaphylaxis after peanut ingestion",stem:"A 35-year-old man with a known peanut allergy presents to A&E 20 minutes after unknowingly eating a cupcake containing nuts. He is acutely breathless with a hoarse voice and difficulty swallowing. Examination reveals widespread wheeze and stridor, with swelling of the lips and tongue. <br/><br/><strong>Observations:</strong> HR <strong>110 bpm</strong>, BP <strong>88/59 mmHg</strong>, RR <strong>26/min</strong>, SpO₂ <strong>91%</strong> on air, Temp <strong>36.6°C</strong>. Intravenous access has been established. What is the SINGLE most appropriate immediate treatment?",options:[{key:"A",text:"Intramuscular adrenaline 0.5 ml 1 in 1,000"},{key:"B",text:"Intravenous adrenaline 0.5 ml 1 in 1,000"},{key:"C",text:"Intravenous hydrocortisone"},{key:"D",text:"Intramuscular adrenaline 0.3 ml 1 in 1,000"},{key:"E",text:"Intramuscular adrenaline 0.5 ml 1 in 10,000"}],correct:"A",explanation_plabable:["Even though IV access has been established, the best treatment to resolve his hypersensitivity reaction is STILL intramuscular adrenaline.","Intravenous adrenaline can be dangerous and should only be used in certain specialist settings with someone very skilled and experienced its used.","Further reading:","https://www.resus.org.uk/anaphylaxis/emergency-treatment-of-anaphylactic-reactions/"],explanation_detail:["<strong>Why the answer is correct:</strong> This is life‑threatening anaphylaxis (airway oedema, bronchospasm and hypotension). First‑line treatment is <strong>IM adrenaline 0.5 mg (0.5 ml of 1:1,000)</strong> into the anterolateral thigh; repeat every 5 minutes if there is inadequate response. Adrenaline reverses vasodilatation and capillary leak (α₁), relieves bronchospasm (β₂), and reduces further mediator release.","<strong>Why the other options are wrong:</strong> B) IV adrenaline bolus risks arrhythmias and severe hypertension; it is reserved for specialist settings using titrated infusions. C) Hydrocortisone has delayed onset and is an adjunct only. D) 0.3 ml is an adult under‑dose and may fail to correct shock/airway swelling. E) 1 in 10,000 is the cardiac arrest concentration and is inappropriate for IM use in anaphylaxis.","<strong>Management/algorithm:</strong> <ul><li>Call for help; lie patient <em>flat with legs raised</em>; give high‑flow oxygen.</li><li>IM adrenaline 0.5 mg (1:1,000) to the thigh; repeat every 5 min as needed.</li><li>Establish IV access; give rapid 0.9% saline bolus 500–1000 ml for hypotension; reassess and repeat if required.</li><li>Adjuncts <em>after adrenaline</em>: chlorphenamine and hydrocortisone; consider nebulised bronchodilator for persistent wheeze.</li><li>Prepare for airway support and early anaesthetics/ICU involvement if stridor or refractory shock.</li><li>Observe for biphasic reaction; provide adrenaline auto‑injector training, clear documentation of the trigger, and allergy clinic referral prior to discharge.</li></ul>","<strong>Exam takeaway:</strong> In adult anaphylaxis, the immediate life‑saving step is <strong>IM adrenaline 0.5 mg (1:1,000)</strong> in the anterolateral thigh; IV adrenaline is for specialists only."]},{id:"EM-1792",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"TCA overdose with widened QRS and acidosis",stem:"A 34-year-old man with a 3-year history of depression attends the Emergency Department after deliberate ingestion of a significant amount of amitriptyline tablets a few hours ago. He is agitated and confused with mydriasis and feels very thirsty. He had a single brief convulsion which he recovered from. An ECG shows sinus tachycardia with <strong>widened QRS complexes</strong>. <br/><br/><strong>Observations:</strong> HR <strong>130 bpm</strong>, BP <strong>80/40 mmHg</strong> despite fluid resuscitation, RR <strong>20/min</strong>, Temp <strong>39.1°C</strong>. <br/><br/><strong>Arterial blood gas:</strong><br/>PaO₂: <strong>8.5 kPa</strong> (&gt;10 kPa)<br/>PaCO₂: <strong>4.3 kPa</strong> (4.7–6 kPa)<br/>pH: <strong>7.22</strong> (7.35–7.45)<br/>HCO₃⁻: <strong>16 mmol/L</strong> (22–26 mmol/L)<br/><br/>What is the most appropriate management?",options:[{key:"A",text:"Lorazepam"},{key:"B",text:"Sodium bicarbonate"},{key:"C",text:"Flumazenil"},{key:"D",text:"Clozapine"},{key:"E",text:"Activated charcoal and nasogastric tube suction"}],correct:"B",explanation_plabable:["Tricyclic antidepressants (TCA) are very toxic by ingestion. It is important to monitor and treat as fatal cardiac arrhythmias may occur soon after ingestion. Cardiac complications include prolonged QRS complexes and tachyarrhythmias.","Most arrhythmias occur within a few hours of an overdose and should be managed by correcting hypoxia and acidosis. Sodium bicarbonate is given to reverse the acidosis which improves cardiac rhythm. It is considered in TCA overdose patients where there is severe metabolic acidosis, the QRS is greater than 120 ms or if they are hypotensive despite fluid resuscitation.","Lorazepam is not part of the management of tricyclic antidepressant overdose unless his convulsions are frequent or prolonged.","Activated charcoal and nasogastric tube suction should only be considered within the first hour of tricyclic antidepressant overdose.","Plabable take-home point - always consider sodium bicarbonate infusion in TCA overdose if there is a QRS of greater than 120 ms or hypotension unresponsive to fluids (even if the patient is not acidotic) - this is because we are aiming for a pH of 7.5 to 7.55"],explanation_detail:["<strong>Why the answer is correct:</strong> Amitriptyline overdose causes anticholinergic features, CNS toxicity and sodium-channel blockade in the His–Purkinje system and myocardium, producing QRS widening, ventricular arrhythmias and hypotension. IV sodium bicarbonate provides a sodium load and alkalinises serum to displace TCA from Na⁺ channels, narrowing the QRS and improving blood pressure. In TCA toxicity, give sodium bicarbonate when there is significant metabolic acidosis, <strong>QRS >120 ms</strong>, ventricular arrhythmia, or hypotension despite fluids; target a pH of 7.5–7.55.","<strong>Why the other options are wrong:</strong> A) Lorazepam is for recurrent or prolonged seizures but does not treat QRS widening or shock. C) Flumazenil is contraindicated in mixed/unknown overdoses and seizure‑prone ingestions; it offers no benefit here. D) Clozapine is an antipsychotic and inappropriate. E) Activated charcoal/NG suction is only useful within 1 hour of ingestion and risks aspiration in an agitated patient; the priority is cardiac stabilisation with bicarbonate.","<strong>Management/algorithm:</strong> <ul><li>ABCDE, high‑flow O₂, IV access; treat hypoxia and correct temperature.</li><li>Bolus <strong>IV sodium bicarbonate</strong> (e.g., 50–100 mmol; 1–2 mL/kg of 8.4%) and repeat/titrate to narrow QRS and achieve pH 7.5–7.55; consider infusion.</li><li>Fluids for hypotension; if refractory, start vasopressor (e.g., noradrenaline).</li><li>Seizures: benzodiazepines. Avoid phenytoin and class Ia/Ic antiarrhythmics; consider magnesium for TdP.</li><li>Charcoal only if presentation ≤1 hour and airway protected.</li><li>Continuous ECG monitoring for at least 12–24 h; involve toxicology/ICU early.</li></ul>","<strong>Exam takeaway:</strong> In TCA overdose, a <strong>widened QRS or hypotension</strong> is an indication for <strong>IV sodium bicarbonate</strong> with an alkalinisation target pH of 7.5–7.55; avoid flumazenil and sodium‑channel–blocking antiarrhythmics."]},{id:"EN-1319",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Hyperkalaemia on ABG — next step",stem:"A 60-year-old man presents to the Emergency Department complaining of feeling exhausted and unwell since earlier in the day. Over the past hour he has felt his heart racing. He has type 2 diabetes mellitus (10 years) on metformin, and ramipril was added 5 years ago for hypertension. An urgent ABG has been performed.<br/><br/><strong>ABG / labs:</strong><br/>pH: <strong>7.33</strong> (7.35–7.45)<br/>pCO₂: <strong>5.0 kPa</strong> (4.7–6.0)<br/>pO₂: <strong>12 kPa</strong> (12–14)<br/>Sodium: <strong>138 mmol/L</strong> (135–145)<br/>Potassium: <strong>6.8 mmol/L</strong> (3.5–5.0)<br/><br/>Which of the following is the most appropriate next step in the management of this patient?",options:[{key:"A",text:"12 lead ECG"},{key:"B",text:"Chest X-ray"},{key:"C",text:"Renal function test"},{key:"D",text:"Venous blood gas analysis"},{key:"E",text:"Serum ramipril concentration"}],correct:"A",explanation_plabable:["The patient presents with nonspecific complaints. However, the patient's current medication - ACE inhibitors (prescribed for hypertension) should raise a red flag for a possible electrolyte imbalance, specifically hyperkalaemia. The arterial blood gas sample confirms this suspicion.","Severity of hyperkalaemia","• Mild → 5.5 - 5.9 mmol/L","• Moderate → 6.0 - 6.4 mmol/L","• Severe → ≥ 6.5 mmol/L","","Drug-induced hyperkalaemia (think of the following)","• Angiotensin-converting enzyme inhibitors","• Angiotensin receptor blockers","• Potassium-sparing agents","","Hyperkalaemia leads to hyperexcitability of the myocardium, which may precipitate ventricular fibrillation/cardiac arrest. Therefore, the most important subsequent step in the management of this patient is to obtain an ECG tracing as well as monitor the patient on a cardiac monitor.","","Further reading:","https://patient.info/doctor/hyperkalaemia-in-adults"],explanation_detail:["<strong>Why the answer is correct:</strong> A potassium of <strong>6.8 mmol/L</strong> is severe hyperkalaemia (≥6.5 mmol/L) and carries a high risk of malignant arrhythmias. The immediate next step is to obtain a <strong>12‑lead ECG</strong> and commence continuous cardiac monitoring to detect life‑threatening changes (peaked T waves, PR prolongation, QRS widening, sine‑wave pattern, VT/VF).","<strong>Why the other options are wrong:</strong> B) Chest X‑ray will not address imminent arrhythmic risk. C) Renal function is relevant but should not delay ECG/monitoring and emergent treatment. D) A venous gas adds little after an ABG has confirmed hyperkalaemia. E) Serum ramipril concentration is not clinically useful and would not change acute management.","<strong>Management/algorithm:</strong> <ul><li>Immediate ECG and continuous monitoring; stop offending drugs (ACEi/ARBs, K‑sparing diuretics).</li><li>If ECG changes or K⁺ ≥6.5 mmol/L, give <strong>IV calcium (e.g., 10 mL 10% calcium gluconate)</strong> to stabilise myocardium; repeat if no ECG improvement.</li><li>Shift potassium intracellularly: <strong>IV insulin (10 units soluble) with 25 g glucose</strong>; consider nebulised salbutamol 10–20 mg; consider IV sodium bicarbonate if severe acidaemia.</li><li>Remove potassium: loop diuretics and/or potassium binders; urgent renal referral for dialysis if refractory or in renal failure.</li><li>Recheck potassium and glucose at 1 hour; continue monitoring until stable.</li></ul>","<strong>Exam takeaway:</strong> Suspected hyperkalaemia (especially ≥6.5 mmol/L) → <strong>ECG and cardiac monitoring first</strong>; treat urgently if there are ECG changes or severe elevation."]},{id:"EN-1202",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Paracetamol and alcohol ingestion — next step",stem:"A 29-year-old woman presents to the Emergency Department 2 hours after ingesting twelve paracetamol tablets with an unspecified amount of alcohol following acute personal stress. She feels remorseful and now denies any current suicidal ideation. She is alert, cooperative and haemodynamically stable. Examination is unremarkable, and initial blood tests including liver function tests are within normal limits. Which of the following is the most appropriate next step in management?",options:[{key:"A",text:"Refer to psychiatric liaison"},{key:"B",text:"Refer to a psychologist"},{key:"C",text:"Discharge with follow-up in primary care"},{key:"D",text:"Admit to a psychiatric ward"},{key:"E",text:"Schedule an outpatient liver function test in one week"}],correct:"A",explanation_plabable:["This patient has engaged in a potentially harmful act by ingesting a significant quantity of paracetamol and alcohol, indicating acute distress or a possible underlying mental health condition. Referral to a psychiatric liaison is indicated to assess her mental health needs thoroughly. This would usually be a psychiatric nurse who is trained to accept mental health referrals from A&E. They would be able to determine whether this patient requires inpatient treatment, close follow-up in the community, or can be safely discharged."],explanation_detail:["<strong>Why the answer is correct:</strong> Any patient presenting after self-harm or an overdose requires a comprehensive psychosocial assessment by <em>liaison psychiatry</em> before discharge, regardless of currently denying suicidal ideation. The assessment addresses suicide risk, precipitating factors, safeguarding, and safety planning, and coordinates appropriate follow‑up (crisis team/CMHT).","<strong>Why the other options are wrong:</strong> B) A psychologist referral is not an acute ED pathway and does not replace urgent risk assessment. C) Discharging with GP follow‑up alone is unsafe after an overdose without a formal mental health assessment. D) Psychiatric admission is reserved for patients with ongoing intent, high risk, psychosis, or inability to ensure safety; this cooperative, stable patient does not automatically require admission. E) Scheduling delayed LFTs misses the immediate priority of psychosocial assessment (and does not guide acute risk); early LFTs may be normal and paracetamol management depends on timed levels and NAC criteria, not a routine one‑week LFT check.","<strong>Management/algorithm:</strong> <ul><li>Medically assess and treat overdose as indicated (time a paracetamol level at ≥4 h post-ingestion; start NAC if above nomogram or per local protocol).</li><li>Place on appropriate observations; address alcohol intoxication and safeguarding.</li><li>Request <strong>liaison psychiatry</strong> for psychosocial and suicide risk assessment, safety planning, and follow‑up arrangements.</li><li>Only consider psychiatric admission if high/ongoing risk or inability to maintain safety in the community.</li><li>Document capacity, risk, and discharge plan; provide crisis contacts.</li></ul>","<strong>Exam takeaway:</strong> After overdose/self-harm, medical stabilisation plus <strong>mandatory liaison psychiatry assessment</strong> precede discharge—even if the patient currently denies suicidal thoughts."]},{id:"PY-1010",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Paracetamol overdose — when to take the level",stem:"A 14-year-old girl is brought to the Emergency Department having taken an <em>unknown amount</em> of paracetamol approximately <strong>2 hours</strong> ago. She has no prior psychiatric history and is currently well, alert and haemodynamically stable. When should you obtain a plasma paracetamol concentration following her presentation?",options:[{key:"A",text:"Immediately"},{key:"B",text:"In 2 hours' time"},{key:"C",text:"In 4 hours' time"},{key:"D",text:"In 8 hours' time"},{key:"E",text:"In 22 hours' time"}],correct:"B",explanation_plabable:["If one takes an unknown amount of paracetamol, we admit.","Serum paracetamol concentration levels are attained at 4 hours post ingestion if consumed >150mg/kg (or an unknown amount)."],explanation_detail:["<strong>Why the answer is correct:</strong> Paracetamol levels are interpreted on the Rumack–Matthew nomogram only when taken at <strong>≥ 4 hours post-ingestion</strong>. She presented 2 hours after ingestion, so the appropriate plan is to obtain the level <strong>in 2 hours</strong> (i.e., at the 4-hour mark). Earlier samples may underestimate absorption and are not interpretable.","<strong>Why the other options are wrong:</strong> A) An immediate level (<4 h) cannot be interpreted and risks false reassurance. C) Waiting 4 more hours (to 6 h post-ingestion) delays decision-making unnecessarily. D) 8 hours would further delay care; if ≥ 8 h since ingestion and toxicity suspected, start NAC while awaiting the result. E) 22 hours is inappropriate for initial risk assessment; late levels are used to guide completion of treatment.","<strong>Management/algorithm:</strong> <ul><li>Admit for observation/risk assessment when the amount is unknown.</li><li>Take first level at <strong>4 h</strong> post-ingestion (draw at 2 h from now); plot on nomogram and manage per local threshold (e.g., treatment line / 150 mg/kg).</li><li>If presentation is <strong>>8 h</strong> after ingestion or uncertain timing with high suspicion, commence <strong>N-acetylcysteine (NAC)</strong> immediately while awaiting levels.</li><li>Consider activated charcoal if within 1 h of a potentially toxic dose and airway protected.</li><li>Ensure psychosocial assessment before discharge and provide safety planning.</li></ul>","<strong>Exam takeaway:</strong> For acute paracetamol overdose, draw the first paracetamol level at <strong>4 hours post-ingestion</strong>; if the patient presents at 2 hours, take it <strong>in 2 hours' time</strong>."]},{id:"EM-1560",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Minor head injury in a child — next step",stem:"An 11-year-old boy fell from his bicycle earlier today and struck his head on a lamppost. He lost consciousness for a few seconds and on arrival cannot remember the event or riding the bicycle; his mother confirms the amnesia has persisted for <strong>more than 5 minutes</strong>. He was not wearing a helmet. Examination shows a small frontal scalp swelling with no lacerations or bleeding. Neurological examination is normal and his Glasgow Coma Scale is <strong>15/15</strong>. What is the SINGLE most appropriate management?",options:[{key:"A",text:"CT head within 1 hour"},{key:"B",text:"MRI head within 6 hours"},{key:"C",text:"Observe for a minimum of 4 hours post head injury"},{key:"D",text:"Observe for a minimum of 24 hours post head injury"},{key:"E",text:"Prescribe pain relief and discharge"}],correct:"C",explanation_plabable:["There is ONE risk factor present from the injury which is amnesia lasting more than 5 minutes. With only ONE risk factor present, children need to be observed for a minimum of 4 hours post head injury. If the GCS drops less than 15 OR if there is further vomiting OR further episodes of abnormal drowsiness, he would require a CT scan within the hour.","If he had more than ONE risk factor, for example, if he had a loss of consciousness for more than 5 minutes AND amnesia lasting more than 5 minutes, then he would be a candidate for a CT scan within the hour.","A good summary of risk factors and action plans can be found on NICE CKS here:","https://www.nice.org.uk/guidance/cg176/resources/imaging-algorithm-pdf-498950893"],explanation_detail:["<strong>Why the answer is correct:</strong> NICE head injury guidance for children (<16 years) recommends <strong>observation for at least 4 hours</strong> when there is a single intermediate‑risk factor (e.g., amnesia >5 minutes) and GCS 15 with a normal examination. During observation, if GCS falls <15, vomiting recurs, or abnormal drowsiness develops, perform a CT head within 1 hour.","<strong>Why the other options are wrong:</strong> A) CT within 1 hour is indicated when there are <em>two or more</em> intermediate‑risk factors or high‑risk features (e.g., suspected skull fracture, focal deficit, seizure, GCS <14). With only one risk factor, immediate CT is not required. B) MRI is not used acutely for minor head injury. D) 24‑hour observation is unnecessary if the child remains well after the recommended 4‑hour period. E) Immediate discharge is unsafe because a period of ED observation is mandated with any risk factor.","<strong>Management/algorithm:</strong> <ul><li>Observe in ED for ≥4 hours with neuro‑obs (GCS, HR, RR, BP, SpO₂, pain, behaviour).</li><li>CT head within 1 hour if deterioration: GCS <15, further vomiting, or increasing drowsiness; also if a second risk factor emerges.</li><li>If remains well after observation: discharge with head‑injury advice, responsible adult supervision, and return precautions.</li><li>Consider safeguarding and helmet/road safety counselling.</li></ul>","<strong>Exam takeaway:</strong> Child with minor head injury and a <strong>single</strong> risk factor (e.g., amnesia >5 min, GCS 15) → <strong>observe for ≥4 hours</strong>; escalate to CT only if additional risk factors or deterioration occur."]},{id:"EM-0590",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Unresponsive trauma patient — first action",stem:"A 24-year-old man is brought to the Emergency Department after being punched while under police custody. He is now <strong>cyanosed</strong> and <strong>unresponsive</strong>. On assessment there are <strong>absent breath sounds</strong>. What is the SINGLE most appropriate initial action?",options:[{key:"A",text:"IV fluids"},{key:"B",text:"Clear airway"},{key:"C",text:"Turn patient and put in recovery position"},{key:"D",text:"Give 100% oxygen"},{key:"E",text:"Analgesia"}],correct:"B",explanation_plabable:["In this question, the examiners want you to know the basics of life-threatening emergencies. ABC - airway, breathing, circulation should always be addressed first.","You would turn the patient in a recovery position if the patient has decreased level of responsiveness, breathing and does not meet the criteria for rescue breaths or CPR. This patient here is not breathing or responsive."],explanation_detail:["<strong>Why the answer is correct:</strong> In an unresponsive, apnoeic trauma patient the immediate priority is the <strong>airway</strong>. Open and clear the airway (suction, remove visible obstruction) while maintaining cervical spine alignment; perform a jaw thrust (or head‑tilt–chin‑lift if no concern for C‑spine). Only after an airway is established can effective ventilation and oxygenation occur.","<strong>Why the other options are wrong:</strong> A) IV fluids address circulation but will not treat apnoea; airway/ventilation must precede circulation. C) Recovery position is for patients who are breathing spontaneously and do not need rescue breaths or CPR; inappropriate in an apnoeic patient. D) Administering oxygen is ineffective if the airway is obstructed; ventilate with a bag‑valve mask <em>after</em> opening the airway. E) Analgesia is irrelevant in an unresponsive apnoeic patient and may depress respiration.","<strong>Management/algorithm:</strong> <ul><li>Shout for help; apply basic monitoring.</li><li>Open/clear airway with jaw thrust and suction; insert an oropharyngeal airway if tolerated while maintaining C‑spine.</li><li>Assess breathing: if not breathing normally, deliver <strong>bag‑valve‑mask ventilation with 100% oxygen</strong>; check for signs of life and pulse, and start CPR per ALS if pulseless.</li><li>Escalate to advanced airway (e.g., intubation) and definitive trauma management as required.</li></ul>","<strong>Exam takeaway:</strong> In any collapsed patient, follow <strong>ABC</strong>—<em>open/clear the airway first</em>; oxygen and fluids are useless until the airway is patent and the patient is ventilated."]},{id:"EM-1253",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Coughing, cyanosis and urticaria after food exposure",stem:"An 8-year-old boy is rushed into A&E coughing, cyanosed and with an urticarial rash. His mother reports that he began to cough shortly after eating a cookie at a garden party. What is the SINGLE most likely diagnosis?",options:[{key:"A",text:"Aspiration of food"},{key:"B",text:"Allergic reaction"},{key:"C",text:"Diffuse oesophageal spasm"},{key:"D",text:"Tracheoesophageal fistula"},{key:"E",text:"Achalasia"}],correct:"B",explanation_plabable:["This boy is having anaphylaxis which is a type of allergic reaction.","","The other options are far less likely:","","Aspiration of food → Although this makes sense and many will choose this, aspiration of food will not account for the urticarial rash seen on this boy.","","Diffuse oesophageal spasm → Usually presents with intermittent chest pain and dysphagia. The pain can simulate that of a myocardial infarction, but it bears no relationship with exertion. There is no relationship with eating, ruling out odynophagia. The pain can be precipitated by drinking cold liquids.","","Tracheoesophageal fistula → Is suggested in a newborn by copious salivation associated with choking, coughing, vomiting, and cyanosis coincident with the onset of feeding.","","Achalasia → Presents with slowly progressive dysphagia. Initially worse for liquids than solids. Frequent regurgitation of undigested food is common in late disease. Secondary recurrent respiratory infections can occur due to aspiration. Achalasia cannot present suddenly like in this scenario."],explanation_detail:["<strong>Why the answer is correct:</strong> Sudden respiratory symptoms after food exposure with an urticarial rash are classic for an <strong>allergic reaction</strong> (anaphylaxis if airway/breathing/circulation involvement). Food triggers are common in children; coughing and cyanosis indicate respiratory involvement, and the cutaneous features (urticaria) rule against simple aspiration.","<strong>Why the other options are wrong:</strong> Aspiration does not cause urticaria. Diffuse oesophageal spasm causes intermittent chest pain/dysphagia unrelated to exertion or meals and is precipitated by cold drinks. Tracheoesophageal fistula typically presents in the neonatal period with choking/cyanosis with feeds. Achalasia causes chronic, progressive dysphagia and regurgitation—not an acute presentation immediately after a cookie.","<strong>Management/algorithm:</strong> <ul><li>Assess <strong>ABC</strong>; if anaphylaxis, give <strong>IM adrenaline 1:1000</strong> (6–12 years: 0.3 mg), call for help, lie flat with legs raised, give high‑flow oxygen.</li><li>Establish IV access and give fluid bolus if hypotensive.</li><li>Adjuncts after adrenaline: chlorphenamine and hydrocortisone; consider nebulised bronchodilator for wheeze.</li><li>Observe for biphasic reactions and provide allergy advice and referral on discharge.</li></ul>","<strong>Exam takeaway:</strong> Food exposure + acute cough/respiratory compromise + urticaria = <strong>allergic reaction/anaphylaxis</strong>, not aspiration or chronic oesophageal pathology."]},{id:"EM-4315",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Sepsis with lactic acidosis — immediate next step",stem:"A 46-year-old man presents to the Emergency Department with breathlessness and fever after several days of cough. He feels very short of breath on exertion. <br/><br/><strong>Observations:</strong> Temp <strong>40.3°C</strong>, HR <strong>120 bpm</strong>, BP <strong>110/80 mmHg</strong>, RR <strong>26/min</strong>, SpO₂ <strong>96%</strong> on <strong>15 L</strong> oxygen via non-rebreathe mask. Intravenous Hartmann's solution has been started. <br/><br/><strong>ABG:</strong><br/>pH: <strong>7.21</strong> (7.35–7.45)<br/>PaO₂: <strong>11 kPa</strong> (10–14)<br/>PaCO₂: <strong>3.5 kPa</strong> (4.7–6.0)<br/>Bicarbonate: <strong>17 mmol/L</strong> (22–26)<br/>Lactate: <strong>9 mmol/L</strong> (2–4)<br/>Base excess: <strong>−4 mmol/L</strong> (± 2)<br/><br/>What is the SINGLE most appropriate management?",options:[{key:"A",text:"Intravenous antibiotics"},{key:"B",text:"High flow oxygen"},{key:"C",text:"Intravenous sodium bicarbonate"},{key:"D",text:"Intravenous sodium chloride"},{key:"E",text:"Intermittent positive-pressure ventilation (IPPV)"}],correct:"A",explanation_plabable:["This question tests your knowledge of sepsis 6.","","Sepsis Six → Take 3, Give 3","","Take 3","• Blood cultures","• FBC, urea and electrolytes, clotting, lactate","• Start monitoring urine output","","Give 3","• High flow oxygen","• Intravenous fluid challenge","• Intravenous antibiotics","","As he is saturating fine on 15 litres of oxygen and intravenous fluids have been started, the next item to give is intravenous antibiotics.","","His arterial blood gas shows evidence of metabolic acidosis, likely from increased acid load due to sepsis. The pH is < 7.35, bicarbonates are low, base excess is < -2 and lactate is high. There is some compensatory hypocarbia which is the reason that the pCO2 is low. It is more important to treat the cause of metabolic acidosis first rather than administer sodium bicarbonate."],explanation_detail:["<strong>Why the answer is correct:</strong> This man meets criteria for sepsis with raised lactate (9 mmol/L) and metabolic acidosis. Two elements of the Sepsis Six bundle have already been started (oxygen and IV fluids), so the next immediate action is to <strong>administer IV broad‑spectrum antibiotics within 1 hour</strong> of recognising sepsis. Early antibiotics reduce mortality and target the source (likely pneumonia).","<strong>Why the other options are wrong:</strong> B) High‑flow oxygen is already being delivered. C) Sodium bicarbonate does not treat the cause of lactic acidosis and is not routinely indicated; priority is source control and perfusion. D) Additional sodium chloride beyond guided fluid resuscitation is not the next step once fluids are running. E) IPPV is reserved for ventilatory failure; his PaO₂ is acceptable on supplemental oxygen and the problem is sepsis with lactic acidosis, not primary ventilatory failure.","<strong>Management/algorithm:</strong> <ul><li>Implement <strong>Sepsis Six</strong> within 1 hour: <em>Take</em> blood cultures, bloods (FBC/U&E/coag/lactate), and start urine output monitoring; <em>Give</em> high‑flow oxygen, IV fluid bolus (e.g., crystalloid 500 mL–1 L then reassess), and <strong>IV antibiotics</strong>.</li><li>Repeat lactate, review for source (e.g., CXR, cultures), and escalate to critical care if persistent hypotension/lactate ≥4 despite fluids.</li><li>Aim to treat metabolic acidosis by restoring perfusion and treating infection rather than with bicarbonate.</li></ul>","<strong>Exam takeaway:</strong> In a septic patient already on oxygen and fluids, the next lifesaving step is <strong>IV antibiotics within the first hour</strong>; treat the cause of acidaemia rather than giving bicarbonate."]},{id:"EM-0561",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Panic-driven hyperventilation — immediate intervention",stem:"A 22-year-old man is rushed into the Emergency Department describing recurrent episodes of fearfulness with palpitations, peri-oral tingling and cramping of the hands. Each episode lasts 5–10 minutes. He worries he is having a heart attack. An ECG shows <em>sinus tachycardia</em>. His respiratory rate is <strong>34/min</strong>; he is otherwise haemodynamically stable. What is the SINGLE most appropriate immediate intervention?",options:[{key:"A",text:"High flow oxygen"},{key:"B",text:"Intravenous sedation"},{key:"C",text:"Rebreath into a paper bag"},{key:"D",text:"Alprazolam"},{key:"E",text:"Refer to cardiac team urgently"}],correct:"C",explanation_plabable:["Hyperventilation is an abnormally increased pulmonary ventilation. Patients with hyperventilation syndrome may feel that they are not able to breathe sufficient air. In reality their oxygenation in the arterial blood is within normal limits. Due to the rapid breathing, carbon dioxide levels fall which results in respiratory alkalosis","","The complaint is usually of a paroxysmal nature rather than continuous. Patient may report breathlessness, followed by paraesthesia and/or tetany in fingers, distal limbs, mouth. Some patients report chest pain. Palpitations, wheezing and sweating are also seen. This may be accompanied by a panic attack. If this becomes more severe, arterial hypocapnia may trigger cerebral vessel vasoconstriction leading to dizziness, faintness, headaches and lose consciousness. After losing consciousness, breathing and blood gases return to normal which restores cerebral blood flow. The patient would shortly recover after that.","","Management includes rebreathing into the paper bag to terminate the attack. Other methods include deliberately slowing down the breathing rate.","","Medications can also be used. Benzodiazepines can be used in the acute situation if severe. Use only occasionally, as there is the potential for sedation and dependence. Propranolol may be of value if asthma has been excluded.","","Further reading:","http://www.gpnotebook.co.uk/simplepage.cfm?ID=798621724&linkID=18810&cook=yes","https://patient.info/doctor/hyperventilation"],explanation_detail:["<strong>Why the answer is correct:</strong> The presentation is classic for <em>hyperventilation syndrome</em> during a panic attack: tachypnoea, paraesthesiae and carpopedal spasm from respiratory alkalosis. The quickest way to terminate the episode in exam settings is to <strong>rebreath into a paper bag</strong> (or coach slow breathing), increasing inspired CO₂ and reversing alkalosis.","<strong>Why the other options are wrong:</strong> A) High‑flow oxygen does not treat alkalosis and may worsen symptoms by lowering drive to slow breathing. B) IV sedation is unnecessary and potentially harmful in a stable patient. D) Alprazolam is not first‑line for an acute episode in ED due to dependence and sedation risks. E) Urgent cardiology referral is inappropriate with a normal ECG (sinus tachycardia) and a clear functional diagnosis.","<strong>Management/algorithm:</strong> <ul><li>Reassure, coach slow diaphragmatic breathing (e.g., 4–6 breaths/min) or brief paper‑bag rebreathing if appropriate.</li><li>Exclude red flags: hypoxia, asthma attack, PE, metabolic causes; check sats and consider ABG if unclear.</li><li>If severe/distressing and not settling, consider a short‑acting benzodiazepine in the acute setting.</li><li>Arrange follow‑up for anxiety management (CBT, SSRIs) and trigger avoidance/education.</li></ul>","<strong>Exam takeaway:</strong> Hyperventilation with tingling and carpopedal spasm from respiratory alkalosis → <strong>rebreath into a paper bag / coached slow breathing</strong> as the immediate step once serious causes are excluded."]},{id:"EN-0653",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Unconscious hypoglycaemia — no IV access",stem:"A 47-year-old man with type 2 diabetes is found <strong>unconscious</strong> on the floor by his partner. Paramedics report capillary blood glucose <strong>1.2 mmol/L</strong>. He takes insulin, metformin and linagliptin; no other medical problems are known. He is profusely sweating and then develops a <strong>generalised seizure</strong>. He currently has <strong>no intravenous access</strong>. What is the SINGLE most appropriate management?",options:[{key:"A",text:"Administer intramuscular glucagon 1 mg"},{key:"B",text:"Administer 4 g of oral glucose gel"},{key:"C",text:"Administer 75 mL of 20% glucose intravenously"},{key:"D",text:"Administer Actrapid 10 units subcutaneously"},{key:"E",text:"Administer subcutaneous 0.9% normal saline"}],correct:"A",explanation_plabable:["He is hypoglycaemic. As he is unconscious, either IM glucagon or obtaining intravenous access to deliver intravenous glucose is an option. In this particular case, it is less appropriate to insert an intravenous line since he is having a seizure which would make it difficult.","","A side note: Even if the patient is not experiencing seizures, we (Plabable) recommend picking intramuscular glucagon for any hypoglycaemic unconscious patient who does not have intravenous access.","","The dose to give for intramuscular glucagon is 1 mg.","","Oral glucose gel should never be used in the unconscious patient."],explanation_detail:["<strong>Why the answer is correct:</strong> This patient has severe hypoglycaemia with loss of consciousness and seizure activity. Without IV access, the fastest, safest reversal is <strong>IM glucagon 1 mg</strong>, which promotes hepatic glycogenolysis and gluconeogenesis. IV dextrose is first‑line when a cannula is in situ, but attempting cannulation during a seizure risks delay and injury.","<strong>Why the other options are wrong:</strong> B) Oral glucose gel is <em>contraindicated</em> in an unconscious patient due to aspiration risk. C) IV 20% glucose would be appropriate if IV access were available; it is not feasible immediately here. D) Insulin would worsen hypoglycaemia. E) Subcutaneous saline has no role in treating hypoglycaemia.","<strong>Management/algorithm:</strong> <ul><li>ABCDE; secure airway during seizure; check capillary glucose.</li><li>If conscious and able to swallow: give 15–20 g rapid‑acting carbohydrate orally; recheck glucose in 10–15 min.</li><li>If <strong>unconscious/no IV access</strong>: give <strong>IM glucagon 1 mg</strong> (child dose weight‑adjusted); once alert, give long‑acting carbohydrate snack/meal.</li><li>If <strong>IV access</strong>: give <strong>IV dextrose</strong> (e.g., 10% 150 mL or 20% 75 mL) and repeat as needed; consider continuous 10% dextrose infusion for sulfonylurea‑related or recurrent episodes with octreotide where indicated.</li><li>Identify the cause (missed meal, excess insulin, renal impairment, alcohol) and observe with repeat glucose checks; safety‑net prior to discharge.</li></ul>","<strong>Exam takeaway:</strong> Unconscious hypoglycaemia <strong>without IV access</strong> → give <strong>IM glucagon 1 mg</strong>; do not give oral glucose to an unconscious patient; switch to IV dextrose once access is obtained."]},{id:"EM-3111",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Road traffic accident — first ABC step",stem:"A 34-year-old man was involved in a road traffic accident. He was the driver and reportedly wore a seatbelt. At the scene he was initially alert and oriented but complained of chest pain. On arrival to the Emergency Department he has a Glasgow Coma Scale (GCS) of <strong>14</strong> (E4, V5, M5). Over the next 25 minutes his GCS deteriorates to <strong>10</strong> (E3, V3, M4). His respiratory rate increases from <strong>23</strong> to <strong>35/min</strong>. On examination there is superficial bruising across the chest, likely from the seatbelt, with no obvious deformities. He appears anxious and is using accessory muscles. <br/><br/><strong>Observations:</strong> HR <strong>110 bpm</strong>, BP <strong>110/80 mmHg</strong>. His oxygen saturation drops from <strong>95%</strong> to <strong>88%</strong>. Which is the most important immediate action?",options:[{key:"A",text:"Assess for spinal cord injury"},{key:"B",text:"Perform a needle thoracocentesis"},{key:"C",text:"Administer 100% oxygen"},{key:"D",text:"Request a portable X-ray"},{key:"E",text:"Administer intravenous analgesia"}],correct:"C",explanation_plabable:["Administering 100% oxygen would help combat the hypoxia. In the initial management of trauma patients, the basic ABCs (Airway, Breathing, Circulation) are followed.","","There are several differential diagnoses that can explain his symptoms. Traumatic brain injury, pulmonary contusion, pneumothorax, hypovolemic shock, and fat embolism are some potential differentials. In any case, oxygen should be administered first.","","One would not do a needle thoracocentesis unless there were clinical features of a tension pneumothorax like a deviated trachea."],explanation_detail:["<strong>Why the answer is correct:</strong> This trauma patient is acutely hypoxic (SpO₂ falling to 88%) and tachypnoeic with deteriorating consciousness. Following <strong>ABC</strong>, the immediate intervention is to improve oxygenation with <strong>high‑concentration oxygen</strong> (e.g., non‑rebreathe mask). Treating hypoxia prevents secondary brain injury and buys time to identify causes (lung injury, pneumothorax, aspiration, shock).","<strong>Why the other options are wrong:</strong> A) A focused spinal assessment is important but does not treat life‑threatening hypoxia. B) Needle thoracocentesis is indicated when there are signs of <em>tension</em> pneumothorax (e.g., tracheal deviation, severe respiratory distress with hypotension) — not simply hypoxia without those signs. D) A portable X‑ray helps identify injuries but must not delay immediate oxygenation. E) Analgesia is supportive but not the priority in a decompensating, hypoxic patient.","<strong>Management/algorithm:</strong> <ul><li>Deliver 15 L oxygen via non‑rebreathe mask while maintaining C‑spine precautions.</li><li>Reassess ABCs; obtain IV access, send bloods, and begin trauma evaluation (eFAST/CXR) once the patient is oxygenated.</li><li>If clinical features of tension pneumothorax appear, perform immediate decompression followed by chest drain.</li><li>Continue monitoring; treat underlying causes (e.g., pulmonary contusion, haemothorax, pneumothorax, shock) and escalate to trauma/critical care.</li></ul>","<strong>Exam takeaway:</strong> In trauma with new hypoxia, follow <strong>ABC</strong> — give <strong>100% oxygen first</strong>; imaging and procedures come after stabilising airway and breathing."]},{id:"CG-0010",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Found outdoors in winter — next step",stem:"A 78-year-old man is brought to the Emergency Department after being found unresponsive in his garden during a cold winter evening. Paramedics report he was lying in the snow; the ambient temperature was around <strong>−5°C</strong>. On arrival his <strong>core temperature is 30°C</strong>. He is stuporous, barely responsive to stimuli, and shivering. Breathing is slow and the pulse is weak but regular. Initial measures have included airway protection, removal of wet clothing, passive external rewarming, and intravenous access. What is the most appropriate next step in management?",options:[{key:"A",text:"Administer heated intravenous fluids"},{key:"B",text:"Continue passive external rewarming only"},{key:"C",text:"Start broad-spectrum antibiotics"},{key:"D",text:"Transfer to a general ward for observation"},{key:"E",text:"Administer intramuscular corticosteroids"}],correct:"A",explanation_plabable:["This patient requires aggressive treatment. Heated intravenous fluids will help raise the core temperature from the inside, which is essential in treating severe hypothermia."],explanation_detail:["<strong>Why the answer is correct:</strong> A core temperature of <strong>30°C</strong> with reduced consciousness indicates at least moderate hypothermia requiring <em>active internal rewarming</em>. Warmed IV crystalloid (e.g., 0.9% saline warmed to 38–42°C) augments core temperature, treats cold‑induced hypovolaemia, and supports perfusion. Passive measures alone are insufficient at this temperature and physiology.","<strong>Why the other options are wrong:</strong> B) Passive external rewarming alone (blankets, warm environment) is inadequate for core temp 28–32°C with depressed mental status. C) Antibiotics may be needed if sepsis is suspected but will not correct hypothermia and are not the immediate step. D) He requires resuscitation bay/ICU‑level monitoring and active rewarming, not routine ward observation. E) Corticosteroids have no role in primary hypothermia management.","<strong>Management/algorithm:</strong> <ul><li>Handle gently; continuous ECG and core temperature monitoring; avoid unnecessary movement (risk of arrhythmias/afterdrop).</li><li>Active internal rewarming: <strong>warmed IV fluids</strong> 38–42°C; warmed humidified oxygen; consider bladder, gastric, or peritoneal lavage if refractory/severe.</li><li>Active external rewarming: forced‑air warming device after wet clothes removed.</li><li>Defibrillation and drugs may be less effective at &lt;30°C; focus on rewarming. Treat hypoglycaemia and electrolyte disturbances.</li><li>Search for precipitating causes (exposure, intoxication, infection) once stabilised.</li></ul>","<strong>Exam takeaway:</strong> Core temp ~30°C with reduced responsiveness = escalate from passive to <strong>active internal rewarming</strong> — start <strong>warmed IV fluids</strong> (and other warming measures) urgently."]},{id:"CS-1505",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Agitation, rhinorrhoea and mydriasis — withdrawal cause",stem:"A 34-year-old man presents to the Emergency Department with agitation, severe muscle cramps and intense anxiety. He reports <strong>insomnia for the past 24 hours</strong>. He has persistent <strong>rhinorrhoea</strong> and <strong>lacrimation</strong>, is <strong>diaphoretic</strong> and has <strong>dilated pupils</strong>. <br/><br/><strong>Observations:</strong> HR <strong>112 bpm</strong>, BP <strong>138/86 mmHg</strong>, RR <strong>22/min</strong>, Temp <strong>37.3°C</strong>, SpO₂ <strong>98%</strong> on air. The team suspects these symptoms are due to drug withdrawal. Which drug withdrawal is the most likely cause of his symptoms?",options:[{key:"A",text:"Alcohol"},{key:"B",text:"Benzodiazepines"},{key:"C",text:"Codeine"},{key:"D",text:"Heroin"},{key:"E",text:"Cannabis"}],correct:"D",explanation_plabable:["Heroin withdrawal is the most likely cause of the patient's symptoms. Heroin is a short-acting opioid, and when a person abruptly stops using it, withdrawal symptoms can appear within 6-12 hours after the last dose, peaking at around 1-3 days. Typical signs of heroin withdrawal include agitation, anxiety, muscle cramps, sweating, dilated pupils (mydriasis), insomnia, rhinorrhoea and lacrimation, all of which match the presentation in this case.","","The tip here is to look for rhinorrhoea and lacrimation. These two features in the exam are highly suggestive of heroin withdrawal.","","The other options are incorrect:","","Benzodiazepine, codeine, and alcohol withdrawal are not typically associated with pupillary dilatation as a prominent feature."],explanation_detail:["<strong>Why the answer is correct:</strong> The triad of <strong>rhinorrhoea</strong>, <strong>lacrimation</strong> and <strong>mydriasis</strong> with diaphoresis, anxiety and cramps strongly indicates <strong>opioid withdrawal</strong>. With onset around 6–12 hours and intense symptoms, the most likely culprit is short‑acting heroin. Other classic signs include yawning, piloerection, abdominal cramps, vomiting and diarrhoea.","<strong>Why the other options are wrong:</strong> A) Alcohol withdrawal usually presents 6–24 h after last drink with tremor, agitation, autonomic hyperactivity and, later, seizures or delirium tremens—rhinorrhoea/lacrimation with marked mydriasis are not typical. B) Benzodiazepine withdrawal causes anxiety, insomnia and tremor, sometimes seizures, but not the autonomic features seen here. C) Codeine is an opioid, but dependence on short‑acting heroin classically produces the abrupt, severe syndrome described; codeine withdrawal is typically milder and less likely in exam settings. E) Cannabis withdrawal is generally mild (irritability, insomnia, reduced appetite) without pronounced autonomic features or mydriasis.","<strong>Management/algorithm:</strong> <ul><li>Assess ABC; exclude alternative causes (sepsis, thyrotoxicosis, stimulant intoxication).</li><li>Symptomatic relief: antiemetics, antidiarrhoeals, NSAIDs; consider <strong>clonidine/lofexidine</strong> for autonomic symptoms.</li><li>Initiate <strong>opioid substitution therapy</strong> (e.g., <em>buprenorphine</em> induction guided by the Clinical Opiate Withdrawal Scale; methadone alternative) and refer to addiction services.</li><li>Provide psychosocial support, harm‑reduction advice (take‑home naloxone for overdose prevention), and arrange follow‑up.</li></ul>","<strong>Exam takeaway:</strong> Acute agitation with <strong>rhinorrhoea + lacrimation + mydriasis</strong> after cessation of an opioid → think <strong>heroin withdrawal</strong> (short‑acting opioid; onset 6–12 h, peaks 1–3 days)."]},{id:"EM-4200",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Head injury on warfarin — first action",stem:"A 65-year-old man is brought to the Emergency Department after a fall with a head injury. He was found <strong>unconscious</strong> at home and brought in by family. He takes <strong>warfarin</strong> for atrial fibrillation. On arrival he is confused with a <strong>GCS of 13</strong>. His oxygen saturation is <strong>82% on room air</strong>. Which of the following is the most appropriate next action?",options:[{key:"A",text:"Administer intravenous fluid"},{key:"B",text:"Administer prothrombin complex concentrate (PCC)"},{key:"C",text:"Administer oxygen"},{key:"D",text:"Neck immobilisation"},{key:"E",text:"Surgical evacuation of the haematoma"}],correct:"C",explanation_plabable:["This patient is hypoxic. Going back to your basics (ABCDE), you would like to be sure that he is on oxygen. Providing supplemental oxygen helps increase oxygen saturation and improves tissue perfusion, thereby reducing the risk of further brain injury (if there is a haematoma and oedema) and promoting optimal recovery. It is used as part of the overall management strategy, but of course, he would need to undergo a CT scan of his head to look for any intracranial bleeding and have further management after.","","The other options are incorrect.","","PCC is a blood product that contains clotting factors. It can be given in major bleeds in patients taking warfarin; however, there is no evidence of a major bleed. He may or may not have an intracranial bleed, but this has yet to be confirmed.","","There is no concern about a cervical spine injury, so there is no need to immobilise the neck.","","Intravenous fluids may be necessary for resuscitation to maintain his blood pressure, but his blood pressure is not mentioned.","","Surgical evacuation of the haematoma may be required in cases of significant intracranial bleeding causing mass effect or neurological deterioration, but it is not the initial intervention for hypoxia."],explanation_detail:["<strong>Why the answer is correct:</strong> The patient is profoundly hypoxic (SpO₂ 82% on air). Following <strong>ABCDE</strong>, the immediate life‑saving action is to restore oxygenation with high‑concentration oxygen (e.g., non‑rebreathe mask) while assessing airway and breathing. Early oxygenation reduces secondary brain injury risk in head trauma, especially in anticoagulated patients who may have intracranial bleeding.","<strong>Why the other options are wrong:</strong> A) IV fluids are for shock; hypotension is not stated and does not address hypoxia. B) PCC reverses warfarin in major/life‑threatening bleeding or before urgent neurosurgery; bleeding is not yet confirmed and oxygenation takes priority. D) No signs of cervical spine injury are given; immobilisation must not delay oxygenation. E) Surgical evacuation is considered once a space‑occupying haematoma is confirmed and after initial resuscitation; it is not the first step for hypoxia.","<strong>Management/algorithm:</strong> <ul><li>Give 15 L oxygen via non‑rebreathe mask; reassess airway, breathing and circulation.</li><li>Urgent CT head/neck per NICE head injury guidance; reverse anticoagulation if ICH confirmed or strongly suspected with clinical deterioration.</li><li>Maintain normotension and normoglycaemia; avoid hypoxia/hypotension (both worsen outcomes).</li><li>Early neurosurgical discussion if ICH or mass effect; monitor GCS and vital signs closely.</li></ul>","<strong>Exam takeaway:</strong> In head‑injured, hypoxic patients — <strong>oxygen first</strong> (ABC before specific interventions like PCC or surgery)."]},{id:"CB-2788",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Sharp chest pain with SOB — ECG diagnosis",stem:"A 34-year-old man presents to the Emergency Department with sudden-onset shortness of breath and central chest pain that began 3 hours ago. The chest pain is sharp. His breathlessness has gradually worsened over the last hour. On examination he is uncomfortable but alert and oriented. <br/><br/><strong>Observations:</strong> RR <strong>24/min</strong>, SpO₂ <strong>98%</strong> on air, HR <strong>110 bpm</strong>, BP <strong>126/84 mmHg</strong>. An ECG is performed and shown below.",image:"/pericarditis_widespread_st_elevation.jpg",options:[{key:"A",text:"Pleurisy"},{key:"B",text:"Myocardial infarction"},{key:"C",text:"Pericarditis"},{key:"D",text:"Pulmonary embolism"},{key:"E",text:"Pneumothorax"}],correct:"C",explanation_plabable:["The ECG findings of widespread ST-segment elevation are characteristic of acute pericarditis, distinguishing it from acute coronary syndrome or pulmonary embolism.","","Reference:","Image by:","By James Heilman, MD - Own work, CC BY-SA 4.0,","https://commons.wikimedia.org/w/index.php?curid=49061305"],explanation_detail:["<strong>Why the answer is correct:</strong> The ECG shows <strong>widespread concave ST-segment elevation</strong> (diffuse across limb and precordial leads) with possible PR-segment depression — the classic pattern of <em>acute pericarditis</em>. Unlike STEMI, there is no territorial pattern or reciprocal ST-depression (except possibly in aVR/V1). The sharp pleuritic pain with tachycardia also fits.","<strong>Why the other options are wrong:</strong> A) Isolated pleurisy would not cause diffuse ST elevation. B) Acute myocardial infarction produces regional ST elevation with reciprocal depression corresponding to a single coronary territory, not diffuse changes. D) Pulmonary embolism shows sinus tachycardia, right heart strain (S1Q3T3), or T-wave inversion in V1–V3 rather than global ST elevation. E) Pneumothorax causes pleuritic pain and dyspnoea but ECG changes are non‑specific and not diffuse ST elevation.","<strong>Management/algorithm:</strong> <ul><li>Pain control: <strong>NSAID (e.g., ibuprofen)</strong> plus <strong>colchicine</strong> for 3 months if idiopathic/viral.</li><li>Investigations: troponin (to assess myopericarditis), inflammatory markers, echocardiography for effusion, CXR; screen for secondary causes (infection, autoimmune, uraemia).</li><li>Red flags needing admission/urgent echo: fever >38°C, large effusion/tamponade, immunosuppression, trauma, raised troponin/arrhythmias, anticoagulation, or failure to respond to NSAIDs in 1 week.</li><li>Advise rest and avoid anticoagulation unless otherwise indicated.</li></ul>","<strong>Exam takeaway:</strong> Diffuse concave ST elevation ± PR depression on ECG with pleuritic chest pain → <strong>acute pericarditis</strong>, not STEMI or PE."]},{id:"HC-0025",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Severe hyperkalaemia with ECG changes — next step",stem:"A 48-year-old man being evaluated for hypertensive retinopathy in the eye clinic is referred to the Emergency Department for insidious, progressive onset of nausea, drowsiness and palpitations. Apart from hypertension, he has no other significant past medical history. An ECG shows <strong>tall tented T waves</strong>, <strong>flattened P waves</strong> and <strong>widened QRS</strong>. <br/><br/><strong>Investigations:</strong><br/>Sodium: <strong>142 mmol/L</strong> (135–145)<br/>Potassium: <strong>7.1 mmol/L</strong> (3.5–5.5)<br/>Blood glucose: <strong>5.2 mmol/L</strong><br/><br/>IV calcium chloride has been given. Senior help is on the way. What is the SINGLE most appropriate <em>next</em> step in his management?",options:[{key:"A",text:"IV Actrapid insulin 10 units with 50 mL of 50% dextrose"},{key:"B",text:"IV Actrapid insulin 10 units with 50 mL of 5% dextrose"},{key:"C",text:"IV Actrapid insulin 50 units with 50 mL of 50% dextrose"},{key:"D",text:"IV Actrapid insulin 50 units with 50 mL of 5% dextrose"},{key:"E",text:"IV Actrapid insulin 10 units with 50 mL of 0.9% sodium chloride"}],correct:"A",explanation_plabable:["This patient who is likely on potentially long term antihypertensive therapy has now presented with severe hyperkalaemia (plasma K > 6.5 mmol/L and/or ECG changes). The initial urgent management includes IV calcium gluconate 10% to protect against myocardial excitability. If this is not available as in this case, then IV calcium chloride is a suitable alternative.","The next step in severe hyperkalaemia should aim at immediately relocating the potassium from the blood into the cells through the administration of IV short-acting insulin and dextrose according to bedside glucose levels.","Blood glucose in normal range (as in this question):","• 10 units of soluble, short-acting (Actrapid) insulin with 50 ml dextrose 50% given over 5 to 15 minutes","• Followed by 500 ml dextrose 10% over 12 hours","Blood glucose HIGH (more than 11.1 mmol/L in non-diabetics)","• 10 units of soluble, short-acting (Actrapid) insulin with 50 ml sodium chloride 0.9% given over 5 to 15 minutes","• Only once glucose levels normalise, give 500 ml dextrose 10% over 12 hours","Serum potassium is to be checked after each insulin infusion is completed until levels return to normal.","In the exam, they may give the options of different insulin brand names so it is worth familiarising yourself with this and remembering that Actrapid (soluble, short-acting insulin) is used for the treatment of hyperkalaemia.","Further reading:","https://bnf.nice.org.uk/treatment-summary/fluids-and-electrolytes.html","https://patient.info/doctor/hyperkalaemia-in-adults#nav-5"],explanation_detail:["<strong>Why the answer is correct:</strong> The patient has <strong>severe hyperkalaemia</strong> (K⁺ 7.1 mmol/L) with ECG changes. After membrane stabilisation with IV calcium, the next priority is to <em>shift K⁺ intracellularly</em>. With a <strong>normal bedside glucose (5.2 mmol/L)</strong>, give <strong>10 units IV Actrapid with 50 mL of 50% dextrose</strong> over 5–15 minutes, then start 10% dextrose infusion to avoid hypoglycaemia. This rapidly lowers serum potassium by driving K⁺ into cells via insulin‑stimulated Na⁺/K⁺‑ATPase.","<strong>Why the other options are wrong:</strong> B) 5% dextrose contains too little glucose to protect against insulin‑induced hypoglycaemia and is not the recommended bolus. C/D) 50 units is a dangerous overdose. E) Insulin with 0.9% saline is used when the blood glucose is already high (e.g., >11.1 mmol/L), not when it is normal as in this case.","<strong>Management/algorithm:</strong> <ul><li>ABCDE and cardiac monitoring; stop potassium‑raising drugs.</li><li>Stabilise myocardium: IV calcium gluconate 10% (or calcium chloride) — already given.</li><li>Shift K⁺ into cells: <strong>10 U Actrapid + 50 mL 50% dextrose</strong> over 5–15 min (if glucose normal/low) <em>or</em> Actrapid in 0.9% saline if glucose high; consider nebulised salbutamol and IV sodium bicarbonate if severe acidaemia.</li><li>Remove K⁺: potassium binders, loop diuretics, and <strong>urgent dialysis</strong> if refractory/renal failure.</li><li>Recheck K⁺ and glucose at 1 hour; continue monitoring to ensure sustained correction.</li></ul>","<strong>Exam takeaway:</strong> Severe hyperkalaemia after IV calcium → <strong>insulin + dextrose regimen</strong> tailored to bedside glucose (normal/low → 50 mL of 50% dextrose; high → 0.9% saline)."]},{id:"PY-1013",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Paracetamol overdose with uncertain timing — next step",stem:"An 18-year-old girl attends the Emergency Department following ingestion of more than several paracetamol tablets <strong>the day before</strong>. She cannot remember the exact time she took the tablets. She is extremely anxious but otherwise asymptomatic. She has no relevant past medical history. Weight <strong>55 kg</strong>. <br/><br/><strong>Observations:</strong> BP <strong>120/75 mmHg</strong>, HR <strong>105 bpm</strong>, SpO₂ <strong>99% on air</strong>. What is the SINGLE most appropriate next step?",options:[{key:"A",text:"Activated charcoal"},{key:"B",text:"Gastric lavage"},{key:"C",text:"N-acetylcysteine infusion"},{key:"D",text:"Discharge home"},{key:"E",text:"Psychiatric review"}],correct:"C",explanation_plabable:["N-acetylcysteine infusion should be started if there is doubt over the time of paracetamol ingestion, regardless of the plasma paracetamol concentration.","A common mistake seen is marking psychiatric review as an answer. One must remember, that paracetamol overdoses have to be medically cleared by the A&E doctor before the psych team would come to review them. Until she is given the correct treatment and her blood results have come back in addition to the medical team or the A&E team reviewing her and giving her the “all clear” can the psych team be involved.","The other options are incorrect:","Activated charcoal → should be considered if the overdose has been taken within 1 hour","Gastric lavage → Would always be the wrong answer when dealing with paracetamol poisoning. The British Poisons Centres only recommend the use of gastric lavage cases where medications have been ingested that activated charcoal would absorb poorly (eg iron, lithium) and for sustained-release formulations or enteric-coated tablets.","Discharge home → Only if ingestion of paracetamol is < 150mg/kg in a child/adult with no hepatic risk factors","Urgent liver function tests + clotting screen → often no change in these values acutely.","Psychiatric review → would be needed eventually but much later in the management"],explanation_detail:["<strong>Why the answer is correct:</strong> When the time of ingestion is unknown or presentation is >8 hours after ingestion, start <strong>N‑acetylcysteine (NAC)</strong> immediately rather than waiting for a level. NAC prevents and limits hepatic injury regardless of the measured concentration and is safe. Levels drawn at unknown times cannot be interpreted on the Rumack–Matthew nomogram.","<strong>Why the other options are wrong:</strong> A) Activated charcoal is only useful within ~1 hour of ingestion (longer for modified‑release or massive doses with expert advice). B) Gastric lavage is not recommended for paracetamol poisoning and carries aspiration risk. D) Discharge is unsafe without medical assessment/treatment and timed levels; unknown amount could exceed 150 mg/kg. E) Psychiatric review is essential <em>after</em> medical stabilisation and treatment, not before.","<strong>Management/algorithm:</strong> <ul><li>Start <strong>NAC infusion now</strong>; obtain paracetamol level, LFTs, U&E, INR and repeat as per protocol.</li><li>If timing later becomes clear and below treatment line with normal tests, NAC can be stopped per local policy.</li><li>Consider activated charcoal only if ingestion ≤1 hour and airway protected.</li><li>Monitor for nausea/anaphylactoid reactions to NAC; treat symptomatically and continue if possible.</li><li>Once medically stable, arrange <strong>liaison psychiatry</strong> assessment prior to discharge.</li></ul>","<strong>Exam takeaway:</strong> Paracetamol overdose with <strong>unknown timing</strong> → <strong>start NAC immediately</strong>; psychiatric review follows after medical clearance."]},{id:"EM-1152",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Road traffic accident with paradoxical respiration — first action",stem:"A 20-year-old man presents to A&E after severe injuries from a road traffic accident. He is breathless and has severe chest pain. <em>Paradoxical respiration</em> with shortness of breath is observed. <br/><br/><strong>Observations:</strong> SBP <strong>85 mmHg</strong>, RR <strong>25/min</strong>, SpO₂ <strong>88%</strong> on room air, HR <strong>110/min</strong>. What is the SINGLE most appropriate initial action?",options:[{key:"A",text:"Chest X-ray"},{key:"B",text:"Analgesia"},{key:"C",text:"High flow oxygen"},{key:"D",text:"Secure venous access"},{key:"E",text:"Refer to surgeon"}],correct:"C",explanation_plabable:["In this question, the examiners want you to know the basics of life-threatening emergencies. ABC - airway, breathing, circulation should always be addressed first.","","In reality, oxygen by mask, securing venous access and analgesia would all be done simultaneously. But for the purpose of this exam, we should know the steps according to NHS guidelines and British references. Thus, securing airways and giving oxygen would come before anything else.","","Remember ABC!"],explanation_detail:["<strong>Why the answer is correct:</strong> This polytrauma patient is hypoxic (SpO₂ 88%) with respiratory compromise (paradoxical breathing suggests flail chest). Following <strong>ABCDE</strong>, the first life‑saving action is to improve oxygenation with <strong>high‑flow oxygen</strong> (e.g., non‑rebreathe mask at 15 L/min) while you reassess airway and breathing. Early correction of hypoxia prevents secondary organ injury and buys time for definitive diagnosis/interventions.","<strong>Why the other options are wrong:</strong> A) Chest X‑ray helps identify rib fractures/haemothorax/pneumothorax but must not delay immediate oxygenation. B) Analgesia is important for ventilation but comes after stabilising airway/breathing. D) IV access is part of initial resuscitation but oxygenation/airway take priority when hypoxic. E) Surgical referral is appropriate after initial stabilisation and imaging; it is not the <em>first</em> step in a decompensating patient.","<strong>Management/algorithm:</strong> <ul><li>Deliver high‑flow oxygen and apply monitoring; maintain cervical spine precautions.</li><li>Assess for life‑threatening thoracic injuries (tension pneumothorax, open pneumothorax, massive haemothorax, flail chest) and treat immediately as indicated.</li><li>Establish IV access and begin fluid resuscitation if shocked; obtain ABG and trauma labs.</li><li>Analgesia (e.g., IV opioids); consider regional blocks if flail chest. Imaging (eFAST/CXR/CT) once stable.</li><li>Early senior/trauma team involvement; consider chest drain, non‑invasive ventilation or intubation if ventilation inadequate.</li></ul>","<strong>Exam takeaway:</strong> In trauma with hypoxia, follow <strong>ABC</strong>: oxygenation first — investigations and referrals follow once the patient is stabilised."]},{id:"EM-1895",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Sudden sharp chest pain with inter-arm BP difference",stem:"A 66-year-old man is brought to the Emergency Department complaining of severe substernal chest pain which started suddenly a few hours ago. The pain is described as <strong>sharp</strong>. There is no associated trauma. Past history: <strong>hypertension</strong>. His ECG shows <strong>ST elevation in two contiguous leads</strong>.<br/><br/><strong>Blood tests:</strong><br/>Troponin T: <strong>350 ng/L</strong> (&lt;12)<br/>D-dimer: <strong>1620 ng/mL</strong> (&lt;500)<br/><br/><strong>Examination:</strong> HR <strong>120 bpm</strong>; BP <strong>110/65 mmHg</strong> in the left arm and <strong>169/80 mmHg</strong> in the right arm; breath sounds normal bilaterally. What is the SINGLE most likely diagnosis?",options:[{key:"A",text:"Myocardial infarction"},{key:"B",text:"Thoracic aortic dissection"},{key:"C",text:"Pulmonary embolism"},{key:"D",text:"Myocardial ischaemia"},{key:"E",text:"Disseminated intravascular coagulation (DIC)"}],correct:"B",explanation_plabable:["The two top differentials, in this case, are acute aortic dissection and acute myocardial infarction. The chest pain from acute dissections is abrupt and is at its maximum from the time of onset. In comparison, the pain with acute myocardial infarctions occurs more slowly and gains intensity with time (usually a few hours). The pain from aortic dissection is typically described as a sharp or sometimes tearing or ripping is used. In contrast, the pain from a myocardial infarction is typically dull and crushing. Of course, clinically it is very difficult to differentiate the two purely based on the type of pain that the patient describes.","Troponins can be raised in aortic dissections and the fear with this fact is that junior doctors may be misled into thinking of the diagnosis of myocardial infarction only. Myocardial infarctions may develop due to an aortic aneurysm.","Aortic dissections can also raise a d-dimer level. D-dimers have low specificity so many conditions can raise it (e.g. malignancy, aortic dissections, sepsis, pregnancy, DVT, pulmonary embolism, etc).","There can also be a difference in blood pressure in limbs on the right side of the body compared with the left when a dissection occurs.","Hypertension is a risk factor for both aortic dissection and myocardial infarction, however, hypertension is probably the most common risk factor found in aortic dissection.","In a nutshell, an aortic dissection has all of the features in the stem and can result in a myocardial infarction. A myocardial infarction, on the other hand, has some of the features in the stem but CANNOT result in an aortic dissection."],explanation_detail:["<strong>Why the answer is correct:</strong> Sudden severe <em>sharp/tearing</em> chest pain, an inter‑arm blood pressure difference, and elevated D‑dimer strongly suggest <strong>thoracic aortic dissection</strong>. ST‑segment elevation and raised troponin may occur if the dissection involves the coronary ostia (classically right coronary → inferior changes), so a STEMI pattern does not exclude dissection. Treating as MI with thrombolysis/anticoagulation would be catastrophic.","<strong>Why the other options are wrong:</strong> A/D) Myocardial infarction/ischaemia usually presents with crushing pain and does not cause large inter‑arm BP differences; STEMI alone cannot explain the D‑dimer and pulse/BP asymmetry. C) Pulmonary embolism causes pleuritic pain, tachycardia and hypoxia; inter‑arm BP difference is atypical. E) DIC is a systemic coagulopathy with bleeding/consumption features, not isolated chest pain with asymmetric BPs.","<strong>Management/algorithm:</strong> <ul><li><strong>Do not anticoagulate</strong> until dissection is excluded.</li><li>Resuscitate with <strong>ABCDE</strong>; urgent <strong>CT aortography</strong> if stable (or bedside TTE/TOE if unstable).</li><li>Control pain and <strong>reduce shear stress</strong>: IV <em>labetalol</em> (or esmolol) to HR 60–80 bpm and SBP 100–120 mmHg; add vasodilator (e.g., GTN) after β‑blockade if further BP reduction needed.</li><li><strong>Type A</strong> (ascending) → emergency cardiothoracic surgery; <strong>Type B</strong> (descending) → medical management unless complications (malperfusion, rupture, refractory pain/HTN).</li><li>Monitor for complications (AR murmur, tamponade, stroke, AKI).</li></ul>","<strong>Exam takeaway:</strong> Inter‑arm BP difference + abrupt sharp/tearing pain ± diffuse ST changes or raised troponin → think <strong>aortic dissection</strong>; stabilise with BP/HR control and obtain urgent CT aortogram."]},{id:"EM-1990",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Chest trauma with dull percussion",stem:"A 21-year-old man is brought to the Emergency Department after a road traffic accident. He was stationary in his car when he was hit from the front by another car travelling at 70 miles/hour. He has chest pain and feels breathless. <br/><br/><strong>Observations:</strong> BP <strong>100/60 mmHg</strong>, HR <strong>110 beats/min</strong>, RR <strong>30/min</strong>, SpO₂ <strong>91%</strong> on air. On examination he is tender over the <strong>5th–7th left anterior ribs</strong>, has <strong>decreased breath sounds</strong> on the left, and <strong>dullness to percussion</strong> over the left chest. What is the SINGLE most likely diagnosis?",options:[{key:"A",text:"Haemothorax"},{key:"B",text:"Pulmonary oedema"},{key:"C",text:"Simple pneumothorax"},{key:"D",text:"Tension pneumothorax"},{key:"E",text:"Flail chest"}],correct:"A",explanation_plabable:["The presentation seen in haemothorax greatly resembles ones of traumatic pneumothorax with the exception of dullness on percussion over the affected lung (sometimes described as stony dullness).","An erect X-ray would show blunting of the hemidiaphragm similar to that of a pleural effusion.","Flail chest is incorrect. There would not be any dullness on percussion in the presentation of a flail chest. Commonly the flail segment moves in the opposite direction of the rest of the chest wall (paradoxical respiration)."],explanation_detail:["<strong>Why the answer is correct:</strong> Rib trauma with pleuritic pain, tachypnoea, <strong>reduced breath sounds</strong> and <strong>dull percussion</strong> classically indicates blood in the pleural space — a <strong>haemothorax</strong>. Pneumothorax causes <em>hyper‑resonance</em> rather than dullness. The localised rib tenderness (5th–7th left ribs) supports underlying pleural bleeding from rib fractures/intercostal vessels.","<strong>Why the other options are wrong:</strong> B) Pulmonary oedema presents with bilateral crackles and is not associated with unilateral dullness after trauma. C) Simple pneumothorax gives <em>hyper‑</em>resonant percussion with absent breath sounds; not dull. D) Tension pneumothorax also has hyper‑resonance with severe respiratory distress, hypotension and tracheal deviation. E) Flail chest produces paradoxical chest wall movement; percussion is typically normal, not dull.","<strong>Management/algorithm:</strong> <ul><li>ABCDE trauma approach with high‑flow O₂ and analgesia; IV access and bloods (group & save/cross‑match).</li><li>Confirm with <strong>eFAST/CXR</strong>. If significant/large haemothorax or respiratory compromise, perform <strong>tube thoracostomy</strong> (large‑bore chest drain).</li><li>Consider massive transfusion if shock; monitor output. <em>Thoracotomy</em> if immediate drain output &gt;1,500 mL or ongoing &gt;200 mL/hour for 2–4 hours.</li><li>Treat associated rib fractures; admit for observation and repeat imaging.</li></ul>","<strong>Exam takeaway:</strong> After blunt chest trauma, <strong>unilateral dullness + reduced breath sounds</strong> = think <strong>haemothorax</strong>; pneumothorax is hyper‑resonant. Manage with ABCDE, CXR/eFAST and chest drain if large/compromising."]},{id:"EM-1151",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Parents asking about infant CPR — most appropriate advice",stem:"Parents of an 11‑month‑old baby want to know the steps for CPR for their child as they have recently attended a funeral of their neighbours' child who died very suddenly after an episode of apnoea. They want to know what they can do if an event like this occurs. What is the SINGLE most appropriate advice in regards to CPR for their child?",options:[{key:"A",text:"Index and middle finger compression"},{key:"B",text:"Compression with heel of one hand"},{key:"C",text:"Compression with heel of two hands with fingers interlocked"},{key:"D",text:"Compression with rescue breaths 30:2"},{key:"E",text:"Give 2 rescue breaths before starting compression"}],correct:"A",explanation_plabable:["This is a rare scenario in the exam that you may encounter where both the answers are correct. Both A and D are appropriate advice to give to the parents of the child. The exam questions may have written them prior to publishing new guidelines and this may be overlooked by the organizers. When this occurs, the organizers for the exam will award marks for both answers when evaluating the papers. This is a very rare event but may still occur. Thus, do not spend too much time trying to decide which is the right or wrong option between the two.","","We have included this question to mimic how exams may be written and the process by which it will be marked.","","There are two options for chest compression for infants. Either index and middle finger of one hand or grip the chest in both hands in such a way that two thumbs can press on the lower third of the sternum.","","For health care provider and layperson","CPR should be started with the C:V ratio that is familiar and for most, this will be 30:2. The paediatric modifications to adult CPR should be taught to those who care for children but are unlikely to have to resuscitate them. The specific paediatric sequence incorporating the 15:2 ratio is primarily intended for those who have the potential to resuscitate children as part of their role.","","In the case above, the parents are unlikely to need to resuscitate their child and a CPR C:V ratio that is familiar which is 30:2 is appropriate.","","Note: that if you were a paediatrician you should be doing a C:V ratio of 15:2 as you potentially need to resuscitate children as part of your role."],explanation_detail:["<strong>Why the answer is correct:</strong> For infants (<1 year), a single rescuer can perform chest compressions with the <strong>index and middle fingers</strong> on the lower half of the sternum, depth about one‑third of the chest (≈4 cm) at 100–120/min. For laypeople, UK guidance allows a familiar <strong>30:2</strong> compression‑to‑ventilation ratio; healthcare providers who routinely resuscitate children use <strong>15:2</strong>. Thus, both the technique (A) and the 30:2 ratio (D) are acceptable advice for parents, but the compressions technique is the most direct answer to the stem.","<strong>Why the other options are wrong:</strong> B/C) Heel‑of‑hand techniques are adult/child (>1 year) methods and risk injury in infants. E) Paediatric BLS recommends <strong>5 initial rescue breaths</strong>, not 2, before starting compressions when a child is unresponsive and not breathing normally.","<strong>Management/algorithm:</strong> <ul><li>Check responsiveness, open airway, look–listen–feel; call for help.</li><li>Give <strong>5 rescue breaths</strong>; if no signs of life, start compressions at <strong>30:2</strong> for a lone rescuer (15:2 for healthcare professionals with two rescuers).</li><li>Compression technique: two fingers (lone rescuer) or two‑thumb encircling hands technique if two rescuers available; depth one‑third of chest, allow full recoil.</li><li>Continue CPR for ~1 minute before leaving to call EMS if alone.</li></ul>","<strong>Exam takeaway:</strong> Infant CPR: compress with <strong>two fingers</strong> (lone rescuer) and use a familiar <strong>30:2</strong> ratio for laypeople; professionals commonly use <strong>15:2</strong>."]},{id:"EM-1450",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"High-speed RTA with RUQ pain — best investigation",stem:"A 65-year-old man is involved in a high-speed road traffic accident and is brought to the ED resuscitation room by paramedics. He complains of severe right upper quadrant pain. On examination, there are no visible external injuries or external bleeding. He has normal breath sounds. The right upper quadrant is tender with some bruising. <br/><br/><strong>Observations:</strong> Temp <strong>36.7°C</strong>, HR <strong>110 beats/min</strong>, BP <strong>120/75 mmHg</strong>, RR <strong>25/min</strong>, SpO₂ <strong>97%</strong> on air. What is the SINGLE most appropriate investigation?",options:[{key:"A",text:"X-ray chest"},{key:"B",text:"X-ray abdomen"},{key:"C",text:"CT scan of the abdomen"},{key:"D",text:"Ultrasound of the abdomen"},{key:"E",text:"Ultrasound of the chest, abdomen and pelvis"}],correct:"C",explanation_plabable:["A CT scan plays a vital role in road traffic accidents involving blunt trauma to the abdomen in haemodynamically stable patients. It has a high specificity and sensitivity for liver injuries.","","An ultrasound in this situation would refer to a FAST (Focused Assessment with Sonography for Trauma) scan which would be done in a haemodynamically unstable patient. The purpose of this scan is to assess for hemopericardium and hemoperitoneum."],explanation_detail:["<strong>Why the answer is correct:</strong> This patient is <strong>haemodynamically stable</strong> after blunt abdominal trauma with focal RUQ tenderness and bruising, raising concern for <em>solid organ injury</em> (e.g., liver laceration). The investigation of choice is a <strong>contrast-enhanced CT abdomen</strong> (often as part of a trauma CT C/A/P), which accurately detects solid organ injury, active bleeding, and associated injuries, and guides operative vs non‑operative management.","<strong>Why the other options are wrong:</strong> A/B) Chest or abdominal X‑rays have low yield for solid organ injury and would not change immediate management in a stable patient. D) Single‑organ abdominal ultrasound is operator‑dependent and far less sensitive for grading hepatic injury. E) An ultrasound of chest/abdomen/pelvis is effectively an <strong>eFAST</strong> and is primarily indicated for <strong>unstable</strong> patients to rapidly identify free fluid or tamponade; in stable patients CT is preferred.","<strong>Management/algorithm:</strong> <ul><li>ABCDE with analgesia and monitoring.</li><li>Stable after blunt abdominal trauma → <strong>CT abdomen (± chest/pelvis) with IV contrast</strong>.</li><li>Unstable with suspected intra‑abdominal bleed → <strong>eFAST</strong>; if positive, proceed to emergency intervention (e.g., laparotomy/angioembolisation) while resuscitating.</li><li>Non‑operative management for low‑grade liver/splenic injuries with observation and repeat imaging as needed; involve trauma surgery/interventional radiology early.</li></ul>","<strong>Exam takeaway:</strong> Blunt abdominal trauma + haemodynamic <strong>stability</strong> → choose <strong>contrast CT abdomen</strong>, not FAST ultrasound, for diagnosing solid organ injury (e.g., liver)."]},{id:"CT-4731",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Agitated, sweating, hypertensive — which drug?",stem:"A 28-year-old man presents to the Emergency Department with a history of recreational drug use. He is agitated and sweating profusely. <br/><br/><strong>Observations:</strong> Temp <strong>39.6°C</strong>, BP <strong>172/90 mmHg</strong>, HR <strong>110 bpm</strong>, pupils <strong>dilated</strong>, SpO₂ <strong>—</strong>. Which substance overdose is most consistent with this clinical picture?",options:[{key:"A",text:"Lysergic acid diethylamide (LSD)"},{key:"B",text:"Heroin"},{key:"C",text:"Ketamine"},{key:"D",text:"Cocaine"},{key:"E",text:"Cannabis"}],correct:"D",explanation_plabable:["The clinical presentation in this patient, including hyperthermia, hypertension, tachycardia, and diaphoresis is highly suggestive of cocaine intoxication. Cocaine is a potent sympathomimetic drug that acts by blocking the reuptake of norepinephrine, dopamine, and serotonin in the central nervous system. This leads to increased sympathetic outflow, resulting in hypertension, tachycardia, and hyperthermia. With cocaine overdose, pupils typically dilate since it stimulates the sympathetic nervous system.","","LSD overdose can also result in tachycardia, hyperthermia, hypertension and seizures. Differentiating between cocaine overdose and LSD overdose can be challenging due to the overlapping symptoms of central nervous system stimulation. However, there are some characteristic features that may help in distinguishing the two:","• Cocaine overdose often leads to a more significant increase in blood pressure and heart rate","• Cocaine overdose is associated more with hyperthermia than LSD","• LSD overdose primarily presents with intense hallucinations, altered perception, and disorganised thoughts → it is the profound visual, auditory, and sensory hallucinations which are characteristic","","Heroin is a potent central nervous system depressant, leading to sedation, drowsiness, and a profound sense of relaxation. Overdose typically causes respiratory depression (even respiratory arrest). Another characteristic sign of heroin overdose is the presence of constricted pupils (miosis).","","Ketamine overdose can result in impaired coordination, muscle weakness, and difficulty with movements. Ketamine has analgesic properties and can provide pain relief even at sub-anaesthetic doses. It is taken illicitly as a sniffed powder. Small amounts can result in a state of profound dissociation and disconnectedness. Larger amounts can result in similar effects to LSD, with hallucinations associated with nausea.","","Cannabis is a psychoactive substance that primarily acts as a central nervous system depressant, leading to relaxation and sedation. Cannabis overdose is relatively rare, and the adverse effects are typically milder compared to other substances. The effects are mostly related to relaxation and impaired cognitive functioning and memory."],explanation_detail:["<strong>Why the answer is correct:</strong> Sympathomimetic toxidrome — <strong>hyperthermia</strong>, <strong>hypertension</strong>, <strong>tachycardia</strong>, agitation, and <strong>mydriasis</strong> — is classic for <strong>cocaine</strong> overdose. Cocaine blocks re‑uptake of noradrenaline, dopamine and serotonin, driving adrenergic excess. LSD and ketamine are more hallucinogenic/dissociative; opioids (heroin) cause miosis and respiratory depression; cannabis causes mild sedation and impaired cognition, not severe hyperadrenergia.","<strong>Why the other options are wrong:</strong> A) LSD may cause tachycardia and hyperthermia but typically features prominent hallucinations and altered perception rather than marked hypertension. B) Heroin overdose → pinpoint pupils, bradypnoea, coma. C) Ketamine → dissociation, ataxia; severe hypertension/hyperthermia less typical. E) Cannabis rarely causes life‑threatening hyperadrenergic states.","<strong>Management/algorithm:</strong> <ul><li>ABCDE and cooling (active external cooling if T ≥ 39°C); check glucose.</li><li><strong>Benzodiazepines</strong> (e.g., diazepam/lorazepam) are first‑line for agitation, hypertension and tachycardia by reducing sympathetic outflow.</li><li>Treat hypertension/tachycardia refractory to benzos with <strong>IV nitrates</strong> or <strong>phentolamine</strong>. Avoid <em>β‑blocker monotherapy</em> (risk of unopposed α‑stimulation).</li><li>Fluids; evaluate for complications: hyperthermia, rhabdomyolysis (CK), AKI, MI (ECG/troponin), arrhythmias, seizures.</li><li>If chest pain/ACS features, use aspirin and nitrates; avoid thrombolysis until aortic dissection excluded.</li></ul>","<strong>Exam takeaway:</strong> Agitated, diaphoretic patient with <strong>HTN + tachycardia + hyperthermia + dilated pupils</strong> → think <strong>cocaine</strong>; treat with benzodiazepines, cooling and supportive care; avoid β‑blocker monotherapy."]},{id:"EM-2450",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Toddler with sudden cough and breathlessness — best next investigation",stem:"A 3-year-old child presents to the Emergency Department with his mother. He was playing with small toys when he suddenly became breathless and started to cough. He remained conscious throughout and has continued to vocalise. He has been previously well. <br/><br/><strong>Observations:</strong> Afebrile; HR <strong>90/min</strong>; RR <strong>24/min</strong>; BP <strong>120/70 mmHg</strong>; SpO₂ <strong>96%</strong> on air. On examination there is a <strong>wheeze over the right chest</strong> with <strong>no stridor</strong> and <strong>no cyanosis</strong>. What is the SINGLE next most appropriate investigation?",options:[{key:"A",text:"Chest X-ray"},{key:"B",text:"Lateral X-ray of neck"},{key:"C",text:"Fluoroscopy"},{key:"D",text:"Nasendoscopy"},{key:"E",text:"CT scan of neck and chest"}],correct:"A",explanation_plabable:["This is a suspected case of lodged foreign body. A foreign body in a child can be aspirated or ingested.","","In case the foreign body has entered the respiratory system, the child can present with sudden onset of cough, breathlessness, stridor, wheezing or choking. Whereas, in cases of ingested foreign bodies which may enter the oesophagus or stomach, the child is usually asymptomatic.","","In this scenario, the child presented with a cough and breathlessness. The cough is effective, and the child is conscious. The child is also able to vocalise well, and a wheeze was heard over the right side of the chest. Hence, the child is suspected to have aspirated the foreign body. The child will be monitored, made comfortable, investigations will be done and the ENT team will be informed.","","Ideally, chest X-rays (which in a toddler would also include imaging of the neck) are the most important investigations in every patient suspected of having a foreign body aspiration.","","A nasendoscopy is a test which helps to examine the nasal passage, pharynx and larynx using an endoscope passed through the nose to the nasopharynx and oropharynx. The need for a nasendoscopy will be decided by the ENT team based on clinical findings and radiological investigations; however, a nasendoscopy would unlikely be of any benefit since the object is probably obstructing the right main bronchus (given the history of right-sided wheeze). A bronchoscopy would be a better option.","","There are a portion of objects which are radiolucent and would not be picked up on X-rays or CT scans. In those cases, if it is suspected to be in the bronchus, then a bronchoscopy would be done."],explanation_detail:["<strong>Why the answer is correct:</strong> Sudden cough and unilateral wheeze after playing with small objects strongly suggests <strong>foreign body aspiration</strong>. In a stable child, the first-line investigation is a <strong>chest X-ray</strong> (AP ± lateral; inspiratory/expiratory or decubitus views if possible) to look for air trapping (hyperinflation), atelectasis, or a radiopaque object; neck views are often included in toddlers.","<strong>Why the other options are wrong:</strong> B) Lateral neck X-ray is more useful for suspected <em>ingested</em> or upper airway objects; signs and exam localise to the right chest/bronchus. C) Fluoroscopy is not first-line in ED. D) Nasendoscopy visualises nasal/oropharyngeal–laryngeal structures and rarely helps when the foreign body is bronchial; rigid bronchoscopy is definitive. E) CT has higher radiation and is generally reserved when X-ray is non-diagnostic and suspicion persists—bronchoscopy is preferred for diagnosis and removal.","<strong>Management/algorithm:</strong> <ul><li>Assess <strong>ABC</strong>. If complete obstruction and child is conscious → age-appropriate back blows/chest thrusts; if unconscious → start CPR and attempt visualised removal.</li><li>If stable with suspected aspiration → <strong>CXR</strong> (± neck imaging). Avoid blind finger sweeps.</li><li>Persistent suspicion or abnormal imaging → <strong>rigid bronchoscopy</strong> for removal; involve ENT/paediatric respiratory.</li><li>Post-removal observation for airway oedema, infection; provide prevention advice to carers.</li></ul>","<strong>Exam takeaway:</strong> Stable child with suspected foreign body aspiration and unilateral wheeze → <strong>Chest X-ray first</strong>; bronchoscopy is definitive if suspicion remains or imaging is positive."]},{id:"CS-1501",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Agitated, diaphoretic young woman — which substance?",stem:"A 21-year-old woman presents to the Emergency Department appearing dishevelled and in distress. She requests analgesia for severe abdominal pain. She appears undernourished, agitated, constantly moving in her seat, and avoids sustained eye contact. She is <strong>diaphoretic</strong> with visible sweat despite a cool room, <strong>shivering</strong>, and complains of diffuse joint pain. <br/><br/><strong>Observations:</strong> BP <strong>150/90 mmHg</strong>, HR <strong>110 bpm</strong>, Temp <strong>37.8°C</strong>, RR <strong>22/min</strong>. What is the SINGLE most likely substance misuse indicated by her presentation?",options:[{key:"A",text:"Alcohol"},{key:"B",text:"Heroin"},{key:"C",text:"Cocaine"},{key:"D",text:"LSD"},{key:"E",text:"Ecstasy"}],correct:"B",explanation_plabable:["Agitation, abdominal cramp, sweating, shivering, and arthralgia are all features of heroin withdrawal. Heroin, an opioid, when misused, leads to physical dependence, and withdrawal symptoms can be severe and include many of the symptoms described.","","Cocaine misuse typically presents with increased alertness, euphoria, dilated pupils, and increased heart rate and blood pressure. While agitation and increased blood pressure could fit, the absence of euphoria, along with the presence of shivering and joint pain, makes cocaine less likely.","","The term “misuse” can manifest through two primary physiological states: intoxication and withdrawal. This makes this question even harder to answer as one has to think if it is an intoxication question or a withdrawal question.","","Heroin can be administered through various methods, with smoking being among the most common. However, its versatility allows for consumption in several other ways, including oral intake, snorting, and parenteral routes. Parenteral administration can be further divided into intravenous, intramuscular, and subcutaneous injections."],explanation_detail:["<strong>Why the answer is correct:</strong> The cluster of <em>autonomic</em> and <em>musculoskeletal</em> symptoms — agitation, diaphoresis, shivering, abdominal cramps and generalised aches — strongly suggests <strong>opioid withdrawal</strong>. Heroin (short‑acting) withdrawal typically begins 6–12 hours after last use, peaking at 1–3 days, with mydriasis, yawning, rhinorrhoea/lacrimation, piloerection, abdominal cramps, vomiting/diarrhoea, insomnia, tachycardia and mild hypertension. These match the vignette more than stimulant intoxication.","<strong>Why the other options are wrong:</strong> A) Alcohol withdrawal features tremor, anxiety, sweating and hypertension, but prominent abdominal cramping and shivering with opioid‑type aches are less typical; severe forms include seizures/DTs. C) Cocaine intoxication causes euphoria, severe agitation, hyperthermia, hypertension, chest pain and mydriasis rather than shivering/arthralgia from withdrawal. D) LSD (hallucinogen) → perceptual disturbances/hallucinations with variable vitals; not this picture. E) Ecstasy (MDMA) → empathogenic effects, bruxism, hyponatraemia risk, hyperthermia; again not classic for this case.","<strong>Management/algorithm:</strong> <ul><li>Assess ABC; exclude sepsis, pregnancy complications, or surgical abdomen if pain severe.</li><li>Symptomatic relief: antiemetics, antidiarrhoeals, NSAIDs; fluids and reassurance.</li><li>Consider <strong>clonidine/lofexidine</strong> for autonomic symptoms.</li><li>Initiate <strong>opioid substitution therapy</strong> when in moderate withdrawal (e.g., COWS ≥ 8–12): <em>buprenorphine</em> (first‑line) or methadone per local protocol; involve addiction services.</li><li>Harm reduction and safeguarding: screen for BBV, offer take‑home naloxone, arrange follow‑up/support.</li></ul>","<strong>Exam takeaway:</strong> Agitated, sweaty patient with crampy abdominal pain, shivering and diffuse aches → think <strong>heroin withdrawal</strong> rather than stimulant intoxication; manage supportively and start opioid substitution when appropriate."]},{id:"CT-1218",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Penetrating chest trauma with tracheal deviation — next step",stem:"A 22-year-old man attends the Emergency Department with a stab wound to the chest. He has left-sided pleuritic chest pain and dyspnoea. There is a single stab wound to the left chest just below the clavicle. His <strong>trachea deviates to the right</strong>. On auscultation, there are <strong>absent breath sounds on the left</strong>. <br/><br/><strong>Observations:</strong> HR <strong>122 bpm</strong>, BP <strong>95/55 mmHg</strong>, SpO₂ <strong>—</strong> (now on high‑flow oxygen). What is the most appropriate next step in his management?",options:[{key:"A",text:"Needle thoracocentesis"},{key:"B",text:"Chest drain"},{key:"C",text:"Intubate and ventilate"},{key:"D",text:"Tracheostomy"},{key:"E",text:"Pericardiocentesis"}],correct:"A",explanation_plabable:["In the exam, whenever you see the trachea being deviated in a certain direction, immediately consider pneumothorax. If the deviation is in the opposite direction of the trauma, consider tension pneumothorax.","","The diagnosis and management of tension pneumothorax are the same. Insertion of a large-bore needle into the 5th intercostal space near the mid-axillary line. If you hear an audible hiss it confirms the diagnosis and the patient will have relief of their symptoms. This procedure has converted the tension pneumothorax to a simple pneumothorax which will then need to be treated with chest drainage. This procedure is called “needle thoracocentesis”. Synonyms include “needle decompression”.","","Our PLABABLE team actually prefer the term “needle decompression” rather than “needle thoracocentesis” when used in tension pneumothorax.","","The previous method was to insert it in the 2nd intercostal space at the midclavicular line, however, the new ATLS guidelines (10th edition) show evidence that it is easier to reach the thoracic cavity when the 5th intercostal space is used.","","Tension pneumothorax is by necessity a clinical diagnosis. It is a life-threatening emergency and as such, there is no time for diagnostic investigations such as X-ray and arterial blood gases.","","The stab wound, in this case, created an opening with a flap (similar to a one-way valve) which allowed the one-way entry of air into the left pleural space. This build-up of air and subsequent pressure pushes the lung into the mediastinum and reduces venous return to the heart. This is the cause of neck vein distention (not present in this stem), hypotension, tachycardia etc.","","Traumatic chest injuries are a significant cause of mortality. The majority of chest injuries can be handled with simple procedures such as intubation, chest tubes, and pain control."],explanation_detail:["<strong>Why the answer is correct:</strong> Tracheal deviation away from the injured side, unilateral absent breath sounds and hypotension after penetrating chest trauma = <strong>tension pneumothorax</strong>. This is a clinical diagnosis requiring <strong>immediate needle decompression</strong> (large‑bore cannula in the 5th intercostal space, anterior to the mid‑axillary line) to relieve mediastinal shift and restore venous return; do not delay for imaging.","<strong>Why the other options are wrong:</strong> B) A chest drain is required <em>after</em> decompression to treat the resulting simple pneumothorax but is not the first, life‑saving step. C) Intubation and ventilation do not treat the obstructive shock and can worsen it if done before decompression. D) Tracheostomy is not indicated. E) Pericardiocentesis treats tamponade, not pneumothorax with tracheal deviation/hypotension.","<strong>Management/algorithm:</strong> <ul><li>High‑flow O₂ and <strong>needle decompression</strong> at 5th ICS AAL/MAL on the affected side; listen for hiss and clinical improvement.</li><li>Insert <strong>definitive intercostal chest drain</strong> (safe triangle) thereafter.</li><li>Continue ABC, analgesia, and monitor; obtain CXR post‑drain if stable.</li><li>Consider causes of traumatic arrest (HOT/LS: hypovolaemia, oxygenation, tension pneumothorax, tamponade).</li></ul>","<strong>Exam takeaway:</strong> Tension pneumothorax is a <strong>clinical</strong> diagnosis — treat first with <strong>needle decompression (5th ICS mid‑axillary line)</strong>, then insert a chest drain; do not wait for X‑ray/ABG."]},{id:"EN-0659",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Collapsed with low GCS and severe hypoglycaemia — next step",stem:"A 59-year-old man is found not fully conscious on the street and brought to A&E by paramedics. Bystanders report he was walking when he suddenly collapsed. On arrival he is confused but breathing. His Glasgow Coma Scale (GCS) is <strong>11/15</strong> with no signs of trauma. Capillary blood glucose is <strong>1.6 mmol/L</strong>. What is the most appropriate next step in management?",options:[{key:"A",text:"Buccal glucose gel"},{key:"B",text:"IM Glucagon"},{key:"C",text:"IV glucose"},{key:"D",text:"Oral glucose solution"},{key:"E",text:"Subcutaneous insulin"}],correct:"C",explanation_plabable:["The scenario does not explicitly mention an IV line has been inserted or not. This is crucial in deciding between IV or IM treatment and so this is a typical subpar question. You can expect questions of this nature in the exam where they do not represent real life.","","IM glucagon is the correct choice for a patient with impaired consciousness when IV access is not yet established or not readily available.","","IV glucose is the correct choice for a patient with impaired consciousness when IV access has been established.","","It is really up for debate if there is no mention of an IV line being inserted or quickly accessible. Paramedics are more than equipped to insert an intravenous line and so are A&E doctors. That said, the question lacks clarity, making it difficult to choose between IM glucagon and IV glucose without further details. Our Plabable recommendation is to select IV glucose, as it can reasonably be assumed that the patient in A&E would have an established IV line. IV glucose is preferred due to its rapid effectiveness in treating severe hypoglycaemia. We welcome and encourage any constructive debate on this topic in the comment section.","","Buccal or oral glucose is never a good option in patients with impaired consciousness as it requires the patient to be conscious and able to swallow safely. While buccal glucose is absorbed through the mucous membranes, it still requires the patient to have some level of cooperation and reflexes to prevent aspiration or choking. In a confused patient, there is a risk that the gel could obstruct the airway or trigger aspiration if it moves to the back of the throat.","","There is no specific, universally agreed GCS threshold in clinical guidelines for when buccal glucose gel should or should not be administered. Nonetheless, our Plabable team believe that for exam purposes, if the GCS is ≤ 12, oral or buccal glucose gel is unsafe."],explanation_detail:["<strong>Why the answer is correct:</strong> Severe hypoglycaemia with impaired consciousness should be treated immediately. If <strong>IV access is available</strong>, give <strong>IV dextrose</strong> (e.g., 10% 150 mL or 20% 75 mL) to rapidly restore plasma glucose. This acts faster and more reliably than IM glucagon and avoids delays in establishing airway/ventilation and neurological recovery.","<strong>Why the other options are wrong:</strong> B) <em>IM glucagon</em> is appropriate when IV access is unavailable; it relies on hepatic glycogen and may be ineffective in malnutrition, liver disease or alcohol excess. A/D) <em>Buccal/oral glucose</em> require a protected airway and cooperative swallowing—unsafe at GCS 11 with aspiration risk. E) <em>Insulin</em> would worsen hypoglycaemia and is contraindicated.","<strong>Management/algorithm:</strong> <ul><li>ABCDE; check capillary glucose in any altered mental state.</li><li>If IV access present: <strong>IV dextrose</strong> (10% 150 mL or 20% 75 mL). If no IV access: <strong>IM glucagon 1 mg</strong>; establish IV access as soon as possible.</li><li>Once awake and able to swallow: give <strong>long‑acting carbohydrate</strong> (e.g., meal/snack) and monitor for recurrence.</li><li>Identify and treat cause: medication dosing errors, missed meals, renal impairment, alcohol, sepsis; review diabetes regimen.</li><li>Document and safety‑net; consider observation if long‑acting insulin/sulfonylurea involved (octreotide for sulfonylurea‑induced hypoglycaemia).</li></ul>","<strong>Exam takeaway:</strong> Altered GCS + hypoglycaemia → <strong>IV dextrose if you have IV access</strong>; otherwise give <strong>IM glucagon</strong>. Avoid oral/buccal glucose in patients who are not fully conscious."]},{id:"EM-1035",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Post-op pleuritic chest pain — best investigation",stem:"A 64-year-old woman presents to the Emergency Department with sudden-onset pleuritic chest pain and shortness of breath. The symptoms began a few hours ago while she was sitting at home. Past history includes hypertension; she underwent a <strong>total hip replacement two weeks ago</strong>. <br/><br/><strong>Observations:</strong> RR <strong>24/min</strong>, SpO₂ <strong>92% on air</strong>, HR <strong>108 bpm</strong>, BP <strong>128/78 mmHg</strong>. Examination of the legs reveals <strong>mild swelling of the right calf</strong>. Which is the most appropriate investigation?",options:[{key:"A",text:"Chest X-ray"},{key:"B",text:"CT pulmonary angiography"},{key:"C",text:"D-dimer"},{key:"D",text:"ECG"},{key:"E",text:"Ventilation-perfusion scan"}],correct:"B",explanation_plabable:["The most appropriate investigation is CT pulmonary angiography (CTPA), as it is the gold standard imaging modality for diagnosing pulmonary embolism (PE) in haemodynamically stable patients. This woman has a recent history of surgery, tachycardia, and pleuritic chest pain, which are highly suggestive of PE.","","While a D-dimer test can be useful in low-risk cases, it is not appropriate in this situation due to the high clinical suspicion.","","A chest X-ray may be performed to rule out other causes but is not diagnostic for PE.","","An ECG can show changes such as sinus tachycardia or S1Q3T3 pattern but is not definitive.","","A ventilation-perfusion (V/Q) scan is an alternative in cases where CTPA is contraindicated, such as in those with severe renal impairment or contrast allergy."],explanation_detail:["<strong>Why the answer is correct:</strong> She is haemodynamically stable with multiple PE risk factors (recent hip arthroplasty, tachycardia, unilateral calf swelling) and pleuritic chest pain/hypoxaemia. For a <strong>moderate–high pre‑test probability</strong>, the investigation of choice is <strong>CT pulmonary angiography (CTPA)</strong>, which directly visualises filling defects in the pulmonary arteries and helps assess alternative diagnoses.","<strong>Why the other options are wrong:</strong> A) CXR can exclude other causes (e.g., pneumothorax, pneumonia) but is not diagnostic for PE. C) D‑dimer is useful only to <em>rule out</em> PE in low‑probability patients; after recent major surgery it is frequently positive and should not delay definitive imaging. D) ECG may show sinus tachycardia or S1Q3T3 but lacks sensitivity/specificity. E) V/Q scan is reserved when <strong>CTPA is contraindicated</strong> (e.g., severe renal failure, iodinated contrast allergy, or pregnancy with normal CXR) or when CT is unavailable.","<strong>Management/algorithm:</strong> <ul><li>Assess Wells/clinical probability; if high and no contraindication, <strong>start anticoagulation</strong> while arranging urgent CTPA.</li><li>If CTPA positive → continue anticoagulation (e.g., DOAC) and evaluate for provoking factors/length of therapy (typically ≥3 months).</li><li>If massive PE with haemodynamic instability → consider thrombolysis or embolectomy.</li><li>If CTPA contraindicated and CXR normal → consider V/Q scan; if both unavailable, manage per local pathways.</li></ul>","<strong>Exam takeaway:</strong> Stable patient with high suspicion for PE after recent surgery → <strong>CTPA</strong> is the next best investigation; D‑dimer is for low‑risk rule‑out only."]},{id:"EM-3954",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"COPD patient with sudden pleuritic pain — next step",stem:"A 50-year-old man presents to the Emergency Department with sudden-onset breathlessness and pleuritic chest pain that developed a few hours ago at rest. He has COPD with multiple admissions over the past year and denies trauma. He appears mildly distressed and uses accessory muscles. <br/><br/><strong>Observations:</strong> RR <strong>28/min</strong>, SpO₂ <strong>89% on air</strong>, HR <strong>104 bpm</strong>, BP <strong>120/66 mmHg</strong>. On auscultation there are <strong>reduced breath sounds</strong> and <strong>hyperresonance</strong> to percussion on the right. A chest X‑ray is shown.",image:"/right_large_secondary_pneumothorax.png",options:[{key:"A",text:"CT chest"},{key:"B",text:"Chest drain insertion"},{key:"C",text:"Needle aspiration"},{key:"D",text:"Non-invasive ventilation"},{key:"E",text:"Needle decompression"}],correct:"B",explanation_plabable:["The patient in this scenario has a secondary pneumothorax, which is pneumothorax occurring in someone with an underlying lung condition, such as chronic obstructive pulmonary disease (COPD).","The visceral pleural edge (sharp white line) can be seen on the right lung and there are no lung markings peripherally to this line. There is no mediastinal shift away from the left lung. This chest X-ray shows a right pneumothorax of more than 50% (approximately 2cm distance from lung margin and chest wall, at the level of the hilum). This would require a chest drain.","Plabable tip! it is hard to know if it is more than a 2cm distance from lung margin and chest wall, at the level of the hilum based on the image given in the MCQ. One quick way to estimate how much is 2 cm is looking at the distance between the posterior ribs. The average distance between the posterior ribs on a chest X-ray is approximately 2-3 cm. You can use this spacing as a rough guide."],explanation_detail:["<strong>Why the answer is correct:</strong> This is a <strong>secondary pneumothorax</strong> (underlying COPD). In adults with secondary pneumothorax, a visible rim >2 cm at the hilum level or significant breathlessness warrants <strong>intercostal chest drain insertion</strong> rather than simple aspiration. The film and symptoms indicate a large right pneumothorax without tension; a drain is the appropriate definitive treatment.","<strong>Why the other options are wrong:</strong> A) CT is not first‑line in a clear pneumothorax on CXR needing intervention. C) Needle aspiration is mainly for small primary pneumothoraces or selected 1–2 cm secondary cases; large secondary pneumothorax needs a drain. D) Non‑invasive ventilation is <em>contraindicated</em> in untreated pneumothorax due to risk of tension. E) Needle decompression is reserved for <strong>tension pneumothorax</strong> with haemodynamic compromise/tracheal deviation, which is not described here.","<strong>Management/algorithm:</strong> <ul><li>High‑flow oxygen, analgesia and monitoring.</li><li>Insert intercostal chest drain in the safe triangle; obtain post‑procedure CXR.</li><li>Address underlying COPD; consider admission, oxygen weaning and respiratory review.</li><li>If persistent air leak or failure of lung re‑expansion, involve thoracic surgery for VATS/pleurodesis.</li></ul>","<strong>Exam takeaway:</strong> In <strong>secondary</strong> pneumothorax (e.g., COPD) with a large rim or marked breathlessness → <strong>chest drain</strong> rather than needle aspiration; NIV is contraindicated until resolved."]},{id:"EM-1254",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"A 7-year-old girl becomes acutely unwell while visiting a friend's house. The friend's mother has been cooking a dessert containing mixed nuts. She is brought to the Emergency Department. On arrival she is conscious but anxious with inspiratory stridor, widespread erythematous urticaria, and periorbital swelling. Vitals: HR 132 bpm, BP 98/62 mmHg, RR 30/min with accessory muscle use, SpO₂ 95% on high-flow oxygen via non-rebreather, Temp 36.9°C. Intravenous access has not yet been obtained. What is the SINGLE most immediate management step?",options:[{key:"A",text:"Check airway patency and prepare for intubation"},{key:"B",text:"Administer 0.3 mL 1 in 1,000 epinephrine (adrenaline) intramuscularly"},{key:"C",text:"Administer 10 mg chlorpheniramine intramuscularly"},{key:"D",text:"Administer 50 mg hydrocortisone intramuscularly"},{key:"E",text:"Secure intravenous access"}],correct:"B",explanation_plabable:["This is a classic case of anaphylaxis. Administer 0.3 ml in 100U epinephrine intramuscularly would be the most immediate action as she is aged 6 to 12 years old. From the stem, we can see that she has already been assessed which means the emergency team has already gone through the assessments for Airways, Breathing and Circulation. As she is fully conscious, it is likely that her airway is patent and she does not need intubation."],explanation_detail:["<strong>Why the answer is correct:</strong> She meets criteria for anaphylaxis (sudden exposure to likely allergen + airway/respiratory compromise with stridor and widespread urticaria). The <em>first-line, time-critical</em> treatment in the UK is <strong>IM adrenaline (epinephrine) into the anterolateral thigh</strong>. For children aged 6–12 years the recommended dose is <strong>0.3 mg = 0.3 mL of 1 mg/mL (1:1,000)</strong>, repeat every 5 minutes if there is no improvement. Adrenaline rapidly reverses upper-airway oedema, bronchospasm and distributive shock by α1 (vasoconstriction ↓oedema), β1 (inotropy/chronotropy) and β2 (bronchodilation, mast-cell stabilisation) effects. Early IM adrenaline reduces the risk of cardiac arrest and biphasic reactions—<em>it should not be delayed for IV access, antihistamines or steroids</em>.","<strong>Why the other options are wrong:</strong> <ul><li><em>A Prepare for intubation:</em> Always consider airway risk, but immediate IM adrenaline often rapidly improves laryngeal oedema and may avert intubation; intubation attempts before adrenaline can precipitate deterioration.</li><li><em>C Chlorpheniramine IM:</em> Antihistamines help cutaneous symptoms only; they are <strong>not life-saving</strong> and must never precede adrenaline.</li><li><em>D Hydrocortisone IM:</em> Contemporary UK guidance advises <strong>against routine corticosteroids</strong> in the acute phase; consider only for refractory reactions or ongoing asthma/shock after adrenaline.</li><li><em>E Secure IV access:</em> Important for fluids/second-line therapies but must <strong>not delay</strong> immediate IM adrenaline.</li></ul>","<strong>Management/algorithm (NHS/UK practice – Resuscitation Council UK/NICE aligned):</strong> <ul><li><strong>0. Call for help & monitor:</strong> Activate emergency call, attach monitoring (ECG, SpO₂, NIBP), obtain focused ABCDE history.</li><li><strong>1. Immediate therapy:</strong> Give <strong>IM adrenaline</strong> into the mid anterolateral thigh (0.3 mg for 6–12 years; 0.15 mg for 6 months–6 years; 0.1 mg for <6 months; 0.5 mg for ≥12 years/≥50 kg). <em>Repeat every 5 minutes</em> if inadequate response.</li><li><strong>2. Position & oxygen:</strong> Lie flat with legs elevated (or sitting if severe dyspnoea), give high-flow oxygen 15 L/min via non-rebreather, remove allergen if present.</li><li><strong>3. IV access & fluids:</strong> After first adrenaline dose, obtain IV/IO access. If signs of shock (weak pulse, hypotension, delayed CRT), give <strong>20 mL/kg</strong> isotonic crystalloid bolus; reassess and repeat as needed.</li><li><strong>4. Adjuncts (after adrenaline):</strong> Consider <em>nebulised bronchodilator</em> for bronchospasm; <em>chlorphenamine</em> for itch/urticaria; <em>corticosteroid not routine</em>—consider only for refractory reactions or ongoing asthma/shock after senior review. If on β-blockers with poor response, consider <strong>glucagon</strong> IV under senior guidance.</li><li><strong>5. Refractory anaphylaxis:</strong> If poor response after two IM doses, seek senior/anaesthetic/ICU help; commence <strong>adrenaline infusion</strong> via pump with critical-care support; continue fluids and consider vasopressors per protocol.</li><li><strong>6. Investigations:</strong> If safe, send <strong>acute serum tryptase</strong> as soon as possible (ideally within 2 hours) and a convalescent sample (24 hours–7 days).</li><li><strong>7. Observation:</strong> Minimum <strong>6–12 hours</strong> observation depending on severity/risk factors (severe presentation, need for repeated adrenaline, asthma, remote location, late-night presentation → consider 12–24 hours) to monitor for biphasic reactions.</li><li><strong>8. Discharge & prevention:</strong> Provide two <strong>adrenaline auto-injectors</strong> with training, a written <strong>emergency action plan</strong>, education on trigger avoidance, and arrange <strong>urgent allergy clinic referral</strong> for specialist assessment and testing.</li></ul>","<strong>Pathophysiology (high-yield):</strong> IgE-mediated type I hypersensitivity: allergen cross-links IgE on mast cells/basophils → rapid release of histamine, tryptase, leukotrienes and prostaglandins. <em>α1</em> vasodilation and capillary leak cause distributive shock and airway oedema; <em>β2</em> effects of adrenaline counteract bronchospasm and inhibit further mediator release. Biphasic reactions are due to late-phase mediator synthesis hours later, underscoring the need for observation.","<strong>Exam takeaway:</strong> Anaphylaxis = suspected allergen + airway/respiratory and/or circulatory compromise. <strong>Give IM adrenaline in the thigh immediately and repeat every 5 minutes if needed.</strong> Antihistamines and steroids are <em>adjuncts</em> and must never delay adrenaline; observe, provide auto-injectors, and ensure allergy follow-up."]},{id:"EM-4911",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 33-year-old woman with homozygous sickle cell disease (HbSS) presents to the Emergency Department with severe lower back and limb pain typical of previous vaso-occlusive crises. She rates the pain 9/10. She was given <strong>oral morphine 30 mg</strong> two hours ago by ambulance crew with minimal relief. Vitals: Temp 37.8°C, BP 130/85 mmHg, HR 98 bpm, RR 18/min, SpO₂ 98% on air. She is afebrile to low-grade febrile, appears distressed, and intravenous access is available. What is the most appropriate <strong>next step</strong> in the management of her pain?",options:[{key:"A",text:"Intramuscular diclofenac"},{key:"B",text:"Intravenous morphine"},{key:"C",text:"Intramuscular pethidine"},{key:"D",text:"Intravenous ketamine"},{key:"E",text:"Oral ibuprofen"}],correct:"B",explanation_plabable:["Intravenous morphine is considered the most appropriate next step in managing severe pain in a sickle cell crisis when oral morphine has not provided sufficient relief. IV administration allows for rapid onset of action and more effective plasma concentration levels, providing more immediate and effective pain relief compared to oral routes. This is critical in managing severe pain in sickle cell crises.","Pethidine should be avoided in sickle cell crises due to its metabolites (e.g., norpethidine), which can cause seizures and central nervous system toxicity.","Ketamine could be used as an adjunct for pain relief in severe cases or when opioid response is inadequate; however, it is not generally the first line of treatment due to its psychotropic side effects.","Nonsteroidal anti-inflammatory drugs (NSAIDs) like ibuprofen or diclofenac are typically more effective for mild to moderate pain, but in sickle cell crisis, the pain is usually severe."],explanation_detail:["<strong>Why the answer is correct:</strong> She has a typical vaso-occlusive crisis with severe pain despite adequate-dose <em>oral</em> morphine. UK practice prioritises <strong>rapid, titratable IV opioid analgesia</strong> to achieve pain relief within 30 minutes of arrival. <strong>IV morphine</strong> (e.g., 0.05–0.1 mg/kg slow IV boluses every 5 minutes to effect, then transition to PCA) provides faster onset and more reliable plasma levels than oral routes. IM routes are avoided in sickle cell disease because absorption is unpredictable and injections are painful. Early, effective analgesia reduces anxiety, catecholamine surge, and risk of complications (e.g., acute chest syndrome).","<strong>Why the other options are wrong:</strong> <ul><li><em>A Intramuscular diclofenac:</em> NSAIDs can be useful adjuncts if renal function is normal, but they are inadequate as sole therapy for severe crisis pain and the <em>IM route is discouraged</em>.</li><li><em>C Intramuscular pethidine:</em> Avoid due to toxic metabolite <strong>norpethidine</strong> (seizures, CNS toxicity) and poor efficacy.</li><li><em>D Intravenous ketamine:</em> Consider only as <em>adjunct or rescue</em> when opioids are inadequate and with senior oversight; not first line.</li><li><em>E Oral ibuprofen:</em> Onset is slow and analgesia insufficient for severe crisis; use as an adjunct later if no contraindication.</li></ul>","<strong>Management/algorithm (NHS—NICE/RCEM aligned):</strong> <ul><li><strong>Arrival & triage:</strong> High-acuity triage. Aim to give effective analgesia <strong>within 30 minutes</strong>. ABCDE, continuous observations, IV access, pain score.</li><li><strong>Analgesia (first line):</strong> <strong>IV morphine</strong> titrated in small boluses to effect; start <strong>PCA morphine</strong> early once pain is controlled. Prescribe antiemetic (e.g., ondansetron) and <strong>laxative</strong> for constipation prevention.</li><li><strong>Adjuncts:</strong> Paracetamol and an NSAID (e.g., diclofenac or ibuprofen) if renal function is stable and no contraindications. If opioid response inadequate, consider <em>low-dose ketamine</em> infusion/bolus with senior input. <strong>Avoid pethidine.</strong></li><li><strong>Oxygen & fluids:</strong> Give oxygen <em>only if hypoxic</em> (target SpO₂ 94–98%). Encourage oral fluids; use IV isotonic fluids if dehydrated, avoiding overhydration (risk of acute chest syndrome).</li><li><strong>Investigations:</strong> FBC, reticulocytes, U&E, LFTs, CRP; blood cultures if febrile; urinalysis; pregnancy test if applicable; group & save/crossmatch. Consider CXR if chest pain, fever, hypoxia or respiratory signs.</li><li><strong>Identify & treat triggers/complications:</strong> Assess for infection, acute chest syndrome, stroke, priapism. Start empiric antibiotics if sepsis suspected per local policy. Discuss early with Haematology.</li><li><strong>Supportive care:</strong> VTE risk assessment and prophylaxis if admitted; keep warm; early mobilisation as tolerated.</li><li><strong>Disposition:</strong> Admit if ongoing IV analgesia needed, inadequate pain control, hypoxia/fever, suspicion of acute chest syndrome or other complications, social concerns. Provide safety-netting and follow-up with the haematology team.</li></ul>","<strong>Pathophysiology (high yield):</strong> Deoxygenated HbS polymerises → rigid sickled erythrocytes → microvascular <em>vaso-occlusion</em> and tissue ischaemia. Inflammatory mediators (e.g., endothelin, prostaglandins) amplify nociception. Effective analgesia and hydration reduce sympathetic drive and secondary sickling. <strong>Pethidine</strong> metabolised to <em>norpethidine</em> (neurotoxic, pro-convulsant), hence avoidance. <strong>Morphine</strong> provides potent μ-agonism with predictable titration IV; PCA enables steady analgesia with fewer peaks/troughs.","<strong>Exam takeaway:</strong> In vaso-occlusive crisis with severe pain despite oral opioids, give <strong>IV morphine titrated rapidly</strong>, avoid IM injections and pethidine, add paracetamol/NSAID if safe, hydrate cautiously, and screen early for acute chest syndrome and infection."]},{id:"EM-3556",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 65-year-old man presents to A&E with worsening breathlessness and fatigue over the past few days. He reports ankle swelling and difficulty lying flat at night. Examination finds bilateral basal crackles and pitting oedema to the mid-shins. Vitals: BP <strong>98/60 mmHg</strong>, HR 98 bpm, RR 24/min, SpO₂ <strong>92% on air</strong>, Temp 37.0°C. A chest X-ray shows cardiomegaly with diffuse perihilar alveolar shadowing. What is the most appropriate initial management to relieve his symptoms?",image:"/em3556_chest_xray_pulmonary_oedema.png",options:[{key:"A",text:"Lisinopril"},{key:"B",text:"Metoprolol"},{key:"C",text:"Furosemide"},{key:"D",text:"Intravenous fluids"},{key:"E",text:"Spironolactone"}],correct:"C",explanation_plabable:["The chest X-ray demonstrates cardiomegaly and alveolar shadowing in the lung fields which is consistent with pulmonary oedema.","This patient presents with signs of acute decompensated heart failure, evidenced by symptoms like breathlessness, fatigue, orthopnoea, and peripheral oedema. In such cases, the priority is to reduce fluid overload to alleviate symptoms and improve oxygenation.","Furosemide, a loop diuretic, is indicated as the first-line treatment for acute pulmonary oedema in heart failure because it rapidly reduces fluid retention and improves symptoms by promoting diuresis. Given his low blood pressure (98/60 mmHg), careful dosing of furosemide can help avoid worsening hypotension while effectively reducing fluid overload.","Administration of intravenous fluids would be contraindicated in this case, as this patient already has fluid overload (evidenced by pulmonary and peripheral oedema). Giving additional fluids would worsen pulmonary oedema and exacerbate symptoms of heart failure.","As a general guide:","<ul><li>Systolic BP ≥90 mmHg: Furosemide is typically safe but monitored closely.</li><li>Systolic BP <90 mmHg or symptomatic hypotension: Furosemide is used with caution or withheld until stabilisation of blood pressure, as it could worsen perfusion and shock. In cases where blood pressure is critically low, the primary treatment focus shifts to stabilising haemodynamics with fluids, inotropes, or vasopressors before addressing fluid overload with diuretics.</li></ul>"],explanation_detail:["<strong>Why the answer is correct:</strong> The presentation (orthopnoea, peripheral oedema, basal crackles) with CXR showing cardiomegaly and perihilar shadowing is acute pulmonary oedema due to decompensated heart failure. The priority is rapid symptom relief by reducing preload and pulmonary congestion. <strong>IV furosemide</strong> (e.g., 40–80 mg slow IV; titrate to response) produces prompt diuresis and venodilation, improving dyspnoea and oxygenation. His BP is borderline low; nitrates and aggressive vasodilators are avoided, but cautious loop diuresis with close monitoring remains first-line.","<strong>Why the other options are wrong:</strong> <ul><li><em>A Lisinopril:</em> ACE inhibitors are disease-modifying but not for immediate symptom relief in acute decompensation; start or uptitrate once haemodynamically stable and euvolaemic.</li><li><em>B Metoprolol:</em> β-blockers can worsen acute decompensation if initiated or uptitrated; hold in the acute phase if hypotensive or bradycardic, and resume when stable.</li><li><em>D Intravenous fluids:</em> Contraindicated in pulmonary oedema unless there is clear hypovolaemia (which is not suggested here); would exacerbate congestion.</li><li><em>E Spironolactone:</em> Mineralocorticoid receptor antagonist for chronic HFrEF; onset is slow and not appropriate for acute relief.</li></ul>","<strong>Management/algorithm (NHS/NICE/RCEM aligned):</strong> <ul><li><strong>Position & oxygen:</strong> Sit upright; give oxygen to maintain target saturations 94–98% (88–92% if at risk of hypercapnic respiratory failure). Start continuous monitoring.</li><li><strong>Diurese:</strong> Give <strong>IV furosemide 40–80 mg</strong> (or higher if on chronic loop diuretics) as a slow bolus; reassess urine output, symptoms, and BP. Consider infusion if poor response.</li><li><strong>Vasodilators:</strong> If hypertensive pulmonary oedema (SBP >140 mmHg), consider IV nitrates; avoid if SBP <100 mmHg or hypotensive (as in this case).</li><li><strong>Ventilatory support:</strong> If persistent hypoxia or increased work of breathing, consider <strong>CPAP</strong>; escalate early and involve critical care if failing.</li><li><strong>Fluids:</strong> Avoid routine IV fluids; assess volume status with JVP, lungs, oedema, and ultrasound if available.</li><li><strong>Investigations:</strong> ECG, CXR, FBC, U&E (watch K⁺/Cr), LFTs, BNP (not for acute diagnosis), troponin if ACS suspected, ABG if hypoxic or hypercapnic. Treat precipitants (e.g., ACS, arrhythmia, infection, non-adherence).</li><li><strong>Monitoring:</strong> Strict input/output, consider urinary catheter, daily weight, repeat U&E after diuresis.</li><li><strong>After stabilisation:</strong> Optimise GDMT (ACE-i/ARB/ARNI, β-blocker, MRA, SGLT2 inhibitor), fluid/salt advice, HF nurse follow-up, and echo if not recent.</li></ul>","<strong>Pathophysiology:</strong> In decompensated HF, elevated left ventricular end-diastolic pressure increases left atrial pressure, transmitting back to pulmonary veins and capillaries. Hydrostatic pressure exceeds oncotic pressure → transudation of fluid into interstitium/alveoli → impaired gas exchange and reduced lung compliance. Loop diuretics inhibit NKCC2 in the thick ascending limb, causing natriuresis/diuresis and early venodilation, lowering preload and pulmonary capillary wedge pressure.","<strong>Exam takeaway:</strong> Acute pulmonary oedema with borderline BP → <strong>IV furosemide first</strong>, upright position, oxygen to target, avoid fluids and routine nitrates if hypotensive; investigate and treat triggers; consider CPAP if refractory."]},{id:"EM-1907",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 32-year-old woman with type 1 diabetes mellitus presents to the Emergency Department with abdominal pain since this morning. The pain is non-radiating in the epigastrium and she has vomited three times. She missed her usual insulin dose yesterday. She feels extremely tired and very thirsty. On examination she appears dehydrated with dry mucous membranes and prolonged capillary refill. Vitals: BP 96/70 mmHg, HR 120 bpm, RR 28/min with deep sighing breaths, SpO₂ 98% on room air, Temp 37.2°C. There is a fruity odour to her breath. Point-of-care tests: capillary blood glucose <strong>28 mmol/L</strong>; urine ketones <strong>3+</strong>. What is the most appropriate initial fluid to administer?",options:[{key:"A",text:"Hartmann's solution"},{key:"B",text:"0.9% normal saline"},{key:"C",text:"0.9% normal saline with KCl in the first bag"},{key:"D",text:"Hartmann's solution with KCl in the first bag"},{key:"E",text:"0.9% normal saline with sodium bicarbonate"}],correct:"B",explanation_plabable:["The patient's presentation, along with hyperglycaemia and ketonuria on a background of type 1 diabetes implies that the patient is in diabetic ketoacidosis.","Always suspect diabetic ketoacidosis in a diabetic patient who presents with abdominal pain and is grossly unwell bearing.","Patients are dehydrated and have a fluid deficit of about 100 mL/kg. 0.9% normal saline is the replacement fluid of choice in diabetic ketoacidosis.","KCL is not added to the first bag of saline. Instead, potassium replacement is based on the venous blood gas reports and can be added from the second bag onwards.","While the patient may be in metabolic acidosis, sodium bicarbonate may lead to the development of cerebral oedema and is not recommended.","Insulin is administered as an infusion pump. 50 units of soluble insulin made up to 50 ml with 0.9% saline and given at the rate of 0.1unit/kg/hour. In order to prevent hypoglycaemia, 10% glucose is given at a rate of 125ml/hr when the blood glucose is < 14 mmol/L."],explanation_detail:["<strong>Why the answer is correct:</strong> This is classic adult DKA (missed insulin, vomiting, dehydration, hyperglycaemia 28 mmol/L, ketonuria 3+, Kussmaul breathing, fruity breath). The <em>first</em> priority after ABC is <strong>volume resuscitation with 0.9% sodium chloride (normal saline)</strong>. Intravascular depletion drives poor renal perfusion and worsening acidosis; isotonic saline restores circulating volume, improves renal clearance of ketones, and lowers glucose via dilution and improved insulin sensitivity. Per UK adult DKA protocols, give <strong>1 L 0.9% NaCl over 1 hour</strong> (faster if shocked), <em>without potassium in the first bag</em>.","<strong>Why the other options are wrong:</strong> <ul><li><em>A Hartmann's solution:</em> Balanced crystalloids contain potassium and lactate; routine first bag in DKA remains 0.9% saline in most UK pathways.</li><li><em>C/D Add KCl to the first bag:</em> Dangerous before a potassium result and urine flow are confirmed; initial serum K⁺ is often normal/high due to acidaemia despite total-body deficit. Potassium replacement is guided by VBG/UEC and typically begins from the <strong>second</strong> litre.</li><li><em>E Add sodium bicarbonate:</em> Not recommended in routine DKA due to risk of paradoxical CNS acidosis and cerebral oedema; reserve only for extreme acidaemia with shock and senior oversight.</li></ul>","<strong>Management/algorithm (NHS—JBDS/NICE aligned):</strong> <ul><li><strong>Fluids:</strong> 0.9% NaCl 1 L over 1 h; then 1 L over 2 h; 1 L over 4 h; 1 L over 4–6 h (adjust for age/comorbidity/heart failure). If shocked, give additional rapid bolus and involve seniors.</li><li><strong>Insulin:</strong> Start fixed-rate IV insulin infusion <strong>0.1 units/kg/h</strong> <em>after</em> the first litre of fluid and potassium status is known.</li><li><strong>Potassium:</strong> Replace according to VBG/U&E and urine output: K⁺ >5.5 → none; 3.5–5.5 → add 40 mmol KCl per litre; <3.5 → senior review, replace urgently and consider delaying insulin.</li><li><strong>Glucose:</strong> When capillary glucose falls to <strong>< 14 mmol/L</strong>, add <strong>10% dextrose at 125 mL/h</strong> alongside saline to continue ketone clearance.</li><li><strong>Monitoring targets:</strong> Ketones fall ≥0.5 mmol/L/h, bicarbonate rises ≥3 mmol/L/h, glucose falls 3 mmol/L/h; hourly CBG/ketones, 2–4 hourly VBG & U&E; strict fluid balance and catheter if needed.</li><li><strong>Identify precipitant:</strong> Infection, insulin omission, MI, stroke, drugs; send cultures if febrile, do ECG, chest X-ray if indicated.</li><li><strong>Pitfalls:</strong> Avoid bicarbonate, avoid insulin bolus, do not add potassium to the first bag, and watch for cerebral oedema (headache, reduced GCS) especially in younger patients.</li></ul>","<strong>Exam takeaway:</strong> Adult DKA: first litre = <strong>0.9% saline without potassium</strong>; start fixed-rate IV insulin, replace potassium based on VBG, and add 10% dextrose when glucose < 14 mmol/L."]},{id:"EM-1700",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 34-year-old man is brought to the Emergency Department after a high‑speed motorcycle collision. He is disorientated and restless with pronounced bruising and swelling around the left orbit. There is a strong smell of alcohol on his breath. Primary survey is completed: airway patent with cervical spine immobilised, equal air entry, BP 132/78 mmHg, HR 106 bpm, RR 20/min, SpO₂ 97% on air. His Glasgow Coma Scale (GCS) is initially <strong>14</strong> (E4 V4 M6). About 90 minutes later, despite analgesia and observation, his <strong>GCS deteriorates to 9</strong>. What is the SINGLE most important initial investigation?",options:[{key:"A",text:"MRI head"},{key:"B",text:"Non-contrast head CT"},{key:"C",text:"Cervical spine X-ray"},{key:"D",text:"Contrast head CT"},{key:"E",text:"Blood alcohol concentration (BAC) measurement"}],correct:"B",explanation_plabable:["Given the patient's deteriorating level of consciousness and the mechanism of injury (high-speed motorcycle collision), a non-contrast head CT is of utmost importance to quickly assess for any intracranial injuries, such as bleeding.","The periorbital ecchymosis is a sign of basal skull fracture and is another worrying sign associated with intracranial injuries."],explanation_detail:["<strong>Why the answer is correct:</strong> In head injury, <strong>worsening GCS</strong> (drop ≥1 point) or GCS &lt;13 at any time mandates <strong>urgent CT head within 1 hour</strong> per NICE head injury guidance. The mechanism (high-speed RTC) and periorbital ecchymosis raise concern for skull base fracture and expanding intracranial haemorrhage (e.g., extradural/subdural). <strong>Non-contrast</strong> CT rapidly identifies acute blood, mass effect and fractures; it is available, fast and compatible with unstable patients.","<strong>Why the other options are wrong:</strong> <ul><li><em>A MRI head:</em> Excellent for diffuse axonal injury but slow, less available and unsuitable for acutely deteriorating trauma patients; not first-line.</li><li><em>C Cervical spine X‑ray:</em> Cervical spine imaging is important, but current priority is the deteriorating consciousness needing immediate CT head. C-spine CT can be obtained concurrently or subsequently per local trauma protocol.</li><li><em>D Contrast head CT:</em> Iodinated contrast is <strong>not</strong> required to detect acute haemorrhage and may obscure hyperdensities; non-contrast CT is the standard initial scan.</li><li><em>E BAC measurement:</em> Alcohol may confound assessment but must <strong>not delay</strong> time‑critical neuroimaging.</li></ul>","<strong>Management/algorithm (UK trauma—NICE/RCEM aligned):</strong> <ul><li><strong>ABCDE with C‑spine protection.</strong> High‑flow oxygen if needed, IV access, analgesia, point‑of‑care glucose, maintain SBP &gt;110 mmHg.</li><li><strong>Immediate imaging:</strong> Arrange <strong>CT head within 1 hour</strong> for GCS &lt;13 or any deterioration; add <strong>CT C‑spine</strong> if high‑risk mechanism or signs, often as part of a trauma CT (head/neck/chest/abdomen/pelvis) if stable to travel.</li><li><strong>Neurosurgical contact early</strong> if CT shows mass lesion, midline shift or if GCS remains ≤8 after resuscitation.</li><li><strong>Raised ICP precautions:</strong> Elevate head 30°, keep neck midline, avoid hypotension and hypoxia; target PaCO₂ 4.5–5.0 kPa; consider <em>hyperosmolar therapy</em> (e.g., hypertonic saline) if impending herniation while arranging definitive care.</li><li><strong>Observation:</strong> Hourly neuro‑obs, repeat CT if clinical deterioration, treat seizures, correct coagulopathy (vitamin K/ PCC if on warfarin; withhold DOACs and seek reversal where appropriate).</li><li><strong>Documentation & safeguarding:</strong> Record GCS components, pupils, focal deficits, mechanism, and timings; alcohol level can be checked once immediate threats are addressed.</li></ul>","<strong>Exam takeaway:</strong> Head injury + drop in GCS = <strong>non‑contrast CT head within 1 hour</strong>. Alcohol intoxication never excludes intracranial haemorrhage and must not delay imaging or neurosurgical referral."]},{id:"EM-3888",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"A 4-year-old boy is brought to the Emergency Department by his mother. He has been drowsy and febrile for 2 days. While in triage he suddenly becomes unresponsive. He is not breathing normally. You deliver <strong>5 rescue breaths</strong>. No brachial or carotid pulse is palpable after 10 seconds. An Ambu-bag is not immediately available. What is the SINGLE most appropriate <strong>compression-to-ventilation ratio</strong> to use during cardiopulmonary resuscitation for this patient?",options:[{key:"A",text:"Ratio of 5 compressions to 1 breath"},{key:"B",text:"Ratio of 5 compressions to 2 breaths"},{key:"C",text:"Ratio of 15 compressions to 2 breaths with nose pinched"},{key:"D",text:"Ratio of 15 compressions to 2 breaths without nose pinched"},{key:"E",text:"Ratio of 30 compressions to 2 breaths"}],correct:"C",explanation_plabable:["15 compressions to 2 breaths with nose pinched is the answer. For a child over 1 year old, pinch the soft part of his nose closed with the index finger and thumb of your hand on his forehead when giving rescue breaths."],explanation_detail:["<strong>Why the answer is correct:</strong> In paediatric cardiac arrest (≥1 year), healthcare providers use a <strong>15:2</strong> compression-to-ventilation ratio. After initial <strong>5 rescue breaths</strong> (as paediatric arrests are often asphyxial), commence chest compressions at <strong>100–120/min</strong>, depth <strong>one-third of the chest</strong> (~5 cm in a 4-year-old), allowing full recoil. Because no bag-valve mask is immediately available, give <strong>mouth-to-mouth ventilations while pinching the nose</strong> to prevent air leak and ensure chest rise.","<strong>Why the other options are wrong:</strong> <ul><li><em>5:1</em> and <em>5:2</em> ratios are outdated and not recommended.</li><li><em>15:2 without pinching the nose</em> will cause inadequate tidal volumes due to nasal air leak in children >1 year (for infants <1 year, cover mouth <em>and</em> nose).</li><li><em>30:2</em> is the adult/lay-rescuer default and not the recommended ratio for healthcare professionals performing paediatric CPR.</li></ul>","<strong>Management/algorithm (UK Resuscitation Council – high yield):</strong> <ul><li>Confirm unresponsiveness, shout for help, open airway (head-tilt/chin-lift; jaw thrust if trauma), remove visible obstruction.</li><li>Give <strong>5 rescue breaths</strong>, watching for chest rise. If no signs of life and no pulse within 10 s → start CPR <strong>15:2</strong>.</li><li>Compressions: lower half of sternum, one or two hands depending on size; rate 100–120/min; depth one-third AP diameter; minimise pauses.</li><li>As equipment arrives: attach monitoring and defibrillator/automated external defibrillator; deliver oxygen with BVM using two-person technique; obtain IV/IO access.</li><li>Shockable rhythm (VF/pVT): defibrillate 4 J/kg; adrenaline 10 micrograms/kg (0.1 mL/kg of 1:10,000) after the <em>third</em> shock and every alternate loop; amiodarone 5 mg/kg after the third shock.</li><li>Non-shockable rhythm (PEA/asystole): give <strong>adrenaline immediately</strong> (10 micrograms/kg) then every 4 minutes.</li><li>Treat reversible causes (4 Hs/4 Ts): hypoxia, hypovolaemia, hypo/hyperkalaemia & metabolic, hypothermia; tension pneumothorax, tamponade, toxins, thrombosis.</li><li>Post-ROSC: airway/ventilation, normoxia, normocapnia, normothermia, glucose control, treat cause, PICU involvement.</li></ul>","<strong>Exam takeaway:</strong> Child ≥1 year in arrest: after 5 rescue breaths, perform CPR at <strong>15:2</strong>; pinch the nose for mouth-to-mouth ventilations to ensure chest rise."]},{id:"EM-0180",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"A 29-year-old man is brought to A&E after being punched in the face during a fight. He complains of periorbital swelling, double vision on looking up, and numbness of the cheek and upper lip on the affected side. Examination reveals periorbital ecchymosis, enophthalmos, and restriction of upward gaze of the left eye. Visual acuity is normal and pupils are equal and reactive. What is the most likely fractured bone?",options:[{key:"A",text:"Maxilla"},{key:"B",text:"Frontal"},{key:"C",text:"Ethmoid"},{key:"D",text:"Mastoid"},{key:"E",text:"Sphenoid"}],correct:"A",explanation_plabable:["This is an orbital blowout fracture.","The most common bone affected is the maxilla (orbital floor) followed by the ethmoid (medial wall). The diplopia on upward gaze is caused by impingement of the inferior rectus muscle."],explanation_detail:["<strong>Why the answer is correct:</strong> A blow to the orbit often fractures the <strong>orbital floor</strong> (maxilla) as it is the thinnest part and borders the maxillary sinus. Classical features include periorbital ecchymosis, <em>enophthalmos</em>, infraorbital numbness (V2), and <strong>vertical diplopia on up-gaze</strong> due to entrapment/impingement of the inferior rectus or inferior orbital tissues. Hence, the maxilla (orbital floor) is the most likely fractured bone.","<strong>Why the other options are wrong:</strong> <ul><li><em>Frontal:</em> Involves the superior orbital rim and sinus; usually from high-energy frontal impacts and causes forehead/scalp injuries rather than enophthalmos/up-gaze diplopia.</li><li><em>Ethmoid:</em> Medial wall can fracture (lamina papyracea) but classically causes subcutaneous emphysema/epistaxis and diplopia on <em>lateral</em> gaze; floor fractures are more common.</li><li><em>Mastoid:</em> Part of temporal bone; not part of the orbit.</li><li><em>Sphenoid:</em> Deep skull base bone; fractures are uncommon in isolated orbital trauma and usually present with severe cranial nerve deficits.</li></ul>","<strong>Management/algorithm (ED, UK practice):</strong> <ul><li><strong>Assess ABCDE</strong>; check visual acuity, pupils (RAPD), ocular motility, globe integrity; exclude open globe (Seidel test if suspected) before manipulating.</li><li><strong>Avoid nose blowing</strong>; give <strong>oral antibiotics</strong> covering sinus flora (e.g., co-amoxiclav) if there is a communication with the maxillary sinus or fracture into a sinus; consider tetanus update.</li><li><strong>Imaging:</strong> Urgent <strong>CT orbits/facial bones</strong> to define floor/medial wall defects and muscle entrapment.</li><li><strong>Specialist referral:</strong> Early <strong>ophthalmology/OMFS</strong> input. <em>Urgent</em> surgery is indicated for: oculocardiac reflex/bradycardia with entrapment, ‘trapdoor’ fractures (especially children), persistent diplopia with positive forced-duction test, large floor defects (>50% or >2 cm²), or cosmetically significant enophthalmos (>2 mm).</li><li><strong>Supportive care:</strong> Ice packs, head elevation, analgesia, nasal decongestant for short course if needed. Most uncomplicated fractures are repaired electively within 1–2 weeks after oedema settles.</li></ul>","<strong>Pathophysiology:</strong> A blunt force increases intraorbital pressure causing the thin <strong>orbital floor</strong> to ‘blow out’ into the maxillary sinus. Herniation/entrapment of periorbital fat and/or the <strong>inferior rectus muscle</strong> produces impaired up-gaze and diplopia; disruption of the infraorbital nerve causes cheek/upper-lip paraesthesia; loss of orbital volume leads to enophthalmos.","<strong>Exam takeaway:</strong> Orbital trauma + enophthalmos and diplopia on up-gaze → think <strong>orbital floor (maxillary) blowout fracture</strong>; confirm with CT and involve ophthalmology/OMFS."]},{id:"EM-3560",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 42-year-old man presents to the Emergency Department after a motor vehicle accident. His right foot was trapped under a heavy lorry for an extended period before rescue. On arrival he is in severe pain, far out of proportion to visible injuries, and the foot is tense and markedly swollen with pale skin. Passive toe extension elicits significant pain. Dorsalis pedis pulse is <strong>absent</strong> and capillary refill is delayed. Vitals: BP 128/78 mmHg, HR 108 bpm, RR 22/min, SpO₂ 98% on air, Temp 37.1°C. What is the most likely diagnosis?",options:[{key:"A",text:"Compartment syndrome"},{key:"B",text:"Rhabdomyolysis"},{key:"C",text:"Cellulitis"},{key:"D",text:"Stress fracture of the metatarsal"},{key:"E",text:"Fracture of the tibia and fibula"}],correct:"A",explanation_plabable:["The diagnosis here is clearly compartment syndrome, given the history of prolonged limb compression. This compression leads to reduced blood flow to the muscles and tissues within the affected compartment. As a result, the muscles and nerves in the compartment can become deprived of oxygen and nutrients, causing severe pain that is often out of proportion to the visible injury. The reason the dorsalis pedis pulse is not felt is because arterial blood inflow is reduced when pressure exceeds systolic blood pressure.","While rhabdomyolysis can lead to muscle pain and weakness, it does not result in absent pulses or the pronounced swelling and pallor as seen in compartment syndrome."],explanation_detail:["<strong>Why the answer is correct:</strong> Prolonged crush injury with severe, escalating pain out of proportion, tense swollen compartment, pain on passive stretch and an <em>absent distal pulse</em> is classic for <strong>acute compartment syndrome</strong>. Rising intracompartmental pressure exceeds capillary perfusion pressure, leading to ischaemia and risk of irreversible neuro-muscular damage within hours. This is a <strong>surgical emergency</strong>; diagnosis is primarily clinical—do not delay treatment for imaging.","<strong>Why the other options are wrong:</strong> <ul><li><em>Rhabdomyolysis:</em> May result from crush injury (↑CK, myoglobinuria) but does not itself cause a tense compartment or vascular compromise with absent pulses.</li><li><em>Cellulitis:</em> Typically erythematous, warm, tender skin with systemic features; pain is not classically out of proportion and compartments are not tense.</li><li><em>Stress fracture:</em> Insidious onset with activity-related pain, not acute crush trauma with neurovascular compromise.</li><li><em>Tibia/fibula fracture:</em> Could coexist, but the hallmark features (disproportionate pain, pain on passive stretch, tense swelling, pulse deficit) point to compartment syndrome requiring fasciotomy.</li></ul>","<strong>Management/algorithm (UK ED/orthopaedics):</strong> <ul><li><strong>Immediate actions:</strong> Call orthopaedics urgently; remove all constrictive dressings/splints, cut casts to skin, and place limb at <strong>heart level</strong> (avoid elevation which reduces perfusion; avoid dependency which increases oedema).</li><li><strong>Analgesia & resus:</strong> High-flow oxygen if needed, IV opioids, establish IV access; start IV fluids especially if crush injury/rhabdomyolysis risk.</li><li><strong>Assessment:</strong> Repeated neurovascular checks (pain, paraesthesia, pallor, paralysis, pulses—late sign). If diagnosis uncertain and expertise available, measure intracompartmental pressure; threshold commonly used is <em>ΔP</em> (diastolic BP − compartment pressure) ≤30 mmHg. <em>Do not</em> delay theatre if clinical suspicion is high.</li><li><strong>Definitive treatment:</strong> <strong>Urgent decompressive fasciotomy</strong> (all involved compartments) ideally within 1–2 hours of recognition.</li><li><strong>Peri-/post-op care:</strong> Aggressive IV fluids to prevent kidney injury from myoglobin; monitor U&E, CK; urine output target >1 mL/kg/h; consider alkalinisation if significant rhabdomyolysis; tetanus prophylaxis and antibiotics if open wounds.</li><li><strong>Complications to anticipate:</strong> Nerve/muscle necrosis, contractures, infection, renal failure from rhabdomyolysis, and chronic pain.</li></ul>","<strong>Pathophysiology (high-yield):</strong> Trauma/crush → bleeding/oedema within a non-compliant fascial compartment → exponential rise in tissue pressure → collapse of venous outflow then arteriolar inflow → ischaemia → pain out of proportion and pain on passive stretch; prolonged ischaemia (>6 hours) leads to irreversible necrosis and neuropathy. Pulses are a <em>late</em> sign; their absence indicates critical arterial compromise.","<strong>Exam takeaway:</strong> Crush injury + severe pain out of proportion + tense compartment + pain on passive stretch = <strong>acute compartment syndrome</strong>. Call orthopaedics and proceed to <strong>emergency fasciotomy</strong>; do not delay for imaging."]},{id:"EM-4420",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 45-year-old man is admitted following a generalised tonic–clonic seizure. He has alcohol dependence and is undergoing alcohol withdrawal on the ward with regular <strong>lorazepam</strong>. On day 2 he is found drowsy with shallow breathing. Vitals: BP 118/70 mmHg, HR 86 bpm, RR <strong>8/min</strong>, SpO₂ <strong>90% on air</strong>, Temp 36.7°C. He is unresponsive to voice but withdraws to pain; pupils are equal and reactive; capillary glucose is 6.0 mmol/L. There is no evidence of head injury or opioid medication charted. What is the most appropriate next step in management?",options:[{key:"A",text:"Atropine"},{key:"B",text:"Adrenaline"},{key:"C",text:"Flumazenil"},{key:"D",text:"Naloxone"},{key:"E",text:"Thiamine"}],correct:"C",explanation_plabable:["Flumazenil is a benzodiazepine antagonist used to reverse the effects of benzodiazepines, such as lorazepam, in cases of overdose or excessive sedation. It is particularly indicated when there is evidence of respiratory depression or reduced consciousness; as in this case."],explanation_detail:["<strong>Why the answer is correct:</strong> The patient has reduced consciousness with <strong>respiratory depression</strong> and a clear iatrogenic trigger (regular lorazepam). After basic airway support and oxygen, <strong>IV flumazenil</strong> is the specific antidote for benzodiazepine-induced sedation: give 200 micrograms IV over 15 seconds, then 100 micrograms every minute to a usual maximum of 1 mg until the airway and ventilation improve. Onset is within 1–2 minutes. Because flumazenil’s half-life is shorter than most benzodiazepines, monitor for <em>re-sedation</em> and repeat small doses if needed.","<strong>Why the other options are wrong:</strong> <ul><li><em>Atropine:</em> Used for symptomatic bradycardia; does not reverse sedative respiratory depression.</li><li><em>Adrenaline:</em> For anaphylaxis/cardiac arrest; inappropriate here.</li><li><em>Naloxone:</em> Antidote for opioid toxicity; there is no opioid exposure and pupils are not pinpoint.</li><li><em>Thiamine:</em> Important in alcohol misuse to prevent Wernicke’s, but will not reverse acute benzodiazepine-induced hypoventilation.</li></ul>","<strong>Management/algorithm (NHS/UK practice):</strong> <ul><li><strong>Immediate ABCDE:</strong> Jaw thrust, airway adjunct if needed, high-flow oxygen to target SpO₂ 94–98%, call for help, continuous monitoring (ECG, SpO₂, NIBP, capnography if available).</li><li><strong>Check reversible causes:</strong> Capillary glucose (already normal), review drug chart and PRNs, consider venous blood gas.</li><li><strong>Antidote:</strong> If strong evidence of benzodiazepine toxicity without contraindications, titrate <strong>flumazenil</strong> as above. <em>Use with caution</em> if there is a history of chronic benzodiazepine use, seizure disorder, or suspected mixed overdose (especially tricyclics) due to seizure risk.</li><li><strong>Supportive care:</strong> If inadequate response, provide assisted ventilation with bag–valve–mask and escalate to anaesthetics for possible intubation/critical care admission.</li><li><strong>Observation:</strong> Monitor for re-sedation for several hours; repeat small flumazenil boluses if necessary; document neurological status and respiratory rate.</li><li><strong>Alcohol care:</strong> Continue thiamine prophylaxis and manage alcohol withdrawal once the airway is safe.</li></ul>","<strong>Pathophysiology (high yield):</strong> Benzodiazepines enhance <em>GABA<sub>A</sub></em> receptor activity → CNS depression with reduced arousal and hypoventilation at high doses. <strong>Flumazenil</strong> is a competitive antagonist at the benzodiazepine binding site, rapidly reversing sedation but potentially unmasking seizures in dependent patients or mixed overdoses.","<strong>Exam takeaway:</strong> Suspected benzodiazepine-induced respiratory depression → support airway/oxygen, then <strong>titrate IV flumazenil</strong> if no contraindications; monitor closely for re-sedation and seizures."]},{id:"EM-1256",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"A 38-year-old man develops hoarse voice, stridor and wheeze minutes after eating a nut-containing dessert in a restaurant. Paramedics arrive to find him anxious and flushed with generalised urticaria. Vitals: HR <strong>120 bpm</strong>, BP <strong>80/60 mmHg</strong>, RR 28/min, SpO₂ 93% on air. He is struggling to breathe and has cool peripheries. Anaphylaxis is suspected. What is the SINGLE most appropriate route of administration of adrenaline in this case?",options:[{key:"A",text:"Orally"},{key:"B",text:"Intravenously"},{key:"C",text:"Subcutaneously"},{key:"D",text:"Intraosseously"},{key:"E",text:"Intramuscularly"}],correct:"E",explanation_plabable:["In cases of anaphylaxis, adrenaline is given intramuscularly as it is seen superior to the subcutaneous route.","Intravenous adrenaline can be dangerous and should only be used in certain specialist settings with someone very skilled and experienced its used.","Further reading:"],explanation_detail:["<strong>Why the answer is correct:</strong> This patient meets criteria for anaphylaxis (sudden exposure to likely allergen + airway/respiratory compromise and hypotension). UK practice is to give <strong>IM adrenaline 1 mg/mL (1:1000)</strong> into the mid anterolateral thigh as first-line because it has rapid, reliable absorption and a better safety profile than IV. Adult dose is <strong>0.5 mg (0.5 mL)</strong>, repeat every <strong>5 minutes</strong> if no improvement. Adrenaline reverses laryngeal oedema (α1), bronchospasm (β2) and supports circulation (α1/β1).","<strong>Why the other options are wrong:</strong> <ul><li><em>Oral:</em> Ineffective; adrenaline is not absorbed predictably and is rapidly metabolised.</li><li><em>Intravenous:</em> Risk of arrhythmias and hypertensive crisis if bolused; reserved for <strong>refractory anaphylaxis</strong> as a controlled infusion with critical care/anaesthetic support.</li><li><em>Subcutaneous:</em> Slower, less reliable uptake in shock due to cutaneous vasoconstriction; inferior to IM thigh.</li><li><em>Intraosseous:</em> A vascular access route (used in arrest) not the recommended route for adrenaline in anaphylaxis; treatment remains IM first.</li></ul>","<strong>Management/algorithm (NHS/Resuscitation Council UK aligned):</strong> <ul><li>Call for help; <strong>IM adrenaline 0.5 mg</strong> (anterolateral thigh) immediately; repeat every 5 min if needed.</li><li>Position: lie flat with legs elevated (or sitting if severe dyspnoea). High-flow oxygen; remove allergen if present.</li><li>Establish IV access; give rapid <strong>crystalloid 500–1000 mL</strong> if hypotensive; monitor ECG, SpO₂, BP.</li><li>Adjuncts after adrenaline: nebulised bronchodilator for bronchospasm; <em>antihistamines for skin symptoms only</em>; <em>steroids not routine</em>—consider only in refractory reactions after senior review.</li><li>Poor response after 2 IM doses → senior/critical care review for <strong>adrenaline infusion</strong>; consider glucagon if on β-blockers.</li><li>Send acute serum tryptase if feasible; observe at least <strong>6–12 hours</strong> (longer if severe/recurrent doses needed).</li><li>On discharge: provide <strong>two adrenaline auto-injectors</strong>, written emergency plan, trigger avoidance advice, and urgent allergy clinic referral.</li></ul>","<strong>Exam takeaway:</strong> Suspected anaphylaxis → <strong>IM adrenaline in the thigh immediately</strong>; never delay for IV access or antihistamines. IV adrenaline is specialist-only for refractory cases."]},{id:"EM-4311",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 49-year-old woman presents to the Emergency Department with 3 days of productive cough of green sputum, pleuritic chest pain and fever. She looks unwell and clammy. Exam: bronchial breathing at the right base. Vitals: RR <strong>27/min</strong>, SpO₂ <strong>90% on air</strong>, HR <strong>130 bpm</strong>, BP <strong>85/40 mmHg</strong>, Temp 38.6°C. What is the SINGLE next most appropriate action?",options:[{key:"A",text:"Intravenous fluids"},{key:"B",text:"Oral antibiotics"},{key:"C",text:"Chest X-ray"},{key:"D",text:"Intramuscular adrenaline"},{key:"E",text:"Sputum culture"}],correct:"A",explanation_plabable:["Her observations are extremely alarming and would raise red flags. She is clearly septic from a pneumonia.","Sepsis six would need to be performed urgently within the hour. Among the sepsis six is to give intravenous fluids.Oral antibiotics would be inappropriate.","We need a broad spectrum antibiotic in the bloodstream as soon as possible thus it needs to be given intravenously,Chest X-ray would need to be perform but can be done after performing the sepsis six and stabilising the patient."],explanation_detail:["<strong>Why the answer is correct:</strong> She has septic shock physiology (hypotension 85/40 mmHg, tachycardia, tachypnoea, hypoxia) with a likely source of pneumonia. The immediate priority is <strong>resuscitation with IV isotonic crystalloid</strong> to restore perfusion while initiating the rest of the Sepsis Six. A 500 mL bolus of 0.9% saline (or balanced crystalloid) should be given rapidly and repeated to response, while monitoring for fluid overload.","<strong>Why the other options are wrong:</strong> <ul><li><em>Oral antibiotics:</em> Too slow and unreliable absorption in shock; give <strong>IV broad-spectrum antibiotics within 1 hour</strong> after cultures.</li><li><em>Chest X-ray:</em> Useful to confirm pneumonia but must not delay immediate resuscitation (fluids/antibiotics/oxygen).</li><li><em>IM adrenaline:</em> Indicated for anaphylaxis, not sepsis.</li><li><em>Sputum culture:</em> Lower priority than blood cultures and haemodynamic stabilisation; can be obtained after initial resuscitation.</li></ul>","<strong>Management/algorithm (UK Sepsis Six/NICE aligned):</strong> <ul><li><strong>Within 1 hour:</strong> 1) Give <strong>high-flow oxygen</strong> to target SpO₂ 94–98% (88–92% if risk of hypercapnic failure). 2) <strong>Take blood cultures</strong> (before antibiotics if no delay). 3) <strong>Give IV broad-spectrum antibiotics</strong> per local policy (e.g., piperacillin–tazobactam or co-amoxiclav + macrolide if severe CAP). 4) <strong>Give IV fluids</strong> – 500 mL bolus crystalloids; reassess BP, pulse, mentation, urine output; repeat as needed. 5) <strong>Measure serum lactate</strong> and VBG. 6) <strong>Monitor urine output</strong> (consider catheterisation).</li><li>If hypotension persists after adequate fluids or lactate ≥4 mmol/L → <strong>urgent senior/ICU review</strong> for vasopressors (norepinephrine) to maintain MAP ≥65 mmHg.</li><li>Once stabilised: obtain <strong>chest X-ray</strong>, sputum cultures, and other source-specific tests; start VTE prophylaxis and review antimicrobials with results/clinical course.</li></ul>","<strong>Exam takeaway:</strong> Septic patient with hypotension and likely pneumonia → <strong>start Sepsis Six now</strong>. First act is IV crystalloid resuscitation while arranging IV antibiotics, cultures, lactate and monitoring—do not delay for imaging."]},{id:"EM-1750",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 56-year-old man is brought to A&E after falling down a flight of stairs at home. He landed on his back and now complains of severe midline neck pain and paraesthesia in both hands. He is conscious but appears distressed. Primary survey shows airway patent, equal chest rise and clear breath sounds, RR 24/min, SpO₂ 92% on air, HR 104 bpm, BP 138/82 mmHg. On examination there is marked midline cervical spine tenderness. No other life-threatening injuries are evident. What is the most appropriate initial management?",options:[{key:"A",text:"Cervical spine immobilisation"},{key:"B",text:"High-flow oxygen"},{key:"C",text:"Immediate CT scan of the cervical spine"},{key:"D",text:"Intravenous fluids"},{key:"E",text:"Urgent referral to neurosurgery"}],correct:"A",explanation_plabable:["The most appropriate initial management for a patient with suspected cervical spine injury, especially with signs such as cervical spine tenderness and paraesthesia, is cervical spine immobilisation. The main goal is to prevent any further spinal cord injury until more definitive imaging and evaluation can be performed. This involves immobilising the cervical spine using a hard collar and other methods, such as head blocks or manual stabilisation, if necessary, to keep the neck stable.","High-flow oxygen is not the first priority here. His oxygen saturation is 92% on room air which indicate mild hypoxaemia.","In trauma management, the principles of ABC (Airway, Breathing, Circulation) are indeed prioritised. However, in the case of suspected cervical spine injury, immobilisation is a crucial consideration that occurs simultaneously with airway and breathing management to prevent secondary spinal cord injury. If a patient has signs of hypoxaemia (e.g., oxygen saturation of 92%), providing supplemental oxygen is necessary as part of managing breathing. However, cervical spine immobilisation should be initiated at the same time to ensure that any potential spinal cord damage is minimised. In this particular case, given he only has mild hypoxaemia, the priority goes towards cervical spine immobilisation.","In practice, immobilisation is part of the trauma care protocol and is initiated as soon as possible, often even before transport to the hospital."],explanation_detail:["<strong>Why the answer is correct:</strong> Significant mechanism (fall down stairs) + <strong>midline cervical tenderness</strong> and <strong>neurological symptoms</strong> (paraesthesia) = suspected cervical spine injury. The time-critical priority is to <strong>prevent secondary spinal cord damage</strong> by <em>immediate in-line immobilisation</em> (manual stabilisation → hard collar + head blocks and tape). Imaging and definitive decisions come <em>after</em> stabilisation. His oxygen saturation is only mildly low and can be addressed concurrently once the neck is stabilised.","<strong>Why the other options are wrong:</strong> <ul><li><em>High-flow oxygen:</em> Oxygenation is important but must be delivered with the neck maintained in neutral alignment; it does not by itself protect the cord from movement-related injury.</li><li><em>Immediate CT cervical spine:</em> Needed soon, but scanning should follow initial immobilisation and ABC measures; do not move an unstable neck for imaging before it is secured.</li><li><em>Intravenous fluids:</em> Not indicated without shock; unnecessary fluids risk haemodilution and do not address the immediate risk of cord injury.</li><li><em>Urgent neurosurgery referral:</em> Consult will be required if imaging shows instability/cord compression, but <strong>first</strong> protect the cord with immobilisation.</li></ul>","<strong>Management/algorithm (UK trauma—NICE/RCEM aligned):</strong> <ul><li><strong>At scene/arrival:</strong> Manual in-line stabilisation → hard collar + head blocks/tape; keep the neck in neutral. Avoid repeated log-rolling.</li><li><strong>Primary survey (ABCDE) with spine precautions:</strong> Airway with jaw thrust, oxygen to target SpO₂ 94–98% while maintaining immobilisation; treat life-threats.</li><li><strong>Neurological assessment:</strong> GCS, pupils, motor/sensory exam in limbs; document deficits.</li><li><strong>Decision to image:</strong> Use Canadian C-Spine Rule/NICE criteria. Indications for CT within 1 hour include: any focal neurology, dangerous mechanism, age ≥65, midline tenderness, or inability to actively rotate neck 45°.</li><li><strong>During imaging/transfer:</strong> Maintain immobilisation and minimise movement; consider analgesia and antiemetics.</li><li><strong>After CT:</strong> If normal and low clinical suspicion → consider collar removal after senior review. If fracture/instability/cord compression → keep immobilised, involve spinal/neurosurgical team urgently.</li></ul>","<strong>Exam takeaway:</strong> Suspected cervical spine injury = <strong>immobilise first</strong> (manual in-line, collar, blocks and tape). Imaging and referrals follow once the neck is secured and ABC is underway."]},{id:"EM-1017",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 26 year old man presents to the Emergency Department with the complaint of a 24 hour history of epigastric pain and haematemesis. He had ingested an unknown drug four days ago, but he cannot remember the name of the drug or the amount of the drug that he took at the time because he had been drunk. He has no past medical history of note and takes no chronic medication. He indulges in social drinking occasionally. Blood tests were done, and the results are as follows:<br/><br/>Creatinine <strong>230 µmol/L (70-150 µmol/L)</strong><br/>Bilirubin <strong>20 µmol/L (3-17 µmol/L)</strong><br/>Alanine transaminase (ALT) <strong>1880 U/L (5-35 U/L)</strong><br/>Aspartate transaminase (AST) <strong>3510 U/L (5-35 U/L)</strong><br/>Alkaline phosphatase (ALP) <strong>215 U/L (30-150 U/L)</strong><br/>Gamma glutamyl transferase (GGT) <strong>80 U/L (8-60 U/L)</strong><br/>Prothrombin time (PT) <strong>20 seconds (10-14 seconds)</strong><br/><br/>He has a pulse rate of 128 beats/minute, blood pressure of 100/60 mmHg, respiratory rate of 25 breaths/minute and a temperature of 37.1°C. What SINGLE most likely drug did this patient ingest?",options:[{key:"A",text:"Amitriptyline"},{key:"B",text:"Aspirin"},{key:"C",text:"Paracetamol"},{key:"D",text:"Venlafaxine"},{key:"E",text:"Organophosphates"}],correct:"C",explanation_plabable:["The raised level of serum creatinine, bilirubin, liver enzymes as well as the increased prothrombin time indicates that this patient has taken an overdose of paracetamol. Paracetamol is an antipyretic and analgesic. Patients are usually asymptomatic for the first 24 hours but later nonspecific abdominal symptoms. Hepatic necrosis begins to develop after 24 hours and can progress to acute liver failure. The liver damage is usually not detectable by routine liver function test until at least 18 hours after ingestion of paracetamol. Alanine transferase (ALT), prothrombin time usually peak 72 to 96 hours after ingestion. In the United Kingdom, paracetamol can be purchased over the counter; however, it is government legislation that it is not to be sold in excess of 16 tablets at a time. For an average person, 24 tablets usually constitute an overdose.","The other answers are less likely.","Amitriptyline is a tricyclic antidepressant. TCA’s taken in large amounts can cause excessive sedation, sympathomimetic effects (tachycardia, sweating, dilated pupils).","Aspirin is a potent antiplatelet agent as well as an antipyretic, analgesic and anti-inflammatory agent. An overdose of aspirin causes ringing in the ears, nausea, abdominal pain, and tachypnoea.","Venlafaxine is a type of antidepressant of the selective serotonin-norepinephrine reuptake inhibitors (SNRI) class often used to treat depression, anxiety and panic attacks. Most patients overdosing with venlafaxine develop only mild symptoms of feeling tired, palpitations and vomiting. They rarely cause death.","Organophosphates are usually the active ingredient in insecticides. Symptoms include increased saliva and tear production, diarrhoea, vomiting, small pupils, sweating, muscle tremors, and confusion."],explanation_detail:["<strong>Why the answer is correct:</strong> The laboratory results show severe hepatocellular injury: markedly elevated ALT (1880 U/L) and AST (3510 U/L), prolonged prothrombin time (20s), and rising creatinine suggesting multi-organ involvement (hepatorenal syndrome). This pattern is characteristic of <strong>paracetamol toxicity</strong>. Paracetamol overdose depletes hepatic glutathione, allowing toxic NAPQI accumulation, causing centrilobular necrosis. Clinical course is typically: asymptomatic for 24h, followed by abdominal pain and deranged LFTs, then acute liver failure within 72–96h.","<strong>Pathophysiology:</strong> Paracetamol is metabolised in the liver. In overdose, glucuronidation/sulfation pathways saturate, forcing metabolism via cytochrome P450 to toxic NAPQI. Normally detoxified by glutathione, but depletion results in hepatocellular necrosis. Renal injury and metabolic acidosis may also ensue.","<strong>Differential diagnoses:</strong> <ul><li>Amitriptyline overdose — presents with anticholinergic features (dilated pupils, tachycardia, seizures, arrhythmias), not isolated hepatotoxicity.</li><li>Aspirin toxicity — causes tinnitus, metabolic acidosis/respiratory alkalosis, GI upset, hyperthermia, not massive transaminitis.</li><li>Venlafaxine — can cause CNS/serotonergic symptoms, arrhythmias, seizures, but not hepatotoxicity.</li><li>Organophosphates — cause cholinergic crisis (salivation, diarrhoea, miosis, bronchorrhoea), not isolated liver injury.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li>Amitriptyline: no arrhythmia or CNS depression described.</li><li>Aspirin: no tinnitus, acid-base disturbance, or hyperventilation explained by aspirin poisoning.</li><li>Venlafaxine: would not explain severe LFT derangement.</li><li>Organophosphates: classic cholinergic toxidrome absent here.</li></ul>","<strong>Management/algorithm:</strong> <ul><li>Immediate: check timing/amount of ingestion, obtain plasma paracetamol level (nomogram if within 24h).</li><li>Start <strong>N-acetylcysteine (NAC)</strong> immediately if >8h since ingestion or if level above treatment line. NAC replenishes glutathione, preventing further hepatic injury.</li><li>Supportive care: IV fluids, correct hypoglycaemia, monitor INR, renal function, acid-base status.</li><li>Refer early to liver unit if INR > 6.5, creatinine elevated, encephalopathy develops, or acidosis persists.</li></ul>","<strong>Guideline cues:</strong> According to Resuscitation Council UK and TOXBASE guidance, NAC is indicated if plasma level is above treatment threshold or if ingestion time uncertain and patient symptomatic with deranged LFTs.","<strong>Common pitfalls:</strong> <ul><li>Relying on normal early LFTs — hepatotoxicity often delayed until 18–24h.</li><li>Delaying NAC while waiting for levels — give empirically if >8h post-ingestion.</li><li>Assuming OTC paracetamol is benign — 24 tablets can be lethal.</li></ul>","<strong>Exam takeaway:</strong> <em>Severe transaminitis + prolonged PT after overdose strongly indicates paracetamol toxicity; NAC is life-saving if given promptly.</em>"]},{id:"EM-0500",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 48 year old man has been having diarrhoea, vomiting and mild abdominal pain for the past 4 days. He was brought to the Emergency Department by his wife as he was disoriented in the morning. His blood pressure is 110/75 mmHg and his heart rate is 89 beats/minute. His temperature is 37.9°C. His blood test show the following:<br/><br/>Haemoglobin <strong>144 g/l (130-180)</strong><br/>White cell count <strong>18 x 10^9/L (4-11)</strong><br/>Platelets <strong>325 x 10^9/L (150-400)</strong><br/>Serum urea <strong>11.5 mmol/L (2.0-7.0)</strong><br/>Serum creatinine <strong>185 µmol/L (70-150)</strong><br/>Serum calcium <strong>2.51 mmol/l (2.1-2.6)</strong><br/>eGFR <strong>60 ml/min</strong><br/>Sodium <strong>124 mmol/L (135-145)</strong><br/>Potassium <strong>3.6 mmol/L (3.5-5.0)</strong><br/>Glucose (fasting) <strong>3.6 mmol/L (3.5-5.5)</strong><br/><br/>What is the SINGLE most appropriate solution to be administered intravenously?",options:[{key:"A",text:"0.45% sodium chloride"},{key:"B",text:"0.9% sodium chloride"},{key:"C",text:"3% sodium chloride"},{key:"D",text:"0.45% sodium chloride and 0.15% potassium chloride"},{key:"E",text:"Mannitol"}],correct:"B",explanation_plabable:["This man likely has an episode of gastroenteritis. His sodium levels have decreased likely because he over replaced fluid by drinking water.","Patients who present with hyponatraemia due to acute vomiting and diarrhoea can be given intravenous normal saline (0.9% sodium chloride). Care should be taken to correct serum sodium levels slowly to avoid cerebral oedema. In general, the more acute the change of hyponatraemia, the quicker one can correct it. If there is chronic hyponatraemia or if the time of developing this hyponatraemia is unclear, then it is best to correct it slowly.","Hypertonic saline is rarely used. There are situations where one would use hypertonic saline to raise the sodium rapidly such as patients who are seizing or in a coma. This is usually senior led and would not be expected at your level."],explanation_detail:["<strong>Why the answer is correct:</strong> The presentation (4 days of vomiting/diarrhoea, mild fever, tachypnoea absent, normal glucose) with <strong>Na 124 mmol/L</strong>, elevated urea/creatinine and clinical disorientation is most consistent with <em>hypovolaemic hyponatraemia</em> from GI losses and excess free-water intake. The definitive initial treatment is <strong>0.9% sodium chloride</strong> to restore intravascular volume, suppress non-osmotic ADH and safely raise serum sodium.","<strong>Core pathophysiology/mechanism:</strong> GI fluid loss depletes sodium and water → reduced effective circulating volume → baroreceptor-driven ADH secretion → renal free-water retention and dilutional hyponatraemia. Isotonic saline corrects ECV; as volume restores, ADH falls and kidneys excrete excess free water, normalising sodium gradually.","<strong>Differential diagnoses:</strong> <ul><li><strong>SIADH (euvolaemic)</strong>: would have low urea/creatinine and no overt volume loss; often due to drugs/CNS/pulmonary disease.</li><li><strong>Hyperglycaemia-induced dilution</strong>: glucose is normal (3.6 mmol/L), so not the cause.</li><li><strong>Oedematous states</strong> (HF/cirrhosis/nephrotic): peripheral oedema/ascites history absent.</li><li><strong>Primary polydipsia</strong>: usually psychiatric/excess water without marked urea rise.</li><li><strong>Adrenal insufficiency</strong>: often hyperkalaemia/hypotension/tan; potassium is normal.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>A. 0.45% sodium chloride</strong> is hypotonic and can worsen hyponatraemia and cerebral oedema.</li><li><strong>C. 3% sodium chloride</strong> is reserved for <em>severe symptomatic</em> hyponatraemia (e.g., seizures, coma) aiming for an initial 4–6 mmol/L rise; not indicated here.</li><li><strong>D. 0.45% NaCl + 0.15% KCl</strong> remains hypotonic; adding K⁺ risks rapid shifts and arrhythmia without indication.</li><li><strong>E. Mannitol</strong> is an osmotic diuretic used for raised ICP; it would aggravate volume depletion and sodium derangement.</li></ul>","<strong>Management/algorithm:</strong> <ul><li>Place on monitors; assess volume status. If shocked, give <strong>0.9% saline 500 mL</strong> bolus over 10–15 min; repeat as needed while reassessing.</li><li>If not shocked but hypovolaemic, start <strong>0.9% saline 1 L</strong> over 1–2 h, then continue as guided by vitals, urine output and sodium trend.</li><li>Aim sodium correction <strong>≤10 mmol/L in 24 h</strong> (prefer 6–8) and <strong>≤18 mmol/L in 48 h</strong> to avoid osmotic demyelination.</li><li>Check serum/urine osmolality and urine sodium if aetiology uncertain; monitor U&E and sodium <strong>every 4–6 h</strong> initially.</li><li>Treat cause: antiemetics, oral rehydration when able; avoid hypotonic fluids.</li><li>If severe neurologic symptoms develop, give <strong>3% hypertonic saline 150 mL</strong> over 15–20 min, repeat up to 2–3 times under senior supervision to achieve a 4–6 mmol/L rise, then resume isotonic therapy.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> A–E assessment, oxygen if SpO₂ < 94%, cardiac monitoring, IV access ×2, bedside glucose.</li><li><strong>1–3 min:</strong> If hypotensive or shocked, give <strong>0.9% NaCl 500 mL</strong> stat; send bloods (FBC, U&E, osmolality, LFTs, CRP), venous gas (lactate), urine dip.</li><li><strong>3–10 min:</strong> Start maintenance/deficit replacement with <strong>0.9% NaCl</strong>; strict input–output and urine output target >0.5 mL/kg/h.</li><li><strong>10–30 min:</strong> Recheck vitals; review labs. If sodium rising >1–2 mmol/L/h, slow infusion. Address nausea with ondansetron 4 mg IV.</li><li><strong>30–60 min:</strong> Repeat sodium at 4–6 h. Consider admission for ongoing IV fluids and monitoring; escalate to senior if confusion worsens or seizures occur (then use 3% saline bolus as above).</li><li><strong>Disposition:</strong> Admit under acute medicine; discharge only when euvolaemic, sodium stable, symptoms resolved and clear oral plan given.</li></ul>","<strong>Guideline cues:</strong> UK/European guidance (RCEM/ESE) recommends <strong>isotonic saline</strong> for hypovolaemic hyponatraemia, cautious correction limits (≤10 mmol/L in 24 h), and hypertonic saline only for severe neurologic symptoms under senior oversight.","<strong>Common pitfalls:</strong> <ul><li>Using hypotonic fluids (0.45% NaCl) in hypovolaemic hyponatraemia.</li><li>Correcting sodium too quickly — risk of <em>osmotic demyelination</em>.</li><li>Forgetting to treat the underlying GI fluid loss and to monitor sodium frequently.</li></ul>","<strong>Exam takeaway:</strong> Vomiting/diarrhoea + low Na⁺ = <em>hypovolaemic hyponatraemia</em> → resuscitate with <strong>0.9% sodium chloride</strong>; correct slowly and monitor closely."]},{id:"EM-0505",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 32 year old man is brought to A&E by his wife with symptoms of chest pain, abdominal pain, palpitations, tinnitus, nausea and altered mental status. His wife says that she found a bottle of empty medication on the toilet floor and it is likely that he consumed the whole bottle. He has a respiratory rate of 34 breaths/minute. His arterial blood gas shows the following:<br/><br/>pH <strong>7.31 (7.35–7.45)</strong><br/>PaO₂ <strong>13 kPa (10–14 kPa)</strong><br/>PaCO₂ <strong>3.0 kPa (4.7–6.0)</strong><br/>Bicarbonate <strong>18 mmol/L (22–26)</strong><br/><br/>His blood results show the following:<br/><br/>Haemoglobin <strong>133 g/L (130–180)</strong><br/>White cell count <strong>8 × 10⁹/L (4–11)</strong><br/>Platelets <strong>350 × 10⁹/L (150–400)</strong><br/>Sodium <strong>137 mmol/L (135–145)</strong><br/>Potassium <strong>4.1 mmol/L (3.5–5.0)</strong><br/>Creatinine <strong>80 µmol/L (70–150)</strong><br/>eGFR <strong>>90 mL/min</strong><br/><br/>His ECG shows sinus rhythm with a rate of 95 beats/minute. What is the SINGLE most likely medication that he could have taken?",options:[{key:"A",text:"Paracetamol"},{key:"B",text:"Aspirin"},{key:"C",text:"Propranolol"},{key:"D",text:"Enalapril"},{key:"E",text:"Diazepam"}],correct:"B",explanation_plabable:["Remember:<br/>• If bicarbonates are low → Think metabolic acidosis (or renal compensation for a respiratory alkalosis).<br/>• If PaCO₂ is low → Think respiratory alkalosis (or respiratory compensation for a metabolic acidosis).","This is likely from aspirin poisoning. With aspirin overdose, they initially hyperventilate leading to respiratory alkalosis. The initial phase could last up to 12 hours. Following that, progressive metabolic acidosis occurs. This usually occurs around the 24 hour mark after ingestion for adults.","A mixed respiratory alkalosis and metabolic acidosis is a common acid–base finding in patients with aspirin overdose.","One of the main features of aspirin overdose which you do not see commonly with the other medications is tinnitus (seen in the stem). This feature should prompt you to pick aspirin over the other options.","Paracetamol overdose may also cause metabolic acidosis but toxicity does not cause tinnitus. Furthermore, aspirin overdose is a more recognised cause of metabolic acidosis compared to paracetamol.","Propranolol overdose does not cause tinnitus. Tachycardia (seen in the stem) is also not typical of a β-blocker overdose. One would expect either bradycardia or a heart block.","Overdose of ACE inhibitors like enalapril can cause metabolic acidosis but one of the main features of ACE inhibitor overdose is hyperkalaemia which is not seen in this stem. Tinnitus is also not a recognised feature of ACE inhibitor overdose.","Overdose of benzodiazepines would cause respiratory depression and respiratory acidosis.","If suspecting metabolic acidosis do a blood gas. A metabolic acidosis picture with an increased anion gap can be due to several drugs. Common ones are listed here: Metformin, Alcohol, Isoniazid."],explanation_detail:["<strong>Why the answer is correct:</strong> The patient’s symptoms of tinnitus, abdominal pain, hyperventilation, altered mental status, plus ABG showing <strong>low PaCO₂ (respiratory alkalosis)</strong> and <strong>low bicarbonate (metabolic acidosis)</strong> indicates a mixed respiratory alkalosis + metabolic acidosis — classic for <strong>salicylate (aspirin) overdose</strong>. The GI upset and confusion support this diagnosis.","<strong>Core pathophysiology/mechanism:</strong> Salicylates stimulate the medullary respiratory centre → hyperventilation → respiratory alkalosis. They also uncouple oxidative phosphorylation → lactic acidosis and ketoacidosis → metabolic acidosis. This dual process explains the mixed ABG picture.","<strong>Differential diagnoses:</strong> <ul><li><em>Paracetamol overdose</em>: hepatotoxicity with deranged LFTs, not tinnitus or hyperventilation.</li><li><em>Propranolol overdose</em>: bradycardia, hypotension, hypoglycaemia, not tachypnoea or tinnitus.</li><li><em>Enalapril overdose</em>: hyperkalaemia, hypotension, renal impairment, not tinnitus or mixed ABG.</li><li><em>Diazepam overdose</em>: CNS depression, hypoventilation (respiratory acidosis), not alkalosis.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li>Paracetamol: metabolic acidosis late, but no tinnitus or respiratory alkalosis.</li><li>Propranolol: expect bradycardia, not tachycardia.</li><li>Enalapril: would show hyperkalaemia, absent here.</li><li>Diazepam: depresses respiration, not stimulates hyperventilation.</li></ul>","<strong>Management/algorithm:</strong> <ul><li>Immediate: A–E assessment, cardiac monitoring, IV access, oxygen, check paracetamol/salicylate levels urgently.</li><li><strong>Activated charcoal</strong> if ingestion within 1 hour (50 g orally/NG).</li><li><strong>IV sodium bicarbonate</strong> infusion (e.g., 1.26% or 8.4% boluses followed by infusion) to alkalinise urine and plasma, enhancing salicylate excretion.</li><li>Monitor pH, potassium, glucose, salicylate levels 2–4 hourly.</li><li>Correct hypoglycaemia aggressively with IV dextrose.</li><li><strong>Haemodialysis</strong> if severe poisoning: salicylate level > 700 mg/L, renal failure, pulmonary oedema, severe acidosis, or altered mental status refractory to therapy.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Primary survey (A–E), high-flow oxygen, continuous monitoring, IV access ×2, bedside glucose.</li><li><strong>1–3 min:</strong> Take bloods (U&E, LFTs, coag, glucose, ABG, salicylate & paracetamol levels), insert NG tube if safe.</li><li><strong>3–10 min:</strong> Administer activated charcoal if within 1 h of ingestion. Give IV fluids; start sodium bicarbonate bolus if symptomatic/metabolic acidosis present.</li><li><strong>10–30 min:</strong> Recheck ABG; titrate sodium bicarbonate infusion to maintain urine pH 7.5–8.0. Correct potassium to keep >3.5 mmol/L (as hypokalaemia reduces bicarbonate efficacy).</li><li><strong>30–60 min:</strong> Monitor neurological status, repeat salicylate levels, prepare for possible dialysis if deterioration or high levels.</li><li><strong>Disposition:</strong> Admit to HDU/ICU; liaise with toxicology/renal for dialysis if indicated. Do not discharge until asymptomatic, salicylate levels falling and safe follow-up ensured.</li></ul>","<strong>Guideline cues:</strong> TOXBASE/RCEM guidance emphasises early bicarbonate therapy, potassium correction, and low threshold for dialysis in severe salicylate poisoning.","<strong>Common pitfalls:</strong> <ul><li>Missing the classic mixed alkalosis + acidosis picture.</li><li>Forgetting to check paracetamol level (patients often co-ingest).</li><li>Correcting sodium but neglecting potassium during bicarbonate therapy.</li></ul>","<strong>Exam takeaway:</strong> <em>Aspirin overdose = tinnitus + mixed respiratory alkalosis and metabolic acidosis. First-line is IV sodium bicarbonate; escalate to dialysis if severe.</em>"]},{id:"EM-1561",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 12 year old boy fell from a bicycle and hit his head on the pavement. He has difficulty remembering the events that unfolded right before he injured his head. The accident was witnessed by his mother. He did not lose consciousness. He has had three discrete episodes of vomiting since the injury. There is a small swelling on his forehead with no visible lacerations or bleeding. He has a Glasgow Coma Scale of 15/15. His neurological examination was unremarkable. What is the SINGLE most appropriate management?",options:[{key:"A",text:"CT scan of the head within 1 hour"},{key:"B",text:"CT scan of the head within 8 hours"},{key:"C",text:"Observe for a minimum of 4 hours post head injury"},{key:"D",text:"Observe for a minimum of 24 hours post head injury"},{key:"E",text:"Prescribe pain relief and discharge"}],correct:"A",explanation_plabable:["The main point to look at in this stem is vomiting and amnesia. Any head injuries in children presenting to A&E with more than ONE risk factor from the injury would require a CT scan within 1 hour.","Amnesia more than 5 minutes is one risk factor. 3 or more discrete episodes of vomiting is the other risk factor."],explanation_detail:["<strong>Why the answer is correct:</strong> According to NICE CG176, children with head injury require urgent CT (<strong>within 1 hour</strong>) if they present with ≥2 risk factors. This boy has both <strong>amnesia >5 minutes</strong> and <strong>≥3 episodes of vomiting</strong>. Although his GCS is 15 and neuro exam is normal, the combination of risk factors indicates high likelihood of clinically important intracranial injury, necessitating immediate CT brain.","<strong>Core pathophysiology/mechanism:</strong> Traumatic brain injury may lead to intracranial haemorrhage (extradural, subdural, intracerebral) or cerebral oedema. Amnesia reflects cortical/hippocampal dysfunction from concussion or contusion. Repeated vomiting suggests raised ICP or ongoing brain irritation from bleeding. Early CT allows identification before deterioration.","<strong>Differential diagnoses:</strong> <ul><li>Simple concussion: transient amnesia/confusion but usually ≤1 risk factor, not multiple.</li><li>Isolated scalp haematoma: causes swelling but no vomiting or amnesia.</li><li>Viral gastroenteritis: vomiting present, but no head injury/amnesia link.</li><li>Post-traumatic seizure: not described here; GCS remains 15.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>B. CT within 8 hours:</strong> Correct for a single risk factor only. This child has ≥2 risk factors, so 1-hour imaging is required.</li><li><strong>C/D. Observation alone:</strong> Inadequate because urgent imaging is indicated when multiple risk factors are present.</li><li><strong>E. Discharge with analgesia:</strong> Unsafe; risk of intracranial bleed not excluded.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Immediate:</strong> Perform A–E, stabilise airway/breathing/circulation, cervical spine precautions.</li><li><strong>Neuro checks:</strong> GCS, pupils, limb power, vitals every 30 min while awaiting CT.</li><li><strong>CT head within 1 hour</strong> as per NICE criteria.</li><li>If CT shows bleed: discuss with neurosurgery, admit under paediatrics/neurosurgery as appropriate.</li><li>If CT normal but symptomatic: admit for observation (usually 12–24 h).</li><li>Provide parental advice leaflet (‘head injury discharge advice’) if discharged.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Primary survey, high-flow O₂ if hypoxic, IV access, monitor HR/SpO₂/BP.</li><li><strong>1–3 min:</strong> Neurological assessment: GCS, pupils, cranial nerves, motor/sensory.</li><li><strong>3–10 min:</strong> Explain need for urgent CT brain, obtain consent from parents, liaise with radiology for immediate slot.</li><li><strong>10–30 min:</strong> Transfer to scanner with monitoring; continue neuro obs.</li><li><strong>30–60 min:</strong> Review CT results. If abnormal, escalate to neurosurgery; if normal but risk factors present, admit for observation.</li><li><strong>Disposition:</strong> Admit or discharge with written head injury advice depending on findings.</li></ul>","<strong>Guideline cues:</strong> NICE CG176: Children with ≥1 risk factor = CT within 1 h; isolated single risk factor = CT within 8 h; no risk factors = observe/discharge with advice.","<strong>Common pitfalls:</strong> <ul><li>Underestimating significance of repeated vomiting.</li><li>Discharging because GCS is 15 — risk factors override normal GCS.</li><li>Delaying CT and missing early intracranial haemorrhage.</li></ul>","<strong>Exam takeaway:</strong> <em>Child with head injury + ≥2 risk factors (e.g., amnesia >5 min + ≥3 vomiting episodes) → urgent CT head within 1 hour.</em>"]},{id:"EM-3250",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 4 year old child playing with toys unattended suddenly develops breathlessness and stridor and is rushed into the hospital by his father. The child is drooling and unable to swallow. What is the SINGLE best investigation likely to lead to a diagnosis?",options:[{key:"A",text:"Laryngoscopy"},{key:"B",text:"Chest X-ray"},{key:"C",text:"Peak flow meter"},{key:"D",text:"Arterial blood gas"},{key:"E",text:"Pulse oximeter"}],correct:"A",explanation_plabable:["Breathlessness and stridor in a child playing with toys is most likely due to aspiration of a foreign body (e.g. a part of the toy) for which indirect laryngoscopy and/or fibre-optic examination of the pharynx would provide a diagnosis.","Remember, the ingestion of foreign bodies is most commonly a problem in young children aged 6 months to 5 years.","Reference: http://patient.info/doctor/swallowed-foreign-bodies"],explanation_detail:["<strong>Why the answer is correct:</strong> Sudden onset of stridor, drooling, inability to swallow, and acute respiratory distress in a previously well child strongly suggests <strong>upper airway obstruction from foreign body aspiration</strong>. The most definitive way to establish diagnosis is <strong>direct or fibre-optic laryngoscopy</strong>, allowing visualisation of the larynx/pharynx and removal if required. Chest X-ray can sometimes show radio-opaque objects but cannot exclude airway obstruction, and ABG/pulse oximetry provide supportive but not diagnostic information.","<strong>Core pathophysiology/mechanism:</strong> Foreign bodies can lodge in the supraglottic/glottic area → turbulent airflow (stridor), impaired swallowing (drooling), and impending complete obstruction. Inflammatory oedema can worsen obstruction. Children have narrower airways, so even partial obstruction is life-threatening.","<strong>Differential diagnoses:</strong> <ul><li><em>Epiglottitis</em>: also causes stridor and drooling, but usually associated with fever, toxicity, and preceding illness. Now rare with Hib vaccine.</li><li><em>Croup</em>: viral prodrome, barking cough, not sudden onset.</li><li><em>Allergic reaction/angioedema</em>: stridor with urticaria/swelling, often medication or food trigger.</li><li><em>Retropharyngeal abscess</em>: fever, toxic child, neck stiffness, not sudden choking onset.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>B. Chest X-ray:</strong> May show foreign body if radio-opaque, or indirect signs (air-trapping, collapse), but cannot reliably diagnose or exclude aspiration.</li><li><strong>C. Peak flow meter:</strong> Not feasible in a distressed child, and not diagnostic of obstruction site.</li><li><strong>D. ABG:</strong> May show hypoxia/hypercapnia but only late; doesn’t confirm cause.</li><li><strong>E. Pulse oximeter:</strong> Detects hypoxia but not the underlying pathology.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Immediate:</strong> A–E assessment, high-flow O₂ if tolerated, keep child upright on parent’s lap, avoid upsetting child (crying worsens obstruction).</li><li><strong>Airway team:</strong> Call anaesthetics/ENT urgently.</li><li><strong>Laryngoscopy</strong> in theatre with skilled anaesthetist and ENT surgeon, with equipment for rigid bronchoscopy and emergency tracheostomy.</li><li>If complete obstruction develops: choking algorithm (back blows, chest thrusts for infants, abdominal thrusts for older children).</li><li>Do not attempt blind finger sweeps as they risk pushing object deeper.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Rapid A–E, identify stridor/drooling, sit child upright, call senior help (anaesthetics/ENT).</li><li><strong>1–3 min:</strong> Administer O₂, keep child calm, prepare airway equipment.</li><li><strong>3–10 min:</strong> Transfer urgently to theatre; anaesthetist maintains airway while ENT performs <strong>laryngoscopy</strong> and removes foreign body.</li><li><strong>10–30 min:</strong> Post-removal: monitor in recovery/HDU, check for laryngeal trauma, give steroids if oedema risk.</li><li><strong>30–60 min:</strong> Educate parents on choking hazards, advise follow-up if airway injury suspected.</li></ul>","<strong>Guideline cues:</strong> RCEM and RCPCH guidelines: any suspected inhaled foreign body with stridor/drooling = ENT referral and diagnostic laryngoscopy. Do not delay with unnecessary investigations like chest X-ray if suspicion is high.","<strong>Common pitfalls:</strong> <ul><li>Ordering chest X-ray first and delaying definitive airway assessment.</li><li>Upsetting child by repeated IV attempts before airway secure.</li><li>Misdiagnosing as croup when onset is sudden with choking episode.</li></ul>","<strong>Exam takeaway:</strong> <em>Child with sudden stridor, drooling, and choking after playing with toys = foreign body aspiration → definitive diagnosis via laryngoscopy.</em>"]},{id:"EM-0306",topic:"Emergency Medicine",difficulty:"Easy",vignetteTitle:"Clinical Vignette",stem:"A 23 year old single male was brought to emergency department by his father exhausted and frightened. His father tells you that his son, who was previously healthy, had, for no apparent reason, a sudden attack of fear, dizziness, sweating, palpitations and the feeling that his heart is going to stop beating. The symptoms started to decrease gradually after about 10 minutes. Which is the SINGLE most likely diagnosis?",options:[{key:"A",text:"Panic attack"},{key:"B",text:"Delirious state"},{key:"C",text:"Alcohol withdrawal"},{key:"D",text:"Drug overdose"},{key:"E",text:"Phaeochromocytoma"}],correct:"A",explanation_plabable:["Panic attacks usually have a fast onset and resolve quickly as well. They usually take about 10 minutes to peak and then followed by resolution over the next 20 minutes.","Some attacks may be situational such as in specific scenarios where attacks have occurred previously whilst other attacks may be spontaneous and described as 'out of the blue' which is seen in this stem."],explanation_detail:["<strong>Why the answer is correct:</strong> The sudden onset of fear, palpitations, dizziness, sweating, and the feeling of impending death with rapid resolution within 20–30 minutes is classic for a <strong>panic attack</strong>. These episodes are discrete, reach peak intensity in about 10 minutes, and resolve spontaneously. The lack of chronic illness, drug/alcohol history, or ongoing confusion further supports panic attack.","<strong>Core pathophysiology/mechanism:</strong> Panic attacks are thought to involve dysregulation of the amygdala and limbic system with excessive sympathetic discharge. This results in acute catecholamine-driven symptoms such as tachycardia, diaphoresis, hyperventilation, and chest tightness. Hyperventilation may also cause dizziness and paraesthesia due to respiratory alkalosis.","<strong>Differential diagnoses:</strong> <ul><li><strong>Phaeochromocytoma:</strong> causes paroxysms of sweating, palpitations, hypertension but typically recurrent and linked with high BP spikes, not a single 10-minute event.</li><li><strong>Alcohol withdrawal:</strong> occurs 6–24 h after cessation in dependent patients with tremor, agitation, hallucinations; history absent here.</li><li><strong>Drug overdose:</strong> tends to cause prolonged or progressive toxicity, not sudden-onset brief panic-like symptoms.</li><li><strong>Delirium:</strong> develops subacutely with fluctuating consciousness, attention deficits, and confusion; not an acute isolated event.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>B. Delirious state:</strong> Requires prolonged disturbance in consciousness/attention, not episodic symptoms.</li><li><strong>C. Alcohol withdrawal:</strong> No history of alcohol dependence or recent cessation.</li><li><strong>D. Drug overdose:</strong> Would produce ongoing toxic features, not self-limited resolution.</li><li><strong>E. Phaeochromocytoma:</strong> Recurrent hypertension/episodes over time, not a one-off presentation.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Acute:</strong> Reassure, calm environment, encourage slow breathing to correct hyperventilation.</li><li>Exclude organic mimics: ECG, glucose, vitals to rule out arrhythmia, hypoglycaemia, thyrotoxicosis.</li><li><strong>If recurrent:</strong> Refer to GP/psychiatry. First-line treatment: <strong>Cognitive Behavioural Therapy (CBT)</strong>.</li><li>SSRIs (e.g., sertraline) if persistent/panic disorder; benzodiazepines may be used short-term but not long-term due to dependence risk.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Assess ABCs, monitor vitals, check capillary glucose.</li><li><strong>1–3 min:</strong> Brief targeted exam to exclude organic causes (arrhythmia, asthma attack, seizure).</li><li><strong>3–10 min:</strong> Provide reassurance, guide patient through breathing techniques.</li><li><strong>10–30 min:</strong> Observe until full resolution; offer explanation to patient/family.</li><li><strong>Disposition:</strong> If single isolated panic attack and no red flags, discharge with GP follow-up and advice on stress reduction. If recurrent/severe, refer for mental health input.</li></ul>","<strong>Guideline cues:</strong> NICE guidance recommends <strong>CBT as first-line</strong> for panic disorder; SSRIs are pharmacological first-line if needed. Rule out organic causes before diagnosing panic attack in ED.","<strong>Common pitfalls:</strong> <ul><li>Misdiagnosing cardiac/respiratory causes as panic attack.</li><li>Over-investigation without clinical suspicion.</li><li>Discharging without explanation or follow-up plan, leading to patient anxiety and reattendance.</li></ul>","<strong>Exam takeaway:</strong> <em>Sudden self-limiting episode of palpitations, fear, dizziness, and sweating resolving in 20–30 minutes in a healthy young adult = Panic attack.</em>"]},{id:"EM-0307",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 33 year old woman has recurring tightness in her chest accompanied by palpitations and sweating. These episodes occur several times a week and are associated with increased respiratory rate and tingling and numbness around the mouth and fingers. What is the SINGLE most likely diagnosis?",options:[{key:"A",text:"Hypercalcaemia"},{key:"B",text:"Stable angina"},{key:"C",text:"Panic attack"},{key:"D",text:"Gastro-oesophageal reflux disease"},{key:"E",text:"Prinzmetal's angina"}],correct:"C",explanation_plabable:["In panic attacks, perioral paraesthesia, tingling and numbness in the hands can occur due to hyperventilation and CO₂ washout leading to low ionic calcium. The description of tightening with palpitations fits with panic attacks."],explanation_detail:["<strong>Why the answer is correct:</strong> The recurrent episodes of chest tightness, palpitations, sweating, and hyperventilation with perioral paraesthesia and distal tingling are classical for <strong>panic attacks</strong>. The neurological symptoms are due to respiratory alkalosis from hyperventilation, which lowers ionised calcium, causing tingling and numbness. The recurrent, self-limiting nature without exertional trigger rules out cardiac pathology.","<strong>Core pathophysiology/mechanism:</strong> Panic disorder is characterised by sudden surges of intense fear or discomfort, associated with sympathetic overdrive (palpitations, sweating, tremors) and hyperventilation. Hypocapnia from hyperventilation causes cerebral vasoconstriction (dizziness, confusion) and reduced ionised calcium (perioral and digital paraesthesia).","<strong>Differential diagnoses:</strong> <ul><li><strong>Hypercalcaemia:</strong> Causes constipation, polyuria, confusion, abdominal pain—not episodic panic-like features.</li><li><strong>Stable angina:</strong> Predictable exertional chest pain, relieved by rest/nitrates; not associated with tingling or panic-like autonomic symptoms.</li><li><strong>GORD:</strong> Retrosternal burning post-prandially, worse lying flat; not associated with paraesthesia.</li><li><strong>Prinzmetal's angina:</strong> Chest pain at rest due to coronary spasm; ECG shows transient ST elevation, no paraesthesia.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li>A. Hypercalcaemia causes chronic systemic symptoms, not recurrent acute episodes with panic-like features.</li><li>B. Stable angina is exertional and predictable, not sudden-onset with hyperventilation.</li><li>D. GORD causes heartburn/regurgitation, no neurological signs.</li><li>E. Prinzmetal's angina would present with ischaemic ECG changes, not tingling or numbness.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Acute episode:</strong> Calm reassurance, quiet environment, encourage slow rebreathing to reduce hypocapnia.</li><li>Exclude acute organic pathology (ECG, glucose, electrolytes, thyroid if indicated).</li><li><strong>First-line long-term:</strong> Cognitive Behavioural Therapy (CBT).</li><li><strong>Pharmacological:</strong> SSRIs (sertraline, citalopram) if persistent/severe; short-term benzodiazepines only if disabling and refractory.</li><li>Address lifestyle: sleep hygiene, caffeine/alcohol reduction, stress management.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Primary survey, vitals, ECG to rule out ACS.</li><li><strong>1–3 min:</strong> Observe hyperventilation; bedside reassurance, encourage controlled breathing.</li><li><strong>3–10 min:</strong> Explain likely panic attack to patient and family, normal investigations.</li><li><strong>10–30 min:</strong> Observe until symptoms resolve; safety-net for recurrence.</li><li><strong>Disposition:</strong> Discharge with GP follow-up for CBT referral, consider SSRI initiation if recurrent.</li></ul>","<strong>Guideline cues:</strong> NICE recommends <strong>CBT as first-line</strong> for panic disorder, SSRIs if pharmacological therapy needed. Always exclude cardiac, endocrine, and metabolic causes on first presentation.","<strong>Common pitfalls:</strong> <ul><li>Attributing chest pain to panic without excluding ACS on first presentation.</li><li>Over-investigating recurrent attacks once diagnosis is clear.</li><li>Using benzodiazepines long-term, leading to dependence.</li></ul>","<strong>Exam takeaway:</strong> <em>Recurrent chest tightness with hyperventilation-induced tingling and perioral paraesthesia = panic attacks, not cardiac or metabolic disease.</em>"]},{id:"EM-1009",topic:"Emergency Medicine",difficulty:"Hard",vignetteTitle:"Clinical Vignette",stem:"An 18 year old female was brought into the ED after ingestion of 28 paracetamol tablets after breaking up with her boyfriend. She came in confused and unwell. She was admitted in the medical ward and N-Acetylcysteine was given. 24 hours later, her laboratory results show a normal FBC, an arterial pH of <strong>7.1</strong>, Prothrombin time of <strong>17 seconds</strong> and creatinine of <strong>255µmol/L</strong>. She is still confused and lethargic. What is the SINGLE most appropriate management?<br/><br/>Normal Lab values:<br/>Creatinine: <strong>70–150 µmol/L</strong><br/>pH: <strong>7.35–7.45</strong><br/>Prothrombin time (PT): <strong>11–14 sec</strong>",options:[{key:"A",text:"Observe for another 24 hours"},{key:"B",text:"Admit to psychiatric ward"},{key:"C",text:"Intravenous fluids"},{key:"D",text:"Administer charcoal"},{key:"E",text:"Liver transplantation"}],correct:"E",explanation_plabable:["Her arterial pH is 7.1 which is an indication for liver transplantation.","King’s College Hospital criteria for liver transplantation (paracetamol liver failure):<br/>• arterial pH < 7.3, 24 hours after ingestion OR all of the following:<br/>– prothrombin time > 100 seconds<br/>– creatinine > 300 µmol/L<br/>– grade III or IV encephalopathy","Generally, if one takes more than 24 tablets (12 g), we admit. Paracetamol poisoning is always dealt in the medical ward (not psychiatry ward). Only once treated and stable can they move to a psychiatric ward for evaluation.","In reality, grafts are not readily available and much research is being conducted to try and maintain the patient in a stable condition until a suitable graft is available or spontaneous regeneration occurs and the patient recovers without transplantation."],explanation_detail:["<strong>Why the answer is correct:</strong> This patient ingested a potentially lethal dose of paracetamol and now, 24 hours later, fulfils <strong>King’s College criteria</strong> for urgent liver transplantation: arterial pH <7.3, creatinine >300 µmol/L (close at 255 µmol/L), prolonged PT, and clinical encephalopathy (confusion, lethargy). NAC has already been given but severe hepatic failure has developed. The only life-saving option is <strong>liver transplantation</strong>.","<strong>Core pathophysiology/mechanism:</strong> In overdose, paracetamol saturates glucuronidation/sulfation pathways, shunting metabolism to cytochrome P450 → toxic metabolite NAPQI. With glutathione depletion, NAPQI accumulates, causing centrilobular hepatic necrosis and multiorgan failure. Severe acidosis (pH <7.3) indicates overwhelming metabolic failure and is a poor prognostic marker.","<strong>Differential diagnoses:</strong> <ul><li><strong>Alcoholic hepatitis:</strong> Requires alcohol history, not acute overdose.</li><li><strong>Viral hepatitis:</strong> More gradual onset, no NAC use, not associated with acute acidosis.</li><li><strong>Sepsis with lactic acidosis:</strong> Possible but here clear paracetamol history with NAC given.</li><li><strong>Other overdoses:</strong> Aspirin can cause acidosis but no tinnitus or mixed alkalosis/acidosis picture here.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>A. Observe another 24 h:</strong> Unsafe, patient already meets poor prognostic criteria.</li><li><strong>B. Psychiatric admission:</strong> Appropriate <em>after</em> stabilisation; not while in fulminant hepatic failure.</li><li><strong>C. IV fluids:</strong> Supportive but not definitive; does not reverse fulminant liver failure.</li><li><strong>D. Activated charcoal:</strong> Ineffective at 24 h post-ingestion, benefit only within 1 h of ingestion.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Immediate:</strong> Supportive care in ICU, NAC already given, monitor vitals, electrolytes, glucose, clotting.</li><li><strong>Urgent referral to transplant centre</strong> as per King’s criteria.</li><li>Continue NAC until definitive decision made (supports antioxidant capacity even late).</li><li>Correct hypoglycaemia with IV 10–20% dextrose infusion; monitor hourly glucose.</li><li>Treat coagulopathy with vitamin K and FFP if bleeding.</li><li>Monitor for cerebral oedema; consider mannitol or hypertonic saline if signs of raised ICP.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> ABC stabilisation, oxygen, IV access, continuous monitoring, bedside glucose.</li><li><strong>1–3 min:</strong> Review labs (pH 7.1, raised creatinine, prolonged PT) confirming King’s criteria.</li><li><strong>3–10 min:</strong> Call national liver transplant centre, arrange urgent transfer.</li><li><strong>10–30 min:</strong> Continue NAC infusion, start IV dextrose, correct electrolytes.</li><li><strong>30–60 min:</strong> Admit to ICU for airway/ventilation support, monitor for cerebral oedema, liaise with transplant surgeons.</li><li><strong>Disposition:</strong> Transfer to transplant unit for definitive management.</li></ul>","<strong>Guideline cues:</strong> King’s College criteria (for paracetamol liver failure): arterial pH <7.3 at 24 h OR all three of: PT >100s, creatinine >300 µmol/L, and grade III/IV encephalopathy. This patient already fulfils these criteria.","<strong>Common pitfalls:</strong> <ul><li>Delaying transplant referral until multi-organ failure is advanced.</li><li>Stopping NAC once liver failure established — it should be continued until transplant.</li><li>Admitting to psychiatry before medical stabilisation.</li></ul>","<strong>Exam takeaway:</strong> <em>Paracetamol overdose with pH <7.3 after 24 h = King’s College criteria → urgent liver transplantation referral.</em>"]},{id:"SS-0046",topic:"Emergency Medicine",difficulty:"Medium",vignetteTitle:"Clinical Vignette",stem:"A 24 year old male presents to A&E with 40% partial thickness burns after having been in a house fire. His pulse rate is 115 bpm and respiratory rate is 29 breaths per minute. His systolic blood pressure is 80 mmHg. What is the SINGLE most appropriate management?",options:[{key:"A",text:"IV fluids calculated from the time of hospital arrival"},{key:"B",text:"IV fluids calculated from the time of burn"},{key:"C",text:"Oral rehydration"},{key:"D",text:"IV dextrose stat"},{key:"E",text:"IV morphine"}],correct:"B",explanation_plabable:["These are the steps that you need to know for the treatment of burns for the exam. Note the order:","1. Large-calibre intravenous lines must be established immediately in a peripheral vein. Any adult with burns affecting more than 15% of the total body surface area burned or a child with more than 10% of the total body surface area burned requires fluid replacement calculated from the time of the burn.","2. Ensure adequate analgesia: strong opiates should be used.","3. Prevent hypothermia."],explanation_detail:["<strong>Why the answer is correct:</strong> Adults with burns covering >15% TBSA require IV fluid resuscitation. In this case, the patient has 40% TBSA burns and is already hypotensive (SBP 80 mmHg). The Parkland formula is used to guide resuscitation: <strong>4 mL × body weight (kg) × %TBSA</strong> = total fluids in 24 h, with half given in the first 8 h <em>from the time of burn</em>, not hospital arrival. Delaying resuscitation risks worsening hypovolaemia and burn shock.","<strong>Core pathophysiology/mechanism:</strong> Severe burns cause capillary leak, plasma loss, and third spacing → intravascular volume depletion → hypovolaemic shock. Prompt fluid replacement prevents organ hypoperfusion, metabolic acidosis, and death. Early resuscitation also reduces risk of acute kidney injury and improves outcomes.","<strong>Differential diagnoses:</strong> <ul><li><em>Smoke inhalation injury:</em> common in house fires, but airway compromise is managed alongside fluid resuscitation, not instead of it.</li><li><em>Septic shock:</em> unlikely at presentation, occurs later.</li><li><em>Cardiogenic shock:</em> not consistent with history of major burns and tachycardia with hypotension.</li></ul>","<strong>Why the other options are wrong:</strong> <ul><li><strong>A. IV fluids from time of hospital arrival:</strong> Incorrect—calculation starts at burn time; otherwise, under-resuscitation occurs.</li><li><strong>C. Oral rehydration:</strong> Inadequate in major burns with hypovolaemic shock.</li><li><strong>D. IV dextrose stat:</strong> Does not replace fluid losses; risk of hyperglycaemia.</li><li><strong>E. IV morphine:</strong> Analgesia is important, but resuscitation takes priority in unstable patients.</li></ul>","<strong>Management/algorithm:</strong> <ul><li><strong>Immediate:</strong> A–E assessment, airway protection (look for smoke inhalation, carbon monoxide), high-flow oxygen, 2 large-bore IV cannulae.</li><li>Calculate fluid requirement using Parkland formula: <strong>4 mL × weight (kg) × %TBSA</strong>.</li><li>Give half within 8 h from burn onset; remaining half over next 16 h.</li><li>Fluid of choice: <strong>Ringer’s lactate</strong> (Hartmann’s). Aim urine output 0.5–1 mL/kg/h.</li><li>Provide IV opioids for analgesia once circulation secured.</li><li>Cover burns with cling film/sterile sheets; prevent hypothermia.</li><li>Tetanus prophylaxis as indicated.</li></ul>","<strong>Step-by-step realistic ED scenario:</strong> <ul><li><strong>0–1 min:</strong> Primary survey, high-flow O₂, remove burnt clothing, estimate %TBSA using Wallace rule of nines.</li><li><strong>1–3 min:</strong> Insert 2 large-bore IVs, take bloods (FBC, U&E, ABG, COHb).</li><li><strong>3–10 min:</strong> Begin fluid resuscitation per Parkland formula, calculating from burn time; start Hartmann’s.</li><li><strong>10–30 min:</strong> Insert urinary catheter; monitor urine output hourly. Provide IV morphine for analgesia.</li><li><strong>30–60 min:</strong> Ongoing reassessment: vitals, fluid balance, repeat ABG. Cover burns with sterile sheets; prevent hypothermia.</li><li><strong>Disposition:</strong> Admit to burns unit/ICU, arrange transfer if needed.</li></ul>","<strong>Guideline cues:</strong> Advanced Trauma Life Support (ATLS) and British Burn Association recommend immediate IV resuscitation for adults >15% TBSA burns, calculated from burn time, with Hartmann’s as preferred fluid.","<strong>Common pitfalls:</strong> <ul><li>Calculating fluids from hospital arrival rather than time of burn.</li><li>Failing to monitor urine output, leading to over/under-resuscitation.</li><li>Delaying airway assessment in smoke inhalation cases.</li></ul>","<strong>Exam takeaway:</strong> <em>Burns >15% TBSA in adults → IV fluids calculated from burn time using Parkland formula; airway and analgesia follow immediately after.</em>"]}];function Jy(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const eb=/^[0-9+\-*/().\s^%]*$/;function tb(o){if(!eb.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function ac({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function ib(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function ab(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(tb(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function nb({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(ac,{open:o,onClose:()=>{},title:"Start Acute & Emergency",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function sb(){const o=Vt(),[r,d]=p.useState(Oi.map((B,O)=>O)),[c,h]=p.useState(!1),[y,w]=p.useState(!1),[x,g]=p.useState(0),[f,k]=p.useState({}),[E,j]=p.useState({}),[A,L]=p.useState(!1),[X,Z]=p.useState(!1),[q,se]=p.useState(!1),te=p.useRef(null),J=Oi[r[x]],K=Oi.length,_=(x+1)/Math.max(K,1)*100,ae=()=>{const B=te.current;if(!B)return;const O=window.getSelection&&window.getSelection();if(!(!O||O.rangeCount===0))try{const N=O.getRangeAt(0);if(!B.contains(N.commonAncestorContainer)||String(N).trim().length===0)return;const V=document.createElement("mark");V.className="bg-yellow-200 rounded px-0.5",N.surroundContents(V),O.removeAllRanges()}catch{const N=B.getAttribute("contenteditable");B.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),N!==null?B.setAttribute("contenteditable",N):B.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!q)return;const B=()=>ae();return document.addEventListener("mouseup",B),()=>document.removeEventListener("mouseup",B)},[q]);const ee=()=>{const B=te.current;B&&B.querySelectorAll("mark").forEach(O=>{const N=O.parentNode;for(;O.firstChild;)N.insertBefore(O.firstChild,O);N.removeChild(O)})};p.useMemo(()=>{const B={};return r.forEach((O,N)=>{const V=Oi[O].id,M=f[V];M?B[N]=M===Oi[O].correct?"correct":"incorrect":B[N]="unanswered"}),B},[f,r]);const R=B=>{const O=B==="random"?Jy(Oi.map((N,V)=>V)):Oi.map((N,V)=>V);d(O),g(0),k({}),j({}),h(!0)};p.useEffect(()=>{const B=O=>{O.key==="ArrowRight"&&x<K-1&&g(N=>N+1),O.key==="ArrowLeft"&&x>0&&g(N=>N-1)};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[x,K]);const ie=B=>k(O=>({...O,[J.id]:B})),ue=()=>j(B=>({...B,[J.id]:!0})),T=()=>x<K-1&&g(B=>B+1),U=()=>x>0&&g(B=>B-1);return i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(x+1,K)," of ",K]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${_}%`}})})]}),i.jsx("button",{onClick:()=>o("/plabable"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>w(B=>!B),className:"fixed z-50 top-[120px] h-9 w-9 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",style:{left:y?316:12},title:y?"Hide questions":"Show questions",children:y?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",y?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((B,O)=>{const N=Oi[B],V=f[N.id],M=V?V===N.correct?"correct":"incorrect":"unanswered",v=O===x?"ring-2 ring-purple-300":M==="correct"?"ring-2 ring-emerald-300":M==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>g(O),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${v}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",O+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:N.stem}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:N.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:N.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${M==="correct"?"bg-emerald-500":M==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},N.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>L(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>Z(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${y?"md:pl-[320px]":"ml-12 md:ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:J.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:J.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",J.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:te,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:J.stem}}),J.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:J.image,alt:"ECG",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:J.options.map(B=>{const O=f[J.id],N=!!E[J.id],V=B.key===J.correct,M=N?V?"border-emerald-300 bg-emerald-50":O===B.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${M}`,children:[i.jsx("input",{type:"radio",name:`ans-${J.id}`,className:"h-4 w-4 text-purple-600",checked:O===B.key,onChange:()=>ie(B.key),disabled:N}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[B.key,"."]})," ",B.text]})]},B.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:E[J.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:T,disabled:x>=K-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:U,disabled:x===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:ue,disabled:!f[J.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>k(B=>({...B,[J.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),E[J.id]&&i.jsxs("div",{className:"mt-2 space-y-4",children:[i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Plabable Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:J.explanation_plabable?.map((B,O)=>i.jsx("p",{dangerouslySetInnerHTML:{__html:B}},O))})]}),i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Detailed Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:J.explanation_detail?.map((B,O)=>i.jsx("p",{dangerouslySetInnerHTML:{__html:B}},O))})]})]})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] flex flex-col gap-3",children:[i.jsx("button",{title:"Calculator",onClick:()=>Z(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>L(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>se(B=>!B),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${q?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:ee,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(ac,{open:A,onClose:()=>L(!1),title:"Common Lab Values",children:i.jsx(ib,{})}),i.jsx(ac,{open:X,onClose:()=>Z(!1),title:"Calculator",children:i.jsx(ab,{})}),i.jsx(nb,{open:!c,onPick:R})]})}const yh=[{slug:"acute-coronary-syndrome",title:"Acute Coronary Syndrome (ACS)",tags:"ischemia chest pain mi nstemi stemi"},{slug:"stable-angina",title:"Stable Angina",tags:"ischemia chest pain exertional"},{slug:"atrial-fibrillation",title:"Atrial Fibrillation",tags:"arrhythmia af anticoag"},{slug:"atrial-flutter",title:"Atrial Flutter",tags:"arrhythmia"},{slug:"svt",title:"Supraventricular Tachycardia (SVT)",tags:"arrhythmia avnrt avrt"},{slug:"ventricular-tachycardia",title:"Ventricular Tachycardia",tags:"arrhythmia vt wide-complex"},{slug:"bradyarrhythmias-av-blocks",title:"Bradyarrhythmias & AV Blocks",tags:"arrhythmia heart block"},{slug:"syncope",title:"Syncope",tags:"arrhythmia reflex orthostatic"},{slug:"heart-failure",title:"Heart Failure",tags:"hfref hfpef congestion"},{slug:"dilated-cardiomyopathy",title:"Dilated Cardiomyopathy",tags:"cardiomyopathy"},{slug:"hypertrophic-cardiomyopathy",title:"Hypertrophic Cardiomyopathy (HCM)",tags:"cardiomyopathy"},{slug:"restrictive-cardiomyopathy",title:"Restrictive Cardiomyopathy",tags:"cardiomyopathy amyloid"},{slug:"aortic-stenosis",title:"Aortic Stenosis",tags:"valve murmur"},{slug:"aortic-regurgitation",title:"Aortic Regurgitation",tags:"valve murmur"},{slug:"mitral-regurgitation",title:"Mitral Regurgitation",tags:"valve murmur"},{slug:"mitral-stenosis",title:"Mitral Stenosis",tags:"valve rheumatic"},{slug:"tricuspid-and-pulmonic-valve-disease",title:"Tricuspid & Pulmonic Valve Disease",tags:"valve"},{slug:"infective-endocarditis",title:"Infective Endocarditis",tags:"valve infection duke"},{slug:"pericarditis",title:"Acute Pericarditis",tags:"pericardial st-elevation diffuse rub"},{slug:"pericardial-effusion-tamponade",title:"Pericardial Effusion & Tamponade",tags:"pericardial beck triad"},{slug:"myocarditis",title:"Myocarditis",tags:"troponin viral"},{slug:"hypertension",title:"Hypertension",tags:"bp"},{slug:"hyperlipidemia",title:"Hyperlipidemia",tags:"lipids"},{slug:"aortic-dissection",title:"Aortic Dissection",tags:"vascular tearing pain mediastinum"},{slug:"peripheral-arterial-disease",title:"Peripheral Arterial Disease (PAD)",tags:"claudication"},{slug:"dvt-pe-overview",title:"Venous Thromboembolism (DVT/PE) – Overview",tags:"vte"}];function rb({d:o}){return i.jsxs(Ee,{to:`/diseases/cardiovascular/${o.slug}`,className:"block rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:o.title}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:o.slug})]})}function ob(){const[o,r]=p.useState(""),d=p.useMemo(()=>{const c=o.trim().toLowerCase();return c?yh.filter(h=>h.title.toLowerCase().includes(c)||h.slug.includes(c)||h.tags&&h.tags.includes(c)):yh},[o]);return i.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:i.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[i.jsxs("header",{className:"mb-6 flex flex-col md:flex-row md:items-end md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold",children:"Cardiovascular"}),i.jsx("p",{className:"mt-2 text-slate-600",children:"Pick a topic to dive into a focused, exam-ready page."})]}),i.jsx("div",{className:"w-full md:w-80",children:i.jsx("input",{value:o,onChange:c=>r(c.target.value),placeholder:"Search cardiology topics...",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60"})})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(c=>i.jsx(rb,{d:c},c.slug))})]})})}function _e({title:o,intro:r,sections:d=[]}){return i.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:i.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[i.jsxs("header",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold",children:o}),r&&i.jsx("p",{className:"mt-2 text-slate-600",children:r})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsx("aside",{className:"md:col-span-1",children:i.jsxs("nav",{className:"rounded-2xl border border-slate-200 bg-white p-4 sticky top-24",children:[i.jsx("p",{className:"font-semibold mb-2",children:"On this page"}),i.jsx("ul",{className:"space-y-2 text-sm",children:d.map(c=>i.jsx("li",{children:i.jsx("a",{className:"hover:underline",href:`#${c.id}`,children:c.title})},c.id))})]})}),i.jsx("main",{className:"md:col-span-2 space-y-8",children:d.map(c=>i.jsxs("section",{id:c.id,className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[i.jsx("h2",{className:"text-xl font-bold",children:c.title}),Array.isArray(c.content)?i.jsx("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-slate-700",children:c.content.map((h,y)=>i.jsx("li",{children:h},y))}):i.jsx("p",{className:"mt-2 text-slate-700",children:c.content})]},c.id))})]})]})})}function lb(){return i.jsx(_e,{title:"Respiratory",intro:"Asthma, COPD, pneumonia, ILD, PE.",sections:[{id:"presentations",title:"Typical Presentations",content:["Wheeze, cough, SOB","Pleuritic chest pain","Hypoxemia","Hemoptysis"]},{id:"red-flags",title:"Red Flags",content:["Silent chest","Severe hypoxia","Massive hemoptysis","Tension pneumothorax"]},{id:"first-tests",title:"First-Line Tests",content:["CXR","Pulse ox/ABG","Peak flow/spirometry","D-dimer/CTPA if PE"]},{id:"management",title:"Management Skeleton",content:["O2/bronchodilators/steroids","Abx per severity","Anticoagulation for PE"]}]})}function cb(){return i.jsx(_e,{title:"Gastrointestinal & Hepatology",intro:"Ulcers, IBD, pancreatitis, biliary disease, cirrhosis.",sections:[{id:"presentations",title:"Typical Presentations",content:["RUQ pain ± jaundice","Epigastric pain to back","Bloody diarrhea","Ascites"]},{id:"red-flags",title:"Red Flags",content:["Peritonitis","GI bleeding/shock","Ascending cholangitis","Acute liver failure"]},{id:"first-tests",title:"First-Line Tests",content:["FBC/CRP","LFTs/lipase","US/CT abdomen","Stool studies"]},{id:"management",title:"Management Skeleton",content:["UGIB resus + PPI + scope","Pancreatitis fluids/analgesia","IBD flare steroids/biologics"]}]})}function db(){return i.jsx(_e,{title:"Renal/Genitourinary",intro:"AKI vs CKD, nephritic vs nephrotic, stones, UTIs.",sections:[{id:"presentations",title:"Typical Presentations",content:["Oliguria/edema","Flank pain","Dysuria/frequency","Foamy urine"]},{id:"red-flags",title:"Red Flags",content:["Anuria","Septic pyelonephritis","Obstruction with AKI","Hyperkalemia ECG changes"]},{id:"first-tests",title:"First-Line Tests",content:["U&E/eGFR","Urinalysis + ACR","Renal US","CT KUB for stones"]},{id:"management",title:"Management Skeleton",content:["AKI pre/renal/post approach","Relieve obstruction","UTI abx per local guide"]}]})}function ub(){return i.jsx(_e,{title:"Endocrine",intro:"Diabetes, thyroid, adrenal, pituitary.",sections:[{id:"presentations",title:"Typical Presentations",content:["Weight change","Heat/cold intolerance","Polyuria/polydipsia","Hypoglycemia"]},{id:"red-flags",title:"Red Flags",content:["DKA/HHS","Adrenal crisis","Thyroid storm","Myxedema coma"]},{id:"first-tests",title:"First-Line Tests",content:["HbA1c/ketones","TSH/FT4","8am cortisol ± ACTH","Electrolytes"]},{id:"management",title:"Management Skeleton",content:["DKA protocol","Hypo/Hyperthyroid algorithms","Stress-dose steroids"]}]})}function mb(){return i.jsx(_e,{title:"Neurology",intro:"Stroke, seizures, demyelination, peripheral neuropathies.",sections:[{id:"presentations",title:"Typical Presentations",content:["Focal deficits","Headache","Seizures","Weakness/sensory loss"]},{id:"red-flags",title:"Red Flags",content:["Thunderclap headache","Meningism + fever","Status epilepticus","Cord compression"]},{id:"first-tests",title:"First-Line Tests",content:["CT/MRI brain","Glucose/electrolytes","ECG (AF?)","LP if safe/indicated"]},{id:"management",title:"Management Skeleton",content:["Stroke thrombolysis/thrombectomy criteria","Seizure abort + maintenance","MS relapse steroids"]}]})}function hb(){return i.jsx(_e,{title:"MSK/Rheumatology",intro:"OA/RA, SLE, vasculitides, gout.",sections:[{id:"presentations",title:"Typical Presentations",content:["Inflammatory vs mechanical pain","Morning stiffness","Rash/ulcers","Back pain red flags"]},{id:"red-flags",title:"Red Flags",content:["Septic joint","Cauda equina","Limb ischemia","Rapidly progressive weakness"]},{id:"first-tests",title:"First-Line Tests",content:["CRP/ESR","RF/anti-CCP/ANA","Joint aspiration","X-ray targeted joints"]},{id:"management",title:"Management Skeleton",content:["RA DMARD ladder","Gout flare + urate lowering","SLE steroids + immunosuppression"]}]})}function pb(){return i.jsx(_e,{title:"Hematology",intro:"Anemias, hemoglobinopathies, coagulopathies.",sections:[{id:"presentations",title:"Typical Presentations",content:["Fatigue/pallor","Bleeding/bruising","Thrombosis","Infections in neutropenia"]},{id:"red-flags",title:"Red Flags",content:["DIC","Massive bleed","TTP features","Febrile neutropenia"]},{id:"first-tests",title:"First-Line Tests",content:["FBC/film","Iron/B12/folate","PT/APTT/fibrinogen","LDH/haptoglobin"]},{id:"management",title:"Management Skeleton",content:["Transfusion thresholds","Iron therapy","Anticoagulation/ reversal","Neutropenic sepsis protocol"]}]})}function gb(){return i.jsx(_e,{title:"Oncology",intro:"Solid tumours, staging principles, systemic therapy basics.",sections:[{id:"presentations",title:"Typical Presentations",content:["Unintentional weight loss","Painless mass","Obstructive symptoms","Paraneoplastic syndromes"]},{id:"red-flags",title:"Red Flags",content:["Spinal cord compression","SVC syndrome","Tumour lysis","Neutropenic sepsis"]},{id:"first-tests",title:"First-Line Tests",content:["CT staging","Biopsy/histology","Tumour markers (selected)","Performance status"]},{id:"management",title:"Management Skeleton",content:["Surgery/radiation/systemic triad","Palliative vs curative intent","Toxicity monitoring"]}]})}function fb(){return i.jsx(_e,{title:"Infectious Diseases",intro:"Sepsis, TB, HIV, tropical, antimicrobial strategy.",sections:[{id:"presentations",title:"Typical Presentations",content:["Fever source unknown","Respiratory/urinary infections","Rashes","Travel history"]},{id:"red-flags",title:"Red Flags",content:["Septic shock","Meningitis","Necrotizing fasciitis","Severe malaria"]},{id:"first-tests",title:"First-Line Tests",content:["FBC/CRP","Cultures before abx","CXR/urinalysis","Rapid tests (malaria, flu)"]},{id:"management",title:"Management Skeleton",content:["Sepsis 1-hour bundle","Empiric → targeted abx","Infection control & isolation"]}]})}function yb(){return i.jsx(_e,{title:"Allergy & Immunology",intro:"Anaphylaxis, urticaria, immunodeficiency, vaccines.",sections:[{id:"presentations",title:"Typical Presentations",content:["Urticaria/angioedema","Recurrent infections","Atopy/asthma","Contact reactions"]},{id:"red-flags",title:"Red Flags",content:["Airway compromise","Hypotension","Severe drug reaction (SJS/TEN)"]},{id:"first-tests",title:"First-Line Tests",content:["Tryptase (anaphylaxis)","Ig levels","Skin-prick/specific IgE","CBC diff"]},{id:"management",title:"Management Skeleton",content:["IM adrenaline","Adjuncts (antihistamines, steroids)","Epi auto-injector education"]}]})}function bb(){return i.jsx(_e,{title:"Psychiatry",intro:"Mood, anxiety, psychosis, substance use.",sections:[{id:"presentations",title:"Typical Presentations",content:["Low mood/anhedonia","Panic","Hallucinations/delusions","Withdrawal states"]},{id:"red-flags",title:"Red Flags",content:["Suicidality","Homicidality","Catatonia","Delirium"]},{id:"first-tests",title:"First-Line Tests",content:["Risk assessment","TFTs/B12 (reversible causes)","Urine tox screen","Collateral history"]},{id:"management",title:"Management Skeleton",content:["Safety plan","CBT/medication","Inpatient criteria","Substance use pathways"]}]})}function xb(){return i.jsx(_e,{title:"Dermatology",intro:"Eczema, psoriasis, bullous disease, skin cancers.",sections:[{id:"presentations",title:"Typical Presentations",content:["Pruritic plaques","Silvery scales","Blisters","Changing mole"]},{id:"red-flags",title:"Red Flags",content:["SJS/TEN","Erythroderma","Nec fasc signs","Rapidly growing pigmented lesion"]},{id:"first-tests",title:"First-Line Tests",content:["Derm exam ABCDE","KOH scrape (fungal)","Punch/excisional biopsy"]},{id:"management",title:"Management Skeleton",content:["Topicals vs systemic","Phototherapy","Surgical margins for NMSC"]}]})}function vb(){return i.jsx(_e,{title:"Reproductive (Ob/Gyn)",intro:"Obstetrics, contraception, infertility, STIs.",sections:[{id:"presentations",title:"Typical Presentations",content:["PV bleeding","Pelvic pain","Amenorrhea","Pregnancy complaints"]},{id:"red-flags",title:"Red Flags",content:["Ectopic pregnancy","PPH","Pre-eclampsia/eclampsia","Sepsis"]},{id:"first-tests",title:"First-Line Tests",content:["β-hCG","Pelvic US","STI NAAT","Hb/group & save if bleeding"]},{id:"management",title:"Management Skeleton",content:["Ectopic algorithms","Hypertensive disorders of pregnancy","Contraception counselling"]}]})}function wb(){return i.jsx(_e,{title:"Pediatrics",intro:"Congenital conditions, infections, development.",sections:[{id:"presentations",title:"Typical Presentations",content:["Fever in infant","Rash illnesses","Failure to thrive","Wheeze/bronchiolitis"]},{id:"red-flags",title:"Red Flags",content:["Neonatal sepsis","Dehydration","Resp distress","Non-accidental injury"]},{id:"first-tests",title:"First-Line Tests",content:["Age-specific obs","Urine/cultures","CXR if indicated","Developmental screen"]},{id:"management",title:"Management Skeleton",content:["Sepsis bundles","Rehydration protocols","Asthma pediatric pathway"]}]})}function kb(){return i.jsx(_e,{title:"Ophthalmology",intro:"Red eye, glaucoma, cataract, retinal disease.",sections:[{id:"presentations",title:"Typical Presentations",content:["Painful red eye","Sudden painless vision loss","Flashes/floaters","Eye trauma"]},{id:"red-flags",title:"Red Flags",content:["Acute angle-closure glaucoma","Central retinal artery occlusion","Open globe injury","Endophthalmitis"]},{id:"first-tests",title:"First-Line Tests",content:["Visual acuity","Fluorescein stain","TONO (if trained)","Fundoscopy"]},{id:"management",title:"Management Skeleton",content:["Urgent ophthalmology referral thresholds","Topical vs systemic therapy basics"]}]})}function Cb(){return i.jsx(_e,{title:"ENT (Otolaryngology)",intro:"Otitis, sinusitis, epistaxis, head & neck masses.",sections:[{id:"presentations",title:"Typical Presentations",content:["Otalgia/otorrhea","Sore throat","Nasal obstruction/bleed","Neck lump"]},{id:"red-flags",title:"Red Flags",content:["Airway compromise","Peritonsillar abscess","Ludwig angina","Severe epistaxis"]},{id:"first-tests",title:"First-Line Tests",content:["Otoscopy","Rapid strep (selected)","Flexible nasendoscopy (ENT)","US neck"]},{id:"management",title:"Management Skeleton",content:["Epistaxis packing","Antibiotic criteria","Steroids for severe edema"]}]})}const bh=[{slug:"dementia-alzheimers",title:"Alzheimer’s disease (most common dementia)"},{slug:"vascular-dementia",title:"Vascular dementia"},{slug:"dementia-lewy-bodies",title:"Dementia with Lewy bodies"},{slug:"frontotemporal-dementia",title:"Frontotemporal dementia (Pick’s disease, etc.)"},{slug:"mci",title:"Mild cognitive impairment (MCI)"},{slug:"delirium",title:"Delirium"},{slug:"parkinsons-disease",title:"Parkinson’s disease"},{slug:"stroke-tia",title:"Stroke / Transient ischemic attack (TIA)"},{slug:"hypertension",title:"Hypertension"},{slug:"cad",title:"Coronary artery disease (CAD)"},{slug:"heart-failure-hfpef",title:"Heart failure (esp. diastolic HF / HFpEF)"},{slug:"atrial-fibrillation",title:"Atrial fibrillation"},{slug:"other-arrhythmias",title:"Other arrhythmias (e.g., heart block, tachyarrhythmias)"},{slug:"peripheral-vascular-disease",title:"Peripheral vascular disease"},{slug:"copd",title:"Chronic obstructive pulmonary disease (COPD)"},{slug:"ild",title:"Interstitial lung disease (ILD)"},{slug:"pneumonia",title:"Pneumonia (community- and hospital-acquired)"},{slug:"aspiration-pneumonia",title:"Aspiration pneumonia"},{slug:"t2dm",title:"Type 2 diabetes mellitus"},{slug:"hypothyroidism",title:"Hypothyroidism"},{slug:"hyperthyroidism",title:"Hyperthyroidism"},{slug:"osteoporosis",title:"Osteoporosis"},{slug:"vitamin-d-deficiency",title:"Vitamin D deficiency"},{slug:"dyslipidemia",title:"Dyslipidemia"},{slug:"ckd",title:"Chronic kidney disease (CKD)"},{slug:"urinary-incontinence",title:"Urinary incontinence (urge, stress, overflow, functional)"},{slug:"bph",title:"Benign prostatic hyperplasia (BPH)"},{slug:"prostate-cancer",title:"Prostate cancer"},{slug:"recurrent-utis",title:"Recurrent urinary tract infections (UTIs)"},{slug:"osteoarthritis",title:"Osteoarthritis"},{slug:"rheumatoid-arthritis",title:"Rheumatoid arthritis"},{slug:"gout",title:"Gout"},{slug:"falls",title:"Falls"},{slug:"frailty",title:"Frailty syndromes"},{slug:"hip-fractures",title:"Hip fractures"},{slug:"gerd",title:"Gastroesophageal reflux disease (GERD)"},{slug:"chronic-constipation",title:"Chronic constipation"},{slug:"diverticular-disease",title:"Diverticular disease"},{slug:"colorectal-cancer",title:"Colorectal cancer"},{slug:"malnutrition",title:"Malnutrition"},{slug:"depression",title:"Depression"},{slug:"anxiety-disorders",title:"Anxiety disorders"},{slug:"late-life-psychosis",title:"Late-life psychosis"},{slug:"anemia-of-chronic-disease",title:"Anemia of chronic disease"},{slug:"iron-deficiency-anemia",title:"Iron deficiency anemia"},{slug:"multiple-myeloma",title:"Multiple myeloma"},{slug:"lymphoma",title:"Lymphoma"},{slug:"lung-cancer",title:"Lung cancer"},{slug:"breast-cancer",title:"Breast cancer"},{slug:"influenza",title:"Influenza"},{slug:"herpes-zoster",title:"Herpes zoster (shingles)"},{slug:"sepsis",title:"Sepsis (often atypical presentation)"},{slug:"tuberculosis",title:"Tuberculosis (reactivation)"},{slug:"polypharmacy",title:"Polypharmacy (drug interactions, side effects)"},{slug:"pressure-ulcers",title:"Pressure ulcers"},{slug:"immobility-syndromes",title:"Immobility syndromes"}];function Ab({t:o}){return i.jsxs(Ee,{to:`/diseases/geriatrics/${o.slug}`,className:"block rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:o.title}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:o.slug})]})}function Sb(){const[o,r]=p.useState(""),d=Vt(),c=p.useMemo(()=>{const h=o.trim().toLowerCase();return h?bh.filter(y=>y.title.toLowerCase().includes(h)||y.slug.includes(h)):bh},[o]);return i.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:i.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[i.jsx("div",{className:"flex items-center gap-3 mb-4",children:i.jsx("button",{onClick:()=>d(-1),className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 bg-white px-3 py-1.5 text-sm shadow-sm hover:bg-slate-50",children:"← Back"})}),i.jsxs("header",{className:"mb-6 flex flex-col md:flex-row md:items-end md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold",children:"Geriatrics"}),i.jsx("p",{className:"mt-2 text-slate-600",children:"Pick a topic to open its dedicated page."})]}),i.jsx("div",{className:"w-full md:w-80",children:i.jsx("input",{value:o,onChange:h=>r(h.target.value),placeholder:"Search geriatrics topics...",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60"})})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(h=>i.jsx(Ab,{t:h},h.slug))})]})})}function Nb(){return i.jsx(_e,{title:"Emergency Medicine",intro:"Resuscitation, trauma, ACS, sepsis, toxidromes.",sections:[{id:"presentations",title:"Typical Presentations",content:["ABC instability","Major trauma","Poisoning","Acute chest pain"]},{id:"red-flags",title:"Red Flags",content:["Airway threat","Uncontrolled hemorrhage","Septic shock","Compartment syndrome"]},{id:"first-tests",title:"First-Line Tests",content:["VBG/ABG","ECG","Fast US (eFAST)","Point-of-care tests"]},{id:"management",title:"Management Skeleton",content:["ATLS/ACLS pathways","Massive transfusion protocol","Time-critical transfers"]}]})}function jb(){return i.jsx(_e,{title:"Toxicology",intro:"Overdoses, antidotes, toxidromes.",sections:[{id:"presentations",title:"Typical Presentations",content:["Altered mental status","Brady/tachy syndromes","Miosis/mydriasis","Metabolic acidosis"]},{id:"red-flags",title:"Red Flags",content:["Airway compromise","Refractory seizures","Cardiotoxicity","Serotonin syndrome/NMS"]},{id:"first-tests",title:"First-Line Tests",content:["ECG (QRS/QT)","Paracetamol/salicylate levels","VBG/ABG + lactate","Osmolar gap"]},{id:"management",title:"Management Skeleton",content:["Activated charcoal criteria","Specific antidotes","Enhanced elimination"]}]})}function Eb(){return i.jsx(_e,{title:"Palliative Care",intro:"Symptom control, end-of-life discussions, ethics.",sections:[{id:"presentations",title:"Common Themes",content:["Pain/dyspnea","Nausea","Anxiety/depression","Delirium"]},{id:"red-flags",title:"Urgencies",content:["Cord compression","SVC syndrome","Catastrophic bleed","Severe agitation"]},{id:"first-tests",title:"Assessment Focus",content:["Goals of care","Performance status","Medication review","Non-pharm supports"]},{id:"management",title:"Management Skeleton",content:["WHO analgesic ladder","Antiemetic ladder","Dyspnea strategies","Advance care planning"]}]})}function Db({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const tt=[{id:"AD-CORE-20001",topic:"Geriatrics • Alzheimer’s disease — Core Clinical Pattern",difficulty:"Medium",vignetteTitle:"Which diagnosis best fits the hippocampal memory syndrome?",stem:"A 74-year-old retired accountant has 2.5 years of gradually progressive memory decline. Family notes repeated questions, misplacing items, and getting lost on familiar routes. Language and behavior are relatively preserved early; no hallucinations or parkinsonism. Exam: oriented to person, not to date; recalls 0/3 after 5 minutes with poor cueing benefit. MoCA 20/30 (episodic memory and visuospatial deficits). MRI shows bilateral hippocampal and mesial temporal atrophy with relative sparing of frontal and occipital lobes. What is the most likely diagnosis?",options:[{key:"A",text:"Alzheimer’s disease (amnestic presentation)"},{key:"B",text:"Vascular dementia (multi-infarct)"},{key:"C",text:"Dementia with Lewy bodies (DLB)"},{key:"D",text:"Frontotemporal dementia—behavioral variant (bvFTD)"},{key:"E",text:"Normal-pressure hydrocephalus (NPH)"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Insidious, progressive episodic memory impairment** with poor cueing benefit is classic for **amnestic Alzheimer’s disease (AD)**.","- MRI pattern: [blue]**bilateral hippocampal/mesial temporal atrophy**[/blue] (medial temporal lobe) with relative sparing of frontal/occipital early → highly compatible with AD.","- Early **navigation problems**, **misplacing items**, and **repeating questions** reflect hippocampal consolidation deficits.","- Lack of early prominent **behavioral disinhibition**, **parkinsonism**, or **visual hallucinations** argues against FTD/DLB.","- [yellow]Pattern lock:[/yellow] gradual memory-first decline + hippocampal atrophy + poor cueing = **AD**. 🧠🗺️","**2️⃣ Why the other options are wrong**","- **B. Vascular dementia:** Often **stepwise** decline with focal deficits; MRI shows **strategic infarcts** or confluent white-matter disease—not isolated hippocampal atrophy.","- **C. DLB:** Core features are **visual hallucinations**, **cognitive fluctuations**, and **parkinsonism**; plus REM sleep behavior disorder—absent here.","- **D. bvFTD:** **Early personality/behavior change**, disinhibition/apathy, and frontal/insular atrophy, with **relative memory sparing** initially—mismatch.","- **E. NPH:** Triad = **gait disturbance** (magnetic), **urinary incontinence**, **subcortical cognitive slowing** + MRI with **ventriculomegaly**—not present.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) emphasizing **delayed recall** and cueing → poor recall with limited cueing benefit. **Confirms?** ❌ Suggests AD pattern.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]hippocampal/mesial temporal atrophy[/blue]; exclude mass/subdural/strategic stroke. **Confirms?** ➕ Supports AD; rules out mimics.","- **Best Diagnostic Step (in vivo biomarker confirmation):** **CSF AD biomarkers** (↓Aβ42/Aβ42-40 ratio, ↑p-tau, ↑t-tau) **or** **amyloid PET** ± **tau PET**. **Confirms?** ✅ Biomarker-consistent AD.","- **Adjuncts:** Thyroid/B12, CMP, CBC to exclude reversible contributors; depression screen; sleep apnea screening if indicated.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, safety planning[/green] (driving/meds/finances), caregiver education, advance care planning, exercise + Mediterranean-style diet.","- **First Line:** [green]Symptomatic cognitive therapy[/green] — **cholinesterase inhibitor** (donepezil/rivastigmine/galantamine) for mild–moderate AD; **memantine** for moderate–severe or add-on.","- **Gold Standard:** No cure; [green]multidisciplinary care[/green] (OT/PT, cognitive rehab, caregiver support). Consider **disease-modifying anti-amyloid mAbs** only if **biomarker-positive**, appropriate stage, and patient can meet monitoring/ARIA risk protocols. [red]Avoid anticholinergics and sedatives when possible[/red].","**5️⃣ Full Pathophysiology Explained**","- **Amyloid-β (Aβ)** dysmetabolism → extracellular **Aβ plaques**; **tau** hyperphosphorylation → intracellular **neurofibrillary tangles**.","- Pathology spreads in a **Braak-like pattern** from transentorhinal/hippocampal regions → association cortices, explaining memory-first decline.","- Synaptic dysfunction and neuroinflammation drive progressive network failure → atrophy on MRI, hypometabolism on FDG-PET.","- [blue]Hippocampal circuit disruption[/blue] impairs encoding/consolidation → poor delayed recall and weak cueing response.","**6️⃣ Symptoms — pattern recognition**","- **Forgetting recent events / repeating questions** 📝 → hippocampal consolidation failure.","- **Poor response to cues** 🧩 → storage (not retrieval) problem, consistent with AD.","- **Topographical disorientation** 🗺️ → parahippocampal/retrosplenial network involvement.","- **Language/behavior relatively preserved early** 💬 → contrasts with PPA/FTD.","- [purple]Think AD when you see:[/purple] ==gradual amnestic decline + hippocampal atrophy + poor cueing==."]},{id:"AD-SX-20002",topic:"Geriatrics • Alzheimer’s disease — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the amnestic Alzheimer pattern",stem:"A 75-year-old retired teacher has 3 years of insidious memory decline. Family reports repeated questions, misplacing items, getting lost on familiar routes, and difficulty recalling recent conversations despite intact attention. Language is mostly fluent, with occasional word-finding pauses but intact grammar. No early hallucinations, REM sleep behavior disorder, parkinsonism, or major personality change. Exam: poor delayed recall with minimal cueing benefit; constructional copying mildly impaired. MRI shows bilateral hippocampal/mesial temporal atrophy. Which clinical constellation best identifies the underlying syndrome?",options:[{key:"A",text:"Early behavioral disinhibition, apathy, hyperorality; relatively spared episodic memory"},{key:"B",text:"Recurrent visual hallucinations, fluctuating attention, spontaneous parkinsonism, REM sleep behavior disorder"},{key:"C",text:"Gait disturbance with urinary urgency/incontinence and subcortical cognitive slowing; ventriculomegaly"},{key:"D",text:"Gradual, progressive episodic memory loss with poor cueing, navigation problems, and hippocampal atrophy; language/behavior relatively preserved early"},{key:"E",text:"Nonfluent, effortful agrammatic speech with apraxia of speech; left inferior frontal atrophy"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Alzheimer’s disease (amnestic presentation)** is defined by **progressive episodic memory impairment**—failure of encoding/storage—leading to repeated questions and misplacing items.","- **Poor cueing benefit** distinguishes storage failure (AD) from retrieval failures seen in depression or subcortical states.","- Early **topographical disorientation** (getting lost) reflects medial temporal–parahippocampal network involvement.","- **Language and behavior relatively preserved early** fits AD more than FTD or PPA at onset.","- Imaging tie-in: [blue]**hippocampal/mesial temporal atrophy**[/blue] supports the clinical pattern. [yellow]Pattern lock = amnestic AD[/yellow] 🧠📉","**2️⃣ Why the other options are wrong**","- **A (bvFTD):** Early **behavioral disinhibition/apathy** and eating changes with relative memory sparing → frontal/insular syndrome, not memory-first AD.","- **B (DLB):** **Visual hallucinations**, **fluctuations**, **parkinsonism**, and **REM sleep behavior disorder** define DLB; absent here.","- **C (NPH):** Triad of **gait disturbance**, **urinary incontinence**, **cognitive slowing** with **ventriculomegaly**—not the hippocampal amnestic picture.","- **E (nfvPPA):** **Nonfluent agrammatic speech** and apraxia localize to left IFG/insular networks; this case has fluent language and memory-led decline.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) emphasizing **delayed recall** and cueing. **Confirms?** ❌ Suggests AD when recall is poor with minimal cueing benefit.","- **Next Diagnostic step:** 🧠 MRI brain → [blue]**hippocampal/mesial temporal atrophy**[/blue]; exclude mass/subdural/strategic stroke. **Confirms?** ➕ Supports AD pattern.","- **Best Diagnostic Step (biomarker confirmation):** **CSF AD profile** (↓Aβ42 or ↓Aβ42/40, ↑p-tau, ↑t-tau) **or** **amyloid PET** ± **tau PET**. **Confirms?** ✅ Biomarker-consistent AD.","- **Adjuncts:** TSH/B12/CBC/CMP, depression screen, sleep apnea screening; consider FDG-PET (posterior cingulate/precuneus hypometabolism) if needed.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, safety planning[/green] (driving, meds, finances), caregiver education, exercise and Mediterranean-style diet, vascular risk control.","- **First Line:** [green]Cognitive symptom therapy[/green] — **cholinesterase inhibitor** for mild–moderate AD; **memantine** for moderate–severe or add-on.","- **Gold Standard:** No cure; [green]multidisciplinary care[/green] (OT/PT, cognitive rehab, caregiver support). Consider **anti-amyloid monoclonals** only if **biomarker-positive**, appropriate stage, and monitoring feasible; [red]avoid anticholinergics and minimize sedatives[/red].","**5️⃣ Full Pathophysiology Explained**","- **Amyloid-β** accumulation (plaques) and **tau** hyperphosphorylation (neurofibrillary tangles) drive synaptic dysfunction and neurodegeneration.","- Spread follows a **Braak-like trajectory** from transentorhinal/hippocampal regions to association cortices—explains memory-first symptoms.","- [blue]Hippocampal circuit failure[/blue] → impaired encoding/consolidation → **poor delayed recall** with minimal cueing improvement.","- Network loss yields **mesial temporal atrophy** on MRI and posterior cingulate/precuneus hypometabolism on FDG-PET.","**6️⃣ Symptoms — Clinical Presentation map**","- **Forgetting recent events / repeating questions** 📝 → storage (encoding) failure in hippocampus.","- **Poor cueing benefit** 🧩 → true amnestic deficit, not just retrieval.","- **Topographical disorientation** 🗺️ → parahippocampal/retrosplenial involvement.","- **Word-finding pauses** 💬 (mild, early) with intact grammar → secondary to memory/semantic access strain, not primary aphasia.","- **Relatively preserved behavior early** 🙂 → contrasts with bvFTD; **no early hallucinations/parkinsonism** → contrasts with DLB.","- [purple]Think AD when you see:[/purple] ==gradual amnestic decline + poor cueing + hippocampal atrophy==."]},{id:"AD-SIGNS-20003",topic:"Geriatrics • Alzheimer’s disease — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to amnestic Alzheimer’s disease?",stem:"A 76-year-old former math teacher has 3 years of gradually progressive forgetfulness. On exam, she is oriented to person but misses the date and clinic location. Immediate registration is intact (3/3), but delayed recall at 5 minutes is 0/3 and improves only minimally with category cues. Category (animal) fluency is 8 in 60 seconds while letter (F) fluency is 12. She has mild constructional difficulty on clock drawing and intersecting pentagons. Naming is mostly intact with occasional circumlocutions. Neurological exam is otherwise nonfocal; gait is normal. Which set of **examination signs** best fits the underlying syndrome?",options:[{key:"A",text:"Prominent disinhibition and utilization behavior; intact delayed recall with strong cueing benefit; frontal release signs early"},{key:"B",text:"Fluctuating attention, recurrent visual hallucinations, spontaneous parkinsonism, visuospatial neglect"},{key:"C",text:"Magnetic gait with start hesitation, urinary urgency/incontinence, impaired attention/processing speed; ventriculomegaly on imaging"},{key:"D",text:"Poor delayed recall with minimal cueing benefit; semantic (category) fluency worse than phonemic; constructional apraxia on clock/pentagons; otherwise nonfocal neuro exam"},{key:"E",text:"Nonfluent agrammatic speech with apraxia of speech; effortful output; left inferior frontal signs"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Amnestic Alzheimer’s disease (AD)** shows **hippocampal storage failure** → **poor delayed recall** that **does not normalize with cues**.","- **Semantic (category) fluency < phonemic (letter) fluency** is typical early as temporal semantic networks are affected.","- **Constructional apraxia** on **clock drawing**/intersecting pentagons reflects early visuospatial network involvement.","- General neuro exam is **nonfocal** early; gait usually normal until late. [yellow]Pattern lock: memory-first + poor cueing + constructional errors = AD[/yellow].","- Imaging often reveals [blue]medial temporal (hippocampal) atrophy[/blue], aligning with these signs. 🧠🕒","**2️⃣ Why the other options are wrong**","- **A (bvFTD signs):** Early **behavioral disinhibition/utilization** with **intact episodic storage** and good cueing benefit → frontal syndrome, not amnestic AD.","- **B (DLB signs):** **Fluctuations**, **visual hallucinations**, **parkinsonism**, and marked visuospatial neglect define DLB—absent here.","- **C (NPH signs):** **Magnetic gait** and urinary symptoms dominate with subcortical slowing; exam and vignette lack gait/continence issues.","- **E (nfvPPA signs):** **Nonfluent agrammatic speech** with apraxia of speech localizes to left IFG/insular networks—language output, not memory, is primary.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) with emphasis on **delayed recall** and **cueing**. **Confirms?** ❌ Suggests AD when cueing fails.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]hippocampal/mesial temporal atrophy[/blue]; exclude structural mimics. **Confirms?** ➕ Supports AD pattern.","- **Best Diagnostic Step (biomarker confirmation):** **CSF AD profile** (↓Aβ42/42–40, ↑p-tau, ↑t-tau) **or** **amyloid PET** ± **tau PET**. **Confirms?** ✅ Biomarker-consistent AD.","- **Adjuncts:** Labs (TSH/B12/CMP/CBC), depression screen, sleep study if OSA suspected; FDG-PET (posterior cingulate/precuneus hypometabolism) if needed.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure and safety planning[/green] (driving, meds, finances), caregiver education, exercise, Mediterranean-style diet, vascular risk control.","- **First Line:** [green]Cholinesterase inhibitor** for mild–moderate AD; **memantine** for moderate–severe or add-on[/green]; cognitive rehab, routines, environmental supports.","- **Gold Standard:** No cure; [green]multidisciplinary care[/green]. Consider **anti-amyloid monoclonals** only if **biomarker-positive** and appropriate for risks/monitoring; [red]minimize anticholinergics/sedatives[/red].","**5️⃣ Full Pathophysiology Explained**","- **Aβ plaques** and **tau tangles** disrupt hippocampal circuits, causing **encoding/consolidation failure** → hallmark **poor delayed recall**.","- Spread from **transentorhinal/hippocampal** regions to association cortices yields **constructional apraxia** and semantic fluency decline.","- Network loss appears as **mesial temporal atrophy** on MRI and posterior cingulate/precuneus hypometabolism on FDG-PET.","**6️⃣ Signs — Examination Findings map**","- **Poor delayed recall with minimal cueing benefit** 🧩 → hippocampal storage failure.","- **Category fluency < letter fluency** 🐶 < F-words → semantic network early hit.","- **Constructional apraxia** 🕒🔺 → clock/pentagon errors from parietal–temporal network spread.","- **Anomia (mild) with circumlocutions** 💬 → secondary naming strain; grammar intact early.","- **Nonfocal neuro exam; normal gait early** 🚶 → contrasts with NPH/DLB.","- [purple]Think AD when the bedside exam shows:[/purple] ==poor recall + poor cueing + semantic fluency drop + constructional errors=="]},{id:"AD-REDFLAGS-20004",topic:"Geriatrics • Alzheimer’s disease — Red Flags",difficulty:"Medium",vignetteTitle:"When it's not typical Alzheimer’s: spot the red flags",stem:"A 73-year-old woman is referred with 4 months of rapidly worsening memory and attention. Family reports new daily headaches, a witnessed focal seizure last week, and low-grade fevers. She has intermittent confusion and drowsiness through the day. Exam: disoriented, mild right arm drift, and neck stiffness; fundoscopy suggests papilledema. Which feature set signals a RED FLAG that requires urgent re-evaluation rather than a standard Alzheimer’s workup?",options:[{key:"A",text:"3-year gradual episodic memory decline with poor cueing and hippocampal atrophy on MRI"},{key:"B",text:"Early visual hallucinations, cognitive fluctuations, and spontaneous parkinsonism without fever"},{key:"C",text:"Subacute (weeks–months) decline with headache, fever, seizure, and papilledema"},{key:"D",text:"Slowly progressive forgetfulness over 2 years with normal neuro exam and negative depression screen"},{key:"E",text:"Mild amnestic complaints with stable function and normal neuro exam for 18 months"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Rapid/subacute time course (weeks–months)** is atypical for Alzheimer’s, which evolves over years.","- **Systemic/inflammatory signs** like **fever** and **headache** point toward infectious, inflammatory, or neoplastic CNS disease.","- **Early seizures** and **papilledema** imply cortical irritability and raised intracranial pressure—[red]urgent imaging and CSF workup are mandatory[/red].","- These features fit **encephalitis, abscess, tumor, venous thrombosis, vasculitis, or CAA-related inflammation**, not typical AD.","- [yellow]Safety pearl:[/yellow] When the clock speeds up and the body is “hot,” think **not Alzheimer’s**. 🚨","**2️⃣ Why the other options are wrong**","- **A:** Classic **amnestic AD** pattern (years-long decline + hippocampal atrophy) → not a red-flag scenario.","- **B:** Suggests **Lewy body dementia** (DLB) rather than AD, but without fever/ICP/seizure it’s not an **urgent** red flag—it's an alternative neurodegenerative dx.","- **D:** Slow progression with benign exam fits routine cognitive clinic evaluation, not emergency workup.","- **E:** Mild, stable subjective complaints without objective decline → consider MCI/monitoring; no urgent red flags.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** [red]Stabilize ABCs[/red]; check glucose; focused neuro exam. **Confirms?** ❌ Safety first.","- **Next Diagnostic step:** **Urgent non-contrast CT head** (rule out bleed/mass) → proceed to **MRI brain with and without contrast** ± **MRV** if venous thrombosis suspected. **Confirms?** ➕ Identifies structural/inflammatory causes.","- **Best Diagnostic Step:** **Lumbar puncture** after imaging excludes mass effect → CSF cell count, protein/glucose, cultures, **HSV/VZV PCR**, autoimmune encephalitis panel; **EEG** for seizures/encephalopathy. **Confirms?** ✅ Etiologic diagnosis.","- **Adjuncts:** CBC, CMP, ESR/CRP, blood cultures; autoimmune/vasculitis serologies; consider **CTA/CTV** if vascular concern.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Seizure control[/green] (benzodiazepine → levetiracetam), head elevation, analgesia, antipyretics, DVT prophylaxis as appropriate.","- **First Line (empiric while pending tests):** Start **IV acyclovir** if encephalitis suspected; add **broad-spectrum antibiotics** if bacterial meningitis/abscess possible; manage ICP (e.g., mannitol/hypertonic saline per protocol).","- **Gold Standard:** **Cause-specific therapy** once confirmed (antivirals/antibiotics, immunotherapy for autoimmune encephalitis, anticoagulation for CVST, neurosurgical management for mass/abscess).","**5️⃣ Full Pathophysiology Explained (why these are red flags)**","- **Alzheimer’s** is a **slow neurodegenerative** process (Aβ plaques, tau tangles) without early fever, seizures, or raised ICP.","- **Infectious/autoimmune/neoplastic** processes cause **inflammation, edema, mass effect**, and **cortical hyperexcitability** → headaches, fever, seizures, papilledema.","- **Time course matters:** **weeks–months** = inflammatory/neoplastic; **years** = degenerative.","- [purple]Mnemonic:[/purple] “**FAST + HOT + ELECTRIC + PRESSURE**” → Fast decline, fever, seizures, papilledema = **not AD**.","**6️⃣ Red-flag checklist — shift to urgent workup when you see…**","- **Acute/subacute onset** or **stepwise** decline.","- **Fever, new headache, meningism**, or **systemic illness** (weight loss, night sweats).","- **Seizures**, **papilledema**, or new **focal deficits**.","- **Rapidly fluctuating consciousness** or delirium out of proportion.","- **Cancer/immunosuppression**, **anticoagulation/trauma**, or signs of **vasculitis/CNS infection**.","- [blue]If any present → abandon routine AD pathway and pursue **acute neurology/infectious/oncology** algorithms immediately[/blue]."]},{id:"AD-INV-20006",topic:"Geriatrics • Alzheimer’s disease — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test when you suspect amnestic Alzheimer’s",stem:"A 75-year-old with 2–3 years of gradually progressive episodic memory loss (repeated questions, misplacing items, getting lost) has poor delayed recall with minimal cueing benefit on bedside testing. Language/behavior are relatively preserved early; neuro exam is nonfocal. What is the best initial investigation to pursue?",options:[{key:"A",text:"Non-contrast CT head"},{key:"B",text:"MRI brain with volumetric sequences (medial temporal assessment)"},{key:"C",text:"CSF Alzheimer biomarkers (Aβ42, Aβ42/40, p-tau, t-tau)"},{key:"D",text:"Amyloid PET (± tau PET)"},{key:"E",text:"Comprehensive neuropsychological testing"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **MRI brain with volumetrics** is the **best initial investigation** in suspected Alzheimer’s disease (AD) because it both **excludes structural mimics** (tumor, subdural, NPH, strategic stroke) and identifies a **syndrome-consistent pattern**.","- In amnestic AD, MRI often shows [blue]**bilateral hippocampal/mesial temporal atrophy**[/blue] with relative sparing of primary cortices—high-yield for clinico-radiologic alignment.","- MRI outperforms CT for **gray-matter resolution** and **pattern recognition**; volumetrics quantify medial temporal atrophy and asymmetry.","- [green]Practical win:[/green] one scan answers “**Is there a treatable structural cause?**” and “**Does the pattern fit AD?**” 🧠🖥️","**2️⃣ Why the other options are wrong**","- **A. CT head:** Useful if MRI unavailable/contraindicated, but **less sensitive** for medial temporal atrophy and subtle pathology.","- **C. CSF biomarkers:** Excellent for **biomarker confirmation**, but **not first**—invasive and pursued after structural imaging rules out mimics.","- **D. Amyloid PET:** Powerful but **costly/limited access** and not first-line; used when diagnosis remains uncertain after MRI/labs or for treatment decisions.","- **E. Neuropsych testing:** Crucial to **quantify domains** and track change, but imaging is prioritized initially to **exclude structural disease**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) emphasizing **delayed recall** and cueing → **poor recall, minimal cueing benefit**. **Confirms?** ❌ Suggests AD pattern.","- **Next Diagnostic step (Best Initial Investigation):** 🧠 **MRI brain with volumetrics** → [blue]hippocampal/mesial temporal atrophy[/blue], rule out mass/subdural/NPH/strategic stroke. **Confirms?** ➕ Strongly supports AD and excludes mimics.","- **Best Diagnostic Step (for in-vivo confirmation):** **CSF AD profile** (↓Aβ42/42–40, ↑p-tau, ↑t-tau) **or** **amyloid PET** ± **tau PET**. **Confirms?** ✅ Biomarker-consistent AD.","- **Adjuncts:** Labs (TSH, B12, CBC/CMP), depression screen, OSA screen; FDG-PET (posterior cingulate/precuneus hypometabolism) if needed.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, safety planning[/green] (driving, meds, finances), caregiver education, exercise + Mediterranean-style diet, vascular risk control.","- **First Line:** [green]Cholinesterase inhibitor[/green] for mild–moderate AD; **memantine** for moderate–severe or add-on; cognitive rehab, routines, environmental supports.","- **Gold Standard:** No cure; [green]multidisciplinary care[/green]. Consider **anti-amyloid monoclonals** only if **biomarker-positive**, appropriate stage, and monitoring for ARIA is feasible; [red]minimize anticholinergics/sedatives[/red].","**5️⃣ Full Pathophysiology Explained**","- **Aβ plaques** and **tau tangles** disrupt hippocampal circuits, causing **encoding/storage failure** → **poor delayed recall** and weak cueing.","- Network degeneration yields **mesial temporal atrophy** on MRI and posterior cingulate/precuneus hypometabolism on FDG-PET.","- Biomarkers (CSF/PET) capture **amyloid and tau** pathology in vivo, corroborating the structural/clinical picture.","**6️⃣ Symptoms — pattern recognition link to imaging**","- **Repeating questions/misplacing items** 📝 → hippocampal storage failure ↔ [blue]medial temporal atrophy[/blue].","- **Poor cueing benefit** 🧩 → true amnestic (storage) deficit, not retrieval alone.","- **Getting lost** 🗺️ → parahippocampal/retrosplenial network involvement.","- [purple]Pearl:[/purple] ==Suspected AD? Do **MRI (with volumetrics)** first—then confirm with **CSF or amyloid PET** as needed==."]},{id:"AD-GOLD-20007",topic:"Geriatrics • Alzheimer’s disease — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What truly confirms Alzheimer’s disease etiology?",stem:"A 76-year-old with 3 years of progressive episodic memory loss has MRI showing bilateral hippocampal atrophy. CSF reveals low Aβ42/42–40 and elevated p-tau/t-tau; amyloid PET is positive. Family asks: “What is the final, gold standard test that proves this is Alzheimer’s disease?”",options:[{key:"A",text:"MRI brain with volumetric analysis"},{key:"B",text:"FDG-PET brain (posterior cingulate/precuneus hypometabolism)"},{key:"C",text:"CSF Alzheimer biomarker profile (Aβ42 or Aβ42/40, p-tau, t-tau)"},{key:"D",text:"Amyloid PET (± tau PET)"},{key:"E",text:"Neuropathology with immunohistochemistry demonstrating amyloid-β plaques and tau neurofibrillary tangles"}],correct:"E",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Gold standard = tissue diagnosis**: **Neuropathology with immunohistochemistry** directly visualizes the defining lesions of AD—**amyloid-β plaques** and **tau neurofibrillary tangles**.","- While **CSF/PET biomarkers** are powerful in vivo tools, they **infer** pathology; only tissue **proves** it.","- In clinical practice, this is typically **post-mortem**; brain biopsy is **rare** and reserved for atypical, rapidly progressive, or treatable-mimic scenarios.","- [yellow]Bottom line:[/yellow] Imaging/CSF = strong evidence; **histopathology** = definitive proof. 🧠🔬","**2️⃣ Why the other options are wrong**","- **A. MRI volumetrics:** Excellent for **pattern recognition** (hippocampal atrophy) and excluding mimics, but **cannot confirm** molecular pathology.","- **B. FDG-PET:** Shows **hypometabolism** in posterior cingulate/precuneus/temporoparietal cortex—**supportive**, not definitive.","- **C. CSF biomarkers:** High diagnostic accuracy (↓Aβ42/42–40, ↑p-tau, ↑t-tau) but **indirect**; does not show plaques/tangles themselves.","- **D. Amyloid PET (± tau PET):** Visualizes **protein deposition in vivo** and is superb for confirmation/eligibility (e.g., anti-amyloid therapy) yet still **not the gold standard** versus histopathology.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) with **delayed recall + cueing** → poor recall with minimal cueing benefit. **Confirms?** ❌ Suggests AD.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]hippocampal/mesial temporal atrophy[/blue]; excludes structural mimics. **Confirms?** ➕ Supports AD.","- **Best Diagnostic Step (in vivo confirmation):** **CSF AD profile** or **amyloid PET (± tau PET)** consistent with AD biology. **Confirms?** ✅ In vivo biomarker confirmation.","- **Gold Standard (definitive):** 🔬 **Neuropathology with immunohistochemistry** showing **Aβ plaques** and **tau tangles**. **Confirms?** ✅✅ Definitive diagnosis.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, safety planning[/green] (driving, meds, finances), caregiver education, exercise/Mediterranean diet, vascular risk control.","- **First Line:** [green]Cholinesterase inhibitor** for mild–moderate AD; **memantine** for moderate–severe or add-on[/green]; cognitive rehab, structured routines, sleep hygiene.","- **Gold Standard (therapy context):** No cure; consider **anti-amyloid monoclonal antibodies** only if **biomarker-positive** and suitable for ARIA monitoring; [red]avoid anticholinergics and minimize sedatives[/red].","**5️⃣ Full Pathophysiology Explained**","- AD features **amyloid-β plaque** accumulation and **tau tangle** formation leading to **synaptic dysfunction**, neuroinflammation, and **neurodegeneration**.","- Spread follows a **Braak-like trajectory** from transentorhinal/hippocampal regions to association cortex—matching **episodic memory-first** symptoms.","- Biomarkers map this biology in vivo (A/T/[N] framework), but **histology** remains the **final arbiter**.","**6️⃣ Symptoms — pattern recognition link**","- **Repeated questions/misplacing items** 📝 + **poor cueing** 🧩 → hippocampal storage failure.","- **Getting lost** 🗺️ and **constructional errors** 🕒 → progression to parietal networks.","- [purple]Pearl:[/purple] ==CSF/PET convince you; **histopathology** convinces everyone==."]},{id:"AD-ETIO-20008",topic:"Geriatrics • Alzheimer’s disease — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"What’s the core cause behind amnestic Alzheimer’s?",stem:"A 76-year-old with 3 years of progressive episodic memory loss (repeated questions, getting lost, poor cueing benefit) has MRI showing bilateral hippocampal/mesial temporal atrophy. No early hallucinations or parkinsonism. Which underlying etiology best explains this syndrome?",options:[{key:"A",text:"Amyloid-β plaque deposition with tau neurofibrillary tangles (Alzheimer pathology)"},{key:"B",text:"α-synuclein (Lewy body) pathology"},{key:"C",text:"TDP-43–predominant frontotemporal degeneration"},{key:"D",text:"Multi-infarct vascular injury (strategic strokes)"},{key:"E",text:"Reversible hypothyroidism causing cognitive impairment"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Alzheimer’s disease (AD)** is defined pathologically by **amyloid-β (Aβ) plaques** and **tau neurofibrillary tangles**.","- The **amnestic presentation** with **poor cueing benefit** reflects **hippocampal storage failure**, matching tau spread in medial temporal regions.","- MRI showing [blue]**hippocampal/mesial temporal atrophy**[/blue] aligns with AD’s early neuroanatomy (Braak trajectory).","- Biomarkers (↓Aβ42/42–40, ↑p-tau/t-tau; amyloid PET+) map this **Aβ/tau biology** in vivo.","- [yellow]Pattern lock:[/yellow] gradual memory-first decline + hippocampal atrophy + AD biomarkers → **Aβ + tau**. 🧠🧩","**2️⃣ Why the other options are wrong**","- **B. Lewy body disease (α-synuclein):** Early **visual hallucinations**, **fluctuations**, **parkinsonism**, REM sleep behavior disorder—absent here; hippocampal-predominant atrophy not typical early.","- **C. TDP-43 FTD:** Drives **frontotemporal syndromes** (bvFTD, svPPA) with behavior or language-first features, not storage-dominant amnesia.","- **D. Vascular dementia:** **Stepwise decline** with focal deficits; imaging shows **infarcts/leukoaraiosis**, not isolated hippocampal atrophy.","- **E. Hypothyroidism:** Reversible metabolic cause with systemic signs; cognition usually **improves with treatment** and lacks AD biomarker pattern.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive screen (MoCA/MMSE) with **delayed recall + cueing** → poor recall, minimal cueing benefit. **Confirms?** ❌ Suggests AD.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]hippocampal/mesial temporal atrophy[/blue]; exclude structural mimics. **Confirms?** ➕ Supports AD.","- **Best Diagnostic Step (in vivo etiology):** **CSF AD biomarkers** (↓Aβ42/42–40, ↑p-tau, ↑t-tau) **or** **amyloid PET** ± **tau PET**. **Confirms?** ✅ Consistent with Aβ/tau etiology.","- **Adjuncts:** Labs to rule out reversibles (TSH, B12, CMP/CBC), depression screen; FDG-PET (posterior cingulate/precuneus hypometabolism) if needed.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, safety planning[/green] (driving/meds/finances), caregiver education, exercise + Mediterranean-style diet, vascular risk control.","- **First Line:** [green]Cholinesterase inhibitor** (donepezil/rivastigmine/galantamine) for mild–moderate; **memantine** for moderate–severe or add-on[/green]; cognitive rehab and routines.","- **Gold Standard:** No cure; [green]multidisciplinary care[/green]. Consider **anti-amyloid monoclonals** only if **biomarker-positive** and monitoring for ARIA is feasible; [red]minimize anticholinergics/sedatives[/red].","**5️⃣ Full Pathophysiology Explained (Etiology focus)**","- **Aβ dysmetabolism** → extracellular **plaques**; **tau hyperphosphorylation** → intracellular **neurofibrillary tangles**.","- **Braak spread**: transentorhinal/hippocampal → associative neocortex → explains memory-first symptoms then visuospatial/language/executive involvement.","- Result: **synaptic failure**, neuroinflammation, and network atrophy → **hippocampal shrinkage** on MRI, **posterior cingulate/precuneus hypometabolism** on FDG-PET.","- [purple]Mnemonic:[/purple] “**A & T drive AD**” → **A**myloid + **T**au underpin Alzheimer’s.","**6️⃣ Symptoms — cause → effect mapping**","- **Repeated questions, misplacing items** 📝 → hippocampal storage failure from tau-rich medial temporal degeneration.","- **Poor cueing benefit** 🧩 → true **encoding/storage** deficit (Aβ/tau network damage), not mere retrieval failure.","- **Getting lost** 🗺️ → involvement of parahippocampal/retrosplenial navigational circuits.","- **Later language/visuospatial decline** 🧠 → spread to temporoparietal association cortex along Braak staging.","- [blue]Imaging–biology link:[/blue] hippocampal atrophy ↔ tau tangle burden; amyloid PET/CSF confirms **Aβ** path."]},{id:"AD-COMP-20009",topic:"Geriatrics • Alzheimer’s disease — Complications",difficulty:"Medium",vignetteTitle:"What high-risk downstream complication should you anticipate in Alzheimer’s?",stem:"An 80-year-old with moderate Alzheimer’s disease (3 years since diagnosis) has worsening weight loss, prolonged mealtimes, coughing during meals, and two recent chest infections. He also wanders at night and has had one mechanical fall without injury. On exam: inattentive to bolus size, wet/gurgly voice after thin liquids, and reduced gag. Which complication is most important to anticipate and prevent over the next year?",options:[{key:"A",text:"Normal-pressure hydrocephalus with ventriculomegaly"},{key:"B",text:"Parkinsonism with REM sleep behavior disorder"},{key:"C",text:"Serotonin syndrome from SSRI therapy"},{key:"D",text:"Aspiration pneumonia due to oropharyngeal dysphagia"},{key:"E",text:"Intracerebral hemorrhage from anticoagulation"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Aspiration pneumonia** is a leading cause of **morbidity and mortality** in moderate–severe Alzheimer’s disease.","- Progressive **oropharyngeal dysphagia** (impaired bolus control, delayed swallow, reduced airway protection) emerges as cortical and brainstem networks degenerate.","- The vignette flags classic risk: **cough with meals**, **wet/gurgly voice** after thin liquids, **weight loss**, and **recent chest infections**.","- [green]Anticipating and mitigating aspiration risk[/green] (swallow assessment, texture modification, feeding strategies) is high-yield and outcomes-relevant.","- [yellow]Pattern lock:[/yellow] AD + dysphagia signs + recurrent chest infections → **anticipate aspiration pneumonia**. 🫁🍽️","**2️⃣ Why the other options are wrong**","- **A (NPH):** Different syndrome (gait, incontinence, ventriculomegaly); not the key complication signaled by mealtime cough/wet voice.","- **B (DLB features):** Visual hallucinations, parkinsonism, RBD point to Lewy body disease; not driven by AD dysphagia pattern.","- **C (Serotonin syndrome):** Requires serotonergic excess (clonus, hyperreflexia, hyperthermia); unrelated to swallowing signs here.","- **E (ICH on anticoagulation):** Important if anticoagulated, but the case emphasizes **feeding-related respiratory risk**, not bleeding.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Focused **dysphagia screen** (cough/choke with liquids/solids, wet voice, prolonged meals, weight loss). **Confirms?** ❌ Suggests aspiration risk.","- **Next Diagnostic step:** **Bedside swallow assessment** by speech-language therapist with trial textures/liquids and compensatory postures. **Confirms?** ➕ Risk stratification; immediate safety plan.","- **Best Diagnostic Step:** **Instrumental swallow study** — videofluoroscopic swallow study (VFSS) or FEES → documents **penetration/aspiration**, residue, and safest diet/liquid. **Confirms?** ✅ Objective evidence guides interventions.","- **Adjuncts:** Nutritional labs/weight trend, oral health check, CXR if respiratory symptoms/fever, pulse oximetry; review meds that **worsen sedation or saliva** (anticholinergics/benzos).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aspiration precautions[/green] (upright 30–45 min after meals, slow rate, small boluses), **texture-modified diet** per study, supervised feeds, meticulous **oral hygiene**.","- **First Line:** [green]Speech–language therapy** for swallow techniques[/green] (chin tuck, effortful swallow), safe-fluid strategies (e.g., thickened liquids if indicated), **nutrition optimization** (calorie-dense foods/supplements), **vaccination** (influenza, pneumococcal).","- **Gold Standard:** No curative therapy for AD; for refractory unsafe swallowing, discuss **goals of care** (comfort feeding only, risks/benefits of PEG — [blue]PEG does not prevent aspiration of saliva[/blue]); align with patient values; involve palliative care when appropriate. [red]Avoid routine PEG without shared decision-making[/red].","**5️⃣ Full Pathophysiology Explained**","- AD pathology (**amyloid-β** and **tau**) spreads from **medial temporal** to **parietal/insular/frontal** networks, degrading attention, praxis, and sensorimotor integration for swallowing.","- Cortical control of the **oropharyngeal phase** weakens → delayed swallow initiation, poor laryngeal elevation, and **ineffective airway protection**.","- Frailty, **sarcopenia**, and **poor oral hygiene** increase bacterial load and reduce cough clearance → **microaspiration → pneumonia**.","- Intercurrent **delirium** and sedatives further impair swallow and airway reflexes, compounding risk.","**6️⃣ Symptoms — pattern recognition for complications**","- **Mealtime cough/wet voice** → penetration/aspiration risk.","- **Weight loss, prolonged meals, food pocketing** → ineffective swallow and inadequate intake.","- **Recurrent chest infections/low-grade fevers** → possible silent aspiration.","- **Functional cascade:** aspiration → hospitalization → delirium → deconditioning → pressure injuries/falls.","- [purple]Safety Pearl:[/purple] ==In moderate–severe AD, screen early and often for **dysphagia** to prevent **aspiration pneumonia**=="]},{id:"AD-RISK-20010",topic:"Geriatrics • Alzheimer’s disease — Risk Factors",difficulty:"Medium",vignetteTitle:"Modifiable vs nonmodifiable: which risk matters most for prevention?",stem:"A 60-year-old accountant with well-controlled hypertension and type 2 diabetes reports progressive bilateral hearing loss since age 52. He is overweight (BMI 30), walks rarely, and lives alone with limited social engagement. He smokes 5–10 cigarettes/day. His mother developed Alzheimer’s disease at 78. He currently has no cognitive symptoms. Which single intervention targets the **most impactful modifiable risk factor** for late-life dementia/Alzheimer’s disease?",options:[{key:"A",text:"Tighten blood pressure to <130/80 mmHg"},{key:"B",text:"Fit and consistently use hearing aids with auditory rehabilitation"},{key:"C",text:"Start a high-intensity statin regardless of ASCVD risk"},{key:"D",text:"Adopt Mediterranean-style diet and structured aerobic exercise"},{key:"E",text:"Immediate smoking cessation program"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- Midlife **hearing loss** carries one of the largest **population-attributable fractions** for late-life dementia and Alzheimer’s risk.","- Addressing hearing loss with **hearing aids + auditory rehabilitation** is a **high-yield, modifiable** prevention strategy.","- Mechanisms include [blue]reduced cognitive load[/blue], [blue]maintained social engagement[/blue], and [blue]less sensory deprivation–driven atrophy[/blue].","- Observational and interventional data show **lower incident dementia risk** among consistent hearing-aid users versus nonusers.","- [yellow]Prevention pearl:[/yellow] In midlife risk counseling, **treat hearing loss early** alongside vascular risk control. 👂🧠","**2️⃣ Why the other options are wrong**","- **A. BP control:** Hypertension is important for dementia prevention, but **hearing loss** contributes a larger modifiable share in midlife; still manage BP aggressively for brain and heart.","- **C. Statin regardless of risk:** Use statins per **ASCVD indications**; evidence does **not** support statins as a primary anti-Alzheimer therapy.","- **D. Diet/exercise:** Powerful for overall brain health and vascular risk, yet **hearing intervention** targets a uniquely strong nonvascular pathway and has large attributable impact.","- **E. Smoking cessation:** Always recommended; smoking raises vascular dementia and overall risk, but **midlife hearing loss** remains the higher-yield modifiable lever in this scenario.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Structured **risk review**: age, family history, education, **hearing screen**, vascular/metabolic profile, sleep, depression, alcohol, activity, social ties. Confirms? ❌ Risk stratifies; no dementia yet.","- **Next Diagnostic step:** **Formal audiology** (pure-tone audiometry, speech discrimination) → quantify loss and fit **hearing aids**. Confirms? ➕ Enables targeted intervention.","- **Best Diagnostic Step (if cognitive concern emerges):** **Cognitive screening** (MoCA) and **MRI brain** for patterns of atrophy; **CSF or amyloid/tau PET** only if symptomatic and diagnosis uncertain. Confirms? ✅ For symptomatic cases.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat hearing loss[/green] with **hearing aids + auditory rehab**; encourage **consistent daily use** and device troubleshooting.","- **First Line (bundle other modifiable risks):** [green]BP <130/80, DM control (A1c individualized), smoking cessation, Mediterranean diet, 150–300 min/wk aerobic exercise, strength training, sleep apnea screening, depression treatment, social engagement**.","- **Gold Standard (prevention reality):** No pill cures risk; [green]multidomain risk reduction over years[/green] has the best evidence; monitor adherence and adjust barriers. [purple]Mnemonic: “**HEAR VITALS**” — **Hear**ing, **V**ascular, **I**nflammation, **T**rauma, **A**ctivity, **L**earning (cognitive), **S**leep[/purple].","**5️⃣ Full Pathophysiology Explained**","- **Alzheimer biology** = **amyloid-β plaques** and **tau tangles**; risk is shaped by **age**, **genetics (APOE ε4)**, and **lifetime exposures**.","- **Hearing loss → cognitive load**: brain reallocates resources to decode sound, reducing encoding capacity and promoting network inefficiency.","- **Sensory deprivation** accelerates **temporal/hippocampal atrophy** and **social isolation**, both linked to cognitive decline.","- **Vascular factors** (HTN, diabetes, smoking) add [blue]ischemic/white-matter injury[/blue] and neuroinflammation, synergizing with AD pathology.","- [yellow]Upstream wins[/yellow] come from **multi-domain modification**, with **hearing** a centerpiece in midlife.","**6️⃣ Symptoms — risk → phenotype mapping**","- **Untreated hearing loss** 👂 → social withdrawal, miscommunication, cognitive load → later **amnestic decline**.","- **Hypertension/diabetes/smoking** 💢 → microvascular disease → **processing speed/executive** deficits → worsened AD trajectory.","- **Low activity + isolation** 🛋️ → reduced cognitive reserve → earlier clinical expression of pathology.","- **Family history/APOE ε4** 🧬 → higher baseline risk; modifiable factors still shift **onset and slope**.","- [blue]Pattern to remember:[/blue] ==In midlife prevention counseling, **treat hearing loss first**, then stack vascular, lifestyle, sleep, and mood strategies=="]}];function Tb(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const Mb=/^[0-9+\-*/().\s^%]*$/;function Rb(o){if(!Mb.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function Xn({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Pb(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function Bb(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(Rb(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function Ib(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Lb({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Xn,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=tt[w].id,f=y[g],k=f?f===tt[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:tt[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:tt[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:tt[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function zb({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[tt[A].id]===tt[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:tt[j],chosen:d[tt[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(Xn,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"Nice — no incorrect answers 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function Hb(){const o=Vt(),r=Ib(),[d,c]=p.useState(tt.map((v,m)=>m)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=tt[d[g]],ie=tt.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const v=ee.current;if(!v)return;const m=window.getSelection&&window.getSelection();if(!(!m||m.rangeCount===0))try{const C=m.getRangeAt(0);if(!v.contains(C.commonAncestorContainer)||String(C).trim().length===0)return;const I=document.createElement("mark");I.className="bg-yellow-200 rounded px-0.5",C.surroundContents(I),m.removeAllRanges()}catch{const C=v.getAttribute("contenteditable");v.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),C!==null?v.setAttribute("contenteditable",C):v.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const v=()=>T();return document.addEventListener("mouseup",v),()=>document.removeEventListener("mouseup",v)},[_]);const U=()=>{const v=ee.current;v&&v.querySelectorAll("mark").forEach(m=>{const C=m.parentNode;for(;m.firstChild;)C.insertBefore(m.firstChild,m);C.removeChild(m)})},B=v=>{const m=v==="random"?Tb(tt.map((C,I)=>I)):tt.map((C,I)=>I);c(m),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const v=m=>{m.key==="ArrowRight"&&g<ie-1&&f(C=>C+1),m.key==="ArrowLeft"&&g>0&&f(C=>C-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,ie]);const O=()=>A(v=>({...v,[R.id]:!0})),N=()=>{g>=ie-1||f(m=>m+1)},V=()=>g>0&&f(v=>v-1),M=g===ie-1&&!!j[R.id];return p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M]),p.useMemo(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)},[se,j,g]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(v=>!v),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((v,m)=>{const C=tt[v],I=k[C.id],W=I?I===C.correct?"correct":"incorrect":"unanswered",ne=m===g?"ring-2 ring-purple-300":W==="correct"?"ring-2 ring-emerald-300":W==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(m),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${ne}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",m+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:C.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:C.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:C.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${W==="correct"?"bg-emerald-500":W==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},C.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(v=>{const m=k[R.id],C=!!j[R.id],I=v.key===R.correct,W=C?I?"border-emerald-300 bg-emerald-50":m===v.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${W}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:m===v.key,onChange:()=>E(ne=>({...ne,[R.id]:v.key})),disabled:C}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[v.key,"."]})," ",v.text]})]},v.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),g===ie-1&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(v=>({...v,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((v,m)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Db,{text:v})},m))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(v=>!v),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(Xn,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(Pb,{})}),i.jsx(Xn,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(Bb,{})}),i.jsx(Lb,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx(zb,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)})(),jumpTo:v=>f(v)}),i.jsx(Ob,{open:!h,onPick:B})]})}function Ob({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(Xn,{open:o,onClose:()=>{},title:"Start Alzheimer’s Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function Gb({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const it=[{id:"VaD-DEF-30001",topic:"Geriatrics • Vascular dementia — Definition & Core Concept",difficulty:"Medium",vignetteTitle:"What exactly is vascular dementia?",stem:"A 78-year-old with hypertension, diabetes, and atrial fibrillation has stepwise cognitive decline after several TIAs and one lacunar stroke. He has slowed thinking, impaired executive function, and focal exam findings (right pronator drift, brisk reflexes). MRI shows multiple lacunes and confluent periventricular white-matter hyperintensities. Which definition best captures the **core concept** of vascular dementia?",options:[{key:"A",text:"A progressive neurodegenerative disorder defined by amyloid-β plaques and tau tangles causing hippocampal-predominant memory loss"},{key:"B",text:"Cognitive impairment due to cerebrovascular brain injury (infarcts, hemorrhage, or ischemic white-matter disease) with a temporal/pathophysiologic link between vascular events and cognitive decline"},{key:"C",text:"A primary language-led dementia with selective degeneration of the anterior temporal lobes"},{key:"D",text:"A rapidly progressive dementia caused by prion protein misfolding with myoclonus and characteristic EEG changes"},{key:"E",text:"A neurodegenerative synucleinopathy with early visual hallucinations, cognitive fluctuations, and spontaneous parkinsonism"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** = **major neurocognitive disorder due to vascular disease**: cognitive/functional decline caused by **cerebrovascular brain injury** (large/small infarcts, hemorrhage, **ischemic white-matter disease**).","- The diagnosis requires a **clinical–radiologic link**: timing (onset after stroke or stepwise with TIAs), **focal neurological signs**, and **imaging evidence** of vascular lesions explaining the deficits.","- Typical phenotype emphasizes **processing speed/executive dysfunction** > pure amnestic loss, with **gait disturbance**, pseudobulbar affect, urinary urgency in subcortical forms.","- Course can be **stepwise**, **fluctuating**, or insidiously progressive when small-vessel disease accumulates. [yellow]Core concept: brain network damage from vascular hits → cognitive impairment[/yellow]. 🧠🩸","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s):** Describes **amyloid/tau** neurodegeneration with hippocampal memory-first decline—**not vascular injury**.","- **C (svPPA):** Language-led semantic loss from anterior temporal degeneration—**non-vascular**.","- **D (Prion disease):** **Rapid** course with myoclonus and periodic EEG; not a vascular mechanism.","- **E (DLB):** **Hallucinations, fluctuations, parkinsonism** from α-synuclein; vascular lesions are not the driver.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive profile (MoCA with **executive/attention** items), full neuro exam for **focal deficits**; vascular risk review. **Confirms?** ❌ Suggests VaD pattern.","- **Next Diagnostic step:** 🧠 **MRI brain** (preferred over CT) → [blue]lacunes, cortical/subcortical infarcts, microbleeds, and white-matter hyperintensities[/blue] in a distribution matching deficits. **Confirms?** ➕ Supports VaD when lesions explain cognition.","- **Best Diagnostic Step:** **Establish cerebrovascular causality**: correlate timeline (post-stroke decline/stepwise course) + imaging burden/strategic infarcts (e.g., thalamus, caudate) + exclude alternative primary neurodegeneration with **CSF AD biomarkers** or **amyloid PET** if mixed etiology suspected. **Confirms?** ✅ Clinico-radiologic diagnosis of VaD (or mixed).","- **Adjuncts:** Vascular work-up (ECG/AF, carotid/CTA/MRA, echo for embolic source), labs (lipids/A1c), BP monitoring; screen for sleep apnea.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — BP target per guidelines, statin for ASCVD risk, diabetes management, smoking cessation, exercise, Mediterranean-style diet.","- **First Line:** [green]Antiplatelet therapy[/green] (single agent) for non-cardioembolic ischemic disease; **anticoagulation** for atrial fibrillation if indicated; **cognitive rehab** focusing on executive strategies; manage gait/balance with PT; treat depression/apathy.","- **Gold Standard:** No cure; [green]prevent further vascular injury[/green] is paramount. Consider **cholinesterase inhibitor** or **memantine** in *selected* VaD or **mixed AD/VaD** for symptomatic benefit (modest effect). [red]Avoid hypotension/over-sedation[/red] which worsens perfusion/cognition.","**5️⃣ Full Pathophysiology Explained**","- **Large-vessel infarcts** (strategic cortex, thalamus) and **small-vessel disease** (lacunes, white-matter ischemia) disconnect **fronto–subcortical circuits** vital for attention, speed, and executive control.","- **Microvascular pathology** (lipohyalinosis, arteriolosclerosis) and **endothelial dysfunction** reduce network efficiency; recurrent hits produce cumulative cognitive debt.","- Mixed pathology is common: vascular injury **lowers cognitive reserve** and **unmasks** concomitant Alzheimer changes.","- [purple]Mnemonic:[/purple] “**S.T.E.P.**” → **S**tepwise decline, **T**IAs/strokes, **E**xecutive slowing, **P**eriventricular WMH.","**6️⃣ Symptoms — core pattern recognition**","- **Slowed processing & executive dysfunction** 🐢🧩 → fronto–subcortical disconnection from small-vessel disease.","- **Gait disturbance & falls** 🚶‍♂️↘️ → subcortical WM involvement (‘lower body parkinsonism’).","- **Pseudobulbar affect/urinary urgency** 😢/🚻 → descending fiber tract disruption.","- **Stepwise decline after strokes** ⬇️➡️⬇️ → temporal link to vascular events.","- [blue]Imaging tie-in:[/blue] lacunes + confluent periventricular WMH or strategic infarcts that **match the deficits**."]},{id:"VaD-SX-30002",topic:"Geriatrics • Vascular dementia — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the vascular pattern: executive slowing with stepwise dips",stem:"A 79-year-old man with long-standing hypertension, type 2 diabetes, and atrial fibrillation presents with 18 months of cognitive decline. Family reports a 'good day/bad day' pattern with two clear step-downs after TIAs. He mismanages bills and meds, gets stuck switching tasks, and walks more slowly with short steps. He laughs/cry easily (embarrassed afterward) and has new urinary urgency. Memory for recent events is fair with cues, but he is slow and distractible on testing. Which clinical constellation best identifies the underlying syndrome?",options:[{key:"A",text:"Gradual, memory-first decline with poor cueing benefit; hippocampal-predominant pattern"},{key:"B",text:"Fluctuations with recurrent visual hallucinations and spontaneous parkinsonism"},{key:"C",text:"Early behavioral disinhibition, apathy, hyperorality with relatively spared episodic memory"},{key:"D",text:"Stepwise or fluctuating decline with psychomotor slowing, executive dysfunction, gait disturbance, pseudobulbar affect, and early urinary urgency"},{key:"E",text:"Triad of magnetic gait, urinary incontinence, cognitive slowing with ventriculomegaly"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** classically presents with **executive dysfunction** and **psychomotor slowing** rather than pure amnesia.","- **Temporal link** to vascular events: **stepwise dips** after TIA/stroke or fluctuating course with small-vessel disease.","- **Gait disturbance** (short steps, lower-body parkinsonism), **pseudobulbar affect** (emotional lability), and **early urinary urgency** reflect **fronto–subcortical disconnection**.","- **Memory may improve with cues** (retrieval problem) versus the storage failure of Alzheimer’s.","- [yellow]Pattern lock:[/yellow] vascular risks + stepwise course + executive/gait/affect/urinary features → **VaD**. 🧠🩸","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s):** Memory-first with **poor cueing** and hippocampal atrophy; lacks stepwise vascular signature.","- **B (DLB):** **Visual hallucinations**, pronounced **fluctuations**, and **parkinsonism** without clear vascular temporality.","- **C (bvFTD):** Early **behavioral**/personality change with relative memory sparing and frontal atrophy; not vascular stepwise.","- **E (NPH):** Gait + urinary + cognitive slowing fit, but NPH requires **ventriculomegaly** and often magnetic gait; stepwise TIAs are not typical.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** MoCA with **attention/executive** focus (trail-making, clock, abstraction) + neuro exam for **focal signs**. **Confirms?** ❌ Suggests VaD profile.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]lacunes, cortical/subcortical infarcts, confluent periventricular WMH, microbleeds[/blue] matching deficits/timeline. **Confirms?** ➕ Supports.","- **Best Diagnostic Step:** **Establish causality**: correlate **clinical timeline** (post-stroke/stepwise) + **lesion location/burden**; consider **CSF AD biomarkers/amyloid PET** if mixed AD/VaD suspected. **Confirms?** ✅ Clinico-radiologic VaD (or mixed).","- **Adjuncts:** Vascular workup (ECG for AF, carotid US/CTA/MRA, echocardiography), lipids/A1c, ambulatory BP, sleep apnea screen.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — BP per guideline, statin for ASCVD risk, DM optimization, smoking cessation, exercise, Mediterranean-style diet.","- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic disease; **anticoagulation** for AF when indicated; PT/OT for **gait**; **cognitive rehab** emphasizing external aids and task sequencing; manage mood/apathy and **pseudobulbar affect** (e.g., dextromethorphan–quinidine where appropriate).","- **Gold Standard:** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension and over-sedation[/red].","**5️⃣ Full Pathophysiology Explained**","- **Small-vessel disease** (arteriolosclerosis, lipohyalinosis) and **infarcts/hemorrhages** disrupt **fronto–subcortical circuits**, degrading processing speed, attention, and executive control.","- **White-matter hyperintensities** disconnect cortical hubs; **microbleeds** signal cerebral amyloid angiopathy or hypertensive small-vessel pathology.","- Repeated vascular hits accumulate **cognitive debt**; mixed pathology common, where vascular injury unmasks/worsens underlying AD.","- [blue]Network view:[/blue] damage to thalamus, caudate, frontal WM tracts → executive/gait/affect/urinary syndrome.","**6️⃣ Symptoms — Clinical Presentation map**","- **Psychomotor slowing & executive dysfunction** 🐢🧩 → fronto–subcortical disconnection.","- **Gait disturbance** 🚶‍♂️↘️ (short steps, wide base) → subcortical WM involvement (‘lower-body parkinsonism’).","- **Pseudobulbar affect** 😢😅 → corticobulbar tract involvement causing emotional lability.","- **Urinary urgency/early incontinence** 🚻 → descending control pathway disruption.","- **Stepwise or fluctuating decline** ⬇️➡️⬇️ → temporal link to TIAs/strokes/small-vessel burden.","- [purple]Pearl:[/purple] ==Cues help memory (retrieval) + executive/gait/affect/urinary + vascular timeline → **think VaD**=="]},{id:"VaD-SIGNS-30003",topic:"Geriatrics • Vascular dementia — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to vascular dementia?",stem:"An 80-year-old with long-standing hypertension, diabetes, and atrial fibrillation has stepwise cognitive decline after TIAs. On exam: slowed processing, impaired trail-making and set-shifting, reduced verbal fluency, positive grasp reflex, brisk reflexes with right-sided pronator drift, and short-stepped gait with early urinary urgency. Delayed recall improves with category cues. Which set of examination signs best fits the underlying syndrome?",options:[{key:"A",text:"Poor delayed recall with minimal cueing benefit; constructional apraxia; otherwise nonfocal exam"},{key:"B",text:"Fluctuating attention with recurrent visual hallucinations and spontaneous parkinsonism"},{key:"C",text:"Nonfluent agrammatic speech with apraxia of speech; left inferior frontal signs"},{key:"D",text:"Psychomotor slowing with executive dysfunction (set-shifting/attention), frontal release signs, focal UMN findings (hyperreflexia/pronator drift/Babinski), gait disturbance (short steps/lower-body parkinsonism), early urinary urgency; memory improves with cues"},{key:"E",text:"Magnetic gait with ventriculomegaly, urinary incontinence, and subcortical cognitive slowing without focal UMN signs"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** shows **executive dysfunction** (set-shifting, attention) and **psychomotor slowing** on bedside testing.","- **Frontal release signs** (e.g., grasp), **UMN findings** (hyperreflexia, pronator drift, Babinski), and **gait disturbance** (short steps, wide base, lower-body parkinsonism) reflect **fronto–subcortical disconnection**.","- **Urinary urgency** appears early in subcortical small-vessel disease.","- **Delayed recall improves with cues** → retrieval problem (subcortical) rather than the storage failure typical of Alzheimer’s.","- [yellow]Pattern lock:[/yellow] vascular risks + stepwise course + executive/gait/UMN/frontal-release + cueable memory → **VaD**. 🧠🩸","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s signs):** **Poor cueing benefit** and nonfocal exam point to hippocampal storage failure, not VaD with focal/frontal signs.","- **B (DLB signs):** **Visual hallucinations**, cognitive **fluctuations**, and spontaneous **parkinsonism** without vascular temporality; UMN/frontal-release are not core.","- **C (nfvPPA signs):** Language-output (agrammatism/apraxia of speech) localizes to left IFG/insula; not the executive–gait–UMN cluster of VaD.","- **E (NPH signs):** Magnetic gait + ventriculomegaly + incontinence fit NPH but typically **lack focal UMN signs** and vascular stepwise link.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** MoCA focusing on **attention/executive** (trail-making, clock, abstraction) + full neuro exam for **UMN/frontal-release** signs. **Confirms?** ❌ Suggests VaD.","- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]lacunes, cortical/subcortical infarcts, confluent periventricular WMH, microbleeds[/blue] matching deficits/timeline. **Confirms?** ➕ Supports VaD.","- **Best Diagnostic Step:** **Clinico-radiologic causality** (stepwise decline post-TIA/stroke or heavy small-vessel burden) ± **CSF AD biomarkers/amyloid PET** if mixed AD/VaD suspected. **Confirms?** ✅ VaD (or mixed).","- **Adjuncts:** Vascular workup (ECG/AF, carotid US/CTA/MRA, echocardiography), ambulatory BP, lipids/A1c, sleep apnea screen.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — guideline BP, statin per ASCVD risk, diabetes optimization, smoking cessation, exercise, Mediterranean-style diet.","- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic disease; **anticoagulation** for AF if indicated; **PT/OT** for gait/balance; **cognitive rehab** with external aids; treat depression/apathy and **pseudobulbar affect** (e.g., dextromethorphan–quinidine when appropriate).","- **Gold Standard:** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension/over-sedation[/red].","**5️⃣ Full Pathophysiology Explained**","- **Small-vessel disease** (arteriolosclerosis/lipohyalinosis) and **infarcts** disconnect **fronto–subcortical circuits**, producing **slowing, executive dysfunction, gait disturbance, and UMN signs**.","- **White-matter hyperintensities** degrade network efficiency; **microbleeds** indicate hypertensive disease or CAA.","- Mixed pathology is common; vascular injury **reduces cognitive reserve** and **amplifies** coexisting Alzheimer changes.","- [blue]Network view:[/blue] thalamus–caudate–frontal WM tract damage → executive/affect/urinary phenotype.","**6️⃣ Signs — Examination Findings map**","- **Executive dysfunction & slowing** 🐢🧩 → impaired set-shifting/attention on MoCA (TMT-B, clock).","- **Frontal release signs** ✋ → grasp/snout from frontal disinhibition.","- **UMN findings** ⚡ → hyperreflexia, pronator drift, Babinski from corticospinal tract involvement.","- **Gait disturbance** 🚶‍♂️↘️ → short steps, wide base, lower-body parkinsonism from subcortical WM disease.","- **Urinary urgency** 🚻 → descending control pathway disruption.","- **Cueable memory** 🧩 → retrieval deficit (subcortical) vs storage deficit of AD.","- [purple]Pearl:[/purple] ==Executive slowing + frontal/UMN signs + vascular timeline → **think VaD**=="]},{id:"VaD-REDFLAGS-30004",topic:"Geriatrics • Vascular dementia — Red Flags",difficulty:"Medium",vignetteTitle:"When it’s not typical vascular dementia: spot the red flags",stem:"A 78-year-old with hypertension and diabetes is referred for suspected vascular dementia after a transient episode of confusion. Over 6 weeks, family notes rapidly worsening attention, new daily headaches, low-grade fevers, and one focal seizure. Exam shows fluctuating consciousness, neck stiffness, and left homonymous hemianopia. Which feature set most strongly signals a RED FLAG requiring urgent reevaluation rather than routine vascular dementia workup?",options:[{key:"A",text:"Stepwise decline after strokes with executive slowing and gait disturbance over 3 years"},{key:"B",text:"Rapid (weeks–months) global decline with fever, new headache, seizure, meningism, or papilledema"},{key:"C",text:"Gradual executive dysfunction with white-matter hyperintensities on prior MRI"},{key:"D",text:"Stable mild cognitive impairment responsive to cues and normal neuro exam"},{key:"E",text:"Slow progression with urinary urgency and pseudobulbar affect in the setting of lacunes"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** typically evolves **stepwise** or slowly with vascular events—not as a **rapid febrile encephalopathy**.","- **Fever, new/worsening headache, seizure, meningism, papilledema, or focal cortical deficits** in a **weeks–months** time frame point to **infection, inflammation, neoplasm, hemorrhage, or venous thrombosis**.","- These features demand an **urgent acute neurology pathway** (imaging + CSF) rather than outpatient cognitive workup.","- [yellow]Safety hinge:[/yellow] **FAST + HOT + ELECTRIC + PRESSURE** → Fast decline, fever, seizures, raised ICP = **not routine VaD**. 🚨","**2️⃣ Why the other options are wrong**","- **A:** Classic vascular timeline: **stepwise** dips after strokes with **executive/gait** issues—expected VaD pattern, not a red flag.","- **C:** Chronic executive slowing with WMH fits small-vessel VaD; urgent pathologies are not suggested.","- **D:** Stable MCI without neuro signs is low-risk; monitor and risk-modify, not emergent.","- **E:** Urinary urgency/pseudobulbar affect with lacunes fits subcortical VaD; again, not an acute red-flag cluster.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** [red]Stabilize ABCs; fingerstick glucose; focused neuro exam[/red]. **Confirms?** ❌ Safety first.","- **Next Diagnostic step:** **Urgent non-contrast CT head** to exclude hemorrhage/mass → proceed to **MRI brain with and without contrast** ± **MRV/CTV** if venous thrombosis suspected. **Confirms?** ➕ Identifies structural/inflammatory causes.","- **Best Diagnostic Step:** **Lumbar puncture** (after imaging rules out mass effect) with **cell count, protein/glucose, cultures**, **HSV/VZV PCR**, **autoimmune encephalitis panel**; **EEG** for seizures/encephalopathy. **Confirms?** ✅ Etiologic diagnosis.","- **Adjuncts:** CBC, CMP, ESR/CRP, blood cultures; autoimmune/vasculitis serologies; coagulation panel; consider **CTA** for vasculopathy.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Seizure control[/green] (benzodiazepine → levetiracetam), head elevation, analgesia/antipyretics; manage BP per stroke/ICP protocols.","- **First Line (empiric while pending):** **IV acyclovir** if encephalitis possible; add **broad-spectrum antibiotics** if meningitis/abscess suspected; consider **steroids** only when indicated (e.g., vasculitis/tumor edema) after infectious causes addressed.","- **Gold Standard:** **Cause-specific therapy** (antivirals/antibiotics, anticoagulation for CVST, immunotherapy for autoimmune encephalitis, neurosurgical management for mass/abscess). For confirmed VaD without red flags, pivot to **vascular risk control + secondary stroke prevention**.","**5️⃣ Full Pathophysiology Explained (why these are red flags)**","- **VaD** results from **ischemic/hemorrhagic vascular injury** accumulating over time, usually **non-febrile** and **non-epileptic** early.","- **Infectious/autoimmune/neoplastic** processes create **inflammation, edema, mass effect**, and **cortical hyperexcitability** → **fever, headache, seizures, papilledema**.","- **Cerebral venous sinus thrombosis** or **intracranial hemorrhage** can mimic cognitive decline but add **pressure signs** and **rapid change**.","- Time course is the tell: **weeks–months** with systemic/neuroirritative features ≠ degenerative/vascular slow burn.","**6️⃣ Red-flag checklist — switch to urgent workup when you see…**","- **Acute/subacute** cognitive decline (days–weeks) or **dramatic fluctuations** with reduced consciousness.","- **Fever**, **new headache**, **meningism**, **papilledema**, or **recurrent seizures/status**.","- **New focal cortical deficits** (aphasia, neglect, homonymous field cut) not explained by prior strokes.","- **Cancer/immunosuppression**, **anticoagulation/trauma**, **vasculitis** or **venous thrombosis** risk.","- [blue]If present → bypass routine VaD evaluation and pursue **acute neuroimaging + CSF/EEG** now[/blue]."]},{id:"VaD-DDX-30005",topic:"Geriatrics • Vascular dementia — Differential Diagnosis",difficulty:"Medium",vignetteTitle:"Parsing the differentials in a stepwise, executive-predominant dementia",stem:"An 80-year-old with long-standing hypertension, diabetes, and atrial fibrillation has 2 years of cognitive decline with two clear stepwise 'drop-offs' after TIAs. Family notes slowed thinking, difficulty planning multi-step tasks, short-stepped gait, emotional lability, and early urinary urgency. Memory improves with cues, but he is distractible and slow. MRI shows multiple lacunes and confluent periventricular white-matter hyperintensities. Which diagnosis best explains this presentation?",options:[{key:"A",text:"Alzheimer’s disease (amnestic presentation)"},{key:"B",text:"Dementia with Lewy bodies (DLB)"},{key:"C",text:"Behavioral-variant frontotemporal dementia (bvFTD)"},{key:"D",text:"Vascular dementia (VaD) — small-vessel disease with lacunes/WMH"},{key:"E",text:"Normal-pressure hydrocephalus (NPH)"}],correct:"D",explanation_detail:[`**1️⃣ Why it is the correct answer**
- **Temporal link to vascular events**: stepwise dips after TIAs/strokes are classic for **VaD**.
- **Cognitive profile**: **psychomotor slowing** and **executive dysfunction** > pure amnesia; **memory improves with cues** (retrieval problem).
- **Subcortical syndrome**: **gait disturbance** (short steps), **pseudobulbar affect**, **early urinary urgency** → fronto–subcortical disconnection.
- **Imaging match**: [blue]lacunes + confluent periventricular white-matter hyperintensities (WMH)[/blue] consistent with small-vessel VaD.
- [yellow]Pattern lock:[/yellow] vascular risks + stepwise course + executive/gait/affect/urinary + WMH/lacunes → **VaD**. 🧠🩸`,`**2️⃣ Why the other options are wrong**
- **A. Alzheimer’s disease:** **Memory-first** decline with **poor cueing**, hippocampal atrophy; lacks vascular stepwise pattern and subcortical gait/UMN/frontal-release features.
- **B. DLB:** **Visual hallucinations**, **cognitive fluctuations**, **spontaneous parkinsonism**, and **RBD** dominate; imaging does not hinge on lacunes/WMH burden.
- **C. bvFTD:** Early **behavior/personality change**, disinhibition/apathy, stereotypies; MRI frontal/insular atrophy; stepwise vascular timeline is absent.
- **E. NPH:** **Magnetic gait**, urinary incontinence, subcortical slowing **with ventriculomegaly**; cueable memory can occur, but TIAs/lacunes/WMH pattern points elsewhere.`,`**3️⃣ Investigations / Diagnostic Steps (in order)**
- **Initial Diagnostic step:** MoCA/MMSE with **attention/executive** emphasis (trail-making, clock, abstraction) + full neuro exam for **UMN/frontal-release** signs. **Confirms?** ❌ Suggests VaD profile.
- **Next Diagnostic step:** 🧠 **MRI brain** → [blue]lacunes, cortical/subcortical infarcts, confluent periventricular WMH, microbleeds[/blue] that map to deficits/timeline. **Confirms?** ➕ Supports VaD.
- **Best Diagnostic Step:** **Clinico-radiologic causality**: correlate **timeline (post-TIA/stroke/stepwise)** + **lesion load/location**; consider **CSF AD biomarkers or amyloid PET** if mixed AD/VaD is suspected. **Confirms?** ✅ VaD (or mixed).`,`**4️⃣ Management / Treatment (in order)**
- **Initial Management:** [green]Aggressive vascular risk control[/green] — guideline BP, statin per ASCVD risk, diabetes optimization, smoking cessation, Mediterranean diet, exercise.
- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic disease; **anticoagulation** for AF if indicated; **PT/OT** for gait; **cognitive rehab** (external aids, task sequencing); treat depression/apathy and **pseudobulbar affect**.
- **Gold Standard:** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension/over-sedation[/red].`,`**5️⃣ Full Pathophysiology Explained (DDx focus)**
- **VaD:** ischemic/hemorrhagic injury (lacunes, WMH, infarcts) → **fronto–subcortical disconnection** → slowing/executive deficits, gait/affect/urinary changes.
- **AD:** **Aβ/tau** pathology → hippocampal storage failure → amnestic syndrome with poor cueing.
- **DLB:** **α-synuclein** spread → hallucinations/fluctuations/parkinsonism; visuospatial deficits early.
- **bvFTD:** **TDP-43/tau** in frontal–insular networks → behavior/executive change > memory.
- **NPH:** CSF dynamics → ventriculomegaly → gait then continence/cognition; potentially shunt-responsive.`,`**6️⃣ Symptoms — pattern recognition for DDx**
- **VaD:** Stepwise or fluctuating decline; **executive slowing**, **gait disturbance**, **pseudobulbar affect**, **early urinary urgency**; memory **helped by cues**; MRI with **lacunes/WMH**.
- **AD:** Gradual memory-first decline; **poor cueing**; hippocampal atrophy.
- **DLB:** Hallucinations, fluctuations, **spontaneous parkinsonism**, RBD.
- **bvFTD:** Disinhibition/apathy, loss of empathy, stereotypies; frontal atrophy.
- **NPH:** **Magnetic gait** + ventriculomegaly + urinary incontinence; tap test may help predict shunt response.
- [purple]Pearl:[/purple] ==Cueable memory + executive/gait/affect/urinary + vascular timeline → choose **VaD** over AD/DLB/FTD/NPH==`]},{id:"VaD-INV-30006",topic:"Geriatrics • Vascular dementia — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test when you suspect vascular dementia",stem:"An 81-year-old with hypertension, diabetes, and atrial fibrillation has 2 years of stepwise cognitive decline after TIAs. Family notes slowed thinking, trouble organizing tasks, short-stepped gait, emotional lability, and early urinary urgency. Bedside testing shows impaired set-shifting and attention; delayed recall improves with cues. What is the **best initial investigation**?",options:[{key:"A",text:"Non-contrast CT head"},{key:"B",text:"MRI brain with vascular/small-vessel protocol (T1/T2/FLAIR/DWI/SWI)"},{key:"C",text:"CSF Alzheimer biomarkers (Aβ42/40, p-tau, t-tau)"},{key:"D",text:"FDG-PET brain"},{key:"E",text:"Comprehensive neuropsychological testing"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **MRI brain with a small-vessel/vascular protocol (T1/T2/FLAIR/DWI/SWI)** is the **best initial investigation** for suspected vascular dementia (VaD).","- MRI provides **superior sensitivity** to detect **lacunes, strategic infarcts, confluent white-matter hyperintensities (WMH), microbleeds**, and **acute/subacute ischemia** (DWI).","- The pattern/burden and **anatomic mapping to deficits and timeline** establish the clinico-radiologic link essential for VaD.","- SWI flags **microbleeds** (hypertensive SVD vs CAA), informing antithrombotic risk; FLAIR quantifies **WMH** load.","- [yellow]Bottom line:[/yellow] MRI both **rules out mimics** and **demonstrates vascular injury** that matches the clinical story. 🧠🩸","**2️⃣ Why the other options are wrong**","- **A. CT head:** Useful if MRI unavailable/contraindicated or to exclude acute bleed, but **insensitive** for WMH, lacunes, and microbleeds.","- **C. CSF AD biomarkers:** Helpful to assess **mixed AD/VaD**, but **not first**—doesn’t show vascular injury or stroke burden.","- **D. FDG-PET:** May show network hypometabolism but is **nonspecific** and secondary to structural imaging.","- **E. Neuropsych testing:** Quantifies deficits; **supports** diagnosis but cannot demonstrate cerebrovascular lesions.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Cognitive screen targeting **attention/executive** functions (trail-making, clock, abstraction) + neuro exam for **UMN/frontal-release** signs. **Confirms?** ❌ Suggests VaD profile.","- **Next Diagnostic step (Best Initial Investigation):** 🧠 **MRI brain (T1/T2/FLAIR/DWI/SWI)** → [blue]lacunes, WMH (Fazekas), microbleeds, strategic infarcts[/blue] that map to symptoms and stepwise timeline. **Confirms?** ➕ Supports.","- **Best Diagnostic Step (to secure causality/mixed etiologies):** Correlate **timeline + lesion location/burden**; add **CSF AD biomarkers or amyloid PET** if mixed AD/VaD suspected. **Confirms?** ✅ Clinico-radiologic VaD (or mixed).","- **Adjuncts:** Vascular workup (ECG for AF, carotid US/CTA/MRA, echocardiography), lipids/A1c, ambulatory BP, sleep apnea screen.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — guideline BP targets, statin per ASCVD risk, diabetes optimization, smoking cessation, Mediterranean diet, exercise.","- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic disease; **anticoagulation** for AF if indicated; **PT/OT** for gait; **cognitive rehab** (external aids, task sequencing); treat depression/apathy and **pseudobulbar affect**.","- **Gold Standard:** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension/over-sedation[/red].","**5️⃣ Full Pathophysiology Explained**","- **Small-vessel disease** (arteriolosclerosis, lipohyalinosis) and **infarcts/hemorrhages** disrupt **fronto–subcortical circuits**, producing **slowing, executive dysfunction, gait disturbance, affect/urinary changes**.","- MRI visualizes the **network disconnection** (WMH, lacunes) and **hemorrhagic markers** (microbleeds) that drive the syndrome.","- Establishing a **temporal and anatomic link** between lesions and cognitive course is central to diagnosing VaD.","**6️⃣ Symptoms — pattern recognition link to imaging**","- **Cueable memory with executive slowing** 🧩 ↔ **WMH/lacunes** in fronto-subcortical tracts.","- **Short-stepped gait & early urgency** 🚶‍♂️🚻 ↔ subcortical WM involvement.","- **Pseudobulbar affect** 😢😅 ↔ corticobulbar tract disruption.","- [purple]Pearl:[/purple] ==Suspected VaD? **MRI with DWI/FLAIR/SWI** first; then consider **AD biomarkers** if mixed disease is on the table=="]},{id:"VaD-GOLD-30007",topic:"Geriatrics • Vascular dementia — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What definitively confirms vascular dementia etiology?",stem:"An 82-year-old with stepwise cognitive decline after TIAs shows multiple lacunes and confluent periventricular WMH on MRI. Neuro exam reveals frontal release signs, mild right pronator drift, and short-stepped gait. CSF Alzheimer biomarkers are non-AD. Family asks: “What is the final, gold standard test that proves this is vascular dementia?”",options:[{key:"A",text:"MRI brain with volumetric analysis and Fazekas scoring"},{key:"B",text:"FDG-PET brain showing frontoparietal hypometabolism"},{key:"C",text:"CSF Alzheimer biomarker profile (Aβ42/40, p-tau, t-tau)"},{key:"D",text:"Neuropathology (post-mortem or, rarely, biopsy) demonstrating cerebrovascular lesions sufficient to cause the cognitive syndrome"},{key:"E",text:"Amyloid PET to exclude coexisting Alzheimer’s disease"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Gold standard = tissue diagnosis**: **Neuropathology** directly shows **cerebrovascular brain injury** (macro/microinfarcts, lacunes, microhemorrhages, small-vessel arteriolosclerosis, CAA) in patterns/severity **sufficient to explain the cognitive syndrome**.","- Clinical criteria rely on **clinico–radiologic correlation**; only pathology can **prove causality** and quantify mixed disease (e.g., AD + vascular).","- In practice this is almost always **post-mortem**; biopsy is **rare** and reserved for atypical inflammatory/neoplastic suspicions.","- [yellow]Bottom line:[/yellow] MRI/CSF/PET are **supportive**; **histopathology** is definitive. 🧠🔬","**2️⃣ Why the other options are wrong**","- **A. MRI volumetrics/Fazekas:** Best **initial** structural tool and highly supportive, but **cannot prove** etiologic sufficiency or exclude mixed disease.","- **B. FDG-PET:** Shows network hypometabolism but is **nonspecific** for vascular vs degenerative etiologies.","- **C. CSF AD biomarkers:** Helpful to **exclude AD** or identify mixed pathology, yet **do not confirm** VaD.","- **E. Amyloid PET:** Useful to judge **amyloid co-pathology** (mixed AD/VaD) but is not definitive for vascular causation.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Cognitive screen emphasizing **attention/executive** domains + full neuro exam for **UMN/frontal-release** signs. **Confirms?** ❌ Suggests VaD profile.","- **Next Diagnostic step:** 🧠 **MRI brain (T1/T2/FLAIR/DWI/SWI)** → [blue]lacunes, WMH (Fazekas), microbleeds, strategic infarcts[/blue] that map to timeline/deficits. **Confirms?** ➕ Supports VaD.","- **Best Diagnostic Step (in vivo confirmation/mixing):** **Correlate clinical course with imaging**; add **CSF AD biomarkers** or **amyloid PET** if mixed AD/VaD suspected. **Confirms?** ✅ Clinico–radiologic diagnosis.","- **Gold Standard (definitive):** 🔬 **Neuropathology** showing **vascular lesions sufficient for cognitive impairment** ± quantification of **co-pathologies** (AD, Lewy, TDP-43). **Confirms?** ✅✅ Definitive.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — BP targets, statin per ASCVD risk, diabetes optimization, smoking cessation, Mediterranean diet, exercise.","- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic disease; **anticoagulation** for AF if indicated; **PT/OT** for gait; **cognitive rehab**; treat depression/apathy and **pseudobulbar affect**.","- **Gold Standard (therapy reality):** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension/over-sedation[/red].","**5️⃣ Full Pathophysiology Explained**","- **Ischemic/hemorrhagic lesions** disrupt **fronto–subcortical circuits** → psychomotor slowing, executive dysfunction, gait/affect/urinary changes.","- **Small-vessel disease** (arteriolosclerosis, lipohyalinosis) causes **WMH**, lacunes; **microbleeds** reflect hypertensive SVD or **CAA**.","- Neuropathology quantifies **lesion burden and distribution**, establishing whether vascular injury is **sufficient** to account for dementia and how much **mixed pathology** contributes.","**6️⃣ Signs — pattern recognition link**","- **Executive slowing & cueable memory** 🧩 ↔ fronto–subcortical disconnection.","- **Gait disturbance, UMN/frontal-release signs** 🚶‍♂️✋ ↔ subcortical and corticospinal tract involvement.","- **Early urinary urgency** 🚻 ↔ descending control pathway disruption.","- [purple]Pearl:[/purple] ==MRI builds the case; **neuropathology** closes it=="]},{id:"VaD-ETIO-30008",topic:"Geriatrics • Vascular dementia — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"What’s the underlying cause in vascular dementia?",stem:"An 82-year-old with long-standing hypertension, diabetes, and hyperlipidemia has a 3-year history of stepwise cognitive decline following TIAs. MRI shows multiple lacunar infarcts in the basal ganglia and thalamus, confluent periventricular white-matter hyperintensities, and scattered microbleeds on SWI. Which underlying **etiology** best explains this presentation?",options:[{key:"A",text:"Small-vessel ischemic disease with arteriolosclerosis/lipohyalinosis causing lacunes, white-matter ischemia, and microbleeds"},{key:"B",text:"Primary amyloid-β plaques and tau tangles (Alzheimer pathology) without vascular lesions"},{key:"C",text:"α-synuclein (Lewy body) pathology leading to visual hallucinations and parkinsonism"},{key:"D",text:"Frontotemporal lobar degeneration with TDP-43 causing semantic memory loss"},{key:"E",text:"Normal-pressure hydrocephalus with impaired CSF absorption and ventriculomegaly"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** arises when **cerebrovascular lesions** are sufficient to cause the cognitive syndrome.","- The most common cause is **small-vessel disease (SVD)** due to **arteriolosclerosis/lipohyalinosis** from chronic HTN/diabetes → **lacunes** and **white-matter hyperintensities (WMH)**.","- **SWI microbleeds** reflect hypertensive SVD (deep) or CAA (lobar); here vascular risks + deep lesions favor **hypertensive SVD**.","- Clinically matches **stepwise decline** with **executive slowing/gait** from fronto–subcortical disconnection.","- [yellow]Etiology lock:[/yellow] vascular risks + lacunes/WMH + microbleeds → **small-vessel ischemic disease**. 🧠🩸","**2️⃣ Why the other options are wrong**","- **B. Alzheimer pathology:** Explains amnestic **storage** failure with hippocampal atrophy, not stepwise vascular injury (though mixed disease can coexist).","- **C. Lewy body disease:** Hallucinations, fluctuations, spontaneous parkinsonism dominate; imaging isn’t lacune/WMH/microbleed-centric.","- **D. FTLD–TDP:** Language/behavior-led syndromes (svPPA/bvFTD); not a vascular lesion model.","- **E. NPH:** Triad (magnetic gait, incontinence, cognitive slowing) with **ventriculomegaly**—not the lacune/WMH/microbleed pattern.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Cognitive screen focused on **attention/executive** (trail-making, clock, abstraction) + vascular risk inventory. **Confirms?** ❌ Suggests VaD/SVD profile.","- **Next Diagnostic step:** 🧠 **MRI brain (T1/T2/FLAIR/DWI/SWI)** → [blue]lacunes, confluent WMH (Fazekas), microbleeds[/blue]; DWI for acute/subacute hits. **Confirms?** ➕ Supports vascular etiology.","- **Best Diagnostic Step:** **Clinico–radiologic correlation** (timeline after TIAs/strokes + lesion distribution) ± **CSF AD biomarkers or amyloid PET** to assess **mixed AD/VaD**. **Confirms?** ✅ Establishes vascular causality (or mixed).","- **Adjuncts:** Vascular workup (ECG/AF, carotid US/CTA/MRA, echocardiography), lipids/A1c, ambulatory BP, sleep apnea screen.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aggressive vascular risk control[/green] — BP per guideline, statin per ASCVD risk, diabetes optimization, smoking cessation, Mediterranean diet, exercise.","- **First Line:** [green]Antiplatelet therapy[/green] for non-cardioembolic ischemia; **anticoagulation** for AF if indicated; **PT/OT** for gait; **cognitive rehab** with external aids; treat depression/apathy and **pseudobulbar affect**.","- **Gold Standard:** No cure; [green]prevent further vascular hits[/green]. Consider **cholinesterase inhibitor/memantine** for symptomatic benefit in selected VaD or **mixed AD/VaD** (modest effect). [red]Avoid hypotension/over-sedation** which worsens perfusion/cognition[/red].","**5️⃣ Full Pathophysiology Explained (Etiology focus)**","- **Chronic hypertension/diabetes** → **arteriolosclerosis** (wall thickening, lipohyalinosis) → luminal narrowing and impaired autoregulation.","- Result: **ischemic white-matter injury** (WMH), **lacunar infarcts** in deep gray/WM tracts, and **microbleeds** from fragile vessels.","- These lesions disconnect **fronto–subcortical circuits** → **psychomotor slowing, executive dysfunction, gait disturbance, pseudobulbar affect, urinary urgency**.","- **CAA** may coexist (lobar microbleeds), and **mixed AD** is common—vascular injury lowers **cognitive reserve**, unmasking degenerative pathology.","- [purple]Mnemonic:[/purple] “**HITs to small pipes → slow mind & short steps**.”","**6️⃣ Symptoms — cause → effect mapping**","- **Arteriolosclerosis → WMH/lacunes** 🧩 → **executive slowing** and **cueable memory** (retrieval deficit).","- **Deep microbleeds** ⚫ → hypertensive SVD marker; caution with antithrombotics.","- **Fronto–subcortical disconnection** 🔗 → **gait disturbance** and **pseudobulbar affect**.","- **Strategic small infarcts (thalamus/caudate)** 🎯 → disproportionate executive/attention deficits.","- [blue]Imaging–clinic link:[/blue] Lesion burden/distribution should **map to the symptoms and stepwise timeline**."]},{id:"VaD-COMP-30009",topic:"Geriatrics • Vascular dementia — Complications",difficulty:"Medium",vignetteTitle:"What high-impact complication should you anticipate in vascular dementia?",stem:"An 82-year-old with vascular dementia due to small-vessel disease (multiple lacunes, confluent periventricular WMH) and atrial fibrillation presents for follow-up. BP averages 152/88 mmHg at home, LDL 120 mg/dL, A1c 7.9%. Gait is short-stepped with two near-falls this month. He is inconsistently taking his DOAC and has missed several BP pills. Which complication is most important to anticipate and actively prevent over the next year?",options:[{key:"A",text:"Recurrent ischemic stroke causing further stepwise cognitive decline and disability"},{key:"B",text:"Early visual hallucinations requiring antipsychotics"},{key:"C",text:"Amyloid-related imaging abnormalities (ARIA) from anti-amyloid therapy"},{key:"D",text:"Serotonin syndrome due to SSRI use"},{key:"E",text:"Autoimmune encephalitis following viral illness"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Vascular dementia (VaD)** reflects accumulated **cerebrovascular injury**; the single **highest-impact future risk** is **another stroke** that accelerates disability and cognition loss.","- The vignette shows **uncontrolled vascular factors** (HTN, DM, lipids), **AF with poor anticoagulation adherence**, and **gait instability**—a perfect storm for **recurrent ischemic events**.","- Preventing **new infarcts** changes the slope of decline more than any cognitive drug in VaD; secondary prevention is the **main therapeutic lever**.","- [yellow]Clinical rule:[/yellow] In VaD, the next stroke is the biggest complication to anticipate and prevent. 🧠🩸","**2️⃣ Why the other options are wrong**","- **B (DLB feature):** Visual hallucinations point to **Lewy body dementia**, not VaD; antipsychotics risk sensitivity in DLB and are not the central VaD complication.","- **C (ARIA):** ARIA is tied to **anti-amyloid mAbs** used in biomarker-positive AD, not standard in pure VaD.","- **D (Serotonin syndrome):** Possible with polypharmacy but uncommon and not the dominant risk in VaD management planning.","- **E (Autoimmune encephalitis):** Typically **subacute, inflammatory**; not a foreseeable complication of chronic small-vessel VaD.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Quantify **vascular risk** and **adherence** → home BP log, A1c/lipids, med reconciliation, AF anticoagulation status. **Confirms?** ❌ Risk profiles the patient.","- **Next Diagnostic step:** **MRI brain (baseline for trajectory)** if not recent to document WMH/lacune burden; **carotid duplex/CTA/MRA** and **echocardiography** if large-artery or cardioembolic sources suspected. **Confirms?** ➕ Identifies stroke mechanisms.","- **Best Diagnostic Step:** Implement a **secondary stroke prevention plan** with targets (BP, LDL, A1c) and **AF anticoagulation** verification (level/adherence/contraindications). **Confirms?** ✅ Action plan addressing the preventable complication.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Tight vascular control[/green] — BP target per guideline (often <130/80 if tolerated), **high-intensity statin**, DM optimization, smoking cessation, Mediterranean diet, exercise; **fall prevention** (PT, home safety).","- **First Line:** [green]Antithrombotic strategy[/green] — **anticoagulation for AF** (DOAC preferred unless contraindicated); **single antiplatelet** for non-cardioembolic disease; avoid dual therapy unless specific indication. Adherence supports: pillboxes, caregiver oversight, pharmacy sync.","- **Gold Standard:** [green]Prevent further vascular hits[/green] via **comprehensive secondary prevention bundle** (BP, lipids, DM, AF anticoagulation, sleep apnea treatment). Consider **cholinesterase inhibitor/memantine** in selected VaD/mixed AD–VaD for modest symptomatic benefit; [red]avoid hypotension/over-sedation[/red] which worsen perfusion and falls.","**5️⃣ Full Pathophysiology Explained**","- **Small-vessel disease** (arteriolosclerosis/lipohyalinosis) plus **cardioembolism** (AF) create **recurrent ischemic insults** → additive **fronto–subcortical disconnection**.","- Each new infarct/lacune further degrades **processing speed, executive control, gait**, and continence networks → **stepwise decline**.","- Secondary prevention targets the **mechanisms of injury** (hemodynamic, thromboembolic, metabolic) rather than downstream symptoms.","**6️⃣ Complications — pattern recognition & prevention map**","- **Recurrent ischemic stroke** 🎯 → stepwise cognitive/functional losses — **primary target for prevention**.","- **Intracerebral hemorrhage** ⚠️ → consider if **microbleeds/CAA** or uncontrolled HTN; adjust antithrombotic risk.","- **Falls and fractures** 🦴 → short-stepped gait, weakness; mitigate with PT/home safety/vision review.","- **Depression/apathy & pseudobulbar affect** 😢😅 → treat to reduce disability and caregiver strain.","- **Urinary incontinence** 🚻 → behavioral/med strategies; avoid anticholinergics when possible.","- [purple]Pearl:[/purple] ==In VaD, **prevent the next vascular hit**—it’s the complication that most changes the trajectory=="]},{id:"VaD-EPI-30010",topic:"Geriatrics • Vascular dementia — Epidemiology",difficulty:"Medium",vignetteTitle:"How common is vascular dementia, and in whom?",stem:"A 79-year-old clinic asks for a brief data sheet on vascular dementia (VaD) to guide resource planning. They serve an older population with high rates of hypertension, diabetes, and stroke. They want to know how common VaD is relative to other dementias, how age and geography influence risk, and what patterns of cerebrovascular disease are typically involved.",options:[{key:"A",text:"VaD is rare (<1% of dementias) and occurs mostly in young adults without vascular risk factors"},{key:"B",text:"VaD accounts for a substantial minority of dementia cases, commonly coexisting with Alzheimer pathology; risk rises with age and vascular burden"},{key:"C",text:"VaD incidence is equal across ages and is unrelated to stroke prevalence"},{key:"D",text:"VaD is primarily a pediatric condition linked to congenital heart disease"},{key:"E",text:"VaD occurs only after large hemispheric infarcts; small-vessel disease is not epidemiologically relevant"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **VaD** represents a **substantial minority** of dementias globally and frequently appears as **mixed disease** with Alzheimer pathology.","- Prevalence and incidence **increase sharply with age**, mirroring the epidemiology of stroke and small-vessel disease.","- **Population vascular burden** (hypertension, diabetes, AF, dyslipidemia, smoking) tracks with higher VaD rates across regions.","- **Mixed AD/VaD** is common in clinic and autopsy series, explaining overlapping phenotypes and emphasizing biomarker use.","- [yellow]Planning pearl:[/yellow] Where **stroke** is common, **VaD** (and mixed dementia) will be common. 🧠🩸","**2️⃣ Why the other options are wrong**","- **A:** VaD is **not rare** and is most prevalent in **older adults with vascular risks**, not the young.","- **C:** Risk is **age- and stroke-dependent**; it is **not uniform** across ages or geographies.","- **D:** Pediatric VaD is **not** a standard entity; adult cerebrovascular disease drives VaD.","- **E:** **Small-vessel disease** (lacunes/WMH/microbleeds) is **epidemiologically central**; VaD does **not** require a massive cortical infarct.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Define clinic population **risk profile** (age distribution, HTN/DM/AF rates, stroke prevalence). **Confirms?** ❌ Frames expected VaD burden.","- **Next Diagnostic step:** Track **incident strokes/TIAs** and **MRI markers** (WMH burden, lacunes, microbleeds) in your cohort. **Confirms?** ➕ Links cerebrovascular load to cognitive outcomes.","- **Best Diagnostic Step:** Build a **mixed-dementia pathway** (MRI + cognitive profile + optional AD biomarkers) to separate **pure VaD** from **mixed AD/VaD**. **Confirms?** ✅ Better epidemiologic classification.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Clinic-level prevention bundle[/green] — BP programs, diabetes optimization, statins per ASCVD risk, smoking cessation, exercise/diet coaching.","- **First Line:** [green]Secondary stroke prevention pathways[/green] for any cerebrovascular event (antithrombotics, AF anticoagulation, carotid evaluation, OSA screening).","- **Gold Standard:** [green]Population risk reduction** + **equitable stroke care access**[/green]; cognitive rehab and caregiver support networks for established cases.","**5️⃣ Full Pathophysiology Explained (Epi lens)**","- VaD prevalence reflects **macro/microvascular brain injury** accumulation in aging populations.","- **Small-vessel disease** prevalence rises with **hypertension/diabetes** → more **WMH/lacunes** and higher VaD risk.","- **Geographic and socioeconomic gradients** (vascular risk control, stroke systems of care) modulate VaD rates across regions.","- **Mixed pathology** is frequent at autopsy, so real-world ‘VaD’ commonly rides alongside **AD changes**.","**6️⃣ Symptoms — epidemiology → phenotype link**","- Populations with heavy **WMH/lacune** burden show more **executive slowing, gait disturbance, and cueable memory**.","- Where **AF and large-artery disease** are prevalent, expect **stepwise dips** post-stroke.","- **Mixed AD/VaD** settings show blended **amnestic + executive** profiles.","- [purple]Service design tip:[/purple] ==If your clinic serves a high-stroke community, scale up **MRI access**, **BP/AF clinics**, and **post-stroke cognitive screening**=="]},{id:"VaD-RISK-30011",topic:"Geriatrics • Vascular dementia — Risk Factors",difficulty:"Medium",vignetteTitle:"Which risk factor cluster drives vascular dementia the most?",stem:"A 72-year-old with hypertension, type 2 diabetes, hyperlipidemia, atrial fibrillation, and a 40 pack-year smoking history asks what to prioritize to lower his chance of vascular dementia (VaD). He has mild white-matter hyperintensities on MRI but no prior stroke. Which risk factor set contributes most to VaD risk and is the highest-yield target for prevention?",options:[{key:"A",text:"Chronic hypertension, diabetes, dyslipidemia, smoking, and atrial fibrillation (vascular risk cluster)"},{key:"B",text:"Late-life bilingualism and high education (cognitive reserve)"},{key:"C",text:"APOE ε4 genotype and increasing age"},{key:"D",text:"Gluten sensitivity and low vitamin C intake"},{key:"E",text:"High coffee consumption and cold weather exposure"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **VaD** results from **cerebrovascular injury**; the dominant, modifiable drivers are the **vascular risk cluster**: **hypertension, diabetes, dyslipidemia, smoking, and atrial fibrillation**.","- These factors fuel **small-vessel disease** (arteriolosclerosis → WMH/lacunes/microbleeds) and **macrovascular events** (embolic/large-artery strokes).","- Treating the cluster sharply lowers **stroke incidence** and **white-matter disease progression**, shifting VaD trajectory. [green]Risk control = brain protection[/green].","- [yellow]High-yield prevention focus[/yellow]: BP control, glucose/lipid optimization, **smoking cessation**, and **anticoagulation for AF** when indicated. 🧠🩸","**2️⃣ Why the other options are wrong**","- **B. Cognitive reserve:** Protective modifier, not a **primary vascular driver**; useful but not the main lever for VaD risk.","- **C. APOE ε4 & age:** Important **nonmodifiable** risks (and stronger for AD than pure VaD); they guide counseling, not actionables.","- **D. Gluten/low vitamin C:** Not established determinants of VaD risk; **low-yield** relative to vascular control.","- **E. Coffee/cold exposure:** Associations are inconsistent/weak; neither is a core, targetable VaD risk factor.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Vascular risk inventory → **ambulatory/home BP**, A1c/fasting glucose, **lipids**, smoking status, **AF screening** (ECG ± ambulatory), BMI, sleep apnea screen. **Confirms?** ❌ Stratifies modifiable risk.","- **Next Diagnostic step:** 🧠 **MRI brain** (FLAIR/SWI) baseline to quantify **WMH/lacunes/microbleeds**; carotid US/CTA/MRA and echocardiography if mechanism suspected. **Confirms?** ➕ Maps current cerebrovascular burden.","- **Best Diagnostic Step:** Establish a **personalized prevention plan** with numeric targets (BP, LDL, A1c) and **AF anticoagulation** suitability; use **adherence checks** and pharmacist review. **Confirms?** ✅ Operationalizes risk reduction.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]BP control[/green] to guideline targets (often **<130/80** if tolerated); **smoking cessation** (counseling + NRT/varenicline), Mediterranean-style diet, **150–300 min/wk aerobic exercise**.","- **First Line:** [green]High-intensity statin** per ASCVD risk[/green]; **A1c** individualized (~<7–7.5% for most older adults); **anticoagulation for AF** with DOAC unless contraindicated; treat **OSA** (CPAP).","- **Gold Standard:** [green]Comprehensive vascular bundle** + adherence supports[/green] (blister packs, reminders, caregiver oversight). [red]Avoid hypotension/over-sedation[/red] which worsens perfusion and falls.","**5️⃣ Full Pathophysiology Explained**","- **Hypertension/diabetes/dyslipidemia** → endothelial dysfunction, **arteriolosclerosis**, BBB injury → **WMH/lacunes** and slowed networks.","- **Smoking** → oxidative stress, inflammation, thrombosis risk → both SVD and macrovascular events.","- **Atrial fibrillation** → **cardioembolism** to strategic territories (thalamus, cortex) → stepwise cognitive drops.","- Cumulative lesions disconnect **fronto–subcortical circuits** → **executive slowing, gait changes, pseudobulbar affect, urinary urgency**.","- [blue]Concept link:[/blue] fewer vascular hits → slower lesion accrual → lower VaD probability/severity.","**6️⃣ Symptoms — risk → phenotype mapping**","- **Chronic HTN/SVD** 🩺 → **psychomotor slowing, cueable memory**, WMH on MRI.","- **AF/cardioembolism** ❤️ → **stepwise dips** after infarcts; focal signs may accrue.","- **Smoking + dyslipidemia** 🚬🧪 → atherosclerosis → large/small infarcts; faster disability.","- **Diabetes** 🍬 → microvascular injury → WM disconnection → executive dysfunction.","- [purple]Pearl:[/purple] ==Tackle **HTN, DM, lipids, smoking, AF**—they are the big levers that move VaD risk=="]}];function Fb(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const Vb=/^[0-9+\-*/().\s^%]*$/;function _b(o){if(!Vb.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function Yn({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function qb(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function Ub(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(_b(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function Wb(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Qb({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Yn,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=it[w].id,f=y[g],k=f?f===it[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:it[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:it[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:it[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function $b({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[it[A].id]===it[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:it[j],chosen:d[it[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(Yn,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"Nice — no incorrect answers 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function Kb(){const o=Vt(),r=Wb(),[d,c]=p.useState(it.map((v,m)=>m)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=it[d[g]],ie=it.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const v=ee.current;if(!v)return;const m=window.getSelection&&window.getSelection();if(!(!m||m.rangeCount===0))try{const C=m.getRangeAt(0);if(!v.contains(C.commonAncestorContainer)||String(C).trim().length===0)return;const I=document.createElement("mark");I.className="bg-yellow-200 rounded px-0.5",C.surroundContents(I),m.removeAllRanges()}catch{const C=v.getAttribute("contenteditable");v.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),C!==null?v.setAttribute("contenteditable",C):v.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const v=()=>T();return document.addEventListener("mouseup",v),()=>document.removeEventListener("mouseup",v)},[_]);const U=()=>{const v=ee.current;v&&v.querySelectorAll("mark").forEach(m=>{const C=m.parentNode;for(;m.firstChild;)C.insertBefore(m.firstChild,m);C.removeChild(m)})},B=v=>{const m=v==="random"?Fb(it.map((C,I)=>I)):it.map((C,I)=>I);c(m),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const v=m=>{m.key==="ArrowRight"&&g<ie-1&&f(C=>C+1),m.key==="ArrowLeft"&&g>0&&f(C=>C-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,ie]);const O=()=>A(v=>({...v,[R.id]:!0})),N=()=>{g>=ie-1||f(m=>m+1)},V=()=>g>0&&f(v=>v-1),M=g===ie-1&&!!j[R.id];return p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M]),p.useMemo(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)},[se,j,g]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(v=>!v),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((v,m)=>{const C=it[v],I=k[C.id],W=I?I===C.correct?"correct":"incorrect":"unanswered",ne=m===g?"ring-2 ring-purple-300":W==="correct"?"ring-2 ring-emerald-300":W==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(m),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${ne}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",m+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:C.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:C.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:C.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${W==="correct"?"bg-emerald-500":W==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},C.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(v=>{const m=k[R.id],C=!!j[R.id],I=v.key===R.correct,W=C?I?"border-emerald-300 bg-emerald-50":m===v.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${W}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:m===v.key,onChange:()=>E(ne=>({...ne,[R.id]:v.key})),disabled:C}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[v.key,"."]})," ",v.text]})]},v.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),g===ie-1&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(v=>({...v,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((v,m)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Gb,{text:v})},m))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(v=>!v),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(Yn,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(qb,{})}),i.jsx(Yn,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(Ub,{})}),i.jsx(Qb,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx($b,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)})(),jumpTo:v=>f(v)}),i.jsx(Xb,{open:!h,onPick:B})]})}function Xb({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(Yn,{open:o,onClose:()=>{},title:"Start Vascular Dementia Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function Yb({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const at=[{id:"DLB-DEF-50001",topic:"Geriatrics • Dementia with Lewy bodies — Definition & Core Concept",difficulty:"Medium",vignetteTitle:"What exactly is dementia with Lewy bodies (DLB)?",stem:"A 74-year-old retired engineer develops cognitive decline over 12 months characterized by fluctuating attention, recurrent well-formed visual hallucinations of small animals, and new spontaneous parkinsonism (bradykinesia, rigidity). His wife reports dream enactment behaviors for several years prior. On testing, visuospatial and attention deficits are prominent with relatively preserved naming early. Which statement best captures the **core definition** of dementia with Lewy bodies?",options:[{key:"A",text:"A neurodegenerative dementia defined by amyloid-β plaques and tau tangles causing hippocampal-predominant amnestic syndrome"},{key:"B",text:"A chronic psychotic disorder with fixed delusions and hallucinations without changes in attention or arousal"},{key:"C",text:"A dementia syndrome characterized by fluctuating cognition, recurrent well-formed visual hallucinations, spontaneous parkinsonism, and often REM sleep behavior disorder; supported by biomarkers such as reduced striatal DAT uptake"},{key:"D",text:"A vascular cognitive impairment due to lacunes and white-matter disease with executive slowing and gait disturbance"},{key:"E",text:"A language-led neurodegeneration with progressive loss of word meaning and anterior temporal atrophy"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **DLB** is a **synucleinopathy** presenting with **dementia** plus **core clinical features**: [yellow]==fluctuating cognition/attention==[/yellow], **recurrent well-formed visual hallucinations**, **spontaneous parkinsonism**, and frequently **REM sleep behavior disorder (RBD)**. 🧠👁️🛌","- Supportive **biomarkers** include [blue]**reduced striatal dopamine transporter (DAT) uptake** on DaTscan[/blue], [blue]**low cardiac MIBG uptake**[/blue], [blue]**PSG-confirmed REM sleep without atonia**[/blue], and **occipital hypometabolism with a “cingulate island sign”** on FDG-PET.","- **Relative medial temporal sparing** on MRI (vs Alzheimer’s) and **early visuospatial/attention deficits** fit DLB.","- [red]**Severe antipsychotic sensitivity**[/red] is characteristic; if antipsychotics are unavoidable, **quetiapine/clozapine** at low dose are preferred.","- [purple]Rule of 1 year:[/purple] Dementia **before or within 1 year** of parkinsonism → **DLB**; dementia **after >1 year** of established Parkinson disease → **PDD**.","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s):** Describes **amyloid/tau** amnestic dementia with **hippocampal** atrophy; lacks DLB’s **fluctuations, visual hallucinations, RBD, and DAT loss**.","- **B (Primary psychosis):** Attention/arousal typically **intact**; no neurodegenerative parkinsonism or RBD link.","- **D (Vascular dementia):** **Stepwise** course, **executive/gait** prominence, WMH/lacunes on MRI—not hallucination-fluctuation-RBD cluster.","- **E (svPPA):** Language-led **semantic loss** with anterior temporal atrophy; not a hallucination-parkinsonism dementia.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** Cognitive screen emphasizing **attention/visuospatial** domains; focused history for **fluctuations**, **formed visual hallucinations**, **RBD**; exam for **spontaneous parkinsonism**. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step →** **MRI brain** (often nonspecific; **relative medial temporal sparing**) to exclude structural mimics. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (indicative biomarkers) →** **DaTscan** showing [blue]reduced striatal DAT uptake[/blue] **or** **PSG** confirming **REM sleep without atonia**; consider **FDG-PET (cingulate island sign)** or **cardiac MIBG** where available. **Confirms?** ✅ Strongly supports DLB.","- **Adjuncts →** Consider **CSF/PET for AD** pathology to gauge **mixed DLB+AD**, which is common and guides counseling/therapy.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education + safety[/green] (driving, falls, meds), optimize **sleep/light**, treat **hearing/vision**.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine, donepezil)[/green] for cognition/behavior; **melatonin** (± low-dose clonazepam) for **RBD**; **low-dose levodopa** cautiously for parkinsonism.","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics and high-potency D2 blockers**[/red]; if psychosis endangers safety, use **quetiapine/clozapine** minimal effective dose. [green]Treat orthostatic hypotension, constipation, urinary dysfunction[/green].","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregates (Lewy bodies/neurites) spread from **brainstem/limbic** to **neocortex**, disrupting **cholinergic** and **dopaminergic** networks.","- Network effects: **attention fluctuations** (frontoparietal), **visual hallucinations** (occipital/ventral stream + cholinergic loss), **parkinsonism** (nigrostriatal), **RBD** (pontine REM atonia circuitry).","- Imaging mirrors biology: **occipital hypometabolism**, **DAT loss**, **relative MTL sparing**, **low MIBG**.","**6️⃣ Symptoms — core pattern recognition**","- **Fluctuating cognition/attention** 🎚️ (good hours ⇄ bad hours).","- **Well-formed visual hallucinations** 👁️🦋 (people/animals).","- **Spontaneous parkinsonism** 🚶‍♂️ (bradykinesia/rigidity ± tremor).","- **RBD** 🛌🥊 (dream enactment) often **precedes dementia**.","- [purple]Pearl:[/purple] ==Hallucinations + fluctuations + parkinsonism + RBD → **think DLB**; check a **DaTscan**=="]},{id:"DLB-SX-50002",topic:"Geriatrics • Dementia with Lewy bodies — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the Lewy pattern: fluctuations, hallucinations, parkinsonism, and RBD",stem:"A 73-year-old man has 10 months of cognitive change. Family reports striking hour-to-hour **fluctuations**: some mornings he is sharp, by evening he’s drowsy and inattentive. He describes **well-formed visual hallucinations** of children and small animals. His wife notes several years of **dream enactment** (punching/kicking during sleep). Over the last 6 months he has developed **slowness and stiffness** with a softer voice and reduced arm swing. Memory is variable but naming is relatively preserved early; visuospatial tasks are poor. Which clinical constellation best identifies the underlying syndrome?",options:[{key:"A",text:"Gradual, memory-first decline with poor cueing and hippocampal-predominant atrophy"},{key:"B",text:"Stepwise executive slowing with early gait disturbance after TIAs and lacunes"},{key:"C",text:"Early behavioral disinhibition and hyperorality with relative memory sparing"},{key:"D",text:"Fluctuating cognition/attention with well-formed visual hallucinations, spontaneous parkinsonism, and REM sleep behavior disorder; early visuospatial/attention deficits"},{key:"E",text:"Nonfluent agrammatic speech with apraxia of speech and left IFG atrophy"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Core symptom tetrad of DLB**: **fluctuations** in cognition/attention 🎚️, **well-formed visual hallucinations** 👁️, **spontaneous parkinsonism** 🚶‍♂️, and **REM sleep behavior disorder (RBD)** 🛌🥊.","- **Visuospatial and attention deficits** appear early, while **episodic memory** may be relatively preserved initially (compared with Alzheimer’s).","- The history of **RBD years before dementia** is characteristic for a **synucleinopathy** trajectory.","- **Spontaneous** (not drug-induced) parkinsonism plus hallucinations and fluctuations tightly match DLB rather than other dementias.","- [yellow]Pattern lock:[/yellow] hallucinations + fluctuations + parkinsonism + RBD → **DLB**.","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s):** Memory-first amnestic syndrome with **poor cueing** and hippocampal atrophy; lacks early hallucinations/RBD/fluctuations.","- **B (Vascular):** **Stepwise** course with executive/gait features following TIAs; hallucinations and RBD are not core.","- **C (bvFTD):** **Behavioral disinhibition/apathy** and dietary changes dominate; hallucinations and parkinsonism are not typical early.","- **E (nfvPPA):** Language-output disorder (agrammatism/apraxia of speech) rather than hallucination–fluctuation syndrome.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** Focused history for **fluctuations, hallucinations, RBD**; bedside cognitive screen emphasizing **attention/visuospatial** tasks. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step →** 🧠 **MRI brain** to exclude mimics; may show **relative medial temporal sparing**. **Confirms?** ➕ Supportive only.","- **Best Diagnostic Step (indicative biomarkers) →** **DaTscan (I-123 FP-CIT)** showing [blue]**reduced striatal DAT uptake**[/blue] **or** polysomnography with **REM sleep without atonia**; FDG-PET may reveal **occipital hypometabolism** with **cingulate island sign**. **Confirms?** ✅ Strongly supports DLB.","- **Adjuncts →** Consider **cardiac MIBG** (reduced uptake) and **CSF/PET for AD** to assess for mixed DLB+AD biology.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education/safety[/green] (falls, driving), optimize **hearing/vision**, daytime light/sleep hygiene, treat constipation/orthostasis.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± cautious clonazepam) for RBD; **low-dose levodopa** for parkinsonism (watch psychosis).","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics and high-potency D2 blockers**[/red] due to **severe sensitivity** (rigidity, NMS, death). If psychosis threatens safety, use **quetiapine/clozapine** at **lowest effective dose**; manage triggers (infection, meds).","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregation (Lewy bodies/neurites) spreads from **brainstem** → **limbic** → **neocortex**, disrupting **cholinergic** and **dopaminergic** networks.","- Network effects: **attention fluctuations** (frontoparietal), **visual hallucinations** (occipital/ventral stream + cholinergic loss), **parkinsonism** (nigrostriatal), **RBD** (pontine REM atonia circuitry).","- [blue]Imaging/biomarkers[/blue] mirror biology: **DAT loss**, **occipital hypometabolism**, **low cardiac MIBG**, **relative medial temporal sparing**.","**6️⃣ Symptoms — Clinical Presentation map**","- **Fluctuating cognition/attention** (good hours ⇄ bad hours) 🎚️.","- **Well-formed visual hallucinations** (people/animals/scenes) 👁️🦋.","- **Spontaneous parkinsonism** (bradykinesia/rigidity ± tremor) 🚶‍♂️.","- **RBD** with dream enactment 🛌🥊 (often precedes dementia).","- **Early visuospatial/attention deficits** with relatively preserved naming early.","- [purple]Pearl:[/purple] ==If hallucinations and parkinsonism arrive early with cognitive **fluctuations**, think **DLB** and check a **DaTscan**=="]},{id:"DLB-SIGNS-50003",topic:"Geriatrics • Dementia with Lewy bodies — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to dementia with Lewy bodies?",stem:"A 75-year-old with 1 year of cognitive change shows variable alertness during the visit: at times engaged, later drowsy and inattentive. He miscopies intersecting pentagons and produces a disorganized clock with misplaced numbers. Naming is largely intact. Neuro exam reveals hypomimia, bradykinesia with reduced arm swing (L≈R), mild rigidity, and postural instability; rest tremor is minimal. Orthostatic vitals drop 28/14 mmHg without compensatory tachycardia. His spouse reports vivid dream enactment. Which **examination sign cluster** best fits the underlying syndrome?",options:[{key:"A",text:"Stable alertness with poor delayed recall despite cues; nonfocal neuro exam"},{key:"B",text:"Stepwise executive dysfunction with spastic hemiparesis and Babinski sign after TIAs"},{key:"C",text:"Early behavioral disinhibition and hyperorality with frontal release signs and fluent speech"},{key:"D",text:"Fluctuating attention/alertness during the exam, visuospatial/constructional errors (clock/pentagons), symmetric parkinsonism (bradykinesia/rigidity > tremor), and autonomic failure (orthostatic hypotension); naming relatively preserved early"},{key:"E",text:"Nonfluent agrammatic speech with apraxia of speech and left inferior frontal weakness"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Fluctuations on exam** (alert ⇄ drowsy, variable attention) are a **core clinical feature** of DLB and may be witnessed within a single visit.","- **Visuospatial/constructional impairment** (clock, intersecting pentagons) out of proportion to naming/semantic loss is typical early.","- **Spontaneous parkinsonism** that is **symmetric, axial-predominant**, with **bradykinesia/rigidity > tremor**, plus **postural instability**, fits DLB rather than pure PD early tremor-dominant patterns.","- **Autonomic dysfunction** such as **orthostatic hypotension** commonly accompanies Lewy body disorders and supports the syndrome.","- [yellow]Pattern lock:[/yellow] **fluctuations + visuospatial errors + symmetric parkinsonism + autonomic failure** → **DLB**. 👁️🎚️🚶‍♂️","**2️⃣ Why the other options are wrong**","- **A (Alzheimer’s signs):** Stable alertness with **storage failure** (poor cueing) and nonfocal exam → hippocampal pattern, not DLB’s fluctuation–parkinsonism phenotype.","- **B (Vascular pattern):** **Stepwise** deficits with **UMN signs** after TIAs suggest VaD, not DLB; DLB lacks pyramidal signs as a rule.","- **C (bvFTD):** **Behavioral disinhibition/hyperorality** with frontal signs and early language/social changes — not the hallucination–fluctuation–parkinsonism cluster.","- **E (nfvPPA):** **Nonfluent agrammatism**/apraxia of speech localizes to left IFG; DLB is not a primary language-output disorder.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside cognitive testing emphasizing **attention/visuospatial** tasks (clock/pentagons, trail-making) + document **fluctuations**, **parkinsonism**, and **orthostatics**. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step:** 🧠 **MRI brain** to exclude structural mimics; may show **relative medial temporal sparing**. **Confirms?** ➕ Supportive but not diagnostic.","- **Best Diagnostic Step (indicative biomarkers):** **DaTscan (I-123 FP-CIT)** showing [blue]**reduced striatal DAT uptake**[/blue] **or** **polysomnography** confirming **REM sleep without atonia**. Consider **FDG-PET** (occipital hypometabolism with **cingulate island sign**) or **cardiac MIBG** (reduced uptake) where available. **Confirms?** ✅ Strongly supports DLB.","- **Adjuncts:** **CSF/PET for AD** pathology to assess **mixed DLB+AD**; review meds for **antipsychotic sensitivity risk**.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & safety[/green] (falls, driving), optimize **hearing/vision**, treat constipation/orthostasis, sleep hygiene.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± cautious clonazepam) for **RBD**; **low-dose levodopa** for parkinsonism with careful psychosis monitoring.","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics/high-potency D2 blockers**[/red] due to **severe sensitivity** (rigidity, NMS). If unavoidable for dangerous psychosis, use **quetiapine/clozapine** at the **lowest effective dose**.","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregates (Lewy bodies/neurites) disrupt **dopaminergic** (nigrostriatal) and **cholinergic** (basal forebrain) systems.","- Network impact: **fluctuations** (frontoparietal/ascending arousal), **visuoperceptual dysfunction** (occipital/ventral stream + cholinergic loss), **parkinsonism** (nigrostriatal), **autonomic failure** (peripheral/central autonomic circuits).","- [blue]Imaging tie-ins[/blue]: **DAT loss**, **occipital hypometabolism**, **relative medial temporal sparing**; **MIBG** reduction supports Lewy pathology.","**6️⃣ Signs — Examination Findings map**","- **Fluctuating attention/alertness** 🎚️ → variable digit span, inconsistent engagement within the same visit.","- **Visuospatial/constructional errors** 🕒🔺 → abnormal clock and pentagons with relatively preserved naming early.","- **Symmetric parkinsonism** 🚶‍♂️ → bradykinesia/rigidity, axial/postural instability, **minimal rest tremor**.","- **Autonomic failure** 📉 → **orthostatic hypotension**, constipation, urinary dysfunction.","- **Hypersensitivity to antipsychotics** ⚠️ → history or trial can unmask severe rigidity/confusion; treat with extreme caution.","- [purple]Pearl:[/purple] ==During the same exam: if the patient **waxes/wanes**, draws a **wild clock**, and shows **symmetric bradykinesia** with **orthostatic drops**, aim your differential at **DLB**=="]},{id:"DLB-REDFLAGS-50004",topic:"Geriatrics • Dementia with Lewy bodies — Red Flags",difficulty:"Medium",vignetteTitle:"When it’s not typical Lewy: spot the red flags",stem:"A 76-year-old with suspected DLB (fluctuations, visual hallucinations, mild parkinsonism) suddenly worsens over 48 hours with severe headache, 38.7°C fever, and new right arm weakness. Staff report vomiting and photophobia. He takes warfarin for atrial fibrillation. Which feature set most strongly signals a RED FLAG requiring emergent evaluation rather than routine DLB workup?",options:[{key:"A",text:"Gradual visuospatial decline with well-formed visual hallucinations and dream enactment over a year"},{key:"B",text:"Day-to-day fluctuations in attention and alertness without systemic symptoms"},{key:"C",text:"Acute/subacute deterioration with fever, severe headache, meningism, vomiting, and a new focal neurologic deficit in a patient on anticoagulation"},{key:"D",text:"Mild antipsychotic sensitivity (confusion after a single dose of haloperidol) that improves when stopped"},{key:"E",text:"Progressive orthostatic hypotension and constipation over months"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **DLB** evolves over **months–years**, not hours–days. The cluster of **fever, severe headache, meningism, vomiting, and focal deficit** suggests **CNS infection, intracranial hemorrhage, mass effect, venous thrombosis, or stroke**.","- **Anticoagulation** raises concern for **intracranial hemorrhage**; a **new focal deficit** demands **time-critical imaging**.","- This presentation warrants an **emergency pathway** (CT/MRI ± LP/EEG), not outpatient biomarker testing for DLB.","- [yellow]Rule of thumb:[/yellow] **FAST + HOT + FOCAL + PRESSURE + ANTICOAG** → escalate now. 🚑","**2️⃣ Why the other options are wrong**","- **A:** Classic DLB features (hallucinations, RBD, visuospatial deficits) over **a year**—not a red-flag emergency.","- **B:** **Fluctuations** are a **core DLB feature** and, alone, are not dangerous signals.","- **D:** **Antipsychotic sensitivity** is characteristic of DLB; it guides medication choice but, once reversed, is not an emergency red flag by itself.","- **E:** **Autonomic dysfunction** (orthostasis, constipation) commonly accompanies synucleinopathies; manage but not emergent.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** [red]Stabilize ABCs[/red]; fingerstick glucose; focused neuro exam. **Confirms?** ❌ Safety first.","- **Next Diagnostic step:** **Urgent non-contrast head CT** (rule out ICH/mass) → **CTA head/neck** if stroke suspected; then **MRI brain with/without contrast** ± **MRV/CTV** for venous thrombosis. **Confirms?** ➕ Identifies structural/time-critical causes.","- **Best Diagnostic Step:** If imaging excludes mass effect, perform **lumbar puncture** (CSF cell count, glucose/protein, culture, HSV/VZV PCR) when infection/inflammation suspected; **EEG** if seizure/NCSE possible. **Confirms?** ✅ Etiologic diagnosis.","- **Adjuncts:** CBC, CMP, ESR/CRP, blood cultures; **INR** (on warfarin); troponin if indicated.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat immediately reversible threats[/green] — oxygenation, IV fluids, **empiric IV antibiotics + acyclovir** for suspected meningitis/encephalitis; **reverse anticoagulation** for ICH; activate **stroke pathway** when appropriate; manage ICP (head elevation, targeted hyperosmolar therapy per protocol).","- **First Line (once stable):** Begin **delirium-prevention bundle** (orientation, sensory aids, mobilize, sleep hygiene); discontinue **deliriogenic meds**.","- **Gold Standard (DLB context):** For persistent psychosis after stabilization, **avoid high-potency D2 antipsychotics**; if necessary for safety, use **quetiapine/clozapine** at the **lowest effective dose**. Treat **RBD** (melatonin) and **parkinsonism** (low-dose levodopa) cautiously.","**5️⃣ Full Pathophysiology Explained (why these are red flags)**","- **Infection/hemorrhage/ischemia** cause **abrupt network failure** with **systemic signs** (fever) or **pressure signs** (headache/vomiting) and **focal deficits**—patterns not explained by synucleinopathy progression.","- DLB’s biology (α-synuclein spread with cholinergic/dopaminergic loss) yields **fluctuations/hallucinations/parkinsonism** chronically, but **not** meningism, high fevers, or thunderclap headaches.","- **Anticoagulation** lowers the threshold for catastrophic bleeding—treat as **time-critical**.","**6️⃣ Red-flag checklist — escalate immediately when you see…**","- **Focal neurologic deficit** (aphasia, hemiparesis, field cut) or **new seizure/status**.","- **Fever** with **neck stiffness/photophobia** or **immunosuppression**.","- **Sudden severe headache**, **projectile vomiting**, **papilledema**, or **recent head trauma/anticoagulation**.","- **Profound hypoxia/hypotension**, **glucose extremes**, or suspected **toxin exposure**.","- [blue]Presence of any → skip routine DLB workup; proceed to **emergent imaging + CSF/EEG** and cause-specific therapy[/blue]."]},{id:"DLB-DDX-50005",topic:"Geriatrics • Dementia with Lewy bodies — Differential Diagnosis",difficulty:"Medium",vignetteTitle:"Hallucinations, fluctuations, parkinsonism: which diagnosis fits best?",stem:"A 74-year-old man has 14 months of cognitive change with striking hour-to-hour fluctuations in attention. He reports well-formed visual hallucinations of people and small animals. His spouse describes dream enactment for several years. Exam shows bradykinesia and rigidity (symmetric, minimal rest tremor). MoCA reveals impaired attention and visuospatial construction with relatively preserved naming and delayed recall with cues. MRI shows relative medial temporal sparing. Which diagnosis best explains this presentation?",options:[{key:"A",text:"Alzheimer’s disease (amnestic presentation)"},{key:"B",text:"Dementia with Lewy bodies (DLB)"},{key:"C",text:"Parkinson disease dementia (PDD)"},{key:"D",text:"Behavioral-variant frontotemporal dementia (bvFTD)"},{key:"E",text:"Primary psychotic disorder"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Core DLB tetrad** present: **fluctuating cognition/attention**, **well-formed visual hallucinations**, **spontaneous parkinsonism**, and history of **REM sleep behavior disorder (RBD)** 🛌🥊.","- **Neuropsych profile**: early **visuospatial/attention** deficits with relatively **preserved naming/episodic recall** (with cues) fits DLB > AD.","- **Timing rule**: Dementia **before or within 1 year** of parkinsonism favors **DLB** (vs PDD).","- **Imaging**: **Relative medial temporal sparing** supports non-AD pattern; RBD history points to **synucleinopathy**.","- [yellow]Pattern lock:[/yellow] hallucinations + fluctuations + parkinsonism + RBD → **DLB**. 👁️🎚️🚶‍♂️","**2️⃣ Why the other options are wrong**","- **A. Alzheimer’s disease:** **Memory-first** syndrome with **poor cueing** and hippocampal-predominant atrophy; early hallucinations/RBD/fluctuations are atypical.","- **C. Parkinson disease dementia (PDD):** Requires **>1 year** of well-established Parkinson disease **before** dementia; here, cognitive decline and parkinsonism are near-synchronous.","- **D. bvFTD:** Early **behavior/personality** change, disinhibition/apathy, hyperorality; hallucinations/fluctuations/RBD not core; parkinsonism less symmetric early.","- **E. Primary psychosis:** Attention/level of consciousness typically **stable**; lacks **parkinsonism** and **RBD** and the age profile is atypical for first-episode.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Focused history for **fluctuations, hallucinations, RBD**; bedside cognitive screen emphasizing **attention/visuospatial** tasks; exam for **spontaneous parkinsonism** and **autonomic signs**. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step:** 🧠 **MRI brain** to exclude structural mimics; look for **relative medial temporal sparing**. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (indicative biomarkers):** **DaTscan (I-123 FP-CIT)** showing [blue]**reduced striatal DAT uptake**[/blue] **or** **polysomnography** confirming **REM sleep without atonia**; FDG-PET may show **occipital hypometabolism** with **cingulate island sign**; **cardiac MIBG** reduced uptake where available. **Confirms?** ✅ Strongly supports DLB.","- **Adjuncts:** Consider **CSF Aβ/tau or amyloid/tau PET** to quantify **mixed AD** co-pathology; review meds for **antipsychotic sensitivity** risk.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & safety[/green] (falls, driving), optimize **hearing/vision**, sleep hygiene; treat **orthostasis/constipation**.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± low-dose clonazepam) for **RBD**; **low-dose levodopa** cautiously for parkinsonism (monitor psychosis).","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics and high-potency D2 blockers**[/red] due to **severe sensitivity**; if psychosis endangers safety, use **quetiapine/clozapine** at **lowest effective dose**.","**5️⃣ Full Pathophysiology Explained (DDx focus)**","- **DLB:** **α-synuclein** aggregates disrupt **cholinergic** and **dopaminergic** systems → **fluctuations**, **visual hallucinations**, **parkinsonism**, **RBD**.","- **AD:** **Aβ/tau** pathology → hippocampal storage failure → amnestic syndrome without early hallucination/RBD signature.","- **PDD:** Same synuclein biology but **temporal sequence reversed** (motor → then dementia).","- **bvFTD:** **TDP-43/tau** frontoinsular degeneration → behavioral/executive syndrome, not hallucination–fluctuation.","- **Psychosis:** Dopaminergic dysregulation with **intact arousal/attention** and no neurodegenerative motor/autonomic features.","**6️⃣ Symptoms — pattern recognition for DDx**","- **DLB:** Fluctuations, visual hallucinations, **symmetric parkinsonism**, **RBD**, visuospatial/attention deficits.","- **AD:** Memory-first, poor cueing, hippocampal atrophy; hallucinations late/atypical early.","- **PDD:** Years of PD then dementia; motor signs long precede cognitive decline.","- **bvFTD:** Disinhibition/apathy, hyperorality, loss of empathy; frontal/insular atrophy.","- **Psychosis:** Hallucinations/delusions with steady attention/awareness; no RBD/parkinsonism.","- [purple]Pearl:[/purple] ==If cognition fluctuates and animals walk through the living room while the patient has symmetric bradykinesia—and RBD history—**DLB** tops the list=="]},{id:"DLB-INV-50006",topic:"Geriatrics • Dementia with Lewy bodies — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test when you suspect dementia with Lewy bodies",stem:"A 74-year-old with 1 year of fluctuating cognition, well-formed visual hallucinations, and spontaneous parkinsonism presents for evaluation. Spouse reports years of dream enactment. Bedside testing shows impaired attention/visuospatial tasks with relatively preserved naming and delayed recall with cues. What is the **best initial investigation**?",options:[{key:"A",text:"DaTscan (I-123 FP-CIT) to assess striatal dopamine transporter uptake"},{key:"B",text:"Overnight polysomnography to document REM sleep without atonia"},{key:"C",text:"MRI brain (structural) to exclude mimics and assess relative medial temporal sparing"},{key:"D",text:"FDG-PET for occipital hypometabolism with cingulate island sign"},{key:"E",text:"Cardiac MIBG scintigraphy to assess sympathetic denervation"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **MRI brain** is the **best initial investigation** because it **rules out structural mimics** (tumor, subdural, NPH, strategic strokes) and gives supportive clues (often **relative medial temporal sparing** in DLB).","- Structural imaging is the first stop in *any* new dementia workup to ensure you’re not missing a **treatable lesion** or a vascular burden that redirects the diagnosis.","- After MRI, you can pursue **indicative biomarkers** if clinical uncertainty remains.","- [green]Practical win:[/green] One scan aligns safety, differential-wide triage, and pattern support. 🧠🖥️","**2️⃣ Why the other options are wrong**","- **A. DaTscan:** Highly supportive for **DLB/PDD** (reduced striatal DAT) but is **not first-line**—use after structural causes are excluded.","- **B. Polysomnography:** Confirms **RBD**, which supports synucleinopathy, but **doesn’t exclude structural mimics**; do after MRI if needed.","- **D. FDG-PET:** Can show **occipital hypometabolism** with a **cingulate island sign** but is a **secondary metabolic study**.","- **E. Cardiac MIBG:** Supportive where available, yet **ancillary** and not the first step in a standard diagnostic pathway.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Focused history for **fluctuations, formed visual hallucinations, RBD**; exam for **spontaneous parkinsonism**; bedside screen emphasizing **attention/visuospatial** tasks. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step (Best Initial Investigation):** 🧠 **MRI brain (structural)** → [blue]exclude mass/subdural/NPH/strategic stroke; look for relative medial temporal sparing[/blue]. **Confirms?** ➕ Supportive, rules out mimics.","- **Best Diagnostic Step (indicative biomarkers):** **DaTscan** (↓ striatal DAT) **or** **PSG** (REM sleep without atonia); consider **FDG-PET** or **cardiac MIBG** depending on access. **Confirms?** ✅ Strongly supports DLB.","- **Adjuncts:** **CSF/PET for AD** biology to quantify **mixed DLB+AD**; autonomic testing if orthostasis prominent; medication review for **antipsychotic sensitivity** risk.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & safety[/green] (falls, driving), optimize **hearing/vision**, sleep hygiene, treat **orthostasis/constipation**.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± cautious clonazepam) for **RBD**; **low-dose levodopa** carefully for parkinsonism.","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics/high-potency D2 blockers**[/red] due to **severe sensitivity**; if psychosis threatens safety, **quetiapine/clozapine** at **lowest effective dose**.","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** pathology (Lewy bodies/neurites) disrupts **dopaminergic** (nigrostriatal) and **cholinergic** (basal forebrain) systems.","- Network effects produce **fluctuations**, **visual hallucinations**, **parkinsonism**, and **RBD**; imaging/biomarkers (DAT loss, occipital hypometabolism, low MIBG) mirror this biology.","- MRI’s role is **gatekeeping**—it doesn’t prove DLB but ensures the syndrome isn’t a masquerader.","**6️⃣ Symptoms — pattern recognition link to imaging**","- **Hallucinations + fluctuations + symmetric parkinsonism + RBD** → synucleinopathy; **MRI** to clear the field, then **DaTscan/PSG** to clinch support.","- [purple]Pearl:[/purple] ==Suspect DLB? **Start with MRI**; then deploy **DaTscan/PSG** to strengthen the case=="]},{id:"DLB-GOLD-50007",topic:"Geriatrics • Dementia with Lewy bodies — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What definitively establishes DLB etiology?",stem:"A 75-year-old with 18 months of cognitive fluctuations, well-formed visual hallucinations, REM sleep behavior disorder, and spontaneous parkinsonism has MRI without structural cause. DaTscan shows reduced striatal uptake. Family asks: “What is the final, gold standard test that proves this is dementia with Lewy bodies?”",options:[{key:"A",text:"MRI brain with volumetrics showing relative medial temporal sparing"},{key:"B",text:"FDG-PET showing occipital hypometabolism with a ‘cingulate island sign’"},{key:"C",text:"Polysomnography documenting REM sleep without atonia"},{key:"D",text:"Dopamine transporter imaging (DaTscan) showing reduced striatal uptake"},{key:"E",text:"Neuropathology (post-mortem or rarely biopsy) demonstrating α-synuclein–positive Lewy bodies/neurites in brainstem/limbic/cortex sufficient to explain dementia"}],correct:"E",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Gold standard = tissue diagnosis.** **Neuropathology** directly shows **α-synuclein–positive Lewy bodies/neurites** in characteristic distributions (brainstem → limbic → neocortex) **sufficient to account for the dementia**.","- Clinical criteria and biomarkers are **highly supportive**, but only **histopathology** proves the underlying synucleinopathy and quantifies **co-pathologies** (e.g., Alzheimer changes).","- In practice, confirmation is almost always **post-mortem**; brain biopsy is **rare** and reserved for atypical, nondegenerative concerns.","- [yellow]Bottom line:[/yellow] DaTscan/PSG/FDG-PET support DLB **in vivo**, but **Lewy pathology on immunohistochemistry** is definitive. 🧠🔬","**2️⃣ Why the other options are wrong**","- **A. MRI volumetrics:** Useful to **exclude mimics** and may show **relative medial temporal sparing**, but **cannot prove** Lewy pathology.","- **B. FDG-PET:** The **occipital hypometabolism**/**cingulate island sign** supports DLB but is **not pathognomonic**.","- **C. Polysomnography:** **RBD** (REM without atonia) is a strong **indicative biomarker** of synucleinopathy, yet still **indirect**.","- **D. DaTscan:** Shows **nigrostriatal dopaminergic loss**—excellent support for DLB/PDD—but **does not identify α-synuclein**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Focused history for **fluctuations/hallucinations/RBD**; bedside cognitive screen emphasizing **attention/visuospatial** tasks; exam for **spontaneous parkinsonism** and **autonomic signs**. **Confirms?** ❌ Suggests DLB.","- **Next Diagnostic step:** 🧠 **MRI brain** to exclude structural mimics; note **relative medial temporal sparing** if present. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (in vivo confirmation):** **DaTscan** (↓ striatal DAT) and/or **PSG** (REM without atonia); consider **FDG-PET** (occipital hypometabolism/**cingulate island sign**) or **cardiac MIBG** (reduced uptake). **Confirms?** ✅ Strongly supports DLB.","- **Gold Standard (definitive):** 🔬 **Neuropathology** showing **α-synuclein Lewy bodies/neurites** in appropriate regions **± staging** and **quantification of co-pathology**. **Confirms?** ✅✅ Definitive.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & safety[/green] (falls/drive), optimize **hearing/vision**, address **orthostasis/constipation**, sleep hygiene.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± cautious clonazepam) for **RBD**; **low-dose levodopa** for parkinsonism (monitor for psychosis).","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics/high-potency D2 blockers**[/red] due to **severe sensitivity**; if psychosis threatens safety, use **quetiapine/clozapine** at the **lowest effective dose**.","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregation spreads from **brainstem** to **limbic** to **neocortical** regions, disrupting **dopaminergic** (nigrostriatal) and **cholinergic** (basal forebrain) systems.","- Network effects yield **fluctuations** (frontoparietal/arousal), **visual hallucinations** (occipital/ventral stream + cholinergic loss), **parkinsonism**, **RBD**, and **autonomic failure**.","- Neuropathology confirms **distribution and burden**, and identifies **mixed pathology** (e.g., AD) that influences phenotype and treatment.","**6️⃣ Symptoms — pattern recognition link**","- **Fluctuating attention**, **well-formed visual hallucinations**, **symmetric parkinsonism**, **RBD**, early **visuospatial/attention** deficits.","- [purple]Pearl:[/purple] ==Biomarkers can **convince the clinic**, but only **Lewy bodies** on histology **convince the microscope**=="]},{id:"DLB-ETIO-50008",topic:"Geriatrics • Dementia with Lewy bodies — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"What underlies the Lewy body syndrome?",stem:"A 72-year-old with 1 year of cognitive fluctuations, well-formed visual hallucinations, REM sleep behavior disorder (RBD), and spontaneous parkinsonism asks, “What actually causes this disease?” MRI excludes structural lesions. Which underlying **etiology** best explains his syndrome?",options:[{key:"A",text:"Primary amyloid-β plaques with tau tangles causing hippocampal-predominant neurodegeneration (pure Alzheimer pathology)"},{key:"B",text:"Cerebrovascular small-vessel disease with lacunes and confluent white-matter hyperintensities"},{key:"C",text:"Autoimmune limbic encephalitis with NMDA receptor antibodies"},{key:"D",text:"α-Synuclein aggregation (Lewy bodies/neurites) with nigrostriatal dopaminergic loss and basal forebrain cholinergic deficits; often mixed with Alzheimer co-pathology"},{key:"E",text:"Frontotemporal lobar degeneration due to TDP-43 in anterior temporal/frontal regions"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **DLB** is a **synucleinopathy**: misfolded **α-synuclein** accumulates as **Lewy bodies/neurites** in brainstem → limbic → neocortex.","- This produces **nigrostriatal dopaminergic loss** (parkinsonism) and **basal forebrain cholinergic deficits** (fluctuations, hallucinations).","- **RBD** often precedes dementia, reflecting early **pontine** involvement.","- Many patients show **mixed pathology** with **amyloid/tau** co-burden that modifies phenotype/progression.","- [yellow]Etiology lock:[/yellow] **α-synuclein** + **DA↓/ACh↓ network failure** → fluctuations, hallucinations, parkinsonism, RBD. 👁️🎚️🚶‍♂️🛌","**2️⃣ Why the other options are wrong**","- **A (Pure AD):** Explains **amnestic** syndrome with hippocampal atrophy; lacks early **hallucinations/RBD/fluctuations** typical of DLB.","- **B (VaD):** Yields **executive slowing/gait** with **stepwise** course; not the hallucination–fluctuation–RBD cluster.","- **C (Autoimmune):** Subacute encephalitis with seizures/psychiatric features; antibody-driven and often steroid-responsive—different timeline and biomarkers.","- **E (FTLD–TDP):** Behavior/language-led syndromes (bvFTD/svPPA); not a hallucination–parkinsonism dementia.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** History for **fluctuations, hallucinations, RBD**; exam for **spontaneous parkinsonism**; bedside **attention/visuospatial** testing. **Confirms?** ❌ Suggests DLB pattern.","- **Next Diagnostic step:** 🧠 **MRI** to rule out structural disease; note **relative medial temporal sparing**. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (indicative biomarkers):** **DaTscan** (↓ striatal DAT), **polysomnography** (REM without atonia); **FDG-PET** (occipital hypometabolism/**cingulate island sign**) or **cardiac MIBG** (reduced uptake) as available. **Confirms?** ✅ Supports synuclein etiology.","- **Adjuncts:** **CSF/PET for AD** co-pathology to quantify mixed DLB+AD.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & safety[/green] (falls/drive), optimize **hearing/vision**, manage orthostasis/constipation, sleep hygiene.","- **First Line:** [green]**Cholinesterase inhibitor** (rivastigmine/donepezil)**[/green] for cognition/behavior; **melatonin** (± cautious clonazepam) for **RBD**; **low-dose levodopa** for parkinsonism (watch psychosis).","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics/high-potency D2 blockers**[/red] due to severe sensitivity; if mandatory for dangerous psychosis, use **quetiapine/clozapine** at **lowest effective dose**.","**5️⃣ Full Pathophysiology Explained**","- **Misfolding & spread:** α-Synuclein aggregates seed and propagate along **brainstem→limbic→neocortical** networks.","- **Neurotransmitter disruption:** [blue]**DA↓** (nigrostriatal) → parkinsonism; **ACh↓** (basal forebrain) → attention deficits, hallucinations/fluctuations[/blue].","- **Circuit correlates:** **Occipital/ventral stream** dysfunction → **visual hallucinations**; **frontoparietal/arousal** circuits → **fluctuations**; **pontine REM** circuitry → **RBD**.","- **Co-pathology:** Concurrent **Aβ/tau** accelerates decline and can add **amnestic** features (mixed DLB+AD).","**6️⃣ Symptoms — cause → effect mapping**","- **α-Syn → DA loss** 🎯 → **bradykinesia/rigidity**, reduced arm swing.","- **α-Syn → ACh loss** 🧩 → **fluctuating attention**, **visual hallucinations**.","- **Brainstem (pontine) hit** 🛌 → **RBD** years before dementia.","- **Occipital hypometabolism** 👁️ → vivid, well-formed visual content.","- [purple]Pearl:[/purple] ==Think **Lewy** when **RBD + hallucinations + symmetric parkinsonism + fluctuations** ride together=="]},{id:"DLB-COMP-50009",topic:"Geriatrics • Dementia with Lewy bodies — Complications",difficulty:"Medium",vignetteTitle:"What high-impact complication should you anticipate in Lewy body dementia?",stem:"A 76-year-old with probable DLB (fluctuations, well-formed visual hallucinations, RBD, symmetric parkinsonism) becomes agitated in the ED and receives haloperidol 2 mg IM. Within hours he develops severe rigidity, mutism, diaphoresis, fever 38.9°C, and labile blood pressure. Which complication is most important to anticipate and urgently prevent in patients with DLB, especially after exposure to high-potency antipsychotics?",options:[{key:"A",text:"Serotonin syndrome from SSRI therapy"},{key:"B",text:"Neuroleptic sensitivity reaction, including neuroleptic malignant syndrome (NMS)"},{key:"C",text:"Idiopathic intracranial hypertension"},{key:"D",text:"Wernicke encephalopathy"},{key:"E",text:"Lamotrigine-associated Stevens–Johnson syndrome"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- Patients with **DLB** have **marked sensitivity to dopamine D2 antagonists**. Exposure to **typical antipsychotics or high-potency D2 blockers** can trigger **profound rigidity, akinesia, confusion**, **autonomic instability**, and **fever**—up to full **neuroleptic malignant syndrome (NMS)**.","- This complication is **life-threatening** and can present **within hours–days** after a dose; it is far more likely in **synucleinopathies** (DLB/Parkinson disease dementia).","- Even without full NMS, **severe neuroleptic sensitivity** worsens mobility, cognition, and aspiration/fall risk.","- [yellow]Safety rule:[/yellow] In DLB, **avoid typical antipsychotics**; if antipsychotic is absolutely required for dangerous psychosis, use **quetiapine or clozapine** at **lowest effective dose**. ⚠️","**2️⃣ Why the other options are wrong**","- **A (Serotonin syndrome):** Requires serotonergic agents and shows **clonus/hyperreflexia**—not the **lead-pipe rigidity** and **bradyreflexia** typical of NMS.","- **C (IIH):** Headache/visual obscurations/papilledema—unrelated to antipsychotic exposure or DLB core biology.","- **D (Wernicke):** Due to thiamine deficiency (ophthalmoplegia, ataxia, confusion); important in alcoholism/malnutrition but not the key DLB-specific threat here.","- **E (SJS):** Severe rash/mucositis risk with specific meds (e.g., lamotrigine); not the central DLB complication after **haloperidol**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **Recognize the syndrome**: recent **D2 blocker** exposure + **rigidity**, **fever**, **autonomic instability**, **altered mental state**. **Confirms?** ❌ Clinical suspicion raised.","- **Next Diagnostic step →** Labs: **CK** (often ↑), **renal function** (rhabdomyolysis risk), **electrolytes**, **LFTs**, **CBC**, **CRP**, **UA** (myoglobinuria). **ECG** for **QTc**. **Confirms?** ➕ Supports NMS/neuroleptic sensitivity.","- **Best Diagnostic Step →** **Rule out mimics** (sepsis, serotonin syndrome, malignant catatonia) based on exam (clonus vs rigidity), med list, cultures; consider **EEG** if stupor/seizure concern. **Confirms?** ✅ Clinical diagnosis of **neuroleptic sensitivity/NMS**.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]**STOP the offending antipsychotic immediately**[/green]; admit, **aggressive IV fluids**, active **cooling**, **electrolyte** correction, **VTE prophylaxis**; monitor **CK/renal**.","- **First Line:** [green]Pharmacologic treatment for NMS**[/green] — **dantrolene** (muscle rigidity/heat), **bromocriptine** or **amantadine** (restore dopaminergic tone). Treat **autonomic instability** (telemetry, BP support).","- **Gold Standard (future safety):** [red]**Avoid typical/high-potency D2 antipsychotics**[/red]. For persistent distressing psychosis threatening safety, use **quetiapine or clozapine** at **lowest effective dose**; optimize **non-drug strategies** (treat infection/pain/constipation, reduce nighttime stimulation). Continue **cholinesterase inhibitor**; use **melatonin** (± cautious clonazepam) for **RBD**.","**5️⃣ Full Pathophysiology Explained**","- **DLB** features **nigrostriatal dopamine loss** and **cholinergic deficits** from **α-synuclein** pathology. **D2 blockade** further suppresses already fragile dopaminergic signaling → **severe parkinsonism**, **rigidity**, and **autonomic failure**.","- In **NMS**, **skeletal muscle rigidity** drives **hyperthermia** and **rhabdomyolysis** (↑CK), while hypothalamic dysregulation produces **labile BP** and **HR**.","- Cholinergic deficiency heightens **confusion** and **delirium**, compounding aspiration/fall risk.","**6️⃣ Complications — pattern recognition & prevention map**","- **Neuroleptic sensitivity/NMS** 🔥 → rigidity, fever, autonomic collapse (ED/ICU emergency).","- **Falls & fractures** 🦴 → parkinsonism + orthostasis + sedatives; implement fall-prevention bundle.","- **Aspiration pneumonia** 🫁 → dysphagia/rigidity/delirium; upright feeding, swallow precautions.","- **Delirium** 🧠 → infections, meds, sleep disruption; deploy delirium bundle early.","- **Autonomic failure** 📉 → orthostatic hypotension/syncope; fluids, compression, midodrine/droxidopa as appropriate.","- [purple]Pearl:[/purple] ==In DLB, the **most dangerous drug is a typical antipsychotic**—assume harm until proven otherwise=="]},{id:"DLB-EPI-50010",topic:"Geriatrics • Dementia with Lewy bodies — Epidemiology",difficulty:"Medium",vignetteTitle:"How common is DLB, and who tends to get it?",stem:"Your memory clinic is planning services and asks for a snapshot of DLB burden: relative frequency among dementias, typical age at onset, sex differences, and common patterns such as RBD and mixed pathology. Which statement best captures the **epidemiology** of dementia with Lewy bodies (DLB)?",options:[{key:"A",text:"DLB is extremely rare (<0.1% of dementias) and occurs primarily in teenagers; hallucinations are uncommon"},{key:"B",text:"DLB is the most common dementia overall, accounting for >60% of cases worldwide"},{key:"C",text:"DLB accounts for a meaningful minority of dementias (commonly ~5–15%), with onset typically in the 60s–70s, slight male predominance, frequent REM sleep behavior disorder, and high rates of mixed Alzheimer co-pathology"},{key:"D",text:"DLB occurs only in patients with longstanding Parkinson disease (>10 years) who then develop dementia"},{key:"E",text:"DLB is confined to ICU patients and resolves completely after discharge"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **DLB** represents a **meaningful minority** of dementias (often cited around **5–15%** in clinic/autopsy series), varying by setting and diagnostic criteria.","- Usual **age at onset** is the **60s–70s**; there is a **slight male predominance** in many cohorts.","- **REM sleep behavior disorder (RBD)** is **common** and may **precede dementia** by years (prodromal synucleinopathy).","- **Mixed pathology** with **Alzheimer changes** (amyloid/tau) is **frequent**, influencing phenotype and prognosis.","- [yellow]Service-planning pearl:[/yellow] Expect DLB wherever **RBD**, **parkinsonism**, and **visual hallucinations** cluster in older adults.","**2️⃣ Why the other options are wrong**","- **A:** DLB is **not ultra-rare** and is a disorder of **older adults**, not teens; **hallucinations** are **common** and often well-formed.","- **B:** Alzheimer’s disease remains the **most common** dementia worldwide; DLB is a **substantial minority**, not majority.","- **D:** That description fits **Parkinson disease dementia (PDD)**; **DLB** is defined by dementia **preceding or within 1 year** of parkinsonism.","- **E:** DLB is **neurodegenerative**, not a transient ICU syndrome; delirium may fluctuate but does not define DLB.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step (population view):** Track clinic **case mix** (AD, DLB, VaD, FTD) and screen for **RBD** history. **Confirms?** ❌ Surveillance only.","- **Next Diagnostic step:** For suspected cases, perform **structural MRI** to exclude mimics and characterize patterns (often **relative medial temporal sparing**). **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (epidemiologic accuracy):** Use **indicative biomarkers**—**DaTscan** (↓ striatal DAT) and/or **PSG** (REM without atonia)—to reduce misclassification; consider **CSF/PET** for **AD co-pathology**. **Confirms?** ✅ Improves diagnostic fidelity.","**4️⃣ Management / Treatment (in order)**","- **Initial Management (program level):** [green]Staff training[/green] to recognize **fluctuations, hallucinations, RBD**, and **antipsychotic sensitivity**.","- **First Line (clinic pathways):** [green]Standardized workups[/green] (MRI → DaTscan/PSG as needed) and **caregiver education**; embed **fall prevention** and **sleep protocols**.","- **Gold Standard (safety caveat):** [red]System rule-out for typical antipsychotics/high-potency D2 blockers[/red]; create default orders for **quetiapine/clozapine** only when safety demands, plus **cholinesterase inhibitors** for cognition/behavior.","**5️⃣ Full Pathophysiology Explained (epi lens)**","- Population burden reflects **α-synuclein** spread across **dopaminergic** and **cholinergic** systems, with **AD co-pathology** common in aging brains.","- **RBD prevalence** in older men and the **synucleinopathy prodrome** help explain the **male slant** in some series.","- Diagnostic yield improves when clinics use **biomarkers** rather than relying solely on clinical impressions (fluctuations are subtle and misread).","**6️⃣ Symptoms — epidemiology → phenotype link**","- Clinics serving many **RBD** and **parkinsonism** patients will see more **DLB**.","- **Occipital hypometabolism/DAT loss** patterns map onto **visual hallucinations** and **parkinsonism** prevalence.","- **Mixed DLB+AD** cohorts show more **amnestic** features and faster decline.","- [purple]Planning tip:[/purple] ==Resource for **sleep labs (PSG)** and **DaTscan access** if your catchment has a high RBD/parkinsonism footprint=="]},{id:"DLB-RISK-50011",topic:"Geriatrics • Dementia with Lewy bodies — Risk Factors",difficulty:"Medium",vignetteTitle:"Who’s primed for Lewy? Risk profile at a glance",stem:"A 72-year-old man with years of dream enactment (kicking/punching while asleep) asks about his risk of developing dementia with Lewy bodies (DLB). His father had Parkinson disease. He has mild anosmia, constipation, and occasional orthostatic lightheadedness. Which risk factor cluster best captures **elevated DLB risk**?",options:[{key:"A",text:"Advanced age, male sex, REM sleep behavior disorder (RBD), family history of synucleinopathy (PD/DLB), hyposmia/autonomic symptoms; possible genetic contributors (e.g., GBA variants), and mixed Alzheimer co-pathology"},{key:"B",text:"High educational attainment, bilingualism, and regular aerobic exercise"},{key:"C",text:"APOE ε4 alone without synucleinopathy features or prodrome"},{key:"D",text:"Single prior concussion in youth with complete recovery and no prodromal symptoms"},{key:"E",text:"Long-standing essential tremor treated with propranolol"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **DLB** risk rises with **age** and shows a **slight male predominance**.","- **RBD** (REM sleep behavior disorder) is a powerful **prodromal synucleinopathy** marker that often **precedes DLB** by years. 🛌🥊","- **Family history** of **Parkinson disease** or **DLB** suggests shared **α-synuclein** biology; **hyposmia** and **autonomic symptoms** (orthostasis/constipation) signal **early autonomic/brainstem involvement**.","- **Genetics:** **GBA** variants (and, less specifically, **APOE ε4** as a *modifier*) can increase risk or shift phenotype; **mixed AD co-pathology** is common and may accelerate decline.","- [yellow]Pattern lock:[/yellow] **Age + male + RBD + Lewy family history + early nonmotor signs** → elevated **DLB** risk.","**2️⃣ Why the other options are wrong**","- **B:** Education/bilingualism and exercise relate to **cognitive reserve**; they are **protective modifiers**, not core DLB risks.","- **C:** **APOE ε4** chiefly tags **Alzheimer** biology; without Lewy prodrome, it’s **not sufficient** to define high **DLB** risk.","- **D:** Remote concussion with full recovery, in isolation, is **weakly linked** at best; lacks Lewy prodromal features.","- **E:** **Essential tremor** is a different movement disorder; treatment with propranolol doesn’t drive DLB risk.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Screen for prodromal synucleinopathy** → history of **RBD**, **hyposmia**, **constipation**, **orthostatic symptoms**; basic cognitive screen (attention/visuospatial). **Confirms?** ❌ Risk stratifies.","- **Next Diagnostic step:** **Polysomnography (PSG)** to confirm **RBD (REM without atonia)**; **orthostatic vitals**; consider **QSART/autonomic testing** if symptomatic. **Confirms?** ➕ Strengthens Lewy prodrome.","- **Best Diagnostic Step (supportive biomarkers):** **DaTscan** if parkinsonism emerges (↓ striatal DAT); **cardiac MIBG** (low uptake) and **FDG-PET** (occipital hypometabolism/**cingulate island sign**) in select cases. **Confirms?** ✅ Supports Lewy biology (not mandatory in asymptomatic risk states).","- **Adjuncts:** **MRI** to exclude structural mimics; consider **CSF/PET for AD** to estimate **mixed pathology** risk.","**4️⃣ Management / Treatment (in order)**","- **Initial Management (risk-stage):** [green]Education & surveillance[/green] — sleep safety for **RBD** (padding, remove hazards), **melatonin** at night; manage **orthostasis/constipation**; optimize **hearing/vision**.","- **First Line (if symptomatic):** [green]**Cholinesterase inhibitor**[/green] for emerging cognitive/behavioral symptoms; **low-dose levodopa** cautiously for parkinsonism; treat **RBD** with **melatonin** (± cautious clonazepam).","- **Gold Standard (safety caveat):** [red]**Avoid typical antipsychotics/high-potency D2 blockers**[/red] due to **severe neuroleptic sensitivity**; if indispensable for dangerous psychosis, use **quetiapine/clozapine** minimal dose.","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** misfolds and spreads from **brainstem autonomic/REM nuclei** → **limbic** → **neocortex**.","- **Early nonmotor signs** (RBD, hyposmia, constipation, orthostasis) reflect **brainstem/peripheral autonomic** involvement **years before** dementia/parkinsonism.","- **Nigrostriatal DA loss** → parkinsonism; **basal forebrain ACh loss** → fluctuations/hallucinations; **occipital network dysfunction** → visual phenomena.","- **Genetic modifiers** (e.g., **GBA**) and **AD co-pathology** (Aβ/tau) can amplify risk and alter trajectory.","**6️⃣ Risk checklist — memorize the big levers**","- **Age (60s–70s typical) & male sex.**","- **RBD** (PSG-proven REM without atonia).","- **Family history of PD/DLB** or known **GBA** variant.","- **Hyposmia**, **constipation**, **orthostatic hypotension** (autonomic prodrome).","- **Possible APOE ε4** (phenotype modifier), **mixed AD co-pathology**.","- [purple]Pearl:[/purple] ==RBD + hyposmia + autonomic clues in an older man with Lewy family history → keep **DLB** on speed dial=="]}];function Zb(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const Jb=/^[0-9+\-*/().\s^%]*$/;function ex(o){if(!Jb.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function Zn({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function tx(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function ix(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(ex(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function ax(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function nx({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Zn,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=at[w].id,f=y[g],k=f?f===at[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:at[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:at[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:at[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function sx({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((k,E)=>k+(d[at[E].id]===at[E].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((k,E)=>({i:E,q:at[k],chosen:d[at[k].id]})).filter(({q:k,chosen:E})=>E&&E!==k.correct),[d,c]);return i.jsx(Zn,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"No incorrect answers — great job 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:k,q:E,chosen:j})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",k+1," — ",E.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:j})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:E.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(k),r()},children:"Go to question →"})]},E.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function rx(){const o=Vt(),r=ax(),[d,c]=p.useState(at.map((v,m)=>m)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=at[d[g]],ie=at.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const v=ee.current;if(!v)return;const m=window.getSelection&&window.getSelection();if(!(!m||m.rangeCount===0))try{const C=m.getRangeAt(0);if(!v.contains(C.commonAncestorContainer)||String(C).trim().length===0)return;const I=document.createElement("mark");I.className="bg-yellow-200 rounded px-0.5",C.surroundContents(I),m.removeAllRanges()}catch{const C=v.getAttribute("contenteditable");v.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),C!==null?v.setAttribute("contenteditable",C):v.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const v=()=>T();return document.addEventListener("mouseup",v),()=>document.removeEventListener("mouseup",v)},[_]);const U=()=>{const v=ee.current;v&&v.querySelectorAll("mark").forEach(m=>{const C=m.parentNode;for(;m.firstChild;)C.insertBefore(m.firstChild,m);C.removeChild(m)})},B=v=>{const m=v==="random"?Zb(at.map((C,I)=>I)):at.map((C,I)=>I);c(m),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const v=m=>{m.key==="ArrowRight"&&g<ie-1&&f(C=>C+1),m.key==="ArrowLeft"&&g>0&&f(C=>C-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,ie]);const O=()=>A(v=>({...v,[R.id]:!0})),N=()=>{g>=ie-1||f(m=>m+1)},V=()=>g>0&&f(v=>v-1),M=g===ie-1&&!!j[R.id];return p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M]),p.useMemo(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)},[se,j,g]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(v=>!v),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((v,m)=>{const C=at[v],I=k[C.id],W=I?I===C.correct?"correct":"incorrect":"unanswered",ne=m===g?"ring-2 ring-purple-300":W==="correct"?"ring-2 ring-emerald-300":W==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(m),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${ne}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",m+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:C.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:C.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:C.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${W==="correct"?"bg-emerald-500":W==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},C.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(v=>{const m=k[R.id],C=!!j[R.id],I=v.key===R.correct,W=C?I?"border-emerald-300 bg-emerald-50":m===v.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${W}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:m===v.key,onChange:()=>E(ne=>({...ne,[R.id]:v.key})),disabled:C}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[v.key,"."]})," ",v.text]})]},v.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),g===ie-1&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(v=>({...v,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((v,m)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Yb,{text:v})},m))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(v=>!v),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(Zn,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(tx,{})}),i.jsx(Zn,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(ix,{})}),i.jsx(nx,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx(sx,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)})(),jumpTo:v=>f(v)}),i.jsx(ox,{open:!h,onPick:B})]})}function ox({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(Zn,{open:o,onClose:()=>{},title:"Start Lewy Body Dementia Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function lx({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const nt=[{id:"FTD-SX-7001",topic:"Geriatrics • Frontotemporal Dementia — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the semantic-variant PPA pattern",stem:"A 65-year-old librarian has 2 years of progressively 'vague' speech. She talks fluently but struggles to name familiar objects and often uses broad terms like “animal” or “tool.” She cannot match single words to pictures on testing. Repetition and grammar are intact. MRI later shows left-predominant anterior temporal atrophy. Which clinical constellation best identifies the underlying PPA subtype?",options:[{key:"A",text:"Effortful, halting speech with agrammatism and apraxia of speech; impaired repetition"},{key:"B",text:"Fluent speech with severe anomia and loss of single-word comprehension; preserved grammar and repetition"},{key:"C",text:"Word-finding pauses with impaired sentence repetition; phonologic errors; temporoparietal atrophy"},{key:"D",text:"Acute onset jargon aphasia with poor comprehension and poor repetition following a stroke"},{key:"E",text:"Nonfluent speech with preserved comprehension but severe repetition deficit from arcuate fasciculus damage"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Fluent but empty speech** with severe **anomia** and **loss of single-word comprehension** is the hallmark of **semantic-variant PPA (svPPA)**.","- **Grammar and repetition preserved** separates svPPA from nonfluent/agrammatic and logopenic variants.","- Day-to-day clue: patients swap specific nouns for **broad category labels** due to semantic store failure.","- Clinicoradiologic tie-in: [blue]left anterior temporal lobe atrophy[/blue] tracks with semantic impairment.","- [yellow]Pattern recognition:[/yellow] fluent speech + empty content + anomia + word-meaning loss + preserved repetition → **svPPA** 🧠📖","**2️⃣ Why the other options are wrong**","- **A (nfvPPA):** Effortful, halting, agrammatic speech with apraxia; grammar broken and often impaired repetition; not fluent or semantic-dominant.","- **C (lvPPA):** Word-finding pauses and **impaired repetition** from phonologic-loop failure; semantics less affected early; often Alzheimer-related.","- **D (Wernicke stroke):** **Acute** onset with poor comprehension and poor repetition; neurodegenerative svPPA is **insidious** and repetition is spared.","- **E (Conduction aphasia):** Repetition is the main casualty from arcuate fasciculus damage; svPPA keeps repetition intact while semantics fail.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language screen (naming, single-word comprehension, repetition, grammar). Confirms? ❌ Suggests svPPA if semantics fail with preserved repetition/grammar.","- **Next Diagnostic step:** Formal neuropsychology (word–picture matching, semantic association, irregular word reading). Confirms? ➕ Strengthens diagnosis; excludes phonologic or syntactic primaries.","- **Best Diagnostic Step:** MRI brain (volumetric preferred). Results: [blue]left > right anterior temporal atrophy[/blue] with relative parietal sparing. Confirms? ✅ Clinicoradiologic signature for svPPA.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, and communication aids[/green] (semantic feature analysis, visual supports); caregiver training and safety review.","- **First Line:** [green]Speech–language therapy[/green] with compensatory strategies; environmental modifications; multidisciplinary team support; SSRIs for behavioral symptoms if needed.","- **Gold Standard:** No disease-modifying therapy; [green]sustained person-centred, team-based care[/green] with periodic re-goaling, caregiver respite, community resources; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained**","- svPPA reflects degeneration of the **anterior temporal semantic hub**, most often from [blue]TDP-43 type C[/blue] proteinopathy.","- Disrupted RNA handling and network failure cause **loss of concept knowledge** while leaving phonology/syntax relatively intact early.","- Hence **fluent output** with **low informational content** and **single-word comprehension failure**.","**6️⃣ Symptoms — Clinical Presentation map**","- **Fluent but empty speech** 🗣️ → semantic store failure yields low-information sentences.","- **Anomia (naming difficulty)** 🔎 → broken concept–label links in anterior temporal cortex.","- **Loss of single-word comprehension** 🧠 → inability to map words to meanings (fails word–picture matching).","- **Surface dyslexia/dysgraphia** ✍️ → reliance on letter–sound rules when irregular-word semantics are lost (e.g., ‘yacht’).","- **Preserved grammar and repetition** 🔁 → phonologic/syntactic circuitry spared early.","- [purple]Think svPPA when you see:[/purple] ==fluent speech + empty content + severe anomia + impaired single-word comprehension + left ATL atrophy== 🚨"]},{id:"FTD-SIGNS-8001",topic:"Geriatrics • Frontotemporal Dementia — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to semantic-variant PPA?",stem:"A 66-year-old former journalist has 2 years of progressive word-meaning loss. On exam, conversation is fluent but content-light. He cannot name pictured objects and fails word–picture matching, yet repeats long sentences perfectly and follows multi-step commands. Reading aloud is smooth, but he misreads irregular words (‘yacht’ as ‘yatched’). Neurologic exam is otherwise nonfocal. Which **set of examination signs** best localizes the PPA subtype?",options:[{key:"A",text:"Effortful, halting speech; agrammatism; apraxia of speech; impaired sentence repetition; right–left limb apraxia"},{key:"B",text:"Fluent but empty speech; severe anomia; impaired single-word comprehension and word–picture matching; preserved grammar and repetition; surface dyslexia"},{key:"C",text:"Frequent word-finding pauses; phonologic paraphasias; markedly impaired sentence repetition; ideomotor apraxia"},{key:"D",text:"Acute jargon aphasia with poor comprehension and poor repetition; homonymous superior quadrantanopia"},{key:"E",text:"Prominent visuospatial neglect; constructional apraxia; dressing apraxia; intact naming and repetition"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **svPPA bedside signature**: **fluent but empty speech**, **severe anomia**, **loss of single-word comprehension**, **preserved grammar and repetition**.","- **Word–picture matching errors** reflect breakdown of the **semantic store** rather than attention or phonology.","- **Surface dyslexia/dysgraphia** (irregular word errors) arises when semantic knowledge guiding exception words is lost.","- Neuro exam is often **nonfocal early**; behavior may be subtle unless right ATL is involved (prosopagnosia, socioemotional semantics).","- [yellow]Pattern lock-in:[/yellow] fluent + empty content + anomia + impaired word meaning + intact repetition ⇒ **semantic-variant PPA**. 🧠📖","**2️⃣ Why the other options are wrong**","- **A (nfvPPA):** Non-fluent, effortful, **agrammatic** output ± **apraxia of speech** with **impaired repetition**—opposite of fluent/grammatically intact svPPA.","- **C (lvPPA):** **Phonologic** deficits with **impaired sentence repetition** and word-finding pauses; semantics relatively spared early; often AD-related.","- **D (Wernicke stroke):** **Acute** onset with poor comprehension **and** poor repetition plus visual field signs—neurodegenerative svPPA is **insidious** and repetition is preserved.","- **E (parietal/visuospatial syndrome):** Neglect and constructional apraxia imply **right parietal** pathology; naming/comprehension typically not the primary deficit.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language exam (naming, single-word comprehension, word–picture matching, sentence repetition, grammar). **Confirms?** ❌ Suggests svPPA if semantics fail with preserved repetition/grammar.","- **Next Diagnostic step:** Formal neuropsychology (semantic association, category fluency ↓ with letter fluency relatively spared, irregular word reading). **Confirms?** ➕ Strengthens svPPA pattern; excludes phonologic/syntactic primaries.","- **Best Diagnostic Step:** MRI brain (volumetric preferred) → [blue]**left > right anterior temporal lobe atrophy**[/blue] with relative parietal sparing. **Confirms?** ✅ Clinicoradiologic signature with the bedside signs.","- **Adjuncts:** FDG-PET (anterior temporal hypometabolism); CSF AD biomarkers (non-AD pattern); genetics if young/familial (GRN/MAPT/C9orf72 though svPPA often sporadic).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, and communication aids[/green] (semantic feature analysis, visual supports); caregiver training; safety/advance planning.","- **First Line:** [green]Speech–language therapy[/green] with compensatory strategies; environmental modifications; [green]multidisciplinary care[/green] (neurology, SLT, OT, social work); **SSRIs** if behavioral symptoms emerge.","- **Gold Standard:** No disease-modifying therapy; [green]sustained person-centred team care[/green] with periodic re-goaling, caregiver respite, community resources; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained**","- Degeneration of the **anterior temporal semantic hub** (often [blue]TDP-43 type C[/blue]) disrupts concept knowledge and word–meaning links.","- **Phonology and syntax** (dorsal/fronto-insular circuits) are relatively spared early → fluent output with **low informational content**.","- Loss of semantic mediation yields **surface dyslexia/dysgraphia** and failures on **word–picture matching**.","- Right ATL involvement adds **prosopagnosia** and socioemotional semantic deficits.","**6️⃣ Signs — Examination Findings map**","- **Fluent but empty speech** 🗣️ → semantic content loss, motor speech intact.","- **Severe anomia** 🔎 → broken concept–label links in ATL.","- **Impaired single-word comprehension & word–picture matching** 🧠 → semantic hub failure.","- **Surface dyslexia/dysgraphia** ✍️ → irregular word errors (e.g., ‘pint’, ‘yacht’).","- **Preserved grammar & sentence repetition** 🔁 → phonologic/syntactic circuitry spared early.","- [purple]Think svPPA when the exam shows:[/purple] ==fluent speech + empty content + anomia + impaired word meaning + intact repetition== 🚨"]},{id:"FTD-REDFLAGS-9001",topic:"Geriatrics • Frontotemporal Dementia — Red Flags",difficulty:"Medium",vignetteTitle:"When svPPA isn’t svPPA: spot the red flags",stem:"A 63-year-old teacher is referred with suspected semantic-variant PPA after 3 months of worsening word-finding. Today her partner reports new daily headaches, a witnessed focal seizure last week, and a low-grade fever. Exam shows mild naming difficulty but also papilledema. Which feature(s) most strongly indicate a RED FLAG requiring urgent re-evaluation rather than typical degenerative svPPA?",options:[{key:"A",text:"Gradual 2–3 year history of semantic loss with preserved repetition and left anterior temporal atrophy"},{key:"B",text:"Early behavioral apathy without psychosis in a 58-year-old with normal basic labs"},{key:"C",text:"Subacute (weeks–months) decline with new headache, fever, and a seizure"},{key:"D",text:"Progressive anomia over 18 months with impaired word–picture matching, normal neuro exam"},{key:"E",text:"Family history of late-onset dementia in one second-degree relative"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Subacute time course (weeks–months)** + **systemic/meningoencephalitic features** (fever, headache) + **seizure** = [red]red flag[/red] for **non-degenerative** causes (e.g., autoimmune/viral encephalitis, neoplasm, abscess, vasculitis).","- Degenerative svPPA typically evolves **insidiously over years**, without constitutional symptoms or early seizures.","- **Papilledema** suggests raised intracranial pressure → urgent neuroimaging and infectious/inflammatory workup, not a routine dementia pathway.","- [yellow]Exam pearl:[/yellow] Any **rapid progression**, **focal neuro signs**, **systemic illness**, or **seizures** should pivot you to an **acute neurology/infectious** algorithm.","- Prioritizing safety prevents missing treatable, life-threatening etiologies. 🚨","**2️⃣ Why the other options are wrong**","- **A:** Classic **svPPA** pattern (years-long semantic decline, preserved repetition, L > R anterior temporal atrophy) → *not* a red flag.","- **B:** Early apathy can occur in FTD spectrum; without psychosis, fever, seizures, or focal deficits, this isn’t an urgent red flag.","- **D:** Progressive semantic profile over 18 months with normal neuro exam fits degenerative svPPA; still important, but not urgent.","- **E:** A single second-degree relative with late-onset dementia is common and **low pretest significance**; no acute concern signaled.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** [red]Stabilize and screen for emergencies[/red] → vitals, glucose, neuro check, **urgent non-contrast CT head** if raised ICP suspected. **Confirms?** ❌ Safety first; rules out bleed/mass.","- **Next Diagnostic step:** **MRI brain with contrast + MRV** (if venous thrombosis possible). Results guide mass/encephalitis/venous causes. **Confirms?** ➕ Suggests specific non-degenerative etiologies.","- **Best Diagnostic Step:** **Lumbar puncture** (if no mass effect) with CSF cell count, protein/glucose, **viral PCR (HSV, VZV, etc.)**, autoimmune encephalitis panel; **EEG** for subclinical seizures/encephalopathy. **Confirms?** ✅ Etiologic diagnosis (infectious/autoimmune).","- **Adjuncts:** Bloods (CRP/ESR, cultures), autoimmune/vasculitis serology, tumor markers when indicated.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Airway–Breathing–Circulation[/green]; treat **seizure** (IV benzodiazepine → levetiracetam), elevate head of bed, analgesia, manage fever; start empiric **acyclovir** if encephalitis suspected. 🚑","- **First Line (targeted):** Narrow therapy based on results: antivirals for HSV/VZV, **immunotherapy** (steroids/IVIG/plasma exchange) for autoimmune encephalitis, **antibiotics** for bacterial processes, **anticoagulation** if CVST confirmed, or **neurosurgical** consult for mass/abscess.","- **Gold Standard:** **Cause-specific therapy** guided by definitive CSF/imaging/biopsy findings; then neurorehab and secondary prevention. For true svPPA (if red flags excluded), revert to **multidisciplinary supportive care**.","**5️⃣ Full Pathophysiology Explained (why these are red flags)**","- **Degenerative svPPA** = slow **TDP-43 type C**–mediated anterior temporal network failure → no early fever, seizures, or ICP signs.","- **Infectious/autoimmune/neoplastic** processes provoke **inflammation, edema, mass effect, cortical irritability** → headaches, fever, seizures, papilledema—**not** typical of neurodegeneration.","- Time course distinguishes: **weeks–months** (inflammatory/neoplastic) vs **years** (degenerative).","- [purple]Mnemonic:[/purple] “**FAST + HOT + SHOCK**” → **Fast** decline, **Hot** (fever), **Shock** (seizure) = **not** svPPA.","**6️⃣ Red-flag checklist — think urgent workup when you see…**","- **Acute/subacute onset** (days–weeks) or **stepwise** course.","- **Fever, new headache, meningism**, or **systemic illness** (weight loss, night sweats).","- **Seizures**, **papilledema**, or **focal neurologic deficits** (hemiparesis, visual field cut).","- **Rapid change in consciousness**, **delirium**, or profound fluctuations.","- **Cancer/immunosuppression**, **anticoagulation/trauma** (consider subdural), or **RPGN/vasculitis signs**.","- [blue]If any present → switch from “dementia workup” to **acute neurology/infectious oncology** pathways immediately[/blue]."]},{id:"FTD-DDX-10001",topic:"Geriatrics • Frontotemporal Dementia — Differential Diagnosis",difficulty:"Medium",vignetteTitle:"Which diagnosis best fits? Parsing the aphasia differentials",stem:"A 64-year-old art historian has 2 years of fluent but content-light speech. She mislabels specific nouns with broad categories, cannot match single words to pictures, and misreads irregular words (e.g., 'pint' as 'pint' with long i). Repetition and grammar are preserved. MRI shows left-predominant anterior temporal atrophy with relative parietal sparing. Which diagnosis best explains this presentation?",options:[{key:"A",text:"Non-fluent/agrammatic primary progressive aphasia (nfvPPA)"},{key:"B",text:"Semantic-variant primary progressive aphasia (svPPA)"},{key:"C",text:"Logopenic variant PPA (lvPPA) due to Alzheimer pathology"},{key:"D",text:"Major depressive disorder (pseudodementia)"},{key:"E",text:"Wernicke aphasia due to left temporoparietal ischemic stroke"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **svPPA** presents with fluent but **empty** speech, severe **anomia**, and **loss of single-word comprehension**.","- **Grammar and repetition preserved** clearly separate it from nfvPPA and lvPPA.","- **Surface dyslexia/dysgraphia** for irregular words signals semantic system failure.","- MRI shows [blue]left anterior temporal lobe (ATL) atrophy[/blue] with parietal sparing—clinicoradiologic match.","- [yellow]Pattern lock:[/yellow] fluent speech + semantic loss + preserved repetition + left ATL atrophy ⇒ **svPPA**.","**2️⃣ Why the other options are wrong**","- **A. nfvPPA:** Effortful, halting, **agrammatic** speech ± apraxia of speech; repetition often impaired; not fluent/semantic-dominant.","- **C. lvPPA:** **Impaired sentence repetition** and phonologic errors; temporoparietal atrophy; semantics comparatively spared early.","- **D. Pseudodementia:** Inconsistent effort, prominent mood symptoms, “don’t know” responses; language structure/semantics typically intact; imaging not ATL-selective.","- **E. Wernicke stroke:** **Acute** onset, poor comprehension **and** poor repetition with paraphasias; course here is insidious and repetition intact.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language screen targeting naming, single-word comprehension, repetition, and grammar. Confirms? ❌ Suggests svPPA pattern.","- **Next Diagnostic step:** Formal neuropsychology (semantic battery: word–picture matching, category fluency ↓ > letter fluency). Confirms? ➕ Strengthens svPPA vs nfvPPA/lvPPA.","- **Best Diagnostic Step:** MRI brain (volumetric preferred) → [blue]left > right anterior temporal atrophy[/blue] with relative parietal sparing. Confirms? ✅ Clinicoradiologic signature.","- **Helpful adjuncts:** FDG-PET (anterior temporal hypometabolism); CSF AD biomarkers to exclude AD/lvPPA; EEG if episodic confusion or seizures cloud the picture.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, education, and communication aids[/green] (semantic feature analysis, visual supports); caregiver training; driving/work safety; advanced care planning.","- **First Line:** [green]Speech–language therapy[/green] with compensatory strategies; environmental modifications; [green]multidisciplinary care[/green] (neurology, SLT, OT, social work); SSRIs for behavioral features if needed.","- **Gold Standard:** No disease-modifying therapy; [green]ongoing person-centred, team-based support[/green] with periodic re-goaling and caregiver respite; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained (DDx focus)**","- **svPPA:** [blue]TDP-43 type C[/blue]–mediated degeneration of ATL semantic hub → concept knowledge and word–meaning links erode.","- **nfvPPA:** Fronto-insular/IFG degeneration (often tauopathy) → motor speech and grammar networks fail → non-fluent, agrammatic speech.","- **lvPPA:** Posterior perisylvian/temporoparietal network (often Alzheimer pathology) → phonologic-loop breakdown → impaired repetition and phonologic errors.","- **Stroke (Wernicke):** Acute lesion in posterior superior temporal cortex → comprehension and repetition deficits with paraphasias.","- **Depression:** Network intact; psychomotor slowing/inattention mimic cognitive issues but language architecture remains structurally sound.","**6️⃣ Symptoms — pattern recognition for DDx**","- **svPPA:** Fluent but empty speech; severe anomia; single-word comprehension loss; **surface dyslexia**; ATL atrophy.","- **nfvPPA:** Non-fluent, agrammatic output; apraxia of speech; effortful production; IFG/insular atrophy.","- **lvPPA:** Word-finding pauses; **impaired repetition**; phonologic errors; temporoparietal atrophy; AD biomarkers often positive.","- **Wernicke stroke:** Acute onset; poor comprehension and repetition; paraphasic jargon; vascular risk; CT/MRI acute changes.","- **Pseudodementia:** Mood disorder context; variable test effort; language semantics intact; improves with depression treatment.","- [purple]Exam pearl:[/purple] ==Preserved repetition + semantic failure + ATL atrophy== → **svPPA**."]},{id:"FTD-INV-11001",topic:"Geriatrics • Frontotemporal Dementia — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test for suspected primary progressive aphasia",stem:"A 64-year-old right-handed teacher has 18 months of progressive language change: fluent but content-light speech, severe naming difficulty, and impaired single-word comprehension. Repetition and grammar are intact. Examination is otherwise nonfocal. You suspect a primary progressive aphasia, likely semantic variant. What is the **best initial investigation**?",options:[{key:"A",text:"Non-contrast CT head"},{key:"B",text:"MRI brain with volumetric sequences"},{key:"C",text:"CSF Alzheimer biomarkers (Aβ42, total tau, p-tau)"},{key:"D",text:"FDG-PET brain"},{key:"E",text:"Comprehensive neuropsychological testing"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **MRI brain with volumetric sequences** is the **best initial investigation** for suspected PPA/FTD because it both **excludes structural mimics** (tumor, subdural, stroke) and identifies a **syndrome-specific atrophy pattern**.","- In **semantic-variant PPA (svPPA)**, MRI typically shows [blue]**left > right anterior temporal lobe (ATL) atrophy**[/blue] with relative parietal sparing—high-yield for clinico-radiologic confirmation.","- MRI outperforms CT for **gray-matter resolution** and **pattern recognition**; volumetrics help quantify asymmetry and track progression.","- [green]Practical win:[/green] one scan answers two questions early: “Is there something acute I must treat?” and “Does the pattern fit svPPA?” 🧠🖥️","**2️⃣ Why the other options are wrong**","- **A. CT head:** Quick but **insensitive** to frontotemporal cortical atrophy; may miss early svPPA patterns and subtle lesions.","- **C. CSF AD biomarkers:** Useful to **exclude Alzheimer pathology** (e.g., lvPPA) but **not first**; invasive and not primary for FTD confirmation.","- **D. FDG-PET:** Shows **hypometabolism** (anterior temporal in svPPA) yet is typically a **second-line adjunct** after MRI or when MRI is equivocal/unavailable.","- **E. Neuropsychological testing:** Crucial for **phenotyping** and documenting deficits, but it’s **clinical assessment**, not the first **imaging investigation** to rule out structural causes.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** 🩺 *Focused bedside language assessment* (naming, single-word comprehension, repetition, grammar). **Confirms?** ❌ No—raises svPPA suspicion.","- **Next Diagnostic step:** 🧠 *MRI brain with volumetrics* → [blue]Left > right ATL atrophy[/blue], parietal sparing. **Confirms?** ✅ Best initial investigation; strongly supports svPPA and rules out surgical lesions.","- **Best Diagnostic Step (for maximal accuracy after MRI):** 🧠 *Comprehensive neuropsychology ± FDG-PET/CSF (when indicated)* → defines semantic deficits; PET shows anterior temporal hypometabolism; CSF non-AD profile. **Confirms?** ➕ Completes clinico-pathway and excludes AD/lvPPA.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Diagnosis disclosure, education, safety planning[/green]; initiate **communication aids** (semantic feature analysis, visual supports).","- **First Line:** [green]Speech–language therapy[/green] (compensatory strategies), environmental modifications, [green]multidisciplinary team** (neurology, SLT, OT, social work); SSRIs if behavioral symptoms.","- **Gold Standard:** No disease-modifying drug; [green]ongoing person-centred supportive care[/green], caregiver training/respite; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained**","- svPPA is driven by [blue]**TDP-43 type C**[/blue]–mediated degeneration of the **anterior temporal semantic hub**, disconnecting word–meaning networks.","- This yields **fluent but empty speech**, **anomia**, and **single-word comprehension loss** with **preserved repetition/grammar** early—mirrored by **ATL-predominant atrophy** on MRI.","**6️⃣ Symptoms — pattern recognition**","- **Fluent but empty speech** 🗣️ → semantic content loss, intact motor speech.","- **Severe anomia + impaired single-word comprehension** 🧠 → ATL semantic hub failure.","- **Surface dyslexia/dysgraphia** ✍️ → irregular word errors.","- [purple]Pearl:[/purple] ==Suspected svPPA? Do **MRI with volumetrics** first== — it shows the pattern and rules out dangerous mimics."]},{id:"FTD-GOLD-12001",topic:"Geriatrics • Frontotemporal Dementia — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What truly confirms semantic-variant PPA etiology?",stem:"A 65-year-old teacher has 2 years of fluent but empty speech, severe anomia, and loss of single-word comprehension with preserved repetition/grammar. MRI shows left-predominant anterior temporal lobe atrophy; FDG-PET shows anterior temporal hypometabolism. CSF Alzheimer biomarkers are non-AD. Which single investigation is the **gold standard** for definitively establishing the underlying proteinopathy?",options:[{key:"A",text:"MRI brain with volumetric analysis"},{key:"B",text:"FDG-PET brain"},{key:"C",text:"CSF Alzheimer biomarkers (Aβ42, total tau, p-tau)"},{key:"D",text:"Neuropathology with immunohistochemistry (post-mortem or rarely biopsy) demonstrating TDP-43 type C"},{key:"E",text:"Targeted genetic panel for GRN, MAPT, and C9orf72"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Gold standard = tissue diagnosis**: **Neuropathology with immunohistochemistry** directly visualizes pathogenic protein aggregates.","- In svPPA, definitive confirmation is **TDP-43 type C** pathology (and negative for tau/α-synuclein) on tissue.","- Imaging and CSF are **supportive/triaging** tools; they **cannot** prove the molecular proteinopathy.","- Clinically we rarely biopsy for degenerative disease; **post-mortem** confirmation remains the practical gold standard. [yellow]Supportive tests guide care, but tissue is truth[/yellow]. 🧠🔬","**2️⃣ Why the other options are wrong**","- **A. MRI volumetrics:** Best **initial** structural test; shows **pattern** (left ATL atrophy) but not the **protein**.","- **B. FDG-PET:** Shows **hypometabolism** in anterior temporal cortex; helpful when MRI is equivocal, but still **nonspecific** for proteinopathy.","- **C. CSF AD biomarkers:** Rules **in/out Alzheimer biology** (useful to exclude lvPPA/AD) but does **not** confirm TDP-43.","- **E. Genetic panel:** Explains some **familial** FTD; svPPA is often **sporadic**. A variant can suggest tau or TDP-43 risk, but it is **not** pathologic confirmation.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** 🩺 *Bedside language screen* → fluent but empty speech; severe anomia; impaired single-word comprehension; preserved repetition/grammar. **Confirms?** ❌ Suggests svPPA.","- **Next Diagnostic step:** 🧠 *MRI brain with volumetrics* → [blue]Left > right anterior temporal atrophy[/blue] with parietal sparing. **Confirms?** ➕ Strong clinicoradiologic support.","- **Best Diagnostic Step (Gold Standard):** 🔬 *Neuropathology with immunohistochemistry* (post-mortem; biopsy rarely) → [blue]**TDP-43 type C inclusions**[/blue], tau/α-syn negative. **Confirms?** ✅ **Yes** — molecular etiology proven.","- **Helpful adjuncts:** FDG-PET (anterior temporal hypometabolism), CSF AD biomarkers (non-AD profile), genetics if young/familial (GRN/MAPT/C9orf72).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, communication aids[/green] (semantic feature analysis, visual supports); caregiver training; safety/advance care planning.","- **First Line:** [green]Speech–language therapy[/green] (compensatory scripts, spaced retrieval); environmental modification; [green]multidisciplinary team[/green] (neurology, SLT, OT, social work); SSRIs for behavioral symptoms if needed.","- **Gold Standard:** No disease-modifying drug; [green]sustained person-centred supportive care[/green]; caregiver respite; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained**","- svPPA reflects degeneration of the **anterior temporal semantic hub**, most commonly due to **TDP-43 type C** proteinopathy.","- Mislocalized TDP-43 disrupts **RNA processing/axonal transport**, causing synaptic failure and neuronal loss in ventral temporal networks.","- The result is **semantic memory erosion**: fluent but **content-light** speech, **anomia**, and **single-word comprehension loss** with early preservation of grammar/repetition.","**6️⃣ Symptoms — pattern recognition**","- **Fluent but empty speech** 🗣️ → intact motor/phonologic systems with semantic store failure.","- **Severe anomia** 🔎 and **loss of single-word comprehension** 🧠 → ATL semantic hub degeneration.","- **Surface dyslexia/dysgraphia** ✍️ → irregular word errors; reliance on letter–sound rules.","- [purple]Pearl:[/purple] ==MRI/FDG/CSF steer you; **only tissue** seals the diagnosis of proteinopathy==."]},{id:"FTD-CURE-13001",topic:"Geriatrics • Frontotemporal Dementia — Definitive / Curative Therapy",difficulty:"Medium",vignetteTitle:"Is there a curative treatment for semantic-variant PPA (svPPA)?",stem:"A 63-year-old editor with a 2-year history of fluent but empty speech, severe anomia, and loss of single-word comprehension is diagnosed with semantic-variant primary progressive aphasia (svPPA) on clinical exam and MRI showing left-predominant anterior temporal atrophy. She asks whether there is a surgery or medicine that can cure or slow the disease. Which option best reflects the current state of curative therapy?",options:[{key:"A",text:"High-dose cholinesterase inhibitor titration to maximal tolerated dose"},{key:"B",text:"Anti-amyloid monoclonal antibody infusion (e.g., lecanemab) to modify disease course"},{key:"C",text:"Approved targeted therapy that clears TDP-43 type C aggregates"},{key:"D",text:"No established curative or disease-modifying therapy; provide multidisciplinary supportive care and consider clinical trials"},{key:"E",text:"Anterior temporal lobectomy to remove diseased cortex and halt progression"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- For **svPPA/FTD**, there is **no proven curative or disease-modifying therapy** at present.","- Best practice is [green]**multidisciplinary supportive care**[/green]: speech–language therapy, caregiver education, safety planning, psychosocial support, and symptom-targeted meds.","- [yellow]Clinical trials[/yellow] may be appropriate (biomarker/gene-directed in select familial cases), but **standard-of-care remains supportive**.","- Clear counseling prevents harmful or futile treatments; align goals of care early; revisit as disease evolves. 🧠🤝","**2️⃣ Why the other options are wrong**","- **A. Cholinesterase inhibitors:** Evidence shows **little benefit in FTD** and they may **worsen behavior**; they target cholinergic deficits typical of Alzheimer’s, not svPPA. ❌","- **B. Anti-amyloid mAb:** Designed for **amyloid-positive Alzheimer’s**; svPPA is usually **TDP-43**–mediated and **amyloid-negative** → not indicated and not disease-modifying for FTD. ❌","- **C. TDP-43–clearing therapy:** **No approved agent** currently removes **TDP-43 type C** aggregates in humans; this remains **experimental**. ❌","- **E. Temporal lobectomy:** svPPA is a **neurodegenerative network disease**; resection **does not halt progression** and would worsen deficits; surgery is not a treatment. ❌","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language screen (naming, single-word comprehension, repetition, grammar). **Confirms?** ❌ Raises suspicion for svPPA.","- **Next Diagnostic step:** MRI brain with volumetrics → [blue]left > right anterior temporal atrophy[/blue] and parietal sparing. **Confirms?** ➕ Clinicoradiologic support.","- **Best Diagnostic Step:** Formal neuropsychology ± FDG-PET; CSF AD biomarkers (usually non-AD) to exclude lvPPA/AD; genetics if young/familial (GRN, MAPT, C9orf72). **Confirms?** ✅ Phenotype secured; etiology inferred.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, communication aids[/green] (semantic feature analysis, visual supports), caregiver training, driving/work/safety review, advance care planning.","- **First Line:** [green]Speech–language therapy[/green] (compensatory strategies, scripts, spaced retrieval), environment modification, [green]multidisciplinary care[/green] (neurology, SLT, OT, social work); **SSRIs** for behavioral symptoms if they arise.","- **Gold Standard (Definitive / Curative):** [yellow]**None available**[/yellow] for svPPA/FTD today; enroll in **clinical trials** when eligible; prioritize person-centred supportive care; [red]avoid routine cholinesterase inhibitors/memantine in FTD[/red].","**5️⃣ Full Pathophysiology Explained**","- svPPA typically reflects **TDP-43 type C** proteinopathy affecting the **anterior temporal semantic hub**.","- Mislocalized TDP-43 disrupts RNA handling → synaptic dysfunction → neuronal loss in semantic networks.","- Current therapies **do not target TDP-43 pathobiology** effectively; hence **no disease-modifying option** yet.","- Symptom-focused rehab leverages **neuroplastic compensation** even as degeneration progresses.","**6️⃣ Symptoms — pattern recognition**","- **Fluent but empty speech** 🗣️ → semantic content loss with intact phonology/syntax early.","- **Severe anomia** 🔎 and **single-word comprehension loss** 🧠 → anterior temporal semantic hub failure.","- **Surface dyslexia/dysgraphia** ✍️ → irregular-word errors; reliance on letter-sound rules.","- [purple]Pearl:[/purple] ==When asked about a “cure” for svPPA/FTD, the high-yield answer is **no curative therapy**—deliver **supportive, multidisciplinary care** and consider **trials**==."]},{id:"FTD-COMP-14001",topic:"Geriatrics • Frontotemporal Dementia — Complications",difficulty:"Medium",vignetteTitle:"What’s the high-risk downstream complication in svPPA?",stem:"A 66-year-old former teacher with semantic-variant PPA (svPPA) has fluent but empty speech, loss of single-word comprehension, and left-predominant anterior temporal atrophy on MRI. Over 3 years she has developed reduced food variety, occasional choking with solids, and weight loss. Which complication is most important to anticipate and prevent over the next year?",options:[{key:"A",text:"Intracerebral hemorrhage due to anticoagulation for atrial fibrillation"},{key:"B",text:"Aspiration pneumonia from progressive oropharyngeal dysphagia"},{key:"C",text:"Early, prominent visual hallucinations with fluctuating cognition and REM sleep behavior disorder"},{key:"D",text:"Rapid myoclonus with akinetic mutism within months of onset"},{key:"E",text:"Bradycardia and syncope from high-dose cholinesterase inhibitor therapy"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Aspiration pneumonia** is a major downstream complication across dementias and is particularly relevant as **swallowing becomes unsafe** with disease progression.","- In **svPPA**, early language loss dominates; with time, **oropharyngeal dysphagia**, **weight loss**, and **recurrent aspiration** can emerge—especially as cognitive–behavioral features spread.","- Leading causes of morbidity/mortality in advanced FTD include **infections (notably pneumonia)** and complications of immobility/malnutrition.","- [green]Proactive swallow assessment, diet texture modification, and aspiration precautions[/green] reduce risk. [yellow]High-yield safety target[/yellow].","- The vignette’s **choking episodes + weight loss** signal evolving dysphagia → **anticipate aspiration**. 🫁🍽️","**2️⃣ Why the other options are wrong**","- **A. Intracerebral hemorrhage from anticoagulation:** Possible in anyone anticoagulated, but **not a disease-specific** svPPA complication and not signaled here.","- **C. DLB phenotype:** **Visual hallucinations, RBD, fluctuations** point to **Lewy body dementia**, not svPPA.","- **D. Prion disease:** **Rapid** course with **myoclonus** and early akinetic mutism suggests **CJD**, not the **years-long** svPPA trajectory.","- **E. Cholinesterase inhibitor bradycardia:** Routine cholinesterase inhibitors are **not recommended in FTD**; risk exists if used, but this is **not standard care** and thus not the key anticipated complication.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Clinical screen for **dysphagia** (history of choking, cough with meals, weight loss). **Confirms?** ❌ Suggests aspiration risk.","- **Next Diagnostic step:** **Bedside swallow assessment** by SLP with trial textures/liquids. **Confirms?** ➕ Risk stratification; immediate precautions.","- **Best Diagnostic Step:** **Instrumental swallow study** (videofluoroscopic swallow study or FEES) → identifies **aspiration/penetration**, residue, safest textures. **Confirms?** ✅ Objective evidence guides management.","- **Adjuncts:** Nutritional panel (albumin, weight/BMI trend), CXR if cough/fever, pulse-ox; consider **speech–language cognitive-communication** review to align strategies.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Aspiration precautions[/green] (upright posture, slow rate, small boluses), **texture-modified diet** (per study), supervised feeding; oral hygiene to reduce bacterial load.","- **First Line:** [green]Speech–language therapy[/green] for **compensatory swallow techniques** (chin tuck, effortful swallow), caregiver training; **calorie-dense supplements**; treat reflux/constipation; immunize (influenza, pneumococcal).","- **Gold Standard:** There is **no curative therapy**; for severe unsafe swallowing with recurrent aspiration, discuss **goals of care** (including comfort feeding), [blue]PEG rarely prevents aspiration of saliva and may not improve outcomes[/blue]. Shared decision-making is essential. [red]Avoid reflex PEG without goals/risks discussion[/red].","**5️⃣ Full Pathophysiology Explained**","- **svPPA** begins with **anterior temporal (semantic hub)** degeneration → language/meaning loss.","- Disease spreads within FTD networks, adding **behavioral change**, **apathy/rigidity**, and later **bulbar involvement** contributing to **oropharyngeal discoordination**.","- This yields **ineffective airway protection** and **silent aspiration**; malnutrition further weakens cough and immunity → **pneumonia risk**.","- [purple]Pearl:[/purple] “**Language fades first, lungs suffer later**” — anticipate swallow issues as networks widen.","**6️⃣ Symptoms — pattern recognition for complications**","- **Red flags for aspiration risk:** coughing/choking with meals, wet/gurgly voice, recurrent chest infections, weight loss, prolonged mealtimes.","- **Nutritional decline:** early **food faddism**/restricted variety → later **weight loss** and **frailty**.","- **Functional cascade:** dehydration, delirium during infections, pressure injuries with immobility.","- [blue]Bundle the plan:[/blue] swallow study + diet modification + SLP strategies + oral care + vaccination + caregiver training = **fewer pneumonias**."]},{id:"FTD-ETIO-5001",topic:"Geriatrics • Frontotemporal Dementia — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"What’s the underlying cause in semantic-variant PPA?",stem:"A 62-year-old right-handed editor has 18 months of progressive word comprehension loss. She speaks fluently but uses non-specific terms and cannot name common objects. Repetition and grammar are preserved. MRI shows predominant left anterior temporal lobe atrophy with relative parietal sparing. There is no family history of dementia or movement disorder. Which underlying proteinopathy most likely explains this presentation?",options:[{key:"A",text:"Tau (4R) accumulation characteristic of corticobasal degeneration"},{key:"B",text:"TDP-43 type C pathology"},{key:"C",text:"Alpha-synuclein (Lewy body) pathology"},{key:"D",text:"Amyloid-β plaques with tau neurofibrillary tangles (Alzheimer’s disease)"},{key:"E",text:"Misfolded prion protein (PrPSc) pathology"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- The syndrome fits **semantic-variant primary progressive aphasia (svPPA)**: fluent but empty speech, severe anomia, impaired single-word comprehension, preserved grammar/repetition.","- Imaging hallmark is [blue]anterior temporal lobe atrophy (often L > R)[/blue] with relative parietal sparing.","- svPPA is most commonly caused by **TDP-43 type C** aggregation, making B the best etiologic answer.","- [yellow]Clinicoradiologic pattern → TDP-43 type C[/yellow] is a classic high-yield association.","- Sporadic presentation without strong family history further aligns with TDP-43 in svPPA. 🧠📖","**2️⃣ Why the other options are wrong**","- **A. Tau (4R) corticobasal**: More linked to nonfluent/agrammatic PPA or corticobasal syndrome with apraxia and parkinsonism, not svPPA’s semantic loss.","- **C. Alpha-synuclein**: Causes dementia with Lewy bodies or Parkinson disease dementia, featuring visual hallucinations, REM sleep behavior disorder, and parkinsonism—pattern mismatch.","- **D. Alzheimer pathology**: Ties to **logopenic PPA** with impaired repetition and phonological errors; svPPA preserves repetition and targets semantics instead.","- **E. Prion disease**: Rapidly progressive dementia, myoclonus, ataxia; course is subacute, not the slowly progressive svPPA picture.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language screen focusing on naming and single-word comprehension → Fluent but empty speech with anomia and impaired word meaning. Confirms diagnosis? ❌ Suggests svPPA.","- **Next Diagnostic step:** Formal neuropsychology with semantic battery (word–picture matching, irregular word reading) → Disproportionate semantic deficits with preserved grammar/phonology. Confirms diagnosis? ➕ Supports svPPA and excludes mimics.","- **Best Diagnostic Step:** MRI brain (volumetric preferred) → [blue]Anterior temporal lobe atrophy (L > R)[/blue], relative parietal sparing. Confirms diagnosis? ✅ Most definitive antemortem pattern with clinical phenotype.","- **Adjuncts:** FDG-PET showing anterior temporal hypometabolism; CSF/AD biomarkers often non-AD pattern helping exclude logopenic/AD; genetics if young onset or family history (GRN, MAPT, C9orf72 though svPPA often sporadic).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, communication aids[/green] (semantic feature analysis, visual supports), caregiver training, driving/work safety review.","- **First Line:** [green]Speech–language therapy[/green] focused on compensatory strategies and environmental modification; multidisciplinary care (neurology, SLT, OT, social work). Consider **SSRIs** for behavioral symptoms if present.","- **Gold Standard:** No disease-modifying therapy; [green]sustained multidisciplinary, person-centred support[/green], periodic re-goaling, caregiver respite and community resources.","- [red]Avoid routine cholinesterase inhibitors/memantine in FTD—limited benefit and can worsen behavior[/red].","**5️⃣ Full Pathophysiology Explained (Etiology focus)**","- **FTD** comprises heterogeneous proteinopathies affecting frontal and/or temporal networks.","- In **svPPA**, the etiologic driver is most often **TDP-43 type C** misfolded protein aggregation disrupting RNA processing and axonal transport.","- Resulting synaptic failure and neuronal loss target the **anterior temporal semantic network**, eroding conceptual knowledge and word–meaning links.","- Genetics: while svPPA is frequently **sporadic**, broader FTD may involve **GRN, MAPT, C9orf72** mutations; tauopathies skew toward nfvPPA/CBS, TDP-43 toward svPPA/bvFTD spectra.","- [purple]Pearl:[/purple] “**svPPA → Semantic hub hit → TDP-43 type C**.”","**6️⃣ Symptoms (cause → effect mapping)**","- **Anomia** 🔎 → Loss of concept–label associations from anterior temporal degeneration.","- **Loss of single-word comprehension** 🧠 → Breakdown of semantic network due to TDP-43 pathology.","- **Fluent but empty speech** 🗣️ → Speech production intact, semantic content depleted.","- **Surface dyslexia/dysgraphia** ✍️ → Reliance on phonology when irregular word semantics are lost.","- **Pattern to remember:** ==Fluent speech + empty content + severe anomia + impaired word meaning + ATL atrophy== → think **TDP-43 type C**."]},{id:"EPI-2101",topic:"Clinical Epidemiology • Screening test metrics in geriatrics",difficulty:"Medium",vignetteTitle:"Interpreting a new dementia screening test in clinic",stem:"A community clinic adopts a new blood-based screening test for dementia. In a memory clinic serving many symptomatic older adults, clinicians notice more true positives than when the same test was piloted in a low-prevalence general practice. Which test characteristic most strongly increases when disease prevalence rises?",options:[{key:"A",text:"Sensitivity"},{key:"B",text:"Specificity"},{key:"C",text:"Positive predictive value (PPV)"},{key:"D",text:"Negative predictive value (NPV)"},{key:"E",text:"Likelihood ratio for a positive test (LR+)"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **PPV** = probability of disease *given* a positive test (P[D|+]).","- PPV **moves with prevalence**: higher pretest probability → more positives are true positives. [blue]Bayes theorem[/blue] links this directly.","- In a memory clinic (high prevalence), the same test yields **higher PPV** than in general practice (low prevalence).","- [yellow]Rule of thumb:[/yellow] ↑Prevalence → ↑PPV and ↓NPV; test’s sensitivity/specificity stay the same.","- Clinically: better to act on a positive in high-prevalence settings; confirm more cautiously in low-prevalence settings. 🧠📈","**2️⃣ Why the other options are wrong**","- **A. Sensitivity:** Intrinsic to the test (P[+|D]); **does not change** with prevalence; depends on threshold and biology, not setting.","- **B. Specificity:** Intrinsic (P[−|no D]); **stable across populations** assuming similar spectrum and thresholds.","- **D. NPV:** Probability of *no disease* given a negative test; **decreases** as prevalence rises (more false negatives matter).","- **E. LR+:** = sensitivity ÷ (1 − specificity); **prevalence-independent** summary of how much a positive shifts odds.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Estimate **pretest probability** from setting/epidemiology (clinic vs community). **Confirms?** ❌ No—sets the baseline for interpretation.","- **Next Diagnostic step:** Apply test and compute **post-test probability** using **PPV/NPV** tables or Bayes nomogram. **Confirms?** ➕ Improves certainty but may still need confirmation.","- **Best Diagnostic Step:** Use **LRs** with Bayes theorem to update odds precisely; then perform a **reference standard** (e.g., comprehensive neurocognitive assessment ± imaging) when action hinges on accuracy. **Confirms?** ✅ Confirmation requires the reference standard.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Communicate results with context[/green] (prevalence and PPV/NPV), assess symptoms/function, review meds and reversible causes.","- **First Line:** [green]Confirmatory evaluation[/green] for positives: standardized cognitive testing, depression screen, labs (B12/TSH), and targeted imaging when indicated.","- **Gold Standard:** Diagnosis anchored to **reference standard** clinical criteria (e.g., DSM/ICD/NIA-AA) rather than screening alone; avoid starting disease-specific therapy on screen result only. [red]Do not over-treat on screening positives without confirmation[/red].","**5️⃣ Full Pathophysiology Explained**","- This is the **statistical ‘path’ of information**: Prevalence sets **pretest odds**.","- A test contributes **likelihood** (LRs) that multiplies those odds (Bayes).","- **PPV** rises in high-prevalence settings because true positives become more common relative to false positives.","- **Sensitivity/specificity** are properties of the assay/threshold—changing the population alone doesn’t alter them.","- [purple]Mnemonic:[/purple] “**Prevalence Pushes Predictive values**” → PPP.","**6️⃣ Symptoms (pattern recognition for exam questions)**","- **High-prevalence clinic** → **↑PPV** because a positive is more likely a true positive.","- **Low-prevalence screening day** → **↑NPV** because a negative is more likely a true negative.","- **Unchanged sensitivity/specificity/LRs** across settings → differences you see are **predictive values responding to prevalence**.","- [purple]Pattern to remember:[/purple] ==If vignette swaps from general practice to specialty clinic and asks what changes, pick **PPV**==. 📊✅"]},{id:"FTD-PATH-6001",topic:"Geriatrics • Frontotemporal Dementia — Pathophysiology",difficulty:"Medium",vignetteTitle:"Why does semantic-variant PPA lose word meaning?",stem:"A 63-year-old copywriter has 2 years of fluent but empty speech, severe anomia, and impaired single-word comprehension with preserved repetition and grammar. MRI demonstrates left-dominant anterior temporal lobe atrophy with relative parietal sparing. Which pathophysiologic mechanism best explains this syndrome?",options:[{key:"A",text:"Degeneration of the left inferior frontal gyrus and premotor speech networks causing apraxia of speech"},{key:"B",text:"Neurodegeneration of the anterior temporal semantic hub with TDP-43 type C–mediated network failure"},{key:"C",text:"Posterior perisylvian (temporoparietal) phonologic-loop breakdown typical of Alzheimer-related logopenic aphasia"},{key:"D",text:"Acute infarct of posterior superior temporal gyrus leading to Wernicke aphasia"},{key:"E",text:"Demyelination of the arcuate fasciculus disrupting repetition pathways"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- svPPA targets the [blue]anterior temporal lobe (ATL) semantic hub[/blue], the network that stores concept knowledge and word–meaning links.","- Pathology most often involves [blue]TDP-43 type C cytoplasmic aggregates[/blue] causing synaptic failure and neuronal loss in ATL and ventral temporal streams.","- Loss of the semantic hub produces **fluent but empty speech**, **anomia**, and **single-word comprehension deficits** while sparing phonology and syntax early.","- Imaging with left-dominant ATL atrophy and relative parietal sparing matches this clinicopathologic pattern.","- [yellow]Key link:[/yellow] ATL semantic hub degeneration → meaning erodes first, not grammar or repetition. 🧠📚","**2️⃣ Why the other options are wrong**","- **A. IFG/premotor apraxia network:** Explains **non-fluent/agrammatic PPA** with effortful speech and grammar errors, not fluent semantic loss.","- **C. Posterior perisylvian phonologic-loop:** Drives **logopenic PPA** with impaired repetition and phonologic errors; our case has preserved repetition.","- **D. Acute Wernicke infarct:** Sudden onset with impaired comprehension **and** repetition; this vignette is insidious and neurodegenerative.","- **E. Arcuate fasciculus demyelination:** Would primarily disrupt **repetition** (conduction aphasia), which remains intact here.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside language screen focusing on naming and single-word comprehension → Fluent but empty speech; anomia; impaired word meaning; repetition/grammar preserved. Confirms? ❌ Suggests svPPA.","- **Next Diagnostic step:** Formal neuropsychology (word–picture matching, semantic association, irregular word reading) → Disproportionate **semantic** deficits with intact phonology/syntax. Confirms? ➕ Strengthens diagnosis; excludes mimics.","- **Best Diagnostic Step:** MRI brain (volumetric preferred) → [blue]Anterior temporal lobe atrophy (L>R)[/blue] with relative parietal sparing. Confirms? ✅ Clinicoradiologic signature for svPPA.","- **Adjuncts:** FDG-PET showing ATL hypometabolism; CSF AD biomarkers often non-AD pattern; genetics if young/familial (GRN/MAPT/C9orf72 though svPPA often sporadic).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education, diagnosis disclosure, communication aids[/green] (semantic feature analysis, visual supports), caregiver training, safety/drive/work review.","- **First Line:** [green]Speech–language therapy[/green] with compensatory strategies (scripts, spaced retrieval), environment tweaks, [green]multidisciplinary care[/green] (neurology, SLT, OT, social work); SSRIs for behavioral symptoms if needed.","- **Gold Standard:** No disease-modifying therapy; [green]sustained person-centered, team-based support[/green] with periodic re-goaling, caregiver respite, community resources.","- [red]Avoid routine cholinesterase inhibitors/memantine in FTD—limited benefit and may worsen behavior[/red].","**5️⃣ Full Pathophysiology Explained**","- **Network level:** The ATL acts as a **semantic hub**, integrating distributed modality-specific inputs (visual, auditory, tactile) into **concepts**; degeneration disconnects these hubs from their spokes.","- **Cellular/molecular:** [blue]TDP-43 type C[/blue] mislocalizes to cytoplasm → disordered RNA processing/transport → synaptic dysfunction → neuronal loss, especially in ATL and ventral temporal pathways.","- **Systems consequences:** Early preservation of **phonology and syntax** (dorsal/fronto-insular circuits) yields **fluent** output with **low information content**.","- **Temporal progression:** Rare/low-frequency words lost first → common nouns → person/face concepts (right ATL involvement → prosopagnosia and socioemotional semantic loss).","- [purple]Mnemonic:[/purple] “**Hub crumbles, words tumble**” — ATL hub failure makes speech smooth but meaning-thin.","**6️⃣ Symptoms (mechanism mapping + pattern recognition)**","- **Fluent but empty speech** 🗣️ → speech motor/phonologic systems intact while semantic hub fails.","- **Anomia** 🔎 → severed concept–label links in ATL.","- **Single-word comprehension loss** 🧠 → impaired mapping from sounds to meaning within the semantic hub.","- **Surface dyslexia/dysgraphia** ✍️ → reliance on letter–sound rules when irregular-word semantic knowledge is gone.","- **Pattern to remember:** ==Fluent speech + empty content + severe anomia + impaired word meaning + left ATL atrophy== → [blue]semantic hub degeneration with TDP-43 type C[/blue]."]}];function cx(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const dx=/^[0-9+\-*/().\s^%]*$/;function ux(o){if(!dx.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function Jn({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function mx(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function hx(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(ux(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function px(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function gx({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Jn,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=nt[w].id,f=y[g],k=f?f===nt[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:nt[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:nt[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:nt[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function fx({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[nt[A].id]===nt[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:nt[j],chosen:d[nt[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(Jn,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"Nice — no incorrect answers 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function yx(){const o=Vt(),r=px(),[d,c]=p.useState(nt.map((m,C)=>C)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=nt[d[g]],ie=nt.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const m=ee.current;if(!m)return;const C=window.getSelection&&window.getSelection();if(!(!C||C.rangeCount===0))try{const I=C.getRangeAt(0);if(!m.contains(I.commonAncestorContainer)||String(I).trim().length===0)return;const W=document.createElement("mark");W.className="bg-yellow-200 rounded px-0.5",I.surroundContents(W),C.removeAllRanges()}catch{const I=m.getAttribute("contenteditable");m.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),I!==null?m.setAttribute("contenteditable",I):m.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const m=()=>T();return document.addEventListener("mouseup",m),()=>document.removeEventListener("mouseup",m)},[_]);const U=()=>{const m=ee.current;m&&m.querySelectorAll("mark").forEach(C=>{const I=C.parentNode;for(;C.firstChild;)I.insertBefore(C.firstChild,C);I.removeChild(C)})},B=m=>{const C=m==="random"?cx(nt.map((I,W)=>W)):nt.map((I,W)=>W);c(C),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const m=C=>{C.key==="ArrowRight"&&g<ie-1&&f(I=>I+1),C.key==="ArrowLeft"&&g>0&&f(I=>I-1)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[g,ie]);const O=()=>A(m=>({...m,[R.id]:!0})),N=()=>{g>=ie-1||f(C=>C+1)},V=()=>g>0&&f(m=>m-1),M=g===ie-1&&!!j[R.id];p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M]);const v=p.useMemo(()=>{if(J.current==null)return 0;const m=K.current||Date.now();return Math.max(0,m-J.current)},[se,j,g]);return i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(m=>!m),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((m,C)=>{const I=nt[m],W=k[I.id],ne=W?W===I.correct?"correct":"incorrect":"unanswered",xe=C===g?"ring-2 ring-purple-300":ne==="correct"?"ring-2 ring-emerald-300":ne==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(C),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${xe}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",C+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:I.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:I.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:I.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${ne==="correct"?"bg-emerald-500":ne==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},I.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(m=>{const C=k[R.id],I=!!j[R.id],W=m.key===R.correct,ne=I?W?"border-emerald-300 bg-emerald-50":C===m.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${ne}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:C===m.key,onChange:()=>E(xe=>({...xe,[R.id]:m.key})),disabled:I}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[m.key,"."]})," ",m.text]})]},m.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),M&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(m=>({...m,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((m,C)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(lx,{text:m})},C))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(m=>!m),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(Jn,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(mx,{})}),i.jsx(Jn,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(hx,{})}),i.jsx(gx,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx(fx,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:v,jumpTo:m=>f(m)}),i.jsx(bx,{open:!h,onPick:B})]})}function bx({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(Jn,{open:o,onClose:()=>{},title:"Start Frontotemporal Dementia Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function xx({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const st=[{id:"DEL-DEF-40001",topic:"Geriatrics • Delirium — Definition & Core Concept",difficulty:"Medium",vignetteTitle:"What exactly is delirium?",stem:"An 83-year-old nursing-home resident becomes acutely confused over 24 hours after starting oxycodone for a hip fracture. Staff note fluctuating alertness, disorganized thinking, and poor attention; symptoms worsen at night. Vitals show low-grade fever; oxygen saturation is 91% on room air. Which statement best captures the **core definition** of delirium?",options:[{key:"A",text:"A chronic, progressive decline in memory with preserved attention and a stable level of consciousness"},{key:"B",text:"An acute and fluctuating disturbance in attention and awareness, plus additional cognitive deficits, due to a medical condition or substance"},{key:"C",text:"A fixed delusional belief system without changes in arousal or attention"},{key:"D",text:"A lifelong neurodevelopmental disorder characterized by impaired social communication"},{key:"E",text:"A primary mood disorder causing persistent low mood and anhedonia without inattention"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium** is defined by an **acute (hours–days) onset** and **fluctuating** course of **inattention and impaired awareness**, with additional cognitive changes (memory, disorientation, language, visuospatial, perception).","- There must be **evidence of a precipitating medical condition or substance** (intoxication/withdrawal/medication effect).","- It is **not better explained** by an established neurocognitive disorder and does **not occur exclusively in coma**; level of arousal is commonly altered.","- [blue]Core tool:[/blue] **CAM** requires (1) acute/fluctuating + (2) inattention **and** either (3) disorganized thinking or (4) altered consciousness.","- [yellow]Essentials:[/yellow] **Acute + fluctuating + inattention + medical/substance trigger** = delirium. 🧠⚡","**2️⃣ Why the other options are wrong**","- **A (chronic dementia):** Describes **gradual** decline with **preserved attention** early and **stable arousal**—opposite of delirium’s acute, fluctuating inattention.","- **C (primary psychosis):** Fixed delusions can occur in delirium, but **attention/arousal are typically normal** in isolated psychosis.","- **D (neurodevelopmental disorder):** Not an acute confusional state; unrelated time course and mechanisms.","- **E (major depression):** May mimic cognitive issues, but **inattention with fluctuating consciousness** and acute onset point away from primary mood disorder.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** Bedside **CAM screen** + vitals, **fingerstick glucose**, pulse oximetry. **Confirms?** ❌ CAM identifies syndrome; etiology not yet confirmed.","- **Next Diagnostic step:** **Search for causes**: review meds (anticholinergics, opioids, benzos), **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR** if respiratory signs, **ECG**, consider **TSH/B12** if subacute. **Confirms?** ➕ Points to trigger(s).","- **Best Diagnostic Step:** **Targeted tests** based on clues (ABG/lactate, blood cultures, troponin, CT head if focal deficit/trauma, EEG if nonconvulsive seizures). **Confirms?** ✅ Establish precipitant(s).","**4️⃣ Management / Treatment in order**","- **Initial Management:** [green]Treat the cause[/green] (oxygenate, antibiotics for infection, fluids/electrolytes, pain control with non-deliriogenic strategies).","- **First Line (non-pharm):** [green]DELIRIUM BUNDLE[/green] — orientation cues, glasses/hearing aids, sleep hygiene, mobilization, hydration, bowel/bladder care, minimize tethers/restraints, **deprescribe deliriogenic meds**.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** patient endangers self/others; **avoid** in Parkinson’s/Lewy—use **quetiapine**. [red]Avoid benzodiazepines[/red] **except** for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained**","- Delirium reflects **acute network dysconnectivity** with **thalamocortical arousal** and **frontoparietal attention** failure.","- Drivers include **neuroinflammation**, impaired **acetylcholine** signaling, excess **dopamine**, metabolic/oxygenation insults, and sleep–wake disruption.","- [blue]EEG[/blue]: typically **generalized slowing** (delta/theta); triphasic waves may appear in metabolic/hepatic encephalopathy.","- Subtypes: **hyperactive**, **hypoactive** (easily missed), and **mixed**.","**6️⃣ Symptoms — core pattern recognition**","- **Inattention** 🎯 → cannot maintain/repeat digits or months backward.","- **Altered awareness/arousal** 🌙 → drowsy, hypervigilant, or fluctuating (worse at night: **sundowning**).","- **Disorganized thinking & disorientation** 🧩 → rambling, tangential, confused about time/place.","- **Perceptual disturbances** 👀 → illusions/hallucinations, often visual.","- **Reversibility clue:** ==find and fix the trigger(s)== leads to improvement; dementia alone does not fluctuate like this.","- [purple]Mnemonic:[/purple] “**A-F IT**” → **A**cute-**F**luctuating **I**nattention from a **T**rigger."]},{id:"DEL-SX-40002",topic:"Geriatrics • Delirium — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the delirium pattern: acute, fluctuating inattention",stem:"An 82-year-old with COPD and CKD becomes confused over 36 hours after a UTI diagnosis. Family reports he’s ‘with it’ in the morning but by evening he’s sleepy, then suddenly agitated and trying to get out of bed. He can’t follow the TV plot, loses track of conversations, and keeps misplacing his oxygen cannula. No prior cognitive complaints. Which clinical constellation best identifies delirium?",options:[{key:"A",text:"Gradual memory-first decline with poor cueing over years; stable alertness"},{key:"B",text:"Acute and fluctuating inattention/awareness with disorganized thinking and altered sleep–wake; worse at night (sundowning)"},{key:"C",text:"Lifelong distractibility without change in consciousness; better with stimulants"},{key:"D",text:"Fixed delusions and hallucinations with intact attention and stable arousal"},{key:"E",text:"Low mood and anhedonia for months with psychomotor slowing but normal attention"}],correct:"B",explanation_detail:[`**1️⃣ Why it is the correct answer**
- **Delirium = acute (hours–days) & fluctuating** disturbance of **attention** and **awareness** with additional cognitive/behavioral changes.
- Symptom signature: **can’t sustain focus**, **disorganized/rambling thought**, **misperceptions/visual hallucinations**, and **sleep–wake inversion**; often **worse at night (==sundowning==)**.
- Course maps to **precipitants** (infection, hypoxia, new meds like anticholinergics/opioids, dehydration, pain). Removing triggers improves symptoms.
- **Hypoactive** subtype (quiet, sleepy, withdrawn) is common and easily missed; many oscillate (mixed type). 🧠⚡
- [yellow]Pattern lock:[/yellow] **Acute + fluctuating + inattention + medical/substance trigger** → delirium.`,`**2️⃣ Why the other options are wrong**
- **A (Alzheimer’s):** **Insidious memory** decline with early **preserved attention** and **stable arousal**; not acutely fluctuating.
- **C (ADHD/trait distractibility):** Chronic pattern from youth; **no change in consciousness** or acute medical trigger.
- **D (Primary psychosis):** Delusions/hallucinations can occur but **attention and arousal are usually intact**; fluctuations are not tied to medical precipitants.
- **E (Depression):** Weeks–months of low mood; may have cognitive slowing (“pseudo-dementia”) but **attention typically improves with effort/cueing** and arousal is stable.`,`**3️⃣ Investigations / Diagnostic Steps (in order)**
- **Initial Diagnostic step →** **CAM screen** (acute/fluctuating + inattention + [disorganized thinking **or** altered consciousness]). **Confirms?** ❌ Identifies syndrome.
- **Next Diagnostic step →** **Find triggers**: review meds (anticholinergics, opioids, benzos), vitals, **glucose**, **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR** if respiratory signs, **ABG/SpO₂** for hypoxia, **ECG**. **Confirms?** ➕ Points to cause.
- **Best Diagnostic Step →** Targeted tests by clues: **blood cultures**, **lactate**, **TSH/B12** (if subacute), **CT head** (focal deficits/trauma/anticoag), **EEG** if nonconvulsive status suspected. **Confirms?** ✅ Establishes precipitant(s).`,`**4️⃣ Management / Treatment (in order)**
- **Initial Management:** [green]Treat underlying cause(s)[/green] (oxygenation, fluids/electrolytes, antibiotics for infection, pain control using non-deliriogenic strategies).
- **First Line (non-pharm):** [green]DELIRIUM BUNDLE[/green] — orientation (clocks, family), **glasses/hearing aids**, daytime mobilization, sleep protocol (lights off at night), hydration, bowel/bladder care, minimize lines/restraints, **deprescribe** deliriogenic meds.
- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** the patient endangers self/others; in **Parkinson’s/Lewy**, prefer **quetiapine or clozapine**. [red]Avoid benzodiazepines[/red] **except** for **alcohol/benzo withdrawal**.`,`**5️⃣ Full Pathophysiology Explained**
- **Network failure** across **frontoparietal attention** and **thalamocortical arousal** circuits → impaired focus and fluctuating awareness.
- **Neuroinflammation**, **oxidative stress**, and **neurotransmitter imbalance** ([blue]↓acetylcholine, ↑dopamine[/blue]) drive acute dysfunction.
- **Sleep–wake disruption** (loss of circadian cues) amplifies nighttime worsening; **EEG** often shows **generalized slowing**.`,`**6️⃣ Symptoms — Clinical Presentation map**
- **Inattention** 🎯 → can’t recite months backward or maintain digit span.
- **Altered awareness/arousal** 🌙 → drowsy ↔ hypervigilant; **worse at night**.
- **Disorganized thinking** 🧩 → tangential, illogical, rambling.
- **Perceptual disturbances** 👀 → illusions/visual hallucinations.
- **Memory & orientation errors** 🗺️ → recent disorientation that **fluctuates**.
- [purple]Pearl:[/purple] ==If **attention** is broken and the course **fluctuates**, think **delirium** until proven otherwise==`]},{id:"DEL-SIGNS-40003",topic:"Geriatrics • Delirium — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to delirium?",stem:"An 84-year-old postsurgical patient becomes confused over 24–48 hours. On rounds, she is drowsy then suddenly agitated later in the day. She cannot recite the months backwards, is easily distractible by hallway noise, and gives tangential answers. Nurse notes sleep–wake inversion and visual misperceptions at night. Neuro exam is otherwise nonfocal; vitals show low-grade fever and mild hypoxia. Which **set of examination signs** best fits delirium?",options:[{key:"A",text:"Stable alertness, poor delayed recall with minimal cueing benefit, intact attention"},{key:"B",text:"Fluctuating attention and awareness, impaired digit span/months backward, disorganized thinking, altered arousal (hypo↔hyper), sleep–wake disruption"},{key:"C",text:"Fixed delusions with normal attention and steady level of consciousness"},{key:"D",text:"Magnetic gait with ventriculomegaly, urinary incontinence, and subcortical cognitive slowing"},{key:"E",text:"Prominent visual hallucinations with spontaneous parkinsonism and consistent alertness"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium** exam centers on **inattention** (fails **digits span** or **months backward**) and **altered awareness** that **fluctuates** over hours. ","- **Disorganized thinking** (illogical, tangential) and **altered arousal** (hypoactive, hyperactive, or mixed) are common; **sleep–wake inversion** is typical (==sundowning==).","- [blue]CAM framework[/blue]: (1) acute/fluctuating course + (2) inattention **and** either (3) disorganized thinking or (4) altered level of consciousness.","- Exam is often **nonfocal neurologically**, but may show precipitant clues (dehydration, infection, hypoxia).","- [yellow]Bedside tip:[/yellow] If the patient **can’t maintain attention**, prioritize a delirium search. 🧠⚡","**2️⃣ Why the other options are wrong**","- **A (Alzheimer pattern):** Stable alertness with **storage (memory) failure** and **intact attention** early → not delirium’s acute inattention.","- **C (Primary psychosis):** Delusions/hallucinations may occur, but **attention and arousal are usually normal**; course doesn’t fluctuate with medical triggers.","- **D (NPH):** Gait + incontinence + ventriculomegaly triad; not an acute attentional syndrome.","- **E (DLB):** Visual hallucinations with **consistent alertness** and parkinsonism suggest Lewy body disease, not acute, fluctuating inattention.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **CAM** at bedside + vitals, **fingerstick glucose**, **SpO₂**. **Confirms?** ❌ Identifies the syndrome, not the cause.","- **Next Diagnostic step:** **Search for triggers**: med review (anticholinergics, opioids, benzos), **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR** if respiratory signs, **ECG**, consider **TSH/B12** if subacute. **Confirms?** ➕ Narrows etiology.","- **Best Diagnostic Step:** Targeted testing by clues: **ABG/lactate**, **blood cultures**, **CT head** (focal deficit/trauma/anticoag), **EEG** if nonconvulsive status suspected (often shows [blue]generalized slowing[/blue]). **Confirms?** ✅ Establish precipitant(s).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Correct the cause[/green] (oxygenation, fluids/electrolytes, treat infection, relieve pain with non-deliriogenic strategies).","- **First Line (non-pharm):** [green]DELIRIUM BUNDLE[/green] — reorientation cues, **glasses/hearing aids**, mobilization, sleep protocol (lights/dose timing), hydration, bowel/bladder care, minimize lines/restraints, **deprescribe** deliriogenic meds.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** the patient is unsafe; in Parkinson’s/Lewy, use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained**","- Acute **thalamocortical arousal** and **frontoparietal attention** network failure driven by **neuroinflammation**, impaired **acetylcholine** signaling, excess **dopamine**, and metabolic/hypoxic stress.","- **Circadian disruption** worsens nighttime confusion; **EEG** typically shows **diffuse slowing**.","- Subtypes: **hyperactive**, **hypoactive** (easily missed), and **mixed**; the **exam fluctuates** accordingly.","**6️⃣ Signs — Examination Findings map**","- **Inattention** 🎯 → fails months backward/serial 7s/digit span.","- **Fluctuating awareness/arousal** 🌙 → drowsy ↔ hypervigilant; **worse at night**.","- **Disorganized thinking** 🧩 → illogical, tangential, rambling answers.","- **Perceptual disturbances** 👀 → illusions/visual hallucinations that rise/fall with arousal.","- **Nonfocal neuro exam** 🧪 → look for precipitant clues (fever, dehydration, hypoxia).","- [purple]Pearl:[/purple] ==If attention breaks and arousal wobbles **today**, call it **delirium** until a trigger proves otherwise=="]},{id:"DEL-REDFLAGS-40004",topic:"Geriatrics • Delirium — Red Flags",difficulty:"Medium",vignetteTitle:"When it’s not ‘just delirium’: spot the red flags",stem:"An 81-year-old man becomes acutely confused over 12 hours. Staff report waxing–waning alertness. Today he develops a severe headache, 38.6°C fever, and new difficulty moving his right arm. He’s on warfarin for AF. On exam: somnolent, neck stiffness, photophobia, right pronator drift, and vomiting. Which feature set signals a RED FLAG requiring immediate escalation rather than routine delirium workup?",options:[{key:"A",text:"Gradual cognitive slowing over months with stable alertness and good attention"},{key:"B",text:"Acute fluctuating inattention after starting an opioid, no focal deficits, afebrile"},{key:"C",text:"Acute confusion with focal neurologic deficit, fever/meningism, severe headache, vomiting, and anticoagulant use"},{key:"D",text:"Mild evening agitation (sundowning) that improves with family presence and glasses/hearing aids"},{key:"E",text:"Sleep–wake inversion without systemic symptoms or focal findings"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Red-flag cluster:** **focal deficit** (possible stroke/bleed), **fever/meningism** (CNS infection), **sudden severe headache/vomiting** (↑ICP or SAH), and **anticoagulation** (risk of intracranial hemorrhage).","- This pattern demands **immediate emergency evaluation** and **time-critical imaging**—not a routine search for reversible precipitants.","- In delirium medicine, ==**FAST + HOT + FOCAL + PRESSURE + ANTICOAG**== means escalate now. 🚑","- Early treatment can be life-saving (thrombolysis/EVT, antibiotics/acyclovir, reversal of anticoagulation).","**2️⃣ Why the other options are wrong**","- **A:** Chronic, stable course with preserved attention → not delirium; no emergent red flags.","- **B:** Medication-triggered delirium is common; without focal/systemic danger signs, manage promptly but not as a code situation.","- **D:** Typical **sundowning** features improve with orientation/sensory aids; no red-flag physiology.","- **E:** Sleep–wake disturbance alone is nonspecific; watchful evaluation, not emergent escalation.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** [red]Stabilize ABCs[/red] → airway, breathing (SpO₂/ABG), circulation; **fingerstick glucose** immediately. **Confirms?** ❌ Safety first.","- **Next Diagnostic step:** **Urgent non-contrast CT head** (rule out hemorrhage/mass) ± **CTA head/neck** if stroke suspected; **CXR**, **EKG**, basic labs (**CBC/CMP**, Ca/Mg/Phos, **INR**), **blood cultures** if febrile. **Confirms?** ➕ Identifies time-critical causes.","- **Best Diagnostic Step:** If no mass effect: **Lumbar puncture** for **cell count, glucose/protein, Gram stain/culture, HSV/VZV PCR** when meningitis/encephalitis suspected; **EEG** if nonconvulsive status epilepticus possible. **Confirms?** ✅ Etiologic diagnosis.","- **Adjuncts (by clue):** **Reversal of anticoagulation** if ICH, **toxin panel/CO-oximetry** for exposures, **TSH/cortisol** if endocrine crisis, **ammonia** for hepatic failure.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat the immediately reversible killers[/green] — oxygenation, IV fluids, **empiric IV antibiotics + acyclovir** if CNS infection possible, **stroke pathway** if indicated, **reverse anticoagulation** for ICH, manage ICP (head-up, consider hypertonic agents per protocol).","- **First Line (support & prevention):** Start **delirium bundle** (orientation, sensory aids, mobilize as able, sleep protocol), **deprescribe deliriogenic meds**, correct electrolytes, control pain without heavy sedatives.","- **Gold Standard (agitation safety):** **Low-dose antipsychotic** only if danger to self/others; in **Parkinson’s/Lewy**, use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained (why these are red flags)**","- **Stroke/ICH** → abrupt network disruption ± mass effect → **focal deficits** and decreased consciousness.","- **Meningitis/encephalitis** → **neuroinflammation**, cytokine surge, BBB injury → **fever, neck stiffness, photophobia**.","- **SAH/↑ICP** → diffuse cortical dysfunction → **thunderclap headache, vomiting, papilledema** (if present).","- **Nonconvulsive status** → persistent altered mentation; **EEG** essential.","**6️⃣ Red-flag checklist — escalate immediately when you see…**","- **Focal neurologic deficit** (aphasia, hemiparesis, field cut) or **new seizure/status**.","- **Fever** with **meningism**, **immunosuppression**, or **petechial rash**.","- **Severe sudden headache**, **papilledema**, **projectile vomiting**, or **trauma/anticoagulation**.","- **Profound hypoxia/hypotension**, **glucose extremes**, or **toxin exposure** (CO, salicylates, anticholinergics).","- [blue]Presence of any → jump to **emergent imaging, labs, and targeted therapy** before routine workup[/blue]."]},{id:"DEL-DDX-40005",topic:"Geriatrics • Delirium — Differential Diagnosis",difficulty:"Medium",vignetteTitle:"Acute confusion on the ward: which diagnosis fits best?",stem:"A 79-year-old woman admitted for pneumonia becomes acutely confused over 24 hours. She is alternately drowsy and agitated, cannot sustain attention for months backward, and gives tangential answers. Family says she was cognitively sharp last week. Vitals: T 38.2°C, SpO₂ 90% on room air. Med list includes new oxycodone and diphenhydramine. Neuro exam is nonfocal. Which diagnosis best explains this presentation?",options:[{key:"A",text:"Delirium due to medical illness and medications"},{key:"B",text:"Alzheimer’s disease (amnestic presentation)"},{key:"C",text:"Primary psychotic disorder (late-onset schizophrenia)"},{key:"D",text:"Major depressive disorder with cognitive impairment (pseudodementia)"},{key:"E",text:"Nonconvulsive status epilepticus (NCSE)"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Acute (hours–days), fluctuating** change in **attention/awareness** with disorganized thinking is the signature of **delirium**.","- Clear **precipitants**: infection (pneumonia with fever/hypoxia) + **deliriogenic meds** (opioid, diphenhydramine/anticholinergic).","- **Nonfocal neuro exam** and previously normal cognition support an acute confusional state rather than neurodegeneration.","- Fits **CAM**: (1) acute/fluctuating + (2) inattention **and** either (3) disorganized thinking or (4) altered consciousness → criteria met.","- [yellow]Pattern lock:[/yellow] acute + fluctuating + inattention + medical/medication trigger ⇒ **delirium**. 🧠⚡","**2️⃣ Why the other options are wrong**","- **B. Alzheimer’s disease:** **Insidious** years-long decline with **poor cueing** but **stable arousal**; not an abrupt, fluctuating syndrome tied to illness/meds.","- **C. Primary psychosis:** Delusions/hallucinations can occur, but **attention and level of consciousness are typically intact**; onset in late life without prodrome is unusual.","- **D. Depression (pseudodementia):** Low mood and **retrieval-type** deficits with **preserved attention**; course is **weeks–months**, not hours–days with fever/hypoxia.","- **E. NCSE:** Can mimic delirium but often shows **staring, fluctuating responsiveness, subtle motor signs**; requires **EEG**—consider if unexplained or refractory, but infection/anticholinergic load already explains this case.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **CAM screen** + vitals, **fingerstick glucose**, **pulse oximetry**. **Confirms?** ❌ Identifies the syndrome.","- **Next Diagnostic step:** **Search for triggers** → med review (stop anticholinergics, minimize opioids), **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR**, **ABG** if hypoxic, **ECG**. **Confirms?** ➕ Finds etiology.","- **Best Diagnostic Step:** Targeted testing by clues (e.g., **blood cultures**, **lactate**, **TSH/B12** if subacute, **CT head** if trauma/focal deficit/anticoagulation, **EEG** if NCSE suspected). **Confirms?** ✅ Establish precipitant(s).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat underlying cause(s)[/green] — oxygenation, antibiotics for pneumonia, fluids/electrolytes, **deprescribe anticholinergics**, use the **lowest effective opioid** and prefer multimodal analgesia.","- **First Line (non-pharm):** [green]DELIRIUM BUNDLE[/green] — orientation (clocks/family), glasses/hearing aids, mobilize, lights-by-day/dark-by-night, hydration, bowel/bladder care, reduce lines/restraints.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** patient endangers self/others; in Parkinson’s/Lewy use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained (DDx focus)**","- **Delirium:** acute **network disconnection** of **frontoparietal attention** and **thalamocortical arousal** circuits driven by **inflammation**, **hypoxia**, and **neurotransmitter imbalance** (↓acetylcholine, ↑dopamine).","- **Alzheimer’s:** **Aβ/tau** neurodegeneration → hippocampal storage failure; not acutely fluctuating.","- **Psychosis:** Dopaminergic dysregulation with **intact arousal/attention**; lacks medical trigger and fluctuation.","- **Depression:** Fronto-limbic mood disorder with **preserved attention** and effort-dependent performance; time course longer.","- **NCSE:** Persistent epileptiform activity → altered mentation; **EEG** shows ictal discharges; consider when triggers are absent or response to treatment is poor.","**6️⃣ Symptoms — pattern recognition for DDx**","- **Delirium:** **Inattention**, fluctuating arousal, disorganized thinking, sleep–wake inversion; medical/medication triggers.","- **AD:** Gradual memory loss, **poor cueing**, stable alertness.","- **Psychosis:** Hallucinations/delusions with steady attention/awareness; no fever/hypoxia link.","- **Depression:** Low mood, anergia; cognitive slowing improves with cues/effort.","- **NCSE:** Staring spells, automatisms, unresponsiveness cycles; **EEG** clarifies.","- [purple]Pearl:[/purple] ==If attention is broken **and** the course **fluctuates**, park on **delirium** while you hunt the trigger=="]},{id:"DEL-INV-40006",topic:"Geriatrics • Delirium — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test when you suspect delirium",stem:"An 81-year-old post-op patient becomes acutely confused over 18 hours. Nurses report waxing–waning alertness and poor attention. She started oxycodone and diphenhydramine last night. Vitals: 38.0°C, HR 104, BP 146/82, SpO₂ 90% RA. What is the **best initial investigation** to pursue?",options:[{key:"A",text:"Bedside Confusion Assessment Method (CAM) + immediate physiology check (vitals, fingerstick glucose, pulse oximetry) and medication review"},{key:"B",text:"Non-contrast CT head"},{key:"C",text:"Electroencephalography (EEG)"},{key:"D",text:"Lumbar puncture for CSF analysis"},{key:"E",text:"MRI brain with and without contrast"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium is a clinical diagnosis**: start with **CAM** to establish the syndrome (acute/fluctuating + inattention + [disorganized thinking or altered consciousness]).","- The patient may be **hypoxic**, **febrile**, hypoglycemic/hyperglycemic, or **over-sedated**—so the **first tests are bedside physiology**: **vitals, fingerstick glucose, SpO₂/ABG if needed**, and **medication review** for deliriogenic agents.","- This approach is **fast, low-risk, and high-yield**, immediately guiding treatment (oxygen, glucose, stop anticholinergics/opioids, treat infection).","- [green]Practical win:[/green] Confirm the syndrome, correct life threats **now**, and then broaden the search for causes. 🧠⚡","**2️⃣ Why the other options are wrong**","- **B. CT head:** Indicated **only when** red flags exist (head trauma, focal deficit, anticoagulation bleed risk, thunderclap headache). Not the first step for typical ward delirium.","- **C. EEG:** Helpful if **nonconvulsive status** is suspected or to document generalized slowing, but **not** first-line for routine cases.","- **D. CSF:** Reserve for **meningitis/encephalitis** concern (fever + meningism/immunosuppression); invasive and not initial in most.","- **E. MRI:** Excellent for structural disease, but **low immediate yield** in standard delirium evaluation without focal signs.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **CAM + ABCs**; check **vitals**, **fingerstick glucose**, **SpO₂** (± ABG), pain score; **medication review** (anticholinergics, opioids, benzos). **Confirms?** ❌ Identifies syndrome and immediate threats.","- **Next Diagnostic step →** **Etiology screen**: **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR** if pulmonary signs, **ECG**, consider **TSH/B12** if subacute. **Confirms?** ➕ Points to trigger(s).","- **Best Diagnostic Step →** **Targeted testing by clues**: **blood cultures/lactate**, **CT head** (trauma/focal/anticoag), **EEG** (NCSE concern), **LP** (meningitis/encephalitis). **Confirms?** ✅ Etiologic diagnosis.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat cause(s) immediately[/green] — oxygen for hypoxia, fluids/electrolytes, antibiotics for infection, multimodal analgesia; **stop/reduce deliriogenic meds**.","- **First Line (non-pharmacologic):** [green]DELIRIUM BUNDLE[/green] — reorientation cues, **glasses/hearing aids**, daytime mobilization, sleep hygiene (lights off at night), hydration, bowel/bladder care, minimize lines/restraints.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** unsafe; in **Parkinson’s/Lewy**, use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained**","- Delirium reflects **frontoparietal attention** and **thalamocortical arousal** network failure triggered by **inflammation**, **hypoxia**, **metabolic derangements**, and **neurotransmitter imbalance** ([blue]↓acetylcholine, ↑dopamine[/blue]).","- Correcting physiology (O₂, glucose, electrolytes, fever) and removing offenders rapidly **stabilizes networks**, enabling recovery.","**6️⃣ Symptoms — pattern recognition**","- **Inattention** 🎯 (fails months backward/digit span) with **fluctuating awareness** 🌙.","- **Disorganized thinking** 🧩 and **sleep–wake inversion** 😴.","- **Hallucinations/illusions** 👀 that ebb and flow with arousal.","- [purple]Pearl:[/purple] ==In suspected delirium, **CAM + vitals/glucose/SpO₂ + med review** is the best first move=="]},{id:"DEL-GOLD-40007",topic:"Geriatrics • Delirium — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What definitively establishes delirium at the bedside?",stem:"An 82-year-old inpatient becomes acutely confused over 24 hours with waxing–waning alertness. Nurses report poor attention and disorganized thinking after opioids and a new infection. CT head is normal. You want the **gold standard** to establish delirium as a diagnosis (separate from finding the cause). What is the single best choice?",options:[{key:"A",text:"Brain MRI with and without contrast"},{key:"B",text:"Electroencephalography (EEG)"},{key:"C",text:"Lumbar puncture for CSF cell count, protein, and cultures"},{key:"D",text:"Formal clinical assessment using DSM-5 criteria (or a validated tool such as CAM/CAM-ICU) demonstrating acute/fluctuating inattention and altered awareness"},{key:"E",text:"Comprehensive neuropsychological testing battery"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium is a clinical diagnosis**. The **gold standard** is an **expert clinical assessment using DSM-5 criteria**, often operationalized with **validated tools** like **CAM** (or **CAM-ICU** for ventilated patients).","- Core required elements: **acute onset**, **fluctuating course**, **inattention**, **altered awareness**, plus additional cognitive change (disorganized thinking, disorientation, perception).","- Imaging/labs help **find the cause**, not to diagnose the syndrome itself.","- [yellow]Bottom line:[/yellow] To *prove* delirium is present → **DSM-5/CAM-based bedside assessment**. 🧠⚡","**2️⃣ Why the other options are wrong**","- **A. MRI:** Excellent for structural disease but **does not define delirium**; often normal or nonspecific.","- **B. EEG:** May show **generalized slowing** or detect **NCSE**, but it **supports** and **doesn’t establish** delirium as the syndrome.","- **C. CSF:** Useful when **infection/inflammation** is suspected; it finds **causes**, not the delirium syndrome itself.","- **E. Neuropsych testing:** Time-consuming and inappropriate for fluctuating attention/arousal; not required to diagnose delirium.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **DSM-5/CAM at bedside** (acute + fluctuating + **inattention** + **disorganized thinking/altered consciousness**). **Confirms?** ✅ **Yes** — establishes delirium.","- **Next Diagnostic step →** **Physiology check & screen for precipitants**: vitals, **fingerstick glucose**, **SpO₂/ABG**, medication review (anticholinergics, opioids, benzos), **CBC/CMP**, Ca/Mg/Phos, **UA/urine culture**, **CXR**, **ECG**. **Confirms?** ➕ Finds likely triggers.","- **Best Diagnostic Step (targeted by clues) →** **CT head** (trauma/focal/anticoag), **EEG** (NCSE concern), **LP** (meningitis/encephalitis), toxin panels, **TSH/B12/cortisol/ammonia** as indicated. **Confirms?** ✅ Etiology defined.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Treat causes promptly[/green] — oxygenation, fluids/electrolytes, antibiotics for infection, multimodal analgesia; **deprescribe deliriogenic meds**.","- **First Line (non-pharmacologic):** [green]DELIRIUM BUNDLE[/green] — orientation cues, **glasses/hearing aids**, mobilization, sleep hygiene (quiet/dark nights), hydration/nutrition, bowel/bladder care, minimize lines/restraints.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if unsafe**; in **Parkinson’s/Lewy** use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained**","- Delirium = **acute network failure** in **frontoparietal attention** and **thalamocortical arousal** circuits.","- Mechanisms: **neuroinflammation**, **neurotransmitter imbalance** ([blue]↓acetylcholine, ↑dopamine[/blue]), **hypoxia/metabolic stress**, and **circadian disruption**.","- EEG often shows **diffuse slowing**; this reflects network dysfunction but lacks diagnostic specificity without the **clinical** syndrome.","**6️⃣ Symptoms — pattern recognition link**","- **Inattention** 🎯 (months backward/digit span failures) with **fluctuating awareness** 🌙.","- **Disorganized thinking** 🧩, **sleep–wake inversion** 😴, **illusions/visual hallucinations** 👀.","- [purple]Pearl:[/purple] ==To *diagnose* delirium: use **DSM-5/CAM**; to *treat* delirium: correct **physiology & precipitants**=="]},{id:"DEL-ETIO-40008",topic:"Geriatrics • Delirium — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"Why did this patient become delirious? Multifactorial brain failure",stem:"An 84-year-old woman with baseline mild cognitive impairment and poor hearing is admitted for hip-fracture repair. Within 36 hours post-op she becomes acutely confused with waxing–waning attention. Vitals: T 38.1°C, SpO₂ 90% on room air, HR 106. Labs: Na 129, BUN/Cr ratio 28. Meds started last night: oxycodone PRN, diphenhydramine at bedtime, and oxybutynin for bladder spasms. UA shows pyuria. Which underlying **etiology** best explains her delirium?",options:[{key:"A",text:"Primary Alzheimer’s disease progression causing storage (memory) failure"},{key:"B",text:"Acute focal ischemic stroke in the left MCA territory"},{key:"C",text:"Multifactorial acute brain failure: interaction of predisposing vulnerability (age, MCI, sensory loss) with precipitating factors (infection, hypoxia, electrolyte derangement, pain, polypharmacy—anticholinergics/opioids/antihistamines)"},{key:"D",text:"Primary psychotic disorder emerging in late life"},{key:"E",text:"Long-standing major depressive disorder with pseudodementia"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- Delirium typically arises from a **vulnerability–precipitant model**: **predisposing factors** (advanced age, cognitive impairment, sensory deficits, frailty) combine with **acute triggers** (infection, hypoxia, metabolic disturbances, pain, sleep loss, **deliriogenic medications**—notably **anticholinergics, sedating antihistamines, opioids, benzodiazepines**).","- This patient has **multiple precipitants at once**: UTI/fever, post-op hypoxia, **hyponatremia**, dehydration (BUN/Cr), **anticholinergics** (diphenhydramine, oxybutynin), and **opioids**, layered on high baseline vulnerability (age, MCI, hearing loss).","- The result is **acute network dysfunction** of attention/awareness (delirium), not a focal lesion or slow neurodegenerative drift.","- [yellow]Etiology lock:[/yellow] many small hits on a vulnerable brain → **multifactorial acute brain failure (delirium)**. 🧠⚡","**2️⃣ Why the other options are wrong**","- **A. Alzheimer progression:** Neurodegeneration is **insidious** with **stable arousal** and early preserved attention; it doesn’t cause **abrupt, fluctuating** inattention over hours–days.","- **B. Focal MCA stroke:** Would suggest **acute focal deficits** (aphasia/hemiparesis/field cut). Delirium can occur post-stroke, but here **poly-precipitant medical factors** explain the syndrome.","- **D. Primary psychosis:** Typically features **intact attention/arousal** and lacks a medical trigger; sudden onset post-op with physiologic derangements fits delirium, not new psychosis.","- **E. Depression (pseudodementia):** **Weeks–months** course with **retrieval** problems and **preserved attention**; not the **hour-to-hour fluctuation** seen here.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **CAM** screen to establish delirium + **vitals**, **fingerstick glucose**, **SpO₂**; **medication review** (anticholinergics/opioids/benzos). **Confirms?** ❌ Identifies syndrome and immediate threats.","- **Next Diagnostic step:** Broad precipitant search: **CBC/CMP** (Na↓, renal function), Ca/Mg/Phos, **UA/urine culture**, **CXR** if pulmonary signs, **ABG** if hypoxic, **ECG**; assess pain, urinary retention, constipation, and sleep. **Confirms?** ➕ Narrows triggers.","- **Best Diagnostic Step:** **Targeted tests** by clue (blood cultures, troponin if ischemia, CT head if trauma/focal/anticoag, **EEG** if NCSE concern). **Confirms?** ✅ Establishes causative factors.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Correct precipitants[/green] — oxygen, treat UTI, IV fluids/electrolytes (slow Na correction), multimodal **non-opioid-first** analgesia, bladder scan/catheter only if necessary.","- **First Line (non-pharmacologic):** [green]DELIRIUM BUNDLE[/green] — reorientation, **glasses/hearing aids**, early mobilization, daytime light/nighttime dark, sleep protocol, hydration/nutrition, remove tethers, family presence.","- **Gold Standard (agitation safety):** **Low-dose antipsychotic** **only if** the patient is unsafe; in **Parkinson’s/Lewy**, use **quetiapine/clozapine**. [red]Avoid benzodiazepines[/red] except for **alcohol/benzo withdrawal**.","**5️⃣ Full Pathophysiology Explained (Etiology focus)**","- **Neuroinflammation** (cytokines from infection/surgery) and **metabolic stress** (hypoxia, hyponatremia) impair **thalamocortical arousal** and **frontoparietal attention** networks.","- **Neurotransmitter imbalance**: [blue]↓ acetylcholine[/blue] (worsened by anticholinergics), [blue]↑ dopamine[/blue] (agitation/psychosis), plus GABA/glutamate disruptions.","- **Sleep–wake disruption**, pain, and sensory deprivation (no hearing aids/glasses) further degrade cognition.","- The **dose–threshold** model: more precipitants → lower threshold to delirium in a vulnerable brain.","**6️⃣ Symptoms — cause → effect mapping**","- **Anticholinergics/opioids** 💊 → ↓ACh/↑DA imbalance → **inattention**, hallucinations, agitation.","- **Infection & hypoxia** 🦠🌬️ → cytokine/oxygen debt → **fluctuating awareness** and lethargy.","- **Hyponatremia/dehydration** 💧 → cortical irritability → confusion, delirium.","- **Sensory loss/no aids** 👂👓 → misperceptions/illusions; improves with amplification/visual cues.","- [purple]Pearl:[/purple] ==Delirium rarely has one cause—**stacked small hits** on a vulnerable brain are the rule=="]},{id:"DEL-COMP-40009",topic:"Geriatrics • Delirium — Complications",difficulty:"Medium",vignetteTitle:"What high-impact complication should you anticipate in delirium?",stem:"An 83-year-old inpatient with pneumonia becomes acutely delirious. He is intermittently agitated at night, pulls at IV lines, and tries to get out of bed. He received oxycodone and diphenhydramine overnight. Exam shows fluctuating attention, disorganized thinking, and unsteady gait when mobilized. Which complication is most important to anticipate and actively prevent over the next 24–72 hours?",options:[{key:"A",text:"New-onset Parkinson’s disease requiring dopaminergic therapy"},{key:"B",text:"Falls with injury (hip fracture or intracranial hemorrhage) due to inattention, impulsivity, and sedatives"},{key:"C",text:"Primary major depressive disorder from hospital environment"},{key:"D",text:"Multiple sclerosis relapse triggered by infection"},{key:"E",text:"Acute leukemia precipitated by antibiotics"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium** markedly increases risk of **falls** because of **inattention, impaired awareness, psychomotor agitation (or sudden hypo→hyper shifts), sleep loss, and sedating/deliriogenic meds**.","- Consequences are **high-impact and immediate**: **hip fractures**, **intracranial hemorrhage**, and **subdural hematoma**, each raising mortality and prolonging hospitalization.","- Nighttime agitation (“==sundowning==”), lines/tethers, and unfamiliar rooms amplify risk; prevention requires **environment + staff + medication** strategies working together.","- [yellow]Safety hinge:[/yellow] In the first 72 hours, **prevent a fall**—it changes the patient’s trajectory more than any sedative. 🧠🦴","**2️⃣ Why the other options are wrong**","- **A:** Parkinsonism is not a typical complication of delirium; antipsychotics may **worsen** parkinsonism but do not cause PD.","- **C:** Low mood can follow hospitalization, but **acute injuries** from falls are the urgent threat during delirium.","- **D:** MS relapse is unrelated to delirium in this context.","- **E:** Antibiotics do not cause acute leukemia; irrelevant to delirium’s risk profile.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **CAM** to confirm syndrome + **vitals, fingerstick glucose, SpO₂**, and **medication review** (stop anticholinergics/minimize opioids). **Confirms?** ❌ Identifies delirium; not the complication yet.","- **Next Diagnostic step:** **Falls risk assessment** (history of falls, gait test, orthostatics), **environmental hazard check** (lines/tethers, bed height, clutter), **sedation scale** (e.g., RASS), **QTc** if antipsychotics planned. **Confirms?** ➕ Stratifies injury risk.","- **Best Diagnostic Step:** If any event occurs (near-fall/fall), perform **post-fall huddle** + targeted imaging (CT head if head strike/anticoagulation), **hip X-ray/CT** if pain/shortened leg. **Confirms?** ✅ Detects injury early.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Immediate fall prevention bundle[/green] — **1:1 observation or cohorting**, low bed with **bed alarm**, **non-slip socks**, clear floor, **night lighting**, frequent orientation, schedule toileting, ensure **glasses/hearing aids** on.","- **First Line:** [green]Medication minimization[/green] — stop **diphenhydramine/anticholinergics**, use **lowest effective opioid** with multimodal analgesia; avoid benzodiazepines (except withdrawal). Early **mobilization/PT**, review **orthostatics**, hydrate, manage pain/constipation/urinary retention.","- **Gold Standard (for dangerous agitation):** **Low-dose antipsychotic** (e.g., haloperidol) **only if** the patient is unsafe; in **Parkinson’s/Lewy**, use **quetiapine/clozapine**. [red]Avoid physical restraints when possible[/red]—they **increase injury and agitation**; if absolutely necessary, use **shortest time with protocolized monitoring**.","**5️⃣ Full Pathophysiology Explained**","- Delirium’s **frontoparietal attention** and **thalamocortical arousal** failure yields **impulsivity**, **inattention**, and **psychomotor variability**.","- **Sedatives/anticholinergics** worsen reaction time and postural reflexes; **sleep–wake disruption** and **pain** further degrade motor control.","- Result: **instability + poor hazard detection** → **falls**; after a fall, inflammatory stress can **worsen delirium**, creating a vicious cycle.","**6️⃣ Complications — pattern recognition & prevention map**","- **Falls with injury** 🦴🧠 → hip fracture, ICH/subdural; **highest immediate priority**.","- **Aspiration pneumonia** 🫁 → inattention, dyscoordination, oversedation; prevent with swallow screening, upright positioning.","- **Pressure injuries & malnutrition** 🛌🍽️ → hypoactive subtype; mobilize, nutrition support.","- **Prolonged LOS, institutionalization, mortality** 📈 → each fall/infection lengthens trajectory.","- **Medication harms** 💊 → QTc prolongation (antipsychotics), **benzodiazepine-induced respiratory depression**; monitor and minimize.","- [purple]Pearl:[/purple] ==Delirium + night + sedatives + lines = **fall waiting to happen**. Build the bundle before it does=="]},{id:"DEL-EPI-40010",topic:"Geriatrics • Delirium — Epidemiology",difficulty:"Medium",vignetteTitle:"How common is delirium, and where should you expect it?",stem:"Your hospital leadership wants a snapshot of delirium burden to plan staffing and prevention programs. They care about how often delirium occurs in different settings, who’s most at risk, and what outcomes it drives. Which statement best captures the **epidemiology** of delirium?",options:[{key:"A",text:"Delirium is rare in older inpatients (<1%) and mostly limited to psychiatric wards"},{key:"B",text:"Delirium is common in older inpatients and ICU/post-operative settings, especially with acute illness and sensory impairment; it is frequently missed (hypoactive type) and is linked to longer stays, institutionalization, and higher mortality"},{key:"C",text:"Delirium occurs primarily in community-dwelling adolescents with viral infections and resolves without consequences"},{key:"D",text:"Delirium is confined to patients with known dementia and never occurs in those with normal baseline cognition"},{key:"E",text:"Delirium only follows large territorial strokes; medical illnesses do not precipitate it"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium is common** in **older hospitalized adults**, with **high rates in ICU** and **post-operative** populations (e.g., hip fracture, major cardiac/vascular surgery).","- **Hypoactive delirium** is **under-recognized**, contributing to **missed diagnoses** on general wards.","- It is associated with **longer length of stay, higher costs**, **post-discharge institutionalization**, **falls**, and **increased short- and long-term mortality**.","- Delirium often heralds **serious acute illness** and predicts **subsequent cognitive decline** in a subset of patients. [yellow]System-level priority condition[/yellow].","**2️⃣ Why the other options are wrong**","- **A:** Delirium is **not rare** and is **not limited** to psychiatric units.","- **C:** Adolescents are **not the primary risk group**; delirium is a disorder of **acute medical illness**, especially in **older** or **medically complex** patients.","- **D:** Baseline **normal cognition** does **not** protect; delirium can occur without prior dementia (though dementia raises risk).","- **E:** Delirium arises from **many medical/surgical causes** (infection, hypoxia, metabolic derangements, drugs) and is **not confined** to large strokes.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step (program level):** Implement **routine screening** (CAM/CAM-ICU once per shift in high-risk units). **Confirms?** ❌ Surveillance detects cases; not etiology.","- **Next Diagnostic step (measurement):** Track **incidence/prevalence** by unit (ICU, ortho, cardiac surgery, medicine), and **subtype mix** (hyper/hypo/mixed). **Confirms?** ➕ Quantifies burden.","- **Best Diagnostic Step (quality):** Audit **missed hypoactive delirium** and measure outcomes (LOS, falls, restraints, discharge destination, 30-day readmission/mortality). **Confirms?** ✅ Identifies targets for improvement.","**4️⃣ Management / Treatment (in order)**","- **Initial Management (population):** [green]Delirium prevention bundle[/green] — orientation, **glasses/hearing aids**, early mobility, sleep protocol, hydration/nutrition, bowel/bladder care, pain control with **non-deliriogenic** strategies.","- **First Line (unit pathways):** [green]Nurse-driven screens + rapid cause hunt[/green] (vitals, glucose, SpO₂, med review) and standardized order sets (labs/imaging by clue).","- **Gold Standard (system impact):** Embed **multicomponent prevention programs** on high-risk wards; establish **post-op/ICU protocols**, minimize **anticholinergics/benzodiazepines**. [red]Avoid routine physical restraints[/red].","**5️⃣ Full Pathophysiology Explained (Epi lens)**","- Rising **age** and **comorbidity** in hospital populations increase **vulnerability**; **acute precipitants** (infection, surgery, meds) are ubiquitous.","- **Sensory deprivation** (no hearing aids/glasses) and **sleep disruption** on wards amplify risk → higher observed incidence.","- Recurrent episodes and prolonged delirium contribute to **functional decline** and **future cognitive impairment** in some patients.","**6️⃣ Symptoms — epidemiology → phenotype link**","- **ICU/post-op**: higher rates; often **hypoactive or mixed** types.","- **General medicine**: infection, hypoxia, dehydration, polypharmacy drive cases; **nighttime worsening** common.","- **Long-term outcomes**: more **falls, institutionalization, mortality**, and **new cognitive deficits** after discharge.","- [purple]Service design tip:[/purple] ==If your unit has many older, acutely ill patients, budget for **screening + prevention bundles** and train staff to spot **hypoactive** delirium=="]},{id:"DEL-RISK-40011",topic:"Geriatrics • Delirium — Risk Factors",difficulty:"Medium",vignetteTitle:"Who’s primed for delirium? Vulnerability × precipitant load",stem:"An 86-year-old with mild cognitive impairment (MoCA 22/30), severe hearing loss (no aids), CKD, and polypharmacy (including diphenhydramine and oxybutynin) is admitted for community-acquired pneumonia. She is dehydrated, hypoxic (SpO₂ 89% RA), febrile, and has a urinary catheter placed. Which risk profile best captures the **highest delirium risk**?",options:[{key:"A",text:"Advanced age + baseline cognitive impairment/sensory loss (vulnerability) × acute illness/severity + deliriogenic medications + sleep disruption/immobility/tethers (precipitants)"},{key:"B",text:"High educational attainment and bilingualism"},{key:"C",text:"APOE ε4 genotype without medical illness"},{key:"D",text:"Seasonal allergies treated with intranasal steroids"},{key:"E",text:"History of resolved concussion 20 years ago, currently well"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Delirium risk = Vulnerability × Precipitant load.**","- **Vulnerability:** **Age ≥65**, **dementia/MCI**, **sensory impairment** (no hearing aids/glasses), frailty, prior delirium.","- **Precipitants:** **Acute illness/severity** (sepsis, hypoxia), **polypharmacy**/**deliriogenic drugs** (anticholinergics, benzodiazepines, opioids), **dehydration/electrolyte derangement**, **sleep loss/ICU**, **immobility**, **tethers** (catheters/lines), pain/constipation/urinary retention.","- The vignette stacks multiple high-yield risks → **very high probability** of delirium. [yellow]==Stacked hits on a vulnerable brain==[/yellow] 🧠⚡","**2️⃣ Why the other options are wrong**","- **B:** Education/bilingualism usually **increase cognitive reserve**; not risk factors.","- **C:** APOE ε4 relates more to **Alzheimer’s** risk; delirium needs **acute triggers** even in carriers.","- **D:** Intranasal steroids have minimal central effects; not a core delirium risk.","- **E:** Remote concussion without current issues is **low-yield** compared to acute physiologic stressors.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Risk screen on admission** (age, dementia/MCI, sensory loss, prior delirium, frailty, polypharmacy, illness severity, tethers, sleep/immobility). **Confirms?** ❌ Stratifies risk.","- **Next Diagnostic step:** Implement **preventive orders** immediately for high-risk patients; perform **CAM** at baseline and every shift. **Confirms?** ➕ Detects incident delirium early.","- **Best Diagnostic Step:** If delirium appears, **hunt precipitants** (vitals, glucose, SpO₂/ABG, med review, CBC/CMP, Ca/Mg/Phos, UA/CXR/ECG) and treat quickly. **Confirms?** ✅ Establishes cause(s).","**4️⃣ Management / Treatment (in order)**","- **Initial Management (prevention):** [green]Multicomponent bundle[/green] — orientation, **hearing aids/glasses**, daytime mobilization, sleep protocol (quiet/dark nights), hydration/nutrition, pain control (non-deliriogenic), bowel/bladder care, **remove tethers** ASAP.","- **First Line (meds):** [green]Deprescribe deliriogenic agents[/green] — stop **anticholinergics** (diphenhydramine/oxybutynin), minimize **benzodiazepines/opioids**; prefer multimodal analgesia.","- **Gold Standard:** Unit-wide **prevention programs** (e.g., HELP model) with nursing-led screening, early mobility, and sensory optimization; [red]avoid routine restraints/bedrest[/red].","**5️⃣ Full Pathophysiology Explained**","- Predisposed brains (age, neurodegeneration, sensory deprivation) have **lower reserve** in **frontoparietal attention** and **thalamocortical arousal** networks.","- Acute insults (infection, hypoxia, metabolic derangement) trigger **neuroinflammation** and **neurotransmitter imbalance** ([blue]↓acetylcholine, ↑dopamine[/blue]), tipping the system into **delirium**.","- Drugs with **anticholinergic** and **sedative** properties further suppress attention/arousal, while **sleep and immobility** worsen synaptic efficiency.","**6️⃣ Risk checklist — memorize the big levers**","- **Age ≥65, dementia/MCI, prior delirium, frailty.**","- **Sensory loss** without aids (hearing/vision).","- **Acute severity:** sepsis, hypoxia, shock, surgery/ICU.","- **Deliriogenic meds:** anticholinergics, benzos, opioids, sedating antihistamines, polypharmacy.","- **Environment:** sleep disruption, **immobility**, **tethers** (Foley/lines), unfamiliar setting.","- [purple]Pearl:[/purple] ==Reduce **drugs, tethers, darkness of hearing/vision**, and **physiologic chaos**—your best delirium prophylaxis=="]}];function vx(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const wx=/^[0-9+\-*/().\s^%]*$/;function kx(o){if(!wx.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function es({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Cx(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function Ax(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(kx(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function Sx(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Nx({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(es,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=st[w].id,f=y[g],k=f?f===st[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:st[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:st[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:st[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function jx({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[st[A].id]===st[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:st[j],chosen:d[st[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(es,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"No incorrect answers — excellent 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function Ex(){const o=Vt(),r=Sx(),[d,c]=p.useState(st.map((v,m)=>m)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=st[d[g]],ie=st.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const v=ee.current;if(!v)return;const m=window.getSelection&&window.getSelection();if(!(!m||m.rangeCount===0))try{const C=m.getRangeAt(0);if(!v.contains(C.commonAncestorContainer)||String(C).trim().length===0)return;const I=document.createElement("mark");I.className="bg-yellow-200 rounded px-0.5",C.surroundContents(I),m.removeAllRanges()}catch{const C=v.getAttribute("contenteditable");v.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),C!==null?v.setAttribute("contenteditable",C):v.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const v=()=>T();return document.addEventListener("mouseup",v),()=>document.removeEventListener("mouseup",v)},[_]);const U=()=>{const v=ee.current;v&&v.querySelectorAll("mark").forEach(m=>{const C=m.parentNode;for(;m.firstChild;)C.insertBefore(m.firstChild,m);C.removeChild(m)})},B=v=>{const m=v==="random"?vx(st.map((C,I)=>I)):st.map((C,I)=>I);c(m),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const v=m=>{m.key==="ArrowRight"&&g<ie-1&&f(C=>C+1),m.key==="ArrowLeft"&&g>0&&f(C=>C-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,ie]);const O=()=>A(v=>({...v,[R.id]:!0})),N=()=>{g>=ie-1||f(m=>m+1)},V=()=>g>0&&f(v=>v-1),M=g===ie-1&&!!j[R.id];return p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M]),p.useMemo(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)},[se,j,g]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(v=>!v),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((v,m)=>{const C=st[v],I=k[C.id],W=I?I===C.correct?"correct":"incorrect":"unanswered",ne=m===g?"ring-2 ring-purple-300":W==="correct"?"ring-2 ring-emerald-300":W==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(m),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${ne}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",m+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:C.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:C.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:C.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${W==="correct"?"bg-emerald-500":W==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},C.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(v=>{const m=k[R.id],C=!!j[R.id],I=v.key===R.correct,W=C?I?"border-emerald-300 bg-emerald-50":m===v.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${W}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:m===v.key,onChange:()=>E(ne=>({...ne,[R.id]:v.key})),disabled:C}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[v.key,"."]})," ",v.text]})]},v.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),g===ie-1&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(v=>({...v,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((v,m)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(xx,{text:v})},m))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(v=>!v),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(es,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(Cx,{})}),i.jsx(es,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(Ax,{})}),i.jsx(Nx,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx(jx,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)})(),jumpTo:v=>f(v)}),i.jsx(Dx,{open:!h,onPick:B})]})}function Dx({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(es,{open:o,onClose:()=>{},title:"Start Delirium Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function Tx({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const rt=[{id:"PD-DEF-60001",topic:"Geriatrics • Parkinson’s disease — Definition & Core Concept",difficulty:"Medium",vignetteTitle:"What exactly is Parkinson’s disease (PD)?",stem:"A 68-year-old accountant develops a 2-year history of right-hand rest tremor, slowness in buttoning shirts, softer voice, and reduced arm swing on the right. Exam shows 4–6 Hz pill-rolling rest tremor (R>L), bradykinesia on finger tapping, cogwheel rigidity, and a narrow-based gait with decreased right arm swing. Cognition is intact. Which statement best captures the **core definition** of Parkinson’s disease?",options:[{key:"A",text:"A neurodegenerative synucleinopathy defined clinically by bradykinesia plus rest tremor and/or rigidity, with supportive features and clear responsiveness to dopaminergic therapy"},{key:"B",text:"An autoimmune demyelinating disease of the CNS causing relapsing focal deficits"},{key:"C",text:"A primary cerebellar degeneration with early ataxia and gaze-evoked nystagmus"},{key:"D",text:"A psychiatric condition characterized by functional tremor and normal neurologic examination"},{key:"E",text:"A vasculopathy with stepwise upper motor neuron signs after TIAs"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Parkinson’s disease (PD)** is a **neurodegenerative synucleinopathy** with **loss of dopaminergic neurons** in the **substantia nigra pars compacta**.","- **Clinical definition:** **Bradykinesia** (slowness with decrement/sequence effect) **plus** either **rest tremor (4–6 Hz)** or **rigidity**; postural instability is typically **late**.","- **Supportive features:** **Unilateral onset**, persistent **asymmetry**, **excellent levodopa response**, **levodopa-induced dyskinesias**, and **olfactory loss**.","- **Exclusion “red flags”** suggest atypical parkinsonism (early falls, vertical gaze palsy, rapid progression, poor levodopa response).","- [yellow]Essentials:[/yellow] **Bradykinesia + (rest tremor/rigidity)** with **dopaminergic responsiveness** → PD. 🚶‍♂️🧠","**2️⃣ Why the other options are wrong**","- **B (MS):** Immune-mediated **demyelination** with **relapses** and disseminated lesions; not a basal ganglia synucleinopathy.","- **C (Cerebellar ataxia):** **Gait ataxia**, dysmetria, nystagmus—not **bradykinesia with rest tremor/cogwheeling**.","- **D (Functional):** Inconsistent exam signs with distractibility/entrainment; PD has **objective**, reproducible signs and **levodopa response**.","- **E (Vascular):** **Stepwise** UMN signs and frontal gait from **subcortical infarcts**; PD onset is **gradual** with **rest tremor** and **asymmetry**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Clinical diagnosis** — document **bradykinesia** (sequence effect on tapping), **rest tremor/rigidity**, **asymmetry**; smell testing optional. **Confirms?** ✅ PD likely by criteria.","- **Next Diagnostic step:** **Levodopa trial** (clear motor benefit supports PD). Consider **MRI brain** only to exclude structural mimics if atypical features exist. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (when uncertainty):** **DaTscan (I-123 FP-CIT)** showing [blue]reduced striatal DAT uptake[/blue] distinguishes **degenerative parkinsonism** from **essential/functional tremor** (does **not** separate PD from atypical parkinsonism). **Confirms?** ✅ Supports presynaptic dopaminergic deficit.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education & exercise[/green] (aerobic + resistance + balance), **physical/occupational therapy**, constipation/sleep counseling.","- **First Line:** For motor symptoms impacting life: **levodopa/carbidopa** (most effective); alternatives/adjuncts: **dopamine agonists**, **MAO-B inhibitors**; **amantadine** for dyskinesias.","- **Gold Standard (advanced motor fluctuations/dyskinesia):** **Deep brain stimulation (DBS)** of **STN** or **GPi** in appropriate candidates; [green]optimize levodopa timing[/green].","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregation (Lewy pathology) in **substantia nigra** → **dopamine depletion** in **dorsal striatum**.","- Circuit effects: **↑ indirect pathway / ↓ direct pathway** → **bradykinesia/rigidity**; resting tremor linked to **brainstem–thalamic loops**.","- Nonmotor systems (olfactory bulb, autonomic, limbic) are involved early → **hyposmia**, **constipation**, **REM sleep behavior disorder** in many.","- [blue]Levodopa[/blue] replenishes dopamine, **improving bradykinesia/rigidity/tremor**; chronic exposure may cause **dyskinesias** (striatal plasticity changes).","**6️⃣ Symptoms — core pattern recognition**","- **Bradykinesia** 🐢 → slow initiation, **decrement** on repetitive tasks.","- **Rest tremor** ✋ (4–6 Hz), **asymmetric** (R>L), decreases with action.","- **Rigidity** 🧱 (lead-pipe/cogwheel), **reduced arm swing**, hypomimia, hypophonia.","- **Nonmotor** 🌙🦠 → hyposmia, constipation, RBD, depression/anxiety, pain, autonomic changes (orthostasis).","- [purple]Pearl:[/purple] ==If it starts **asymmetrically** with **rest tremor** and **bradykinesia**, and **loves levodopa**, think **PD**=="]},{id:"PD-SX-60002",topic:"Geriatrics • Parkinson’s disease — Clinical Presentation (Symptoms)",difficulty:"Medium",vignetteTitle:"Spot the Parkinson’s pattern: asymmetric rest tremor, bradykinesia, rigidity",stem:"A 67-year-old right-handed teacher notices 18 months of right-hand rest tremor that eases with action, slowing when typing, smaller handwriting, and a softer voice. Family notes reduced right arm swing and mild stooping. She struggles with buttoning by evening and feels constipated. Sense of smell has faded over years. Which clinical constellation best identifies Parkinson’s disease?",options:[{key:"A",text:"Wide-based gait with early falls, vertical gaze palsy, and poor levodopa response"},{key:"B",text:"Stepwise executive dysfunction with urinary urgency after TIAs"},{key:"C",text:"Cerebellar ataxia with intention tremor and dysmetria"},{key:"D",text:"Asymmetric 4–6 Hz rest tremor that improves with action, bradykinesia with sequence effect, rigidity, hypophonia/hypomimia, micrographia; nonmotor features like hyposmia, constipation, RBD"},{key:"E",text:"Fluctuating attention with early well-formed visual hallucinations and symmetric parkinsonism"}],correct:"D",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Parkinson's disease (PD)** presents with **bradykinesia** plus **rest tremor** and/or **rigidity**, typically **asymmetric** at onset.","- Classic symptom signatures: **4–6 Hz rest tremor** that **diminishes with action**, **sequence effect** (speed/amplitude decrement) on repetitive tasks, **micrographia**, **hypophonia**, **hypomimia**, and **reduced arm swing**.","- **Nonmotor** prodromes frequently accompany: **hyposmia**, **constipation**, **REM sleep behavior disorder (RBD)**, anxiety/depression, pain, and autonomic symptoms (orthostasis).","- **Levodopa responsiveness** is common and supportive. [yellow]==Asymmetric rest tremor + bradykinesia + rigidity with levodopa benefit → PD==[/yellow] 🚶‍♂️🧠","**2️⃣ Why the other options are wrong**","- **A (PSP):** Early falls, **vertical gaze palsy**, axial rigidity, poor levodopa response → **atypical parkinsonism**, not PD.","- **B (VaD):** **Stepwise** course with executive/gait issues post-TIAs—vascular cognitive impairment, not PD motor syndrome.","- **C (Cerebellar):** **Intention** tremor and ataxia (dysmetria) point to cerebellum, not basal ganglia **rest** tremor/rigidity.","- **E (DLB):** Early **fluctuations** and **well-formed visual hallucinations** with symmetric parkinsonism favor **DLB**; PD hallucinations usually arise later or from meds.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Clinical exam** showing **bradykinesia** (sequence effect on tapping/hand open-close) **plus** rest tremor/rigidity; document **asymmetry**. **Confirms?** ✅ PD likely.","- **Next Diagnostic step:** **Levodopa trial** (objective benefit supports PD). **MRI brain** only if atypical features (early falls, gaze palsy, rapid progression). **Confirms?** ➕ Supportive/excludes mimics.","- **Best Diagnostic Step (if doubt):** **DaTscan (I-123 FP-CIT)** → [blue]reduced striatal DAT uptake[/blue] indicates **degenerative parkinsonism** (distinguishes from essential/functional tremor). **Confirms?** ✅ Supports presynaptic deficit.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Exercise is medicine[/green] — aerobic, resistance, balance; **PT/OT**, speech therapy (LSVT LOUD), constipation plan, sleep optimization.","- **First Line:** **Levodopa/carbidopa** for meaningful motor impact; consider **MAO-B inhibitor** or **dopamine agonist** based on age/comorbidities; **amantadine** for dyskinesia.","- **Gold Standard (advanced fluctuations/dyskinesia):** **DBS** (STN/GPi) in appropriate candidates; [green]individualize levodopa timing and fractionation[/green].","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregates in **substantia nigra pars compacta** → **dopamine depletion** in dorsal striatum.","- Circuit shift: **↑ indirect** and **↓ direct** basal ganglia pathway activity → **bradykinesia/rigidity**; tremor linked to pallido–thalamo–brainstem loops.","- Early involvement of **olfactory/autonomic/REM** nuclei explains **hyposmia**, **constipation**, **RBD**.","**6️⃣ Symptoms — quick pattern map**","- **Bradykinesia** 🐢 → slow initiation, **decrement** on repetitive tasks.","- **Rest tremor** ✋ 4–6 Hz, **asymmetric**, improves with action.","- **Rigidity** 🧱 with **cogwheeling**, reduced arm swing, **stooped posture**.","- **Hypomimia/hypophonia/micrographia** 🎭🗣️✍️.","- **Nonmotor** 🌙🦠 → **hyposmia**, **constipation**, **RBD**, mood/autonomic symptoms.","- [purple]Pearl:[/purple] ==Asymmetry + rest tremor + sequence-effect bradykinesia is your PD fingerprint=="]},{id:"PD-SIGNS-60003",topic:"Geriatrics • Parkinson’s disease — Signs (Examination Findings)",difficulty:"Medium",vignetteTitle:"What bedside signs point to Parkinson’s disease?",stem:"A 69-year-old develops 2 years of right-hand tremor and slowness. On exam: 4–6 Hz pill-rolling rest tremor (R>L) that decreases with action, bradykinesia with clear decrement on rapid finger taps (sequence effect), cogwheel rigidity at the right wrist, hypomimia, hypophonia, and reduced right arm swing with a narrow-based gait. Pull test shows one corrective step without falling. Which **examination sign cluster** best fits Parkinson’s disease?",options:[{key:"A",text:"Wide-based gait with early frequent falls, vertical gaze palsy, retrocollis, and poor levodopa response"},{key:"B",text:"Irregular, distractible tremor that entrains to contralateral rhythmic tapping with otherwise normal tone"},{key:"C",text:"Asymmetric 4–6 Hz rest tremor that lessens with action, bradykinesia with sequence effect, cogwheel rigidity, hypomimia/hypophonia, and reduced arm swing; postural instability late"},{key:"D",text:"Prominent limb ataxia with intention tremor, dysmetria, and gaze-evoked nystagmus"},{key:"E",text:"Spasticity with hyperreflexia, extensor plantar responses, and scissoring gait"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Core PD motor triad:** **bradykinesia** 🐢 with **sequence effect** (progressive decrement on repetitive movements) **plus** **rest tremor** ✋ (4–6 Hz, “pill-rolling,” **decreases with action**) and/or **rigidity** 🧱 (lead-pipe/cogwheel).","- **Asymmetry at onset** (R>L) and **reduced arm swing** are highly **supportive** bedside clues; **postural instability** typically **emerges later**.","- **Facial hypomimia** 🎭 and **hypophonia** 🗣️ are common soft signs of hypokinetic state.","- [yellow]Pattern lock:[/yellow] **Asymmetric rest tremor + sequence-effect bradykinesia + rigidity** with a narrow-based gait → **PD**.","**2️⃣ Why the other options are wrong**","- **A (PSP):** **Early falls**, **vertical gaze palsy**, axial rigidity, and **poor levodopa response** → **progressive supranuclear palsy**, not PD.","- **B (Functional tremor):** **Distractible**, **entrainable** tremor with normal tone/posture suggests a **functional** etiology, not degenerative parkinsonism.","- **D (Cerebellar):** **Intention tremor**, dysmetria, and nystagmus indicate **cerebellar ataxia**, not PD’s **rest** tremor and rigidity.","- **E (Pyramidal):** **Spasticity**, **hyperreflexia**, **Babinski** = **UMN** signs (e.g., myelopathy, stroke), not PD (a basal ganglia disorder).","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Clinical exam** documenting **bradykinesia** (decrement on tapping/hand open–close), **rest tremor/rigidity**, and **asymmetry**. **Confirms?** ✅ PD likely by clinical criteria.","- **Next Diagnostic step:** **Levodopa trial** (objective improvement supports PD). **MRI brain** only if atypical signs (early falls, gaze palsy, rapid progression). **Confirms?** ➕ Supportive/excludes mimics.","- **Best Diagnostic Step (if uncertainty):** **DaTscan (I-123 FP-CIT)** → [blue]reduced striatal DAT uptake[/blue] indicates **presynaptic dopaminergic deficit** (distinguishes PD from **essential/functional tremor**). **Confirms?** ✅ Supports degenerative parkinsonism.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Exercise is disease-modifying-adjacent[/green] — aerobic + resistance + balance; **PT/OT**, **speech therapy** (LSVT LOUD), constipation/sleep plans.","- **First Line:** **Levodopa/carbidopa** for meaningful motor impairment; alternatives/adjuncts: **MAO-B inhibitors**, **dopamine agonists**; **amantadine** for dyskinesias.","- **Gold Standard (advanced motor complications):** **Deep brain stimulation (STN/GPi)** in appropriate candidates; [green]optimize levodopa timing and fractionation[/green].","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregation in **substantia nigra pars compacta** → **dopamine depletion** in **dorsal striatum**.","- Basal ganglia circuitry shifts (**↑ indirect / ↓ direct pathway**) produce **bradykinesia/rigidity**; rest tremor involves **pallido–thalamo–brainstem** loops.","- Nonmotor nuclei involvement explains **hypomimia, hypophonia**, and autonomic features; **postural instability** reflects later axial network involvement.","**6️⃣ Signs — Examination Findings map**","- **Bradykinesia with sequence effect** 🐢 → amplitude/speed **decrement** on rapid taps.","- **Rest tremor** ✋ 4–6 Hz **decreases with action**; re-emerges with posture (re-emergent tremor).","- **Rigidity** 🧱 (lead-pipe/cogwheel) ± **Froment’s maneuver** accentuation.","- **Asymmetry & reduced arm swing** ↔ narrow-based hypokinetic gait; **pull test** normal or mildly impaired **early**.","- **Hypomimia/hypophonia/micrographia** 🎭🗣️✍️ complete the PD bedside constellation.","- [purple]Pearl:[/purple] ==If it’s **asymmetric**, **resting**, and **decrements** with repetition, your exam is whispering **Parkinson’s**=="]},{id:"PD-REDFLAGS-60004",topic:"Geriatrics • Parkinson’s disease — Red Flags",difficulty:"Medium",vignetteTitle:"When it’s not typical PD: spot the red flags",stem:"A 71-year-old with 6 months of symmetric bradykinesia and rigidity (minimal rest tremor) has repeated backward falls, early dysphagia with choking, urinary retention requiring catheterization, and lightheadedness with standing (BP drop 35/18 mmHg). Exam shows vertical saccade slowing and impaired downgaze. There has been **little response** to an adequate levodopa trial. Which feature cluster most strongly signals a RED FLAG for atypical or secondary parkinsonism rather than idiopathic PD?",options:[{key:"A",text:"Unilateral rest tremor that improves with action, micrographia, and good levodopa response over 2 years"},{key:"B",text:"Gradual asymmetric onset with reduced arm swing and hyposmia"},{key:"C",text:"Early recurrent falls, vertical gaze palsy, severe autonomic failure (urinary retention/orthostasis), symmetric onset with poor levodopa response"},{key:"D",text:"Mild constipation and REM sleep behavior disorder with classic rest tremor"},{key:"E",text:"Levodopa-induced dyskinesias after years of treatment"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Early postural instability/falls**, **vertical gaze palsy**, and **severe autonomic failure** (urinary retention, dramatic orthostatic hypotension) are hallmark **red flags** for **atypical parkinsonism** (e.g., **PSP** for gaze palsy/early falls; **MSA** for profound dysautonomia).","- **Symmetric onset** without a classic rest tremor plus **poor or transient levodopa response** further argue **against idiopathic PD**.","- **Rapid progression** with early **bulbar symptoms** (dysphagia/stridor) and **axial rigidity** points to non-PD syndromes that require different counseling and workup.","- [yellow]Pattern lock:[/yellow] **Falls early + gaze palsy + dysautonomia + poor levodopa** → **not typical PD**. 🚩","**2️⃣ Why the other options are wrong**","- **A:** Classic **idiopathic PD**: unilateral rest tremor, micrographia, **good levodopa response**—**not** a red flag.","- **B:** **Asymmetric** onset with hyposmia is **supportive of PD**, not concerning.","- **D:** **Constipation** and **RBD** can precede **typical PD**; without other danger signs, they aren’t red flags.","- **E:** **Levodopa-induced dyskinesias** occur in long-standing PD and **support dopaminergic responsiveness**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** Reassess **history/exam** for red flags: **early falls**, **vertical gaze palsy**, **rapid progression**, **bulbar dysfunction**, **disproportionate dysautonomia**, **pyramidal/cerebellar signs**, **poor levodopa response**. **Confirms?** ❌ Raises suspicion for atypical/secondary causes.","- **Next Diagnostic step →** **MRI brain** with attention to **midbrain atrophy (‘hummingbird sign’), putaminal rim changes**, **cerebellar/pons atrophy**; **spine MRI** if myelopathy signs; **orthostatic vitals**/**autonomic testing** (QSART/tilt) for MSA. **Confirms?** ➕ Provides syndrome-specific support/excludes structural causes.","- **Best Diagnostic Step →** **Targeted ancillary tests** by phenotype: **DaTscan** (confirms presynaptic dopaminergic deficit but won’t separate PD from atypicals), **FDG-PET** (network patterns), **EMG laryngoscopy** if stridor, **CSF** only if inflammatory/normal-pressure hydrocephalus (NPH) suspected. **Confirms?** ✅ Refines diagnosis and rules out mimics.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Safety first[/green] — **fall prevention**, swallowing evaluation (**speech & swallow**), **orthostatic management** (salt, fluids, compression, **midodrine/droxidopa**), bowel/bladder plan.","- **First Line:** Trial **optimized levodopa** (even if limited), **PT/OT**, **speech therapy**; for MSA dysautonomia use **autonomic-focused therapy**; for PSP prioritize **gaze/axial strategies** and assistive devices.","- **Gold Standard:** [green]Early goals-of-care & multidisciplinary care[/green] with a **movement-disorders specialist**; [red]avoid dopamine-blocking drugs[/red] (metoclopramide, typical antipsychotics). Consider **botulinum toxin** for dystonia, **feeding strategies** if aspiration risk.","**5️⃣ Full Pathophysiology Explained**","- **Idiopathic PD:** **α-synuclein** loss in **substantia nigra** → **dopamine depletion**; usually **asymmetric**, **rest tremor**, **good levodopa**.",`- **Atypicals:**
  - **PSP (tauopathy):** **Vertical gaze palsy**, **early falls**, axial rigidity → poor levodopa.
  - **MSA (synucleinopathy):** **Severe autonomic failure**, cerebellar or parkinsonian variant, stridor.
  - **CBD (tauopathy):** **Asymmetric apraxia**, **alien limb**, cortical sensory loss.
  - **DLB (synucleinopathy):** **Early hallucinations/fluctuations** with parkinsonism.
  - **VaP (vascular):** **Lower-body parkinsonism**, stepwise progression, WM disease.`,"- **Secondary causes:** **Drug-induced** (antipsychotics), **normal-pressure hydrocephalus**, **Wilson disease** (younger), **structural/vascular** lesions.","**6️⃣ Red-flag checklist — escalate workup when you see…**","- **Early frequent falls** (≤3 years), **vertical gaze palsy**, **axial rigidity**. ","- **Severe autonomic failure** (urinary retention, orthostatic hypotension), **stridor**.","- **Symmetric onset**, **absence of rest tremor**, **rapid progression**, **poor levodopa response**.","- **Cerebellar signs**, **pyramidal signs**, **cortical signs** (apraxia, alien limb), **early dysphagia**.","- **Red flags for secondary causes:** abrupt onset (stroke), exposure to **D2 blockers**, **NPH** triad, structural lesions on imaging.","- [purple]Pearl:[/purple] ==If it falls early, looks vertical, faints on standing, and shrugs at levodopa—**rethink PD**=="]},{id:"PD-DDX-60005",topic:"Geriatrics • Parkinson’s disease — Differential Diagnosis",difficulty:"Medium",vignetteTitle:"Rest tremor, sequence-effect slowness: which diagnosis fits best?",stem:"A 66-year-old right-handed machinist has 18 months of right-hand 4–6 Hz rest tremor that eases with action. He reports slowness with buttoning and smaller handwriting. Family notes reduced right arm swing and mild stoop. Exam: asymmetric rest tremor (R>L), bradykinesia with decrement on rapid finger taps, cogwheel rigidity at the right wrist, hypomimia, hypophonia, narrow-based gait with reduced right arm swing; pull test requires one step. Cognition intact. Which diagnosis best explains this presentation?",options:[{key:"A",text:"Essential tremor (ET)"},{key:"B",text:"Drug-induced parkinsonism (antipsychotic/metoclopramide exposure)"},{key:"C",text:"Parkinson’s disease (idiopathic)"},{key:"D",text:"Progressive supranuclear palsy (PSP)"},{key:"E",text:"Cerebellar outflow tremor from degeneration or MS"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Asymmetric onset** with **4–6 Hz pill-rolling *rest* tremor** that **improves with action**, plus **bradykinesia with sequence effect** and **rigidity**, is the archetypal **Parkinson’s disease (PD)** profile. ","- Narrow-based **hypokinetic gait** with **reduced arm swing** and soft signs (**hypomimia**, **hypophonia**) reinforce PD. ","- **Postural instability** is mild/late (single corrective step), also consistent with early PD rather than atypicals. ","- [yellow]Pattern lock:[/yellow] **Bradykinesia + (rest tremor/rigidity)** with **asymmetry** and **levodopa responsiveness** (when tried) → **PD**. 🚶‍♂️🧠","**2️⃣ Why the other options are wrong**","- **A. Essential tremor:** Typically **bilateral action/postural tremor** (hands/head/voice), **improves with alcohol**, **no bradykinesia/rigidity**, and **no true rest tremor** as the dominant feature.","- **B. Drug-induced parkinsonism:** Tends to be **symmetric** and **lacks classic rest tremor**; history of **D2 blocker** (antipsychotic/metoclopramide) exposure is key—absent here.","- **D. PSP:** **Early falls**, **vertical gaze palsy**, **axial rigidity**, and **poor levodopa response**; tremor is usually minimal and **postural instability is early**, unlike this case.","- **E. Cerebellar tremor:** **Intention tremor**, **ataxia**, dysmetria, **wide-based gait**; not an **asymmetric rest tremor** with cogwheeling and sequence-effect slowness.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Clinical diagnosis** — document **bradykinesia** (decrement on repetitive tasks) **plus** rest tremor/rigidity; note **asymmetry**. **Confirms?** ✅ PD likely.","- **Next Diagnostic step:** Trial **levodopa/carbidopa** to demonstrate **objective motor benefit**; **smell testing** optional; **review meds** for dopamine blockers. **Confirms?** ➕ Supports PD or reveals mimics.","- **Best Diagnostic Step (if doubt):** **DaTscan (I-123 FP-CIT)** → [blue]reduced striatal DAT uptake[/blue] confirms **presynaptic dopaminergic deficit** (distinguishes PD from **ET/functional tremor**, but not from atypicals). **Confirms?** ✅ Supports degenerative parkinsonism.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Education + exercise[/green] (aerobic/resistance/balance), **PT/OT**, speech therapy PRN; manage constipation/sleep, fall prevention.","- **First Line:** **Levodopa/carbidopa** for meaningful motor impact; alternatives/adjuncts: **MAO-B inhibitor**, **dopamine agonist** (younger/low psychosis risk); **amantadine** for dyskinesias.","- **Gold Standard (advanced motor complications):** **DBS** of **STN** or **GPi** in appropriate candidates; [green]optimize levodopa timing/fractionation[/green].","**5️⃣ Full Pathophysiology Explained (DDx lens)**","- **PD:** **α-synuclein** pathology in **SNpc** → **dopamine loss** in dorsal striatum → **↑ indirect/↓ direct** pathway → **bradykinesia/rigidity**; brainstem–thalamo loops contribute to **rest tremor**.","- **ET:** Cerebellothalamic network oscillation → **action** tremor without basal ganglia hypokinesia.","- **Drug-induced:** **D2 blockade** at striatum → symmetric parkinsonism, often resolves with withdrawal.","- **PSP:** **Tauopathy** with midbrain degeneration → **vertical gaze palsy**, axial rigidity, early falls.","- **Cerebellar tremor:** Dentato–rubro–thalamic pathway lesions → **intention tremor** + ataxia.","**6️⃣ Symptoms — quick pattern map**","- **PD:** **Asymmetric** rest tremor ✋ + **sequence-effect bradykinesia** 🐢 + **rigidity** 🧱; narrow-based hypokinetic gait.","- **ET:** **Bilateral action/postural tremor** 🫱, better with alcohol, no rigidity/bradykinesia.","- **Drug-induced:** **Symmetric** parkinsonism after **D2 blockers** 💊.","- **PSP:** **Early falls** ↘️ + **vertical gaze palsy** 👀.","- **Cerebellar:** **Intention tremor/ataxia** 🎯🚶.","- [purple]Pearl:[/purple] ==A tremor that **rests**, a movement that **decrements**, and an onset that’s **asymmetric**—that’s your PD fingerprint=="]},{id:"PD-INV-60006",topic:"Geriatrics • Parkinson’s disease — Best Initial Investigation",difficulty:"Medium",vignetteTitle:"First test when you suspect Parkinson’s disease",stem:"A 65-year-old develops 18 months of right-hand 4–6 Hz rest tremor, slowness with a sequence effect on repetitive tapping, and cogwheel rigidity. Gait is narrow-based with reduced right arm swing. There are no early falls, gaze palsy, or red flags. Which **single best initial investigation** should you pursue?",options:[{key:"A",text:"Clinical examination establishing bradykinesia plus rest tremor and/or rigidity, with a documented response to levodopa trial"},{key:"B",text:" MRI brain with and without contrast"},{key:"C",text:"DaTscan (I-123 FP-CIT) dopamine transporter SPECT"},{key:"D",text:"FDG-PET brain metabolic imaging"},{key:"E",text:"Serum copper/ceruloplasmin and 24-hour urinary copper"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Parkinson’s disease is a *clinical* diagnosis**: the best initial step is a **focused neurologic exam** demonstrating **bradykinesia** *plus* **rest tremor and/or rigidity** with **asymmetry**.","- A **levodopa trial** that produces clear, objective improvement is a **supportive bedside biomarker** for idiopathic PD.","- Early routine imaging adds little when **no red flags** are present; start by **clinically confirming the phenotype**.","- [yellow]Essentials:[/yellow] **History + exam ± levodopa response** are the **first-line investigation**. 🧠🩺","**2️⃣ Why the other options are wrong**","- **B. MRI brain:** Useful to **exclude structural/atypical causes** *when red flags exist*, but not first-line in a classic PD presentation.","- **C. DaTscan:** Confirms a **presynaptic dopaminergic deficit** and helps distinguish PD from **essential/functional tremor**, yet it is **ancillary** after the clinical exam.","- **D. FDG-PET:** Research/complex atypical cases tool; **not** an initial test for straightforward PD.","- **E. Copper studies:** For **Wilson disease** in younger/atypical cases; **low-yield** in a typical 65-year-old PD picture.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **Clinical exam** documenting **bradykinesia** (sequence effect) + **rest tremor/rigidity**, **asymmetry**, and absence of **red flags**. **Confirms?** ✅ Yes—PD likely.","- **Next Diagnostic step →** **Levodopa/carbidopa trial** with objective benefit (timed tapping, UPDRS). **Confirms?** ➕ Supports idiopathic PD.","- **Best Diagnostic Step (if uncertainty) →** **DaTscan** showing [blue]↓ striatal DAT uptake[/blue] to separate **degenerative parkinsonism** from **ET/functional**. **Confirms?** ✅ Supports presynaptic deficit (doesn’t distinguish PD vs atypicals).","- **Adjuncts →** **MRI** only if **atypical features** (early falls, gaze palsy, rapid progression) or secondary causes suspected.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Exercise is medicine[/green] (aerobic/resistance/balance), **PT/OT**, speech therapy (LSVT), constipation/sleep optimization, education.","- **First Line:** **Levodopa/carbidopa** for functional impact; consider **MAO-B inhibitor** or **dopamine agonist** based on age/comorbidities; **amantadine** for dyskinesia.","- **Gold Standard (advanced motor complications):** **Deep brain stimulation (STN/GPi)** with optimized **levodopa timing/fractionation**.","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregates in **substantia nigra pars compacta** → **dopamine loss** in dorsal striatum.","- Basal ganglia **circuit imbalance** (↑ indirect / ↓ direct pathway) drives **bradykinesia/rigidity**; **rest tremor** arises from oscillations in pallido–thalamo–brainstem loops.","- **Levodopa** restores synaptic dopamine → **improves hypokinesia and rigidity**, validating the dopaminergic mechanism.","**6️⃣ Symptoms — think of PD when you see…**","- **Asymmetric rest tremor** ✋ + **sequence-effect bradykinesia** 🐢 + **rigidity** 🧱.","- **Micrographia, hypophonia, hypomimia** 🎭; **narrow-based gait** with reduced arm swing.","- [purple]Pearl:[/purple] ==If the **exam** already spells PD, make that your **first test**—then use DaTscan/MRI only when the story is fuzzy=="]},{id:"PD-GOLD-60007",topic:"Geriatrics • Parkinson’s disease — Gold Standard Investigation",difficulty:"Medium",vignetteTitle:"What definitively establishes Parkinson’s disease etiology?",stem:"A 68-year-old with 3 years of asymmetric rest tremor, bradykinesia with decrement, and rigidity has clear improvement on levodopa. MRI is unremarkable. DaTscan shows reduced striatal uptake. Family asks: “What is the *gold standard* test that proves this is Parkinson’s disease?”",options:[{key:"A",text:"MRI brain with and without contrast showing normal structure"},{key:"B",text:"DaTscan (I-123 FP-CIT) with reduced striatal dopamine transporter uptake"},{key:"C",text:"Marked clinical response to levodopa documented on UPDRS"},{key:"D",text:"Transcranial sonography showing substantia nigra hyperechogenicity"},{key:"E",text:"Neuropathology demonstrating α-synuclein–positive Lewy bodies/neurites in substantia nigra and related circuits sufficient to explain parkinsonism"}],correct:"E",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Gold standard = tissue diagnosis**: **α-synuclein–positive Lewy bodies/neurites** in **substantia nigra pars compacta** and related pathways on neuropathology. 🔬","- Histopathology directly identifies the **synucleinopathy** underlying PD and distinguishes it from mimics/atypicals; it also quantifies **co-pathology**.","- In life we rely on **clinical criteria + supportive tests**, but definitive proof is **post-mortem** (biopsy is rarely indicated).","- [yellow]Bottom line:[/yellow] **DaTscan, MRI, and levodopa response support** PD; **Lewy bodies confirm** it.","**2️⃣ Why the other options are wrong**","- **A. MRI:** Useful to **exclude structural causes**; cannot prove PD.","- **B. DaTscan:** Shows **presynaptic dopaminergic deficit**, but doesn’t specify **PD vs atypical parkinsonism**.","- **C. Levodopa response:** Highly supportive, not definitive; some atypicals respond early.","- **D. TCS SN hyperechogenicity:** Supportive in some cohorts, **not diagnostic** nor universally available.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **Clinical criteria**: **bradykinesia** + (**rest tremor**/**rigidity**) with **asymmetry**, no red flags. **Confirms?** ✅ Likely PD.","- **Next Diagnostic step →** **Levodopa trial** with objective improvement; **MRI** if atypical features to rule out mimics. **Confirms?** ➕ Supportive.","- **Best Diagnostic Step (when in doubt) →** **DaTscan** ([blue]↓ striatal DAT[/blue]) to distinguish **degenerative parkinsonism** from **ET/functional**. **Confirms?** ✅ Supports but not definitive.","- **Gold Standard →** **Neuropathology** showing **Lewy pathology** in SNpc and related circuits. **Confirms?** ✅✅ Definitive.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Exercise + rehab[/green] (aerobic/resistance/balance), **PT/OT**, **speech therapy** (LSVT), constipation/sleep plans.","- **First Line:** **Levodopa/carbidopa** (most effective); **MAO-B inhibitors** or **dopamine agonists** as alternatives/adjuncts; **amantadine** for dyskinesia.","- **Gold Standard (advanced motor complications):** **DBS** (STN/GPi) in suitable candidates; [green]optimize levodopa timing/fractionation[/green].","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** aggregates in **SNpc** → **dopamine loss** in dorsal striatum → **↑ indirect / ↓ direct** basal ganglia pathway activity → **bradykinesia/rigidity**; tremor from oscillatory thalamo–brainstem loops.","- Spread to **olfactory/autonomic/limbic** circuits explains **hyposmia**, **constipation**, **RBD**, mood/autonomic symptoms.","**6️⃣ Symptoms — pattern recognition link**","- **Asymmetric rest tremor** ✋, **sequence-effect bradykinesia** 🐢, **rigidity** 🧱, narrow-based hypokinetic gait; **levodopa responsiveness**.","- [purple]Pearl:[/purple] ==In clinic, **examination + levodopa** drives diagnosis; in pathology, **Lewy bodies** settle the debate=="]},{id:"PD-ETIO-60008",topic:"Geriatrics • Parkinson’s disease — Etiology (Causes)",difficulty:"Medium",vignetteTitle:"What actually causes Parkinson’s disease?",stem:"A 66-year-old with asymmetric rest tremor, bradykinesia, and rigidity asks, “What causes Parkinson’s—and why me?” He has long-standing hyposmia and constipation. No antipsychotic use or toxin exposure. MRI is unremarkable. Which underlying **etiology** best explains his syndrome?",options:[{key:"A",text:"Autoimmune demyelination with oligoclonal bands in CSF"},{key:"B",text:"α-Synuclein aggregation (Lewy bodies/neurites) causing nigrostriatal dopaminergic neuron loss; multifactorial with aging, genetic susceptibility (e.g., LRRK2/GBA), and environmental factors"},{key:"C",text:"Acute lacunar infarcts of the internal capsule causing stepwise parkinsonism"},{key:"D",text:"Primary cerebellar degeneration producing intention tremor and ataxia"},{key:"E",text:"Pure dopamine deficiency from dietary restriction without structural brain change"}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Parkinson’s disease (PD)** is a **synucleinopathy**: misfolded **α-synuclein** accumulates as **Lewy bodies/neurites**, especially in the **substantia nigra pars compacta**, leading to **dopaminergic neuron loss** and **striatal dopamine depletion**.","- Etiology is **multifactorial**: **aging** (mitochondrial stress), **genetic susceptibility** (e.g., **LRRK2**, **GBA**, PRKN/PINK1, SNCA), and **environmental hits** (pesticides, solvents; lower smoking/caffeine exposure correlates inversely).","- **Prodromal nonmotor features** (hyposmia, constipation, REM sleep behavior disorder) reflect **early brainstem/autonomic involvement** before motor signs.","- [yellow]Essentials:[/yellow] **α-syn aggregation + DA neuron loss** across a background of **age + genes + environment** explains typical PD.","**2️⃣ Why the other options are wrong**","- **A (MS):** Immune **demyelination** with relapses; not a basal ganglia **synucleinopathy**.","- **C (Vascular parkinsonism):** **Stepwise** course, **lower-body gait** predominance, poor levodopa response, extensive WM disease—different from idiopathic PD.","- **D (Cerebellar degeneration):** **Ataxia/intention tremor** dominate; PD has **rest tremor/bradykinesia/rigidity**.","- **E (Dietary dopamine):** Peripheral intake doesn’t cause isolated central DA deficiency; PD is **neurodegenerative**, not nutritional.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step:** **Clinical criteria** — **bradykinesia** + (rest tremor/rigidity), **asymmetry**, nonmotor prodrome. **Confirms?** ✅ PD likely.","- **Next Diagnostic step:** **Levodopa trial** (objective benefit supports idiopathic PD); **MRI** only if atypical features. **Confirms?** ➕ Excludes mimics.","- **Best Diagnostic Step (when uncertain):** **DaTscan** showing [blue]↓ striatal DAT uptake[/blue] → presynaptic dopaminergic deficit (distinguishes PD from ET/functional). **Confirms?** ✅ Supports PD biology (not specific vs atypicals).","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Exercise & rehab[/green] (aerobic/resistance/balance), education, **PT/OT**, constipation/sleep strategies.","- **First Line:** **Levodopa/carbidopa**; consider **MAO-B inhibitor** or **dopamine agonist** based on age/psychiatric risk; **amantadine** for dyskinesias.","- **Gold Standard (advanced motor complications):** **DBS (STN/GPi)** with optimized levodopa timing/fractionation; manage nonmotor symptoms systematically.","**5️⃣ Full Pathophysiology Explained**","- **Molecular:** Misfolded **α-synuclein** aggregates → **proteostasis failure**, **mitochondrial dysfunction**, **oxidative stress**, **impaired autophagy**.","- **Anatomy:** Earliest involvement in **olfactory bulb** and **dorsal motor nucleus of the vagus** → **hyposmia/constipation**; later **SNpc** loss → motor triad; limbic/cortical spread explains mood/cognitive features.","- **Circuitry:** **↓ direct** and **↑ indirect** basal ganglia pathways → **bradykinesia/rigidity**; **tremor** from oscillatory pallido–thalamo–brainstem loops.","- **Genetics:** **LRRK2** (dominant) often typical PD; **GBA** increases risk and cognitive complications; **PINK1/PRKN** (recessive) in early-onset forms.","- [blue]Concept link:[/blue] Aging lowers neuronal resilience; genes and toxins tilt the balance toward **α-syn** misfolding → PD.","**6️⃣ Symptoms — cause → effect mapping**","- **α-syn in olfactory/autonomic nuclei** → **hyposmia**, **constipation**, **RBD** (prodrome).","- **SNpc neuron loss** → **bradykinesia/rigidity**, **rest tremor**; **levodopa** responsiveness.","- **Limbic/cortical spread** → mood/cognitive/autonomic issues later.","- [purple]Pearl:[/purple] ==Think PD when **α-syn biology** meets **asymmetric bradykinesia + rest tremor** on a canvas of **age + genes + environment**=="]},{id:"PD-COMP-60009",topic:"Geriatrics • Parkinson’s disease — Complications",difficulty:"Medium",vignetteTitle:"What high-impact complications should you anticipate in Parkinson’s disease?",stem:"A 72-year-old with 6 years of Parkinson’s disease (PD) on levodopa/carbidopa develops wearing-off periods with unpredictable ‘offs,’ peak-dose dyskinesias, increasing falls, constipation, urinary urgency, REM sleep behavior disorder, and low mood. His spouse notes orthostatic lightheadedness and quieter voice. Which complication profile requires proactive prevention and targeted management in PD?",options:[{key:"A",text:"Only static motor symptoms that remain stable for life"},{key:"B",text:"Primarily cerebellar ataxia and diplopia without autonomic or psychiatric features"},{key:"C",text:"Motor fluctuations (wearing-off, ‘on–off’), levodopa-induced dyskinesias, falls/fragility fractures, aspiration pneumonia, autonomic failure (orthostatic hypotension, constipation, urinary dysfunction), neuropsychiatric complications (depression, anxiety, psychosis, ICDs), and cognitive decline"},{key:"D",text:"Rapid dementia within weeks of diagnosis in all patients"},{key:"E",text:"Exclusive cardiac complications without neurological involvement"}],correct:"C",explanation_detail:["**1️⃣ Why it is the correct answer**","- **PD** evolves beyond the initial motor triad into **motor** and **nonmotor** complication clusters that drive disability and admissions.","- **Motor**: **wearing-off**, **unpredictable offs**, **peak-dose dyskinesias**, **freezing of gait**, and **falls** with **fragility fractures**.","- **Nonmotor**: **autonomic failure** (orthostatic hypotension, constipation, urinary dysfunction, sialorrhea), **neuropsychiatric** (depression, anxiety, **psychosis**, **impulse-control disorders** with dopamine agonists), **sleep** (RBD, insomnia), **pain**, **hypophonia/dysarthria**, and **progressive cognitive decline**.","- These complications are **common, predictable, and modifiable** with regimen tuning, rehab, and safety bundles. [yellow]==Complication management is the art of PD care==[/yellow].","**2️⃣ Why the other options are wrong**","- **A:** PD **progresses** with dynamic complications; symptoms are **not** static.","- **B:** Cerebellar ataxia/diplopia point away from idiopathic PD (think MSA-C, ataxias, or brainstem lesions), and omit key PD complications.","- **D:** Dementia risk increases over years, **not weeks**; course is variable and not universal early.","- **E:** PD complications are **neurologic + systemic**; limiting to cardiac misses the major morbidity drivers.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **Complication screen** each visit: **falls/freezing**, **wearing-off timing diary**, **dyskinesia severity**, **orthostatic vitals**, bowel/bladder review, **mood/anxiety/psychosis**, **sleep (RBD/insomnia)**, **ICD behaviors**. **Confirms?** ❌ Flags problem domains.","- **Next Diagnostic step →** Targeted tests: **videofluoroscopic swallow** if aspiration risk, **autonomic testing** (tilt/QSART) for refractory orthostasis, **bone density** if falls, **MoCA** for cognition, **sleep study** for RBD/OSA. **Confirms?** ➕ Quantifies complication burden.","- **Best Diagnostic Step →** For advanced motor complications, **on–off assessment** with timed UPDRS and **levodopa challenge** ± **apomorphine test**; consider **DBS workup** (neuropsych + MRI). **Confirms?** ✅ Guides advanced therapy.","**4️⃣ Management / Treatment (in order)**","- **Initial Management:** [green]Safety & rehab bundle[/green] — **fall prevention** (PT for cueing strategies, balance; home hazards), **speech/swallow therapy** (LSVT LOUD; diet texture), **bowel regimen** (fiber/osmotics), **orthostatic protocol** (fluids/salt/compression/slow position changes).","- **First Line (medical tuning):** [green]Optimize dopaminergic therapy[/green] — **fractionate levodopa**, add **COMT inhibitor** or **MAO-B inhibitor**, consider **on-demand on-boosters** (inhaled levodopa or subQ apomorphine). Treat **dyskinesia** with **amantadine** (ER if available). Manage **depression/anxiety** (SSRI/SNRI) and **psychosis** with **pimavanserin** or **quetiapine**; address **ICDs** by **reducing dopamine agonists**.","- **Gold Standard (advanced fluctuations/dyskinesia):** **Deep Brain Stimulation (STN/GPi)** or **LCIG/CSA** (levodopa intestinal gel or continuous subcutaneous apomorphine) in suitable candidates; [green]multidisciplinary care** (MDT) for cognition, autonomic failure, palliative planning[/green]. [red]Avoid dopamine blockers[/red] (metoclopramide, typical antipsychotics).","**5️⃣ Full Pathophysiology Explained**","- **Dopamine replacement kinetics** → **pulsatile stimulation** causes **maladaptive plasticity** → **dyskinesias**; disease progression widens the **therapeutic window mismatch** → **wearing-off/on–off**.","- **Basal ganglia–brainstem network changes** and **sensory cueing deficits** yield **freezing of gait**; cholinergic deficits and orthostatic/autonomic dysfunction drive **falls and syncope**.","- **Lewy pathology** spreads to **limbic/cortical** and **autonomic** circuits → **psychosis, mood disorders, cognitive decline, constipation, hypotension**.","- **Swallowing/respiratory** muscle discoordination → **aspiration pneumonia**, a major mortality driver.","**6️⃣ Complications — prevention & treatment map**","- **Motor fluctuations/dyskinesia** 🎚️ → **levodopa fractionation**, **COMT/MAO-B**, **amantadine**, **DBS/infusions**.","- **Falls/fractures** 🦴 → **PT cueing**, home safety, hip protectors, vitamin D/bone health, review sedatives.","- **Aspiration pneumonia** 🫁 → swallow therapy, texture modification, upright meals, oral hygiene.","- **Orthostatic hypotension** 📉 → fluids/salt, compression, **midodrine/droxidopa**, review antihypertensives.","- **Constipation/urinary dysfunction** 🚽 → fiber/osmotics, scheduled toileting; antimuscarinics or **mirabegron** for OAB (watch cognition).","- **Psychosis/ICDs** 🧠 → reduce dopamine agonists; **pimavanserin/quetiapine**; counsel caregivers.","- **Cognitive decline** 🧩 → **cholinesterase inhibitor** (rivastigmine) if DLB/PDD features; simplify meds; environment cues.","- [purple]Pearl:[/purple] ==Treat **complications** like co-bosses: one adjusts **dopamine**, the other fixes **safety/autonomics**=="]},{id:"PD-EPI-60010",topic:"Geriatrics • Parkinson’s disease — Epidemiology",difficulty:"Medium",vignetteTitle:"How common is Parkinson’s disease, and who tends to get it?",stem:"Your movement disorders clinic is preparing a service plan and asks for a snapshot of Parkinson’s disease (PD) burden: frequency by age, sex differences, age at onset, early-onset proportion, and broad outcome trends. Which statement best captures the **epidemiology** of PD?",options:[{key:"A",text:"PD is extremely rare (<0.01%) and occurs mainly in teenagers; rates fall with age."},{key:"B",text:"PD accounts for ~1% of people ≥60 years, incidence and prevalence rise steeply with age, there is a slight male predominance, typical onset is in the 60s (10–15% <50), and many eventually develop cognitive and autonomic complications."},{key:"C",text:"PD is the most common cause of dementia worldwide and occurs equally at all ages and sexes."},{key:"D",text:"PD occurs only after exposure to antipsychotics and resolves fully once the drug is stopped."},{key:"E",text:"PD prevalence is higher in women, peaks in the 30s, and is primarily cerebellar in origin."}],correct:"B",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Age-linked burden:** PD affects roughly **~1% of those ≥60** and **~3% of those ≥80**; both **incidence and prevalence** climb with age. [yellow]==Aging is the biggest risk factor==[/yellow].","- **Typical onset:** **Late middle age to 60s–70s**; **early-onset PD** (~**10–15%** of cases) presents **<50**.","- **Sex:** **Slight male predominance** (~1.2–1.6:1) seen in many cohorts.","- **Course/outcomes:** Over years many develop **motor complications**, **autonomic dysfunction**, **neuropsychiatric symptoms**, and **Parkinson disease dementia** in a substantial subset.","- **Global health:** PD prevalence is **rising worldwide** with population aging and better ascertainment. 🧭📈","**2️⃣ Why the other options are wrong**","- **A:** PD is **not ultra-rare** and is **exceptional** in teens; **risk rises**, not falls, with age.","- **C:** PD is **not** the most common dementia (**Alzheimer’s** is); PD risk **isn’t equal** across ages/sexes.","- **D:** That describes **drug-induced parkinsonism**, a **secondary**, often **reversible** condition—**not idiopathic PD**.","- **E:** PD shows **male > female** in many studies, peaks in **older** adults, and is a **basal ganglia synucleinopathy**, **not cerebellar**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step (population level):** Track **age-stratified incidence/prevalence**, **sex ratios**, and **age at onset** in your catchment. **Confirms?** ❌ Surveillance perspective only.","- **Next Diagnostic step (clinic quality):** Measure **time-to-diagnosis**, **levodopa responsiveness**, and **rates of motor/nonmotor complications** (falls, psychosis, PDD). **Confirms?** ➕ Informs service design.","- **Best Diagnostic Step (registry build):** Create a **PD registry** capturing **onset age, phenotype, genetics when available, and outcomes** to benchmark care and plan resources. **Confirms?** ✅ Enables continuous improvement.","**4️⃣ Management / Treatment (system planning)**","- **Initial Management:** [green]Capacity for rehab[/green] — PT/OT/speech, fall clinics, constipation/orthostasis pathways; caregiver training.","- **First Line:** [green]Medication access[/green] — levodopa, MAO-B/COMT inhibitors, on-demand rescue (inhaled levodopa/subQ apomorphine); depression/anxiety/psychosis services.","- **Gold Standard:** [green]Advanced therapies program[/green] — **DBS** (STN/GPi) and **device-aided infusions** (LCIG/CSA); **cognitive/autonomic** clinics. [red]System-wide avoidance of dopamine blockers[/red].","**5️⃣ Full Pathophysiology Explained (epi lens)**","- **α-Synuclein** pathology + **aging** (mitochondrial/oxidative stress) drive population risk; **genetics** (LRRK2, GBA, PRKN/PINK1) explain a **subset**; **environmental exposures** (e.g., certain pesticides/solvents) shape **regional variation**.","- As populations **age**, **PD prevalence grows** and downstream needs (falls, dementia, autonomic care) expand.","**6️⃣ Symptoms — epidemiology → phenotype link**","- **Older onset** → more **postural instability/gait** issues; **younger onset** → more **dyskinesia** risk over time.","- **Male slant** aligns with observed clinic demographics; anticipate **bone health** and **fall prevention** demands.","- [purple]Planning pearl:[/purple] ==If your service area is aging, budget now for **rehab, cognition, autonomic care, and DBS access**=="]},{id:"PD-RISK-60011",topic:"Geriatrics • Parkinson’s disease — Risk Factors",difficulty:"Medium",vignetteTitle:"Who’s primed for Parkinson’s? Risk profile at a glance",stem:"A 62-year-old man asks about his risk for Parkinson’s disease (PD). His father had PD diagnosed at 72. He worked with pesticides in his 20s–30s, rarely drinks coffee, and never smoked. He has long-standing hyposmia and constipation, but no antipsychotic exposure or head trauma. Which cluster best captures **elevated PD risk**?",options:[{key:"A",text:"Advanced age; male sex; family history or genetic susceptibility (e.g., LRRK2, GBA); environmental exposures (certain pesticides/solvents, rural well water); prodromal nonmotor features (hyposmia, constipation, REM sleep behavior disorder); traumatic brain injury; low caffeine/smoking"},{key:"B",text:"High aerobic fitness, bilingualism, and university education"},{key:"C",text:"Exclusive cerebellar disease and early diplopia"},{key:"D",text:"Long-term antipsychotic use with symmetric parkinsonism that resolves on withdrawal"},{key:"E",text:"Acute viral illness in adolescence fully resolved without sequelae"}],correct:"A",explanation_detail:["**1️⃣ Why it is the correct answer**","- **Age** is the strongest risk factor; PD prevalence rises from **~1% ≥60** to **~3% ≥80**. [yellow]==Aging drives risk==[/yellow].","- **Male sex** and **family history/genetics** (e.g., **LRRK2**, **GBA**, PRKN/PINK1, **SNCA** multiplications) increase susceptibility.","- **Environmental exposures**: certain **pesticides** (e.g., paraquat), **solvents** (e.g., trichloroethylene), **rural living/well water** have been associated with higher risk.","- **Prodromal nonmotor features**—**hyposmia**, **constipation**, **REM sleep behavior disorder (RBD)**—flag **preclinical synucleinopathy**.","- **Other associations:** **Traumatic brain injury**, and observational **inverse correlations** with **caffeine** and **smoking** (not treatment recommendations).","**2️⃣ Why the other options are wrong**","- **B:** Fitness/education/bilingualism relate to **reserve/overall health**, not established PD risk elevation.","- **C:** Cerebellar/diplopia points away from PD (think ataxias/brainstem lesions).","- **D:** Describes **drug-induced parkinsonism** (secondary, often reversible) rather than **idiopathic PD risk**.","- **E:** A remote, uncomplicated viral illness is **not a recognized major PD risk**.","**3️⃣ Investigations / Diagnostic Steps (in order)**","- **Initial Diagnostic step →** **Risk/Prodrome screen**: ask about **RBD**, **hyposmia**, **constipation**, **family history**, **toxin exposures**, **TBI**. **Confirms?** ❌ Stratifies risk only.","- **Next Diagnostic step →** If strong prodromal features: targeted tests — **polysomnography** for **RBD**, **orthostatic vitals**; consider **olfaction testing**. **Confirms?** ➕ Supports prodromal state.","- **Best Diagnostic Step (if motor signs emerge) →** **Clinical exam** for **bradykinesia + rest tremor/rigidity**; if uncertain, **DaTscan** for [blue]presynaptic dopaminergic deficit[/blue]. **Confirms?** ✅ Supports degenerative parkinsonism.","**4️⃣ Management / Treatment (risk-stage)**","- **Initial Management:** [green]Risk counseling[/green] — sleep safety for **RBD** (bedroom hazard-proofing), address **constipation** and **orthostasis**, avoid **dopamine blockers** (metoclopramide/typical antipsychotics).","- **First Line (lifestyle):** [green]Exercise is protective-adjacent[/green] — regular **aerobic + resistance + balance** training; optimize **vitamin D**/**bone health**; consider **caffeine** within general health limits if already used (not as therapy).","- **Gold Standard (once motor PD diagnosed):** **Levodopa/carbidopa** tailored to function; **PT/OT/speech**; escalate per course (COMT/MAO-B, DBS when appropriate).","**5️⃣ Full Pathophysiology Explained**","- **α-Synuclein** misfolding/aggregation + **aging mitochondrial stress** + **genetic variants** (e.g., **LRRK2**, **GBA**) + **environmental toxicants** → **SNpc neuron loss** and **striatal dopamine depletion**.","- **Prodromal sites** (olfactory bulb, dorsal motor nucleus of vagus) explain **hyposmia/constipation**; **RBD** reflects early **pontine REM** circuit involvement.","- [blue]Epidemiologic nuance[/blue]: **Caffeine/smoking** show **inverse associations** in cohorts; mechanism hypotheses include **adenosine A2A** antagonism for caffeine and **nicotinic receptor** effects for nicotine.","**6️⃣ Risk checklist — memorize the big levers**","- **Ageing** (60s–70s typical), **male sex**.","- **Family history/genetics**: **LRRK2**, **GBA**, PRKN/PINK1, SNCA.","- **Environmental**: **pesticides/solvents**, rural **well water**.","- **Prodromal nonmotor**: **RBD**, **hyposmia**, **constipation**, **depression/anxiety**, **autonomic** clues.","- **Other**: **TBI**; **low caffeine/smoking** are epidemiologic signals only.","- [purple]Pearl:[/purple] ==If a patient stacks **age + male + family history + pesticides** and has **hyposmia/constipation/RBD**, keep PD on your radar=="]}];function Mx(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const Rx=/^[0-9+\-*/().\s^%]*$/;function Px(o){if(!Rx.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function ts({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Bx(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function Ix(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(Px(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function Lx(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function zx({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(ts,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=rt[w].id,f=y[g],k=f?f===rt[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:rt[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:rt[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:rt[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function Hx({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[rt[A].id]===rt[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:rt[j],chosen:d[rt[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(ts,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,":",String(E).padStart(2,"0")]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"No incorrect answers — great job 🎉"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function Ox(){const o=Vt(),r=Lx(),[d,c]=p.useState(rt.map((v,m)=>m)),[h,y]=p.useState(!1),[w,x]=p.useState(!1),[g,f]=p.useState(0),[k,E]=p.useState({}),[j,A]=p.useState({}),[L,X]=p.useState(!1),[Z,q]=p.useState(!1),[se,te]=p.useState(!1),J=p.useRef(null),K=p.useRef(null),[_,ae]=p.useState(!1),ee=p.useRef(null),R=rt[d[g]],ie=rt.length,ue=(g+1)/Math.max(ie,1)*100,T=()=>{const v=ee.current;if(!v)return;const m=window.getSelection&&window.getSelection();if(!(!m||m.rangeCount===0))try{const C=m.getRangeAt(0);if(!v.contains(C.commonAncestorContainer)||String(C).trim().length===0)return;const I=document.createElement("mark");I.className="bg-yellow-200 rounded px-0.5",C.surroundContents(I),m.removeAllRanges()}catch{const C=v.getAttribute("contenteditable");v.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),C!==null?v.setAttribute("contenteditable",C):v.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!_)return;const v=()=>T();return document.addEventListener("mouseup",v),()=>document.removeEventListener("mouseup",v)},[_]);const U=()=>{const v=ee.current;v&&v.querySelectorAll("mark").forEach(m=>{const C=m.parentNode;for(;m.firstChild;)C.insertBefore(m.firstChild,m);C.removeChild(m)})},B=v=>{const m=v==="random"?Mx(rt.map((C,I)=>I)):rt.map((C,I)=>I);c(m),f(0),E({}),A({}),y(!0),J.current=Date.now(),K.current=null};p.useEffect(()=>{const v=m=>{m.key==="ArrowRight"&&g<ie-1&&f(C=>C+1),m.key==="ArrowLeft"&&g>0&&f(C=>C-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,ie]);const O=()=>A(v=>({...v,[R.id]:!0})),N=()=>{g>=ie-1||f(m=>m+1)},V=()=>g>0&&f(v=>v-1),M=g===ie-1&&!!j[R.id];return p.useEffect(()=>{M&&!K.current&&(K.current=Date.now())},[M,R?.id,j,g,ie]),p.useMemo(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)},[se,j,g]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(g+1,ie)," of ",ie]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ue}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>x(v=>!v),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",r?"right-4 bottom-20":"top-[120px]"].join(" "),style:r?{}:{left:w?316:12},title:w?"Hide questions":"Show questions",children:w?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",w?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:d.map((v,m)=>{const C=rt[v],I=k[C.id],W=I?I===C.correct?"correct":"incorrect":"unanswered",ne=m===g?"ring-2 ring-purple-300":W==="correct"?"ring-2 ring-emerald-300":W==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>f(m),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${ne}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",m+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:C.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:C.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:C.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${W==="correct"?"bg-emerald-500":W==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},C.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>X(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>q(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${w&&!r?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:R.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:R.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:R.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",R.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ee,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:R.stem}}),R.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:R.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:R.options.map(v=>{const m=k[R.id],C=!!j[R.id],I=v.key===R.correct,W=C?I?"border-emerald-300 bg-emerald-50":m===v.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${W}`,children:[i.jsx("input",{type:"radio",name:`ans-${R.id}`,className:"h-4 w-4 text-purple-600",checked:m===v.key,onChange:()=>E(ne=>({...ne,[R.id]:v.key})),disabled:C}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[v.key,"."]})," ",v.text]})]},v.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:j[R.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:N,disabled:g>=ie-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:V,disabled:g===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),g===ie-1&&i.jsx("button",{onClick:()=>te(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!k[R.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>E(v=>({...v,[R.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),j[R.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:R.explanation_detail?.map((v,m)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Tx,{text:v})},m))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>q(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>X(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>ae(v=>!v),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${_?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:U,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(ts,{open:L,onClose:()=>X(!1),title:"Common Lab Values",children:i.jsx(Bx,{})}),i.jsx(ts,{open:Z,onClose:()=>q(!1),title:"Calculator",children:i.jsx(Ix,{})}),i.jsx(zx,{open:r&&w,onClose:()=>x(!1),order:d,currentIdx:g,setCurrentIdx:f,answers:k}),i.jsx(Hx,{open:se,onClose:()=>te(!1),answers:k,order:d,elapsedMs:(()=>{if(J.current==null)return 0;const v=K.current||Date.now();return Math.max(0,v-J.current)})(),jumpTo:v=>f(v)}),i.jsx(Gx,{open:!h,onPick:B})]})}function Gx({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(ts,{open:o,onClose:()=>{},title:"Start Parkinson’s Disease Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function Fx({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const ot=[{id:"ST-2001",topic:"Geriatrics • Stroke/TIA",difficulty:"Easy",vignetteTitle:"First imaging in suspected stroke",stem:"An 80-year-old presents within 45 minutes of sudden **left face/arm weakness** and **dysarthria**. Glucose is normal. What is the SINGLE most appropriate **initial** brain imaging?",options:[{key:"A",text:"MRI brain with diffusion-weighted imaging (DWI)"},{key:"B",text:"Non-contrast CT head"},{key:"C",text:"CT head with contrast (venous phase only)"},{key:"D",text:"CT perfusion as the sole initial test"},{key:"E",text:"No imaging prior to thrombolysis"}],correct:"B",explanation_detail:["**Non-contrast CT** is the fastest, widely available study to **exclude intracranial haemorrhage** before reperfusion therapy. Early ischaemic change may be subtle, but ruling out bleed is the priority.","[blue]MRI DWI[/blue] is more sensitive for early ischaemia but slower/less available; **CT perfusion/CTA** are *adjuncts* to select for thrombectomy, not replacements for an initial CT non-contrast screen."]},{id:"ST-2002",topic:"Geriatrics • Stroke/TIA",difficulty:"Medium",vignetteTitle:"Alteplase window & BP",stem:"A 73-year-old arrives **2 hours** after last-known-well with a disabling right hemiparesis. BP is 182/102 mmHg. There is no haemorrhage on CT. Which SINGLE action is most appropriate **to enable thrombolysis**?",options:[{key:"A",text:"Proceed with IV alteplase immediately at current BP"},{key:"B",text:"Lower BP to < 185/110 then give IV alteplase"},{key:"C",text:"Wait until 6 hours to reassess eligibility"},{key:"D",text:"Start dual antiplatelets then reassess for lysis"},{key:"E",text:"Full-dose heparin infusion instead of lysis"}],correct:"B",explanation_detail:["Within the **0–4.5 h window**, candidates may receive IV alteplase if **BP is < 185/110 mmHg** and other exclusions are absent. Carefully lower BP using short-acting agents (e.g., labetalol) then administer thrombolysis.","[yellow]Key[/yellow]: Above this threshold increases haemorrhagic transformation risk. Antiplatelets/heparin are **not** substitutes for lysis in the early window."]},{id:"ST-2003",topic:"Geriatrics • Stroke/TIA",difficulty:"Medium",vignetteTitle:"Thrombectomy selection",stem:"A 69-year-old has **left MCA syndrome** (NIHSS 18). CT shows no haemorrhage; CTA shows **proximal M1 occlusion**. He is **8 hours** from onset. What is the SINGLE best reperfusion strategy?",options:[{key:"A",text:"IV alteplase only; thrombectomy not useful after 6 h"},{key:"B",text:"Mechanical thrombectomy if imaging shows salvageable tissue"},{key:"C",text:"Aspirin 300 mg stat only"},{key:"D",text:"Immediate carotid endarterectomy"},{key:"E",text:"No reperfusion; supportive care only"}],correct:"B",explanation_detail:["**Large-vessel occlusion** (e.g., ICA/M1) within **6–24 h** may benefit from **mechanical thrombectomy** if perfusion or clinical–imaging mismatch indicates **penumbra**. Many centres combine IVT (if within window) **plus** MT when eligible.","CEA is for **carotid stenosis** in selected TIA/non-disabling stroke, not acute LVO. Aspirin alone under-treats LVO in the salvageable window."]},{id:"ST-2004",topic:"Geriatrics • Stroke/TIA",difficulty:"Medium",vignetteTitle:"TIA risk & antiplatelets",stem:"A 77-year-old has **transient** right arm weakness and aphasia lasting 20 minutes, now resolved. ABCD<sub>2</sub> score is 5. CT head is normal. What is the SINGLE best **initial antithrombotic strategy** (no AF, non-cardioembolic)?",options:[{key:"A",text:"Aspirin monotherapy from day 1"},{key:"B",text:"Dual antiplatelet therapy (aspirin + clopidogrel) for 21 days"},{key:"C",text:"Warfarin immediately"},{key:"D",text:"No antithrombotic if CT is normal"},{key:"E",text:"Clopidogrel monotherapy plus full-dose LMWH"}],correct:"B",explanation_detail:["For **high-risk TIA/minor ischaemic stroke (NIHSS ≤3)** without cardioembolism: short course **DAPT (21 days)** started early reduces early recurrence, then **single antiplatelet** thereafter.","[green]If AF or cardioembolic source[/green] → **anticoagulation** (DOAC/warfarin) instead of antiplatelets."]},{id:"ST-2005",topic:"Geriatrics • Stroke/TIA",difficulty:"Hard",vignetteTitle:"Secondary prevention bundle",stem:"A 72-year-old with ischaemic stroke due to small-vessel disease is ready for discharge. Which SINGLE option best summarises **evidence-based secondary prevention** (no AF)?",options:[{key:"A",text:"Aspirin + clopidogrel indefinitely, LDL < 2.6 mmol/L, permissive hypertension"},{key:"B",text:"Single antiplatelet long-term, high-intensity statin, BP target < 130/80 if tolerated"},{key:"C",text:"Stop antiplatelet once symptoms resolve; avoid statins age >70"},{key:"D",text:"Warfarin for 3 months then stop"},{key:"E",text:"Fibrates for LDL, no lifestyle changes needed"}],correct:"B",explanation_detail:["Long-term **single antiplatelet** (aspirin *or* clopidogrel), **high-intensity statin** (aim LDL reduction; many target **LDL < 1.8 mmol/L** depending on guideline), and **aggressive risk-factor control** (BP ≲ **130/80** if tolerated, diabetes, smoking cessation, exercise, diet).","[purple]DAPT is short-term[/purple] for minor stroke/high-risk TIA only; **warfarin** is for cardioembolic sources, not lacunar disease."]}];function Vx(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const _x=/^[0-9+\-*/().\s^%]*$/;function qx(o){if(!_x.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function is({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Ux(){const o=[{name:"Hb",value:"M 13–17 g/dL • F 12–15"},{name:"WBC",value:"4–11 ×10⁹/L"},{name:"Platelets",value:"150–400 ×10⁹/L"},{name:"Na⁺",value:"135–145 mmol/L"},{name:"K⁺",value:"3.5–5.0 mmol/L"},{name:"Cl⁻",value:"98–106 mmol/L"},{name:"HCO₃⁻",value:"22–28 mmol/L"},{name:"Urea",value:"2.5–7.1 mmol/L"},{name:"Creatinine",value:"M 60–110 • F 45–90 µmol/L"},{name:"Glucose (fasting)",value:"3.9–5.5 mmol/L"},{name:"Lactate",value:"0.5–2.2 mmol/L"},{name:"INR",value:"0.8–1.2 (lab-dependent)"},{name:"pH (ABG)",value:"7.35–7.45"},{name:"PaCO₂",value:"4.7–6.0 kPa"},{name:"PaO₂ (room air)",value:"10–13 kPa"},{name:"Troponin (99th %ile)",value:"lab-specific cut-off"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference Range"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Ranges vary by lab and context; this is for quick revision."})]})}function Wx(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(qx(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function Qn(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Qx({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(is,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=ot[w].id,f=y[g],k=f?f===ot[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:ot[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:ot[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:ot[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function $x({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[ot[A].id]===ot[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:ot[j],chosen:d[ot[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(is,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,":",String(E).padStart(2,"0")]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"No incorrect answers — nice work 🎯"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function Kx(){const o=Vt();Qn();const[r,d]=p.useState(ot.map((M,v)=>v)),[c,h]=p.useState(!1),[y,w]=p.useState(!1),[x,g]=p.useState(0),[f,k]=p.useState({}),[E,j]=p.useState({}),[A,L]=p.useState(!1),[X,Z]=p.useState(!1),[q,se]=p.useState(!1),te=p.useRef(null),J=p.useRef(null),[K,_]=p.useState(!1),ae=p.useRef(null),ee=ot[r[x]],R=ot.length,ie=(x+1)/Math.max(R,1)*100,ue=()=>{const M=ae.current;if(!M)return;const v=window.getSelection&&window.getSelection();if(!(!v||v.rangeCount===0))try{const m=v.getRangeAt(0);if(!M.contains(m.commonAncestorContainer)||String(m).trim().length===0)return;const C=document.createElement("mark");C.className="bg-yellow-200 rounded px-0.5",m.surroundContents(C),v.removeAllRanges()}catch{const m=M.getAttribute("contenteditable");M.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),m!==null?M.setAttribute("contenteditable",m):M.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!K)return;const M=()=>ue();return document.addEventListener("mouseup",M),()=>document.removeEventListener("mouseup",M)},[K]);const T=()=>{const M=ae.current;M&&M.querySelectorAll("mark").forEach(v=>{const m=v.parentNode;for(;v.firstChild;)m.insertBefore(v.firstChild,v);m.removeChild(v)})},U=M=>{const v=M==="random"?Vx(ot.map((m,C)=>C)):ot.map((m,C)=>C);d(v),g(0),k({}),j({}),h(!0),te.current=Date.now(),J.current=null};p.useEffect(()=>{const M=v=>{v.key==="ArrowRight"&&x<R-1&&g(m=>m+1),v.key==="ArrowLeft"&&x>0&&g(m=>m-1)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[x,R]);const B=()=>j(M=>({...M,[ee.id]:!0})),O=()=>{x>=R-1||g(v=>v+1)},N=()=>x>0&&g(M=>M-1),V=x===R-1&&!!E[ee.id];return p.useEffect(()=>{V&&!J.current&&(J.current=Date.now())},[V,ee?.id,E,x,R]),p.useMemo(()=>{if(te.current==null)return 0;const M=J.current||Date.now();return Math.max(0,M-te.current)},[q,E,x]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(x+1,R)," of ",R]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ie}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>w(M=>!M),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",Qn()?"right-4 bottom-20":"top-[120px]"].join(" "),style:Qn()?{}:{left:y?316:12},title:y?"Hide questions":"Show questions",children:y?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",y?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((M,v)=>{const m=ot[M],C=f[m.id],I=C?C===m.correct?"correct":"incorrect":"unanswered",W=v===x?"ring-2 ring-purple-300":I==="correct"?"ring-2 ring-emerald-300":I==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>g(v),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${W}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",v+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:m.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:m.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:m.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${I==="correct"?"bg-emerald-500":I==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},m.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>L(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>Z(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${y&&!Qn()?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:ee.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:ee.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:ee.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",ee.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ae,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:ee.stem}}),ee.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:ee.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:ee.options.map(M=>{const v=f[ee.id],m=!!E[ee.id],C=M.key===ee.correct,I=m?C?"border-emerald-300 bg-emerald-50":v===M.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${I}`,children:[i.jsx("input",{type:"radio",name:`ans-${ee.id}`,className:"h-4 w-4 text-purple-600",checked:v===M.key,onChange:()=>k(W=>({...W,[ee.id]:M.key})),disabled:m}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[M.key,"."]})," ",M.text]})]},M.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:E[ee.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:x>=R-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:N,disabled:x===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),x===R-1&&i.jsx("button",{onClick:()=>se(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:B,disabled:!f[ee.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>k(M=>({...M,[ee.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),E[ee.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:ee.explanation_detail?.map((M,v)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Fx,{text:M})},v))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>Z(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>L(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>_(M=>!M),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${K?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:T,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(is,{open:A,onClose:()=>L(!1),title:"Common Lab Values",children:i.jsx(Ux,{})}),i.jsx(is,{open:X,onClose:()=>Z(!1),title:"Calculator",children:i.jsx(Wx,{})}),i.jsx(Qx,{open:Qn()&&y,onClose:()=>w(!1),order:r,currentIdx:x,setCurrentIdx:g,answers:f}),i.jsx($x,{open:q,onClose:()=>se(!1),answers:f,order:r,elapsedMs:(()=>{if(te.current==null)return 0;const M=J.current||Date.now();return Math.max(0,M-te.current)})(),jumpTo:M=>g(M)}),i.jsx(Xx,{open:!c,onPick:U})]})}function Xx({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(is,{open:o,onClose:()=>{},title:"Start Stroke/TIA Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function Yx({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const At=[{id:"COPD-2001",topic:"Geriatrics • COPD",difficulty:"Easy",vignetteTitle:"Initial assessment",stem:"A 76-year-old ex-smoker presents with chronic cough and exertional dyspnoea. Post-bronchodilator spirometry shows FEV₁/FVC = 0.60. Which SINGLE result confirms airflow obstruction due to COPD?",options:[{key:"A",text:"FEV₁/FVC ≥ 0.70 after bronchodilator"},{key:"B",text:"FEV₁/FVC &lt; 0.70 after bronchodilator"},{key:"C",text:"Raised DLCO"},{key:"D",text:"FVC increase &gt; 12% and 200 mL after bronchodilator"},{key:"E",text:"Peak flow variability &gt; 20%"}],correct:"B",explanation_detail:["**Diagnosis:** COPD is confirmed by **post-bronchodilator FEV₁/FVC &lt; 0.70**. ","[blue]Asthma markers[/blue] like large bronchodilator reversibility (D) or peak-flow variability (E) suggest asthma; DLCO is often [yellow]low[/yellow] in emphysema, not raised."]},{id:"COPD-2002",topic:"Geriatrics • COPD",difficulty:"Medium",vignetteTitle:"Stable therapy ladder",stem:"A 79-year-old with confirmed COPD (FEV₁ 58% predicted) has persistent breathlessness despite using a short-acting bronchodilator PRN. No frequent exacerbations. What is the SINGLE most appropriate next step in maintenance therapy?",options:[{key:"A",text:"Start inhaled corticosteroid (ICS) alone"},{key:"B",text:"Start long-acting muscarinic antagonist (LAMA)"},{key:"C",text:"Start oral theophylline"},{key:"D",text:"Start long-term oral steroids"},{key:"E",text:"Add prophylactic macrolide immediately"}],correct:"B",explanation_detail:["For **symptomatic COPD without frequent exacerbations**, step up from SABA/SAMA to a **long-acting bronchodilator** — typically **LAMA** (e.g., tiotropium).","ICS is **not** first-line unless eosinophils high and/or **frequent exacerbations**; oral steroids/theophylline have limited roles and more adverse effects."]},{id:"COPD-2003",topic:"Geriatrics • COPD",difficulty:"Medium",vignetteTitle:"Exacerbation bundle",stem:"An 82-year-old with COPD presents with ↑ dyspnoea, ↑ sputum volume and purulence. SpO₂ 86% on air. Which SINGLE immediate oxygen strategy is most appropriate in the ED?",options:[{key:"A",text:"100% oxygen via non-rebreather mask"},{key:"B",text:"Target sats 88–92% with controlled oxygen"},{key:"C",text:"Room air only"},{key:"D",text:"Hyperventilation coaching"},{key:"E",text:"Immediate NIV for all COPD exacerbations"}],correct:"B",explanation_detail:["[red]CO₂ retainers risk[/red]: give **controlled oxygen** to a target **88–92%** (e.g., Venturi mask) while assessing ABG. ","NIV is for **persistent hypercapnic acidotic respiratory failure** despite optimal therapy; 100% O₂ risks worsening hypercapnia."]},{id:"COPD-2004",topic:"Geriatrics • COPD",difficulty:"Hard",vignetteTitle:"When to add ICS",stem:"A 74-year-old with COPD on LAMA/LABA has ≥2 moderate exacerbations in the last year. Blood eosinophils 420/µL. What SINGLE change is most appropriate to reduce future exacerbations?",options:[{key:"A",text:"Withdraw bronchodilators and use ICS alone"},{key:"B",text:"Add inhaled corticosteroid (triple therapy)"},{key:"C",text:"Start long-term oral prednisolone"},{key:"D",text:"Start theophylline as first add-on"},{key:"E",text:"No change — eosinophils not relevant"}],correct:"B",explanation_detail:["High **blood eosinophils** and **frequent exacerbations** → benefit from adding **ICS** (i.e., **triple therapy** LABA/LAMA/ICS).","Avoid chronic oral steroids; theophylline has narrow therapeutic window and limited benefit."]}];function Zx(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}function Jx(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Hh({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function ev({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Hh,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=At[w],f=y[g.id],k=f?f===g.correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:g.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:g.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:g.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g.id)})})})}function tv({answers:o,startedAt:r,endedAt:d,order:c,onReview:h,onRestart:y}){const w=c.length,x=c.reduce((A,L)=>A+(o[At[L].id]===At[L].correct?1:0),0),g=Math.round(x/Math.max(w,1)*100),f=Math.max(0,(d||Date.now())-(r||Date.now())),k=Math.floor(f/6e4),E=Math.round(f%6e4/1e3),j=c.filter(A=>o[At[A].id]&&o[At[A].id]!==At[A].correct);return i.jsx("div",{className:"mx-auto max-w-[900px] px-4 py-8",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Results — COPD"}),i.jsxs("div",{className:"mt-4 grid sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Score"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Review incorrect questions"}),j.length===0?i.jsx("p",{className:"text-slate-600",children:"Nice — nothing wrong this time 🎯"}):i.jsx("ul",{className:"space-y-2",children:j.map(A=>{const L=At[A];return i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(A),className:"text-left w-full rounded-lg border px-3 py-2 hover:bg-slate-50",children:[i.jsxs("span",{className:"font-medium mr-2",children:["Q",c.indexOf(A)+1,"."]}),L.stem.replace(/<[^>]*>/g,"")]})},L.id)})})]}),i.jsxs("div",{className:"mt-6 flex gap-2",children:[i.jsx("button",{onClick:y,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:"Restart"}),i.jsx(Ee,{to:"/diseases/geriatrics",className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Back to Geriatrics"})]})]})})}function iv(){const o=Jx(),[r,d]=p.useState(At.map((T,U)=>U)),[c,h]=p.useState(!1),[y,w]=p.useState(null),[x,g]=p.useState(null),[f,k]=p.useState(!1),[E,j]=p.useState(!1),[A,L]=p.useState(0),[X,Z]=p.useState({}),[q,se]=p.useState({}),[te,J]=p.useState(!1),K=p.useRef(null),_=At[r[A]],ae=At.length,ee=(A+1)/Math.max(ae,1)*100;p.useEffect(()=>{if(!te)return;const T=()=>{const U=K.current;if(!U)return;const B=window.getSelection&&window.getSelection();if(!(!B||B.rangeCount===0))try{const O=B.getRangeAt(0);if(!U.contains(O.commonAncestorContainer)||String(O).trim().length===0)return;const N=document.createElement("mark");N.className="bg-yellow-200 rounded px-0.5",O.surroundContents(N),B.removeAllRanges()}catch{}};return document.addEventListener("mouseup",T),()=>document.removeEventListener("mouseup",T)},[te]);const R=()=>{const T=K.current;T&&T.querySelectorAll("mark").forEach(U=>{const B=U.parentNode;for(;U.firstChild;)B.insertBefore(U.firstChild,U);B.removeChild(U)})};p.useEffect(()=>{const T=U=>{U.key==="ArrowRight"&&A<ae-1&&L(B=>B+1),U.key==="ArrowLeft"&&A>0&&L(B=>B-1)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[A,ae]);const ie=T=>{const U=T==="random"?Zx(At.map((B,O)=>O)):At.map((B,O)=>O);d(U),L(0),Z({}),se({}),h(!0),w(Date.now()),k(!1)},ue=()=>{g(Date.now()),k(!0)};return f?i.jsx(tv,{answers:X,startedAt:y,endedAt:x,order:r,onReview:T=>{k(!1),L(r.indexOf(T)>=0?r.indexOf(T):0)},onRestart:()=>ie("number")}):i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(A+1,ae)," of ",ae]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ee}%`}})})]}),i.jsx("button",{onClick:ue,className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>j(T=>!T),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",o?"right-4 bottom-20":"top-[120px]"].join(" "),style:o?{}:{left:E?316:12},title:E?"Hide questions":"Show questions",children:E?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",E?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((T,U)=>{const B=At[T],O=X[B.id],N=O?O===B.correct?"correct":"incorrect":"unanswered",V=U===A?"ring-2 ring-purple-300":N==="correct"?"ring-2 ring-emerald-300":N==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>L(U),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${V}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",U+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:B.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:B.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:B.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${N==="correct"?"bg-emerald-500":N==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},B.id)})})]})}),i.jsx("div",{className:`transition-all ${E&&!o?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:_.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:_.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:_.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",_.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:K,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:_.stem}}),i.jsx("div",{className:"space-y-3",children:_.options.map(T=>{const U=X[_.id],B=!!q[_.id],O=T.key===_.correct,N=B?O?"border-emerald-300 bg-emerald-50":U===T.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${N}`,children:[i.jsx("input",{type:"radio",name:`ans-${_.id}`,className:"h-4 w-4 text-purple-600",checked:U===T.key,onChange:()=>Z(V=>({...V,[_.id]:T.key})),disabled:B}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[T.key,"."]})," ",T.text]})]},T.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:q[_.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A>=ae-1?ue:()=>L(T=>T+1),className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:A>=ae-1?"Finish & View Results →":"Next Question →"}),i.jsx("button",{onClick:()=>A>0&&L(T=>T-1),disabled:A===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>se(T=>({...T,[_.id]:!0})),disabled:!X[_.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>Z(T=>({...T,[_.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),q[_.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:_.explanation_detail?.map((T,U)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Yx,{text:T})},U))})]})})]})]}),i.jsxs("div",{className:"fixed md:hidden right-4 bottom-4 flex gap-2",children:[i.jsx("button",{title:"Toggle highlight mode",onClick:()=>J(T=>!T),className:`h-10 w-10 rounded-lg border shadow-sm ${te?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:R,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm",children:"🧽"})]})]})})]})}),i.jsx(ev,{open:o&&E,onClose:()=>j(!1),order:r,currentIdx:A,setCurrentIdx:L,answers:X}),i.jsx(av,{open:!c,onPick:ie})]})}function av({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),o?i.jsxs(Hh,{open:o,onClose:()=>{},title:"Start COPD Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]}):null}function nv({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const lt=[{id:"UI-2001",topic:"Geriatrics • Urinary Incontinence",difficulty:"Easy",vignetteTitle:"Classifying the type",stem:"An 80-year-old woman reports leakage when she **coughs, laughs, or lifts** shopping bags. No dysuria; voids every 3–4 hours. Which SINGLE type best fits?",options:[{key:"A",text:"Urge incontinence"},{key:"B",text:"Stress incontinence"},{key:"C",text:"Overflow incontinence"},{key:"D",text:"Functional incontinence"},{key:"E",text:"Mixed incontinence is the only correct answer"}],correct:"B",explanation_detail:["**Stress incontinence** = leakage with ↑ intra-abdominal pressure (cough/sneeze/exertion) due to **urethral hypermobility** or **intrinsic sphincter deficiency**.","[blue]Urge[/blue] = sudden compelling desire to void, frequency/nocturia (detrusor overactivity). [purple]Overflow[/purple] = dribbling, high PVR (outlet obstruction/underactive detrusor). [green]Functional[/green] = mobility/cognition barriers."]},{id:"UI-2002",topic:"Geriatrics • Urinary Incontinence",difficulty:"Medium",vignetteTitle:"Post-void residual (PVR) pearls",stem:"A 79-year-old man with **diabetes and BPH** has daytime dribbling and nocturnal enuresis. You measure **PVR = 320 mL**. Which SINGLE statement is most accurate?",options:[{key:"A",text:"PVR < 50 mL is typical for overflow"},{key:"B",text:"PVR ≥ 200–300 mL supports overflow/retention"},{key:"C",text:"PVR cannot be measured by bladder scan"},{key:"D",text:"High PVR excludes UTI risk"},{key:"E",text:"PVR thresholds are irrelevant to management"}],correct:"B",explanation_detail:["[yellow]Rule of thumb[/yellow]: **PVR < 50 mL** normal; **50–199 mL** indeterminate; **≥200–300 mL** suggests **overflow/retention**.","Overflow: consider **reversible causes** (constipation, anticholinergics, opioids), **alpha-blocker** if BOO, and **intermittent catheterisation** if large/obstructed."]},{id:"UI-2003",topic:"Geriatrics • Urinary Incontinence",difficulty:"Medium",vignetteTitle:"First-line management by type",stem:"Which SINGLE option represents the best **first-line** approach for **urge** incontinence in an older adult after lifestyle advice (caffeine/fluids, weight, constipation)?",options:[{key:"A",text:"Pelvic floor muscle training alone"},{key:"B",text:"Timed voiding/bladder training ± pelvic floor"},{key:"C",text:"Immediate antimuscarinic at high dose"},{key:"D",text:"Surgery for mid-urethral sling"},{key:"E",text:"Chronic indwelling catheter"}],correct:"B",explanation_detail:["For **urge**: start with **bladder training** (scheduled voiding, urge suppression) and **pelvic floor** ± lifestyle. If persistent: **antimuscarinic** (oxybutynin/solifenacin) or **beta-3 agonist** (mirabegron).","[red]Caution[/red]: Anticholinergic burden in frailty/cognitive impairment; **mirabegron** is an alternative when antimuscarinics are poorly tolerated."]},{id:"UI-2004",topic:"Geriatrics • Urinary Incontinence",difficulty:"Medium",vignetteTitle:"Selecting drug therapy",stem:"A 76-year-old woman with **glaucoma (narrow angle)** and **xerostomia** has persistent urge incontinence despite bladder training. Which SINGLE medication is most appropriate?",options:[{key:"A",text:"Oxybutynin IR"},{key:"B",text:"Solifenacin high dose"},{key:"C",text:"Mirabegron"},{key:"D",text:"Amitriptyline at bedtime"},{key:"E",text:"Tolterodine IR"}],correct:"C",explanation_detail:["**Mirabegron** (β3-agonist) avoids anticholinergic adverse effects (**dry mouth**, **constipation**, **cognitive effects**, **angle-closure glaucoma** risk). Monitor **BP**.","[purple]Tip[/purple]: If antimuscarinic needed, use **extended-release** or **transdermal** to reduce side effects; review total anticholinergic burden."]},{id:"UI-2005",topic:"Geriatrics • Urinary Incontinence",difficulty:"Easy",vignetteTitle:"Stress incontinence management",stem:"For **stress** incontinence in women, which SINGLE conservative therapy has the strongest first-line evidence?",options:[{key:"A",text:"Pelvic floor muscle training with supervised program"},{key:"B",text:"Immediate urethral bulking injection"},{key:"C",text:"Empiric antimuscarinic therapy"},{key:"D",text:"High-dose furosemide"},{key:"E",text:"Chronic indwelling catheter"}],correct:"A",explanation_detail:["**Pelvic floor muscle training** (3+ months; supervised where possible) is first-line for **stress** incontinence. Consider **pessaries** if prolapse, and **sling surgery** for refractory cases after urogyn input.","[green]Supportive[/green]: Weight loss, treat cough/constipation, modify activities, manage meds (e.g., diuretics timing)."]},{id:"UI-2006",topic:"Geriatrics • Urinary Incontinence",difficulty:"Medium",vignetteTitle:"Functional incontinence",stem:"An 88-year-old with **advanced osteoarthritis** and **mild cognitive impairment** has accidents because she cannot reach the toilet in time. UA negative, PVR 30 mL. Which SINGLE step is most appropriate?",options:[{key:"A",text:"Start oxybutynin"},{key:"B",text:"Timed prompted voiding and environmental modifications"},{key:"C",text:"Indwelling catheter long-term"},{key:"D",text:"Empiric antibiotics"},{key:"E",text:"Alpha-blocker"}],correct:"B",explanation_detail:["**Functional incontinence** = continence mechanism intact but **barriers** (mobility/cognition/environment). Use **prompted/timed voiding**, **clear pathways**, **raised toilet seats/commodes**, caregiver training.","Avoid unnecessary drugs/catheters; address pain, mobility aids, and **fall risk**."]}];function sv(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}const rv=/^[0-9+\-*/().\s^%]*$/;function ov(o){if(!rv.test(o))throw new Error("Invalid characters");const r=o.replace(/(\d+(?:\.\d+)?)\s*\^\s*(\d+(?:\.\d+)?)/g,"Math.pow($1,$2)");return Function(`"use strict"; return (${r||0});`)()}function as({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function lv(){const o=[{name:"UA (dip/microscopy)",value:"Exclude UTI/haematuria"},{name:"Creatinine",value:"Assess renal function before meds"},{name:"PVR (scan)",value:"<50 normal; 50–199 indeterminate; ≥200–300 overflow/retention"}];return i.jsxs("div",{className:"max-h-[60vh] overflow-auto",children:[i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-slate-600",children:[i.jsx("th",{className:"py-2 pr-3",children:"Test"}),i.jsx("th",{className:"py-2",children:"Reference/Note"})]})}),i.jsx("tbody",{children:o.map(r=>i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"py-2 pr-3 font-medium",children:r.name}),i.jsx("td",{className:"py-2 text-slate-700",children:r.value})]},r.name))})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Interpret with clinical context and local policy."})]})}function cv(){const[o,r]=p.useState(""),[d,c]=p.useState(""),h=["7","8","9","/","4","5","6","*","1","2","3","-","0",".","(",")","+","^"],y=x=>r(g=>g+x),w=()=>{try{c(String(ov(o)))}catch{c("Error")}};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 rounded-lg border border-slate-300 px-3 py-2",value:o,onChange:x=>r(x.target.value),placeholder:"e.g. (12.5*3)/4"}),i.jsx("button",{onClick:()=>{r(""),c("")},className:"rounded-lg border px-3",children:"Clear"}),i.jsx("button",{onClick:w,className:"rounded-lg bg-purple-600 text-white px-4",children:"="})]}),i.jsx("div",{className:"grid grid-cols-9 gap-1",children:h.map(x=>i.jsx("button",{onClick:()=>y(x),className:"rounded-lg border py-2 hover:bg-slate-50",children:x},x))}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Result: ",i.jsx("span",{className:"font-semibold text-slate-900",children:d})]})]})}function $n(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{if(typeof window>"u")return;const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function dv({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(as,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",overlayClass:"bg-black/30",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=lt[w].id,f=y[g],k=f?f===lt[w].correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:lt[w].stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:lt[w].topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:lt[w].difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g)})})})}function uv({open:o,onClose:r,answers:d,order:c,elapsedMs:h,jumpTo:y}){const w=c.length,x=p.useMemo(()=>c.reduce((j,A)=>j+(d[lt[A].id]===lt[A].correct?1:0),0),[d,c]),g=Math.round(x/Math.max(w,1)*100),f=p.useMemo(()=>c.map((j,A)=>({i:A,q:lt[j],chosen:d[lt[j].id]})).filter(({q:j,chosen:A})=>A&&A!==j.correct),[d,c]),k=Math.floor(h/6e4),E=Math.floor(h%6e4/1e3);return i.jsx(as,{open:o,onClose:r,title:"Results",maxW:"max-w-2xl",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Marks"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,":",String(E).padStart(2,"0")]})]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Questions to review"}),f.length===0?i.jsx("p",{className:"text-slate-600 text-sm",children:"No incorrect answers — great job 🎯"}):i.jsx("ul",{className:"space-y-2",children:f.map(({i:j,q:A,chosen:L})=>i.jsxs("li",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-medium",children:["Q",j+1," — ",A.vignetteTitle||"Vignette"]}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Chosen: ",i.jsx("span",{className:"font-semibold",children:L})," • Correct:"," ",i.jsx("span",{className:"font-semibold",children:A.correct})]})]}),i.jsx("button",{className:"shrink-0 rounded-lg border px-3 py-1.5 text-sm hover:bg-slate-50",onClick:()=>{y(j),r()},children:"Go to question →"})]},A.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:r,className:"rounded-lg border px-4 py-2 hover:bg-slate-50",children:"Close"})})]})})}function mv(){const o=Vt();$n();const[r,d]=p.useState(lt.map((M,v)=>v)),[c,h]=p.useState(!1),[y,w]=p.useState(!1),[x,g]=p.useState(0),[f,k]=p.useState({}),[E,j]=p.useState({}),[A,L]=p.useState(!1),[X,Z]=p.useState(!1),[q,se]=p.useState(!1),te=p.useRef(null),J=p.useRef(null),[K,_]=p.useState(!1),ae=p.useRef(null),ee=lt[r[x]],R=lt.length,ie=(x+1)/Math.max(R,1)*100,ue=()=>{const M=ae.current;if(!M)return;const v=window.getSelection&&window.getSelection();if(!(!v||v.rangeCount===0))try{const m=v.getRangeAt(0);if(!M.contains(m.commonAncestorContainer)||String(m).trim().length===0)return;const C=document.createElement("mark");C.className="bg-yellow-200 rounded px-0.5",m.surroundContents(C),v.removeAllRanges()}catch{const m=M.getAttribute("contenteditable");M.setAttribute("contenteditable","true"),document.execCommand("hiliteColor",!1,"#FEF08A"),m!==null?M.setAttribute("contenteditable",m):M.removeAttribute("contenteditable")}};p.useEffect(()=>{if(!K)return;const M=()=>ue();return document.addEventListener("mouseup",M),()=>document.removeEventListener("mouseup",M)},[K]);const T=()=>{const M=ae.current;M&&M.querySelectorAll("mark").forEach(v=>{const m=v.parentNode;for(;v.firstChild;)m.insertBefore(v.firstChild,v);m.removeChild(v)})},U=M=>{const v=M==="random"?sv(lt.map((m,C)=>C)):lt.map((m,C)=>C);d(v),g(0),k({}),j({}),h(!0),te.current=Date.now(),J.current=null};p.useEffect(()=>{const M=v=>{v.key==="ArrowRight"&&x<R-1&&g(m=>m+1),v.key==="ArrowLeft"&&x>0&&g(m=>m-1)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[x,R]);const B=()=>j(M=>({...M,[ee.id]:!0})),O=()=>{x>=R-1||g(v=>v+1)},N=()=>x>0&&g(M=>M-1),V=x===R-1&&!!E[ee.id];return p.useEffect(()=>{V&&!J.current&&(J.current=Date.now())},[V,ee?.id,E,x,R]),p.useMemo(()=>{if(te.current==null)return 0;const M=J.current||Date.now();return Math.max(0,M-te.current)},[q,E,x]),i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(x+1,R)," of ",R]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ie}%`}})})]}),i.jsx("button",{onClick:()=>o("/diseases/geriatrics"),className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>w(M=>!M),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",$n()?"right-4 bottom-20":"top-[120px]"].join(" "),style:$n()?{}:{left:y?316:12},title:y?"Hide questions":"Show questions",children:y?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",y?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((M,v)=>{const m=lt[M],C=f[m.id],I=C?C===m.correct?"correct":"incorrect":"unanswered",W=v===x?"ring-2 ring-purple-300":I==="correct"?"ring-2 ring-emerald-300":I==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>g(v),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${W}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",v+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:m.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:m.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:m.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${I==="correct"?"bg-emerald-500":I==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},m.id)})}),i.jsxs("div",{className:"px-4 pb-4 flex gap-2",children:[i.jsx("button",{onClick:()=>L(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Lab values"}),i.jsx("button",{onClick:()=>Z(!0),className:"flex-1 rounded-xl border px-3 py-2 hover:bg-slate-50",children:"Calculator"})]})]})}),i.jsx("div",{className:`transition-all ${y&&!$n()?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:ee.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:ee.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:ee.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",ee.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:ae,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:ee.stem}}),ee.image&&i.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:i.jsx("img",{src:ee.image,alt:"Figure",className:"w-full block"})}),i.jsx("div",{className:"space-y-3",children:ee.options.map(M=>{const v=f[ee.id],m=!!E[ee.id],C=M.key===ee.correct,I=m?C?"border-emerald-300 bg-emerald-50":v===M.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${I}`,children:[i.jsx("input",{type:"radio",name:`ans-${ee.id}`,className:"h-4 w-4 text-purple-600",checked:v===M.key,onChange:()=>k(W=>({...W,[ee.id]:M.key})),disabled:m}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[M.key,"."]})," ",M.text]})]},M.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:E[ee.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:x>=R-1,className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Next Question →"}),i.jsx("button",{onClick:N,disabled:x===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"}),x===R-1&&i.jsx("button",{onClick:()=>se(!0),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Results"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:B,disabled:!f[ee.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>k(M=>({...M,[ee.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),E[ee.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:ee.explanation_detail?.map((M,v)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(nv,{text:M})},v))})]})})]})]}),i.jsxs("div",{className:"fixed right-4 top-[140px] md:flex md:flex-col md:gap-3 hidden",children:[i.jsx("button",{title:"Calculator",onClick:()=>Z(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧮"}),i.jsx("button",{title:"Lab values",onClick:()=>L(!0),className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧪"}),i.jsx("button",{title:"Toggle highlight mode",onClick:()=>_(M=>!M),className:`h-10 w-10 rounded-lg border shadow-sm hover:bg-slate-50 ${K?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:T,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm hover:bg-slate-50 text-slate-700",children:"🧽"})]})]})})]})}),i.jsx(as,{open:A,onClose:()=>L(!1),title:"Common Investigations / Values",children:i.jsx(lv,{})}),i.jsx(as,{open:X,onClose:()=>Z(!1),title:"Calculator",children:i.jsx(cv,{})}),i.jsx(dv,{open:$n()&&y,onClose:()=>w(!1),order:r,currentIdx:x,setCurrentIdx:g,answers:f}),i.jsx(uv,{open:q,onClose:()=>se(!1),answers:f,order:r,elapsedMs:(()=>{if(te.current==null)return 0;const M=J.current||Date.now();return Math.max(0,M-te.current)})(),jumpTo:M=>g(M)}),i.jsx(hv,{open:!c,onPick:U})]})}function hv({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),i.jsxs(as,{open:o,onClose:()=>{},title:"Start Urinary Incontinence Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]})}function pv({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const St=[{id:"HFPEF-3001",topic:"Geriatrics • Heart failure (HFpEF)",difficulty:"Easy",vignetteTitle:"Definition",stem:"An 82-year-old woman with hypertension and obesity presents with exertional dyspnoea and ankle swelling. Echo shows LVEF 55%, concentric LVH, LA dilation. Which SINGLE statement best defines HFpEF?",options:[{key:"A",text:"Symptoms/signs of HF with LVEF < 40%"},{key:"B",text:"Symptoms/signs of HF with LVEF ≥ 50% and objective diastolic dysfunction"},{key:"C",text:"Any dyspnoea with normal BNP"},{key:"D",text:"Pulmonary oedema with reduced EF only"},{key:"E",text:"LV dilation with EF ≥ 60%"}],correct:"B",explanation_detail:["HFpEF requires **HF symptoms/signs**, **LVEF ≥ 50%**, and **objective evidence of raised filling pressures/diastolic dysfunction** (e.g., LA enlargement, ↑E/e′, TR jet, elevated natriuretic peptides).","HFrEF is **EF < 40%**; HFmrEF 41–49%. BNP may be normal in obese patients, so normal BNP does not exclude HF in this phenotype."]},{id:"HFPEF-3002",topic:"Geriatrics • HFpEF",difficulty:"Medium",vignetteTitle:"Typical comorbidities",stem:"Which SINGLE cluster of comorbidities is most characteristic of HFpEF in older adults?",options:[{key:"A",text:"Young male, prior MI, reduced EF"},{key:"B",text:"Long-standing hypertension, obesity, diabetes, AF"},{key:"C",text:"Valvular AR with Marfan syndrome"},{key:"D",text:"Postpartum cardiomyopathy"},{key:"E",text:"Chronic alcohol use with dilated LV"}],correct:"B",explanation_detail:["HFpEF is often a disease of **older, hypertensive, often female patients** with **obesity**, **T2DM**, **CKD**, and **atrial fibrillation**. Systemic inflammation and microvascular dysfunction drive **impaired relaxation and stiffness**."]},{id:"HFPEF-3003",topic:"Geriatrics • HFpEF",difficulty:"Medium",vignetteTitle:"First-line disease-modifying therapy",stem:"A 78-year-old woman with HFpEF (EF 55%) has NYHA II dyspnoea. BNP elevated; eGFR 58. She is on optimized BP control (ACEi, thiazide). Which SINGLE medication provides **proven outcome benefit** in HFpEF?",options:[{key:"A",text:"Ivabradine"},{key:"B",text:"SGLT2 inhibitor (e.g., empagliflozin)"},{key:"C",text:"Verapamil"},{key:"D",text:"Digoxin for everyone"},{key:"E",text:"High-dose loop diuretic when euvolaemic"}],correct:"B",explanation_detail:["[green]SGLT2 inhibitors[/green] reduce **HF hospitalization** across the EF spectrum (including HFpEF).","Loop diuretics are for **congestion relief**, not disease modification. Rate/rhythm control for AF and **tight BP control** are also key pillars."]},{id:"HFPEF-3004",topic:"Geriatrics • HFpEF",difficulty:"Medium",vignetteTitle:"Acute management",stem:"An 84-year-old with HFpEF presents with acute pulmonary oedema: RR 32, SpO₂ 88% RA, BP 170/90, bilateral crackles, raised JVP. What is the SINGLE best **initial** management step?",options:[{key:"A",text:"High-flow oxygen titrated and IV loop diuretic"},{key:"B",text:"Immediate IV fluids bolus 500 mL"},{key:"C",text:"Start SGLT2 inhibitor in ED"},{key:"D",text:"Long-term beta-blocker loading dose now"},{key:"E",text:"Chest physiotherapy first"}],correct:"A",explanation_detail:["Treat **acute congestion**: titrated **oxygen**, **IV furosemide**, sit upright, consider **nitrates** if hypertensive, and **NIV** if persistent hypoxia. Avoid fluid bolus unless clear hypovolaemia."]},{id:"HFPEF-3005",topic:"Geriatrics • HFpEF",difficulty:"Hard",vignetteTitle:"Echocardiography clues",stem:"Which SINGLE echocardiographic finding most supports raised LV filling pressures typical of HFpEF?",options:[{key:"A",text:"LV end-diastolic diameter markedly increased"},{key:"B",text:"E/e′ ratio elevated with LA enlargement"},{key:"C",text:"Global hypokinesia with EF 30%"},{key:"D",text:"Severe RV dilation with TR"},{key:"E",text:"Normal LA size with normal diastolic indices"}],correct:"B",explanation_detail:["HFpEF shows **diastolic dysfunction**: ↑**E/e′**, **LA enlargement**, abnormal LV relaxation, concentric LVH. Marked LV dilation and EF 30% suggest HFrEF instead."]}];function gv(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}function Cr(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Oh({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function fv({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Oh,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=St[w],f=y[g.id],k=f?f===g.correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:g.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:g.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:g.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g.id)})})})}function yv({answers:o,startedAt:r,endedAt:d,order:c,onReview:h,onRestart:y}){const w=c.length,x=c.reduce((A,L)=>A+(o[St[L].id]===St[L].correct?1:0),0),g=Math.round(x/Math.max(w,1)*100),f=Math.max(0,(d||Date.now())-(r||Date.now())),k=Math.floor(f/6e4),E=Math.round(f%6e4/1e3),j=c.filter(A=>o[St[A].id]&&o[St[A].id]!==St[A].correct);return i.jsx("div",{className:"mx-auto max-w-[900px] px-4 py-8",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Results — HFpEF"}),i.jsxs("div",{className:"mt-4 grid sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Score"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Review incorrect questions"}),j.length===0?i.jsx("p",{className:"text-slate-600",children:"Perfect score — nothing to review 🎯"}):i.jsx("ul",{className:"space-y-2",children:j.map(A=>{const L=St[A];return i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(A),className:"text-left w-full rounded-lg border px-3 py-2 hover:bg-slate-50",children:[i.jsxs("span",{className:"font-medium mr-2",children:["Q",c.indexOf(A)+1,"."]}),L.stem.replace(/<[^>]*>/g,"")]})},L.id)})})]}),i.jsxs("div",{className:"mt-6 flex gap-2",children:[i.jsx("button",{onClick:y,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:"Restart"}),i.jsx(Ee,{to:"/diseases/geriatrics",className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Back to Geriatrics"})]})]})})}function bv(){const o=Cr(),[r,d]=p.useState(St.map((O,N)=>N)),[c,h]=p.useState(!1),[y,w]=p.useState(null),[x,g]=p.useState(null),[f,k]=p.useState(!1),[E,j]=p.useState(!1),[A,L]=p.useState(0),[X,Z]=p.useState({}),[q,se]=p.useState({}),[te,J]=p.useState(!1),K=p.useRef(null),_=St[r[A]],ae=St.length,ee=(A+1)/Math.max(ae,1)*100;p.useEffect(()=>{if(!te)return;const O=()=>{const N=K.current;if(!N)return;const V=window.getSelection&&window.getSelection();if(!(!V||V.rangeCount===0))try{const M=V.getRangeAt(0);if(!N.contains(M.commonAncestorContainer)||String(M).trim().length===0)return;const v=document.createElement("mark");v.className="bg-yellow-200 rounded px-0.5",M.surroundContents(v),V.removeAllRanges()}catch{}};return document.addEventListener("mouseup",O),()=>document.removeEventListener("mouseup",O)},[te]);const R=()=>{const O=K.current;O&&O.querySelectorAll("mark").forEach(N=>{const V=N.parentNode;for(;N.firstChild;)V.insertBefore(N.firstChild,N);V.removeChild(N)})};p.useEffect(()=>{const O=N=>{N.key==="ArrowRight"&&A<ae-1&&L(V=>V+1),N.key==="ArrowLeft"&&A>0&&L(V=>V-1)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[A,ae]);const ie=O=>{const N=O==="random"?gv(St.map((V,M)=>M)):St.map((V,M)=>M);d(N),L(0),Z({}),se({}),h(!0),w(Date.now()),k(!1)},ue=()=>se(O=>({...O,[_.id]:!0})),T=()=>A<ae-1&&L(O=>O+1),U=()=>A>0&&L(O=>O-1),B=()=>{g(Date.now()),k(!0)};return f?i.jsx(yv,{answers:X,startedAt:y,endedAt:x,order:r,onReview:O=>{k(!1),L(r.indexOf(O)>=0?r.indexOf(O):0)},onRestart:()=>ie("number")}):i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(A+1,ae)," of ",ae]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ee}%`}})})]}),i.jsx("button",{onClick:B,className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>j(O=>!O),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",Cr()?"right-4 bottom-20":"top-[120px]"].join(" "),style:Cr()?{}:{left:E?316:12},title:E?"Hide questions":"Show questions",children:E?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",E?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((O,N)=>{const V=St[O],M=X[V.id],v=M?M===V.correct?"correct":"incorrect":"unanswered",m=N===A?"ring-2 ring-purple-300":v==="correct"?"ring-2 ring-emerald-300":v==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>L(N),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${m}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",N+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:V.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:V.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:V.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${v==="correct"?"bg-emerald-500":v==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},V.id)})})]})}),i.jsx("div",{className:`transition-all ${E&&!Cr()?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:_.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:_.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:_.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",_.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:K,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:_.stem}}),i.jsx("div",{className:"space-y-3",children:_.options.map(O=>{const N=X[_.id],V=!!q[_.id],M=O.key===_.correct,v=V?M?"border-emerald-300 bg-emerald-50":N===O.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${v}`,children:[i.jsx("input",{type:"radio",name:`ans-${_.id}`,className:"h-4 w-4 text-purple-600",checked:N===O.key,onChange:()=>Z(m=>({...m,[_.id]:O.key})),disabled:V}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[O.key,"."]})," ",O.text]})]},O.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:q[_.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A>=ae-1?B:T,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:A>=ae-1?"Finish & View Results →":"Next Question →"}),i.jsx("button",{onClick:U,disabled:A===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:ue,disabled:!X[_.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>Z(O=>({...O,[_.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),q[_.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:_.explanation_detail?.map((O,N)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(pv,{text:O})},N))})]})})]})]}),i.jsxs("div",{className:"fixed md:hidden right-4 bottom-4 flex gap-2",children:[i.jsx("button",{title:"Toggle highlight mode",onClick:()=>J(O=>!O),className:`h-10 w-10 rounded-lg border shadow-sm ${te?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:R,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm",children:"🧽"})]})]})})]})}),i.jsx(fv,{open:o&&E,onClose:()=>j(!1),order:r,currentIdx:A,setCurrentIdx:L,answers:X}),i.jsx(xv,{open:!c,onPick:ie})]})}function xv({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),o?i.jsxs(Oh,{open:o,onClose:()=>{},title:"Start HFpEF Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]}):null}function vv({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const Nt=[{id:"PU-3001",topic:"Geriatrics • Pressure ulcers",difficulty:"Easy",vignetteTitle:"Staging fundamentals",stem:"An 84-year-old, bedbound patient has a persistent red area over the sacrum that does not blanch with fingertip pressure. Skin is intact. What is the SINGLE best stage classification?",options:[{key:"A",text:"Stage 1"},{key:"B",text:"Stage 2"},{key:"C",text:"Stage 3"},{key:"D",text:"Stage 4"},{key:"E",text:"Unstageable"}],correct:"A",explanation_detail:["**Stage 1** = **intact skin** with **non-blanchable erythema** of a localized area.","Stage 2 = **partial-thickness**; Stage 3 = **full-thickness** with fat; Stage 4 = **bone/tendon/muscle** exposure; **Unstageable** = base obscured by slough/eschar."]},{id:"PU-3002",topic:"Geriatrics • Pressure ulcers",difficulty:"Medium",vignetteTitle:"Prevention bundle",stem:"A 79-year-old with advanced dementia is admitted after a hip fracture repair. Braden score is low. Which SINGLE intervention is the cornerstone of prevention?",options:[{key:"A",text:"High-dose vitamin C for all"},{key:"B",text:"Reposition at least every 2 hours and offload pressure"},{key:"C",text:"Topical antiseptics to sacrum twice daily"},{key:"D",text:"Prophylactic systemic antibiotics"},{key:"E",text:"Daily debridement regardless of skin status"}],correct:"B",explanation_detail:["Core prevention: **regular repositioning (≈ q2h)**, **offloading** bony prominences, and **support surfaces**.","[blue]Adjuncts[/blue]: moisture management, nutrition, reduce shear/friction."]},{id:"PU-3003",topic:"Geriatrics • Pressure ulcers",difficulty:"Medium",vignetteTitle:"Dressings 101",stem:"A Stage 2 ulcer over the greater trochanter shows shallow partial-thickness loss with a clean pink base and minimal exudate. Which SINGLE dressing approach is most appropriate?",options:[{key:"A",text:"Dry gauze changed q2h"},{key:"B",text:"Hydrocolloid or foam to maintain moist wound healing"},{key:"C",text:"Full-thickness surgical excision"},{key:"D",text:"Caustic antiseptic daily until black"},{key:"E",text:"Negative pressure wound therapy (default first line)"}],correct:"B",explanation_detail:["For **Stage 2**, aim for a **moist wound environment**: **hydrocolloid** or **thin foam** works for shallow depth and low exudate.","NPWT is better for **deeper** wounds with moderate/heavy exudate."]},{id:"PU-3004",topic:"Geriatrics • Pressure ulcers",difficulty:"Hard",vignetteTitle:"Debridement decisions",stem:"An immobile 88-year-old with peripheral arterial disease has a dry, stable eschar on the heel without surrounding erythema, drainage, or fluctuance. What is the SINGLE best management?",options:[{key:"A",text:"Sharp debridement immediately"},{key:"B",text:"Keep eschar intact and offload heel"},{key:"C",text:"Daily wet-to-dry dressings to remove eschar"},{key:"D",text:"Empiric IV antibiotics for 7 days"},{key:"E",text:"Topical iodine under occlusion"}],correct:"B",explanation_detail:["For **stable, dry heel eschar** with no infection/ischemia, **do not debride**; it functions as a biologic dressing. **Offload** and monitor."]},{id:"PU-3005",topic:"Geriatrics • Pressure ulcers",difficulty:"Medium",vignetteTitle:"When to suspect osteomyelitis",stem:"A chronic Stage 4 sacral ulcer shows exposed bone and malodor. Inflammatory markers are elevated. Which SINGLE investigation best confirms osteomyelitis?",options:[{key:"A",text:"Plain X-ray alone"},{key:"B",text:"Superficial swab culture"},{key:"C",text:"Bone biopsy (histology ± culture)"},{key:"D",text:"ESR/CRP trend only"},{key:"E",text:"Probe-to-bone test alone"}],correct:"C",explanation_detail:["Definitive diagnosis is **bone biopsy** (histology ± culture). X-ray is insensitive early; swabs reflect surface flora."]}];function wv(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}function kv(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Gh({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Cv({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Gh,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=Nt[w],f=y[g.id],k=f?f===g.correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:g.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:g.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:g.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g.id)})})})}function Av({answers:o,startedAt:r,endedAt:d,order:c,onReview:h,onRestart:y}){const w=c.length,x=c.reduce((A,L)=>A+(o[Nt[L].id]===Nt[L].correct?1:0),0),g=Math.round(x/Math.max(w,1)*100),f=Math.max(0,(d||Date.now())-(r||Date.now())),k=Math.floor(f/6e4),E=Math.round(f%6e4/1e3),j=c.filter(A=>o[Nt[A].id]&&o[Nt[A].id]!==Nt[A].correct);return i.jsx("div",{className:"mx-auto max-w-[900px] px-4 py-8",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Results — Pressure Ulcers"}),i.jsxs("div",{className:"mt-4 grid sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Score"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Review incorrect questions"}),j.length===0?i.jsx("p",{className:"text-slate-600",children:"Nice — nothing wrong this time 🎯"}):i.jsx("ul",{className:"space-y-2",children:j.map(A=>{const L=Nt[A];return i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(A),className:"text-left w-full rounded-lg border px-3 py-2 hover:bg-slate-50",children:[i.jsxs("span",{className:"font-medium mr-2",children:["Q",c.indexOf(A)+1,"."]}),L.stem.replace(/<[^>]*>/g,"")]})},L.id)})})]}),i.jsxs("div",{className:"mt-6 flex gap-2",children:[i.jsx("button",{onClick:y,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:"Restart"}),i.jsx(Ee,{to:"/diseases/geriatrics",className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Back to Geriatrics"})]})]})})}function Sv(){const o=kv(),[r,d]=p.useState(Nt.map((T,U)=>U)),[c,h]=p.useState(!1),[y,w]=p.useState(null),[x,g]=p.useState(null),[f,k]=p.useState(!1),[E,j]=p.useState(!1),[A,L]=p.useState(0),[X,Z]=p.useState({}),[q,se]=p.useState({}),[te,J]=p.useState(!1),K=p.useRef(null),_=Nt[r[A]],ae=Nt.length,ee=(A+1)/Math.max(ae,1)*100;p.useEffect(()=>{if(!te)return;const T=()=>{const U=K.current;if(!U)return;const B=window.getSelection&&window.getSelection();if(!(!B||B.rangeCount===0))try{const O=B.getRangeAt(0);if(!U.contains(O.commonAncestorContainer)||String(O).trim().length===0)return;const N=document.createElement("mark");N.className="bg-yellow-200 rounded px-0.5",O.surroundContents(N),B.removeAllRanges()}catch{}};return document.addEventListener("mouseup",T),()=>document.removeEventListener("mouseup",T)},[te]);const R=()=>{const T=K.current;T&&T.querySelectorAll("mark").forEach(U=>{const B=U.parentNode;for(;U.firstChild;)B.insertBefore(U.firstChild,U);B.removeChild(U)})};p.useEffect(()=>{const T=U=>{U.key==="ArrowRight"&&A<ae-1&&L(B=>B+1),U.key==="ArrowLeft"&&A>0&&L(B=>B-1)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[A,ae]);const ie=T=>{const U=T==="random"?wv(Nt.map((B,O)=>O)):Nt.map((B,O)=>O);d(U),L(0),Z({}),se({}),h(!0),w(Date.now()),k(!1)},ue=()=>{g(Date.now()),k(!0)};return f?i.jsx(Av,{answers:X,startedAt:y,endedAt:x,order:r,onReview:T=>{k(!1),L(r.indexOf(T)>=0?r.indexOf(T):0)},onRestart:()=>ie("number")}):i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(A+1,ae)," of ",ae]}),i.jsx("div",{className:"flex-1 h-2 bg-sLate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ee}%`}})})]}),i.jsx("button",{onClick:ue,className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>j(T=>!T),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",o?"right-4 bottom-20":"top-[120px]"].join(" "),style:o?{}:{left:E?316:12},title:E?"Hide questions":"Show questions",children:E?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",E?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((T,U)=>{const B=Nt[T],O=X[B.id],N=O?O===B.correct?"correct":"incorrect":"unanswered",V=U===A?"ring-2 ring-purple-300":N==="correct"?"ring-2 ring-emerald-300":N==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>L(U),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${V}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",U+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:B.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:B.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:B.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${N==="correct"?"bg-emerald-500":N==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},B.id)})})]})}),i.jsx("div",{className:`transition-all ${E&&!o?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:_.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:_.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:_.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",_.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:K,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:_.stem}}),i.jsx("div",{className:"space-y-3",children:_.options.map(T=>{const U=X[_.id],B=!!q[_.id],O=T.key===_.correct,N=B?O?"border-emerald-300 bg-emerald-50":U===T.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${N}`,children:[i.jsx("input",{type:"radio",name:`ans-${_.id}`,className:"h-4 w-4 text-purple-600",checked:U===T.key,onChange:()=>Z(V=>({...V,[_.id]:T.key})),disabled:B}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[T.key,"."]})," ",T.text]})]},T.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:q[_.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A>=ae-1?ue:()=>L(T=>T+1),className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:A>=ae-1?"Finish & View Results →":"Next Question →"}),i.jsx("button",{onClick:()=>A>0&&L(T=>T-1),disabled:A===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>se(T=>({...T,[_.id]:!0})),disabled:!X[_.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>Z(T=>({...T,[_.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),q[_.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:_.explanation_detail?.map((T,U)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(vv,{text:T})},U))})]})})]})]}),i.jsxs("div",{className:"fixed md:hidden right-4 bottom-4 flex gap-2",children:[i.jsx("button",{title:"Toggle highlight mode",onClick:()=>J(T=>!T),className:`h-10 w-10 rounded-lg border shadow-sm ${te?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:R,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm",children:"🧽"})]})]})})]})}),i.jsx(Cv,{open:o&&E,onClose:()=>j(!1),order:r,currentIdx:A,setCurrentIdx:L,answers:X}),i.jsx(Nv,{open:!c,onPick:ie})]})}function Nv({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),o?i.jsxs(Gh,{open:o,onClose:()=>{},title:"Start Pressure Ulcers Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]}):null}function jv({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const jt=[{id:"FR-4001",topic:"Geriatrics • Frailty",difficulty:"Easy",vignetteTitle:"Core definition",stem:"Frailty is best described as which SINGLE concept?",options:[{key:"A",text:"Aging with multimorbidity only"},{key:"B",text:"Irreversible cognitive decline"},{key:"C",text:"Syndrome of ↓ physiologic reserve → ↑ vulnerability to stressors"},{key:"D",text:"Any disability requiring a wheelchair"},{key:"E",text:"Same as sarcopenia"}],correct:"C",explanation_detail:["Frailty is a **biologic syndrome** of **reduced homeostatic reserve** and **resilience**, leading to **disproportionate adverse outcomes** after stressors.","[blue]Sarcopenia[/blue] contributes to frailty but is **not identical**."]},{id:"FR-4002",topic:"Geriatrics • Frailty",difficulty:"Medium",vignetteTitle:"Phenotype vs deficit-index",stem:"Which SINGLE set aligns with the **Fried phenotype** of frailty?",options:[{key:"A",text:"Weight loss, exhaustion, slow gait, weak grip, low activity"},{key:"B",text:"Polypharmacy count across systems"},{key:"C",text:"Charlson comorbidity components"},{key:"D",text:"Delirium screening items"},{key:"E",text:"Mini-Mental State Examination items"}],correct:"A",explanation_detail:["The **Fried phenotype** uses five: **unintentional weight loss**, **exhaustion**, **weak grip**, **slow gait**, **low physical activity**.","[green]Deficit-index[/green] (Rockwood/CFS) sums **accumulated deficits** across systems."]},{id:"FR-4003",topic:"Geriatrics • Frailty",difficulty:"Medium",vignetteTitle:"Clinical Frailty Scale (CFS)",stem:"An 83-year-old independent in ADLs with brisk walks and no fatigue is scored on the **CFS**. Which SINGLE level fits best?",options:[{key:"A",text:"CFS 1 – Very Fit"},{key:"B",text:"CFS 3 – Managing well"},{key:"C",text:"CFS 5 – Mildly frail"},{key:"D",text:"CFS 7 – Severely frail"},{key:"E",text:"CFS 9 – Terminally ill"}],correct:"A",explanation_detail:["**CFS 1**: active, energetic, fittest for age. **CFS 3** has medical problems well-controlled; **CFS ≥5** indicates degrees of frailty with dependency."]},{id:"FR-4004",topic:"Geriatrics • Frailty",difficulty:"Hard",vignetteTitle:"Interventions that move the needle",stem:"Which SINGLE intervention has the **strongest evidence** to improve function in frailty?",options:[{key:"A",text:"Long-term systemic corticosteroids"},{key:"B",text:"Multicomponent exercise: resistance + balance + gait + aerobic"},{key:"C",text:"Bed rest with high-calorie feeds"},{key:"D",text:"Routine antipsychotics at night"},{key:"E",text:"Daily IV fluids at home"}],correct:"B",explanation_detail:["Best data favors **multicomponent exercise** emphasizing **progressive resistance training**, **balance**, and **gait/aerobic** work. Pair with **nutrition optimization** and **CGA**."]},{id:"FR-4005",topic:"Geriatrics • Frailty",difficulty:"Medium",vignetteTitle:"Protein targets",stem:"A 76-year-old with frailty and weight loss starts resistance training. Which SINGLE **daily protein** target is most appropriate (normal renal function)?",options:[{key:"A",text:"0.6 g/kg/day"},{key:"B",text:"0.8 g/kg/day (standard RDA for adults)"},{key:"C",text:"1.0–1.2 g/kg/day"},{key:"D",text:"≥2.5 g/kg/day for all older adults"},{key:"E",text:"Protein restriction to prevent sarcopenia"}],correct:"C",explanation_detail:["Most guidelines suggest **~1.0–1.2 g/kg/day** in older adults; up to **1.2–1.5 g/kg/day** if malnourished/ill and renal function allows."]},{id:"FR-4006",topic:"Geriatrics • Frailty",difficulty:"Medium",vignetteTitle:"Hospital vulnerability",stem:"A frail inpatient is at risk of deconditioning and delirium. Which SINGLE **bundle element** is most protective?",options:[{key:"A",text:"Strict bed rest until discharge"},{key:"B",text:"Early mobilization with PT/OT and orientation (clock, glasses, hearing aids)"},{key:"C",text:"Routine benzodiazepines for sleep"},{key:"D",text:"NPO after midnight for entire stay"},{key:"E",text:"Indwelling catheter for convenience"}],correct:"B",explanation_detail:["Frailty care-in-hospital: **early mobilization**, **sensory optimization**, **hydration/nutrition**, **sleep hygiene**, **avoid deliriogenic meds**, **minimize tethers**."]}];function Ev(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}function Dv(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Fh({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function Tv({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Fh,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=jt[w],f=y[g.id],k=f?f===g.correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:g.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:g.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:g.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g.id)})})})}function Mv({answers:o,startedAt:r,endedAt:d,order:c,onReview:h,onRestart:y}){const w=c.length,x=c.reduce((A,L)=>A+(o[jt[L].id]===jt[L].correct?1:0),0),g=Math.round(x/Math.max(w,1)*100),f=Math.max(0,(d||Date.now())-(r||Date.now())),k=Math.floor(f/6e4),E=Math.round(f%6e4/1e3),j=c.filter(A=>o[jt[A].id]&&o[jt[A].id]!==jt[A].correct);return i.jsx("div",{className:"mx-auto max-w-[900px] px-4 py-8",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Results — Frailty"}),i.jsxs("div",{className:"mt-4 grid sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Score"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Review incorrect questions"}),j.length===0?i.jsx("p",{className:"text-slate-600",children:"Nice — nothing wrong this round 🎯"}):i.jsx("ul",{className:"space-y-2",children:j.map(A=>{const L=jt[A];return i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(A),className:"text-left w-full rounded-lg border px-3 py-2 hover:bg-slate-50",children:[i.jsxs("span",{className:"font-medium mr-2",children:["Q",c.indexOf(A)+1,"."]}),L.stem.replace(/<[^>]*>/g,"")]})},L.id)})})]}),i.jsxs("div",{className:"mt-6 flex gap-2",children:[i.jsx("button",{onClick:y,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:"Restart"}),i.jsx(Ee,{to:"/diseases/geriatrics",className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Back to Geriatrics"})]})]})})}function Rv(){const o=Dv(),[r,d]=p.useState(jt.map((T,U)=>U)),[c,h]=p.useState(!1),[y,w]=p.useState(null),[x,g]=p.useState(null),[f,k]=p.useState(!1),[E,j]=p.useState(!1),[A,L]=p.useState(0),[X,Z]=p.useState({}),[q,se]=p.useState({}),[te,J]=p.useState(!1),K=p.useRef(null),_=jt[r[A]],ae=jt.length,ee=(A+1)/Math.max(ae,1)*100;p.useEffect(()=>{if(!te)return;const T=()=>{const U=K.current;if(!U)return;const B=window.getSelection&&window.getSelection();if(!(!B||B.rangeCount===0))try{const O=B.getRangeAt(0);if(!U.contains(O.commonAncestorContainer)||String(O).trim().length===0)return;const N=document.createElement("mark");N.className="bg-yellow-200 rounded px-0.5",O.surroundContents(N),B.removeAllRanges()}catch{}};return document.addEventListener("mouseup",T),()=>document.removeEventListener("mouseup",T)},[te]);const R=()=>{const T=K.current;T&&T.querySelectorAll("mark").forEach(U=>{const B=U.parentNode;for(;U.firstChild;)B.insertBefore(U.firstChild,U);B.removeChild(U)})};p.useEffect(()=>{const T=U=>{U.key==="ArrowRight"&&A<ae-1&&L(B=>B+1),U.key==="ArrowLeft"&&A>0&&L(B=>B-1)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[A,ae]);const ie=T=>{const U=T==="random"?Ev(jt.map((B,O)=>O)):jt.map((B,O)=>O);d(U),L(0),Z({}),se({}),h(!0),w(Date.now()),k(!1)},ue=()=>{g(Date.now()),k(!0)};return f?i.jsx(Mv,{answers:X,startedAt:y,endedAt:x,order:r,onReview:T=>{k(!1),L(r.indexOf(T)>=0?r.indexOf(T):0)},onRestart:()=>ie("number")}):i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(A+1,ae)," of ",ae]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ee}%`}})})]}),i.jsx("button",{onClick:ue,className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>j(T=>!T),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",o?"right-4 bottom-20":"top-[120px]"].join(" "),style:o?{}:{left:E?316:12},title:E?"Hide questions":"Show questions",children:E?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",E?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((T,U)=>{const B=jt[T],O=X[B.id],N=O?O===B.correct?"correct":"incorrect":"unanswered",V=U===A?"ring-2 ring-purple-300":N==="correct"?"ring-2 ring-emerald-300":N==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>L(U),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${V}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",U+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:B.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:B.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:B.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${N==="correct"?"bg-emerald-500":N==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},B.id)})})]})}),i.jsx("div",{className:`transition-all ${E&&!o?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:_.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:_.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:_.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",_.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:K,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:_.stem}}),i.jsx("div",{className:"space-y-3",children:_.options.map(T=>{const U=X[_.id],B=!!q[_.id],O=T.key===_.correct,N=B?O?"border-emerald-300 bg-emerald-50":U===T.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${N}`,children:[i.jsx("input",{type:"radio",name:`ans-${_.id}`,className:"h-4 w-4 text-purple-600",checked:U===T.key,onChange:()=>Z(V=>({...V,[_.id]:T.key})),disabled:B}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[T.key,"."]})," ",T.text]})]},T.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:q[_.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A>=ae-1?ue:()=>L(T=>T+1),className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:A>=ae-1?"Finish & View Results →":"Next Question →"}),i.jsx("button",{onClick:()=>A>0&&L(T=>T-1),disabled:A===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>se(T=>({...T,[_.id]:!0})),disabled:!X[_.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>Z(T=>({...T,[_.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),q[_.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:_.explanation_detail?.map((T,U)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(jv,{text:T})},U))})]})})]})]}),i.jsxs("div",{className:"fixed md:hidden right-4 bottom-4 flex gap-2",children:[i.jsx("button",{title:"Toggle highlight mode",onClick:()=>J(T=>!T),className:`h-10 w-10 rounded-lg border shadow-sm ${te?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:R,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm",children:"🧽"})]})]})})]})}),i.jsx(Tv,{open:o&&E,onClose:()=>j(!1),order:r,currentIdx:A,setCurrentIdx:L,answers:X}),i.jsx(Pv,{open:!c,onPick:ie})]})}function Pv({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),o?i.jsxs(Fh,{open:o,onClose:()=>{},title:"Start Frailty Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]}):null}function Bv({text:o=""}){let r=String(o);return r=r.replace(/&(?![a-zA-Z#0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),r=r.replace(/(^|[^*])\*(?!\*)(.+?)\*(?!\*)/g,"$1<em>$2</em>"),r=r.replace(/_(.+?)_/g,"<em>$1</em>"),r=r.replace(/==(.+?)==/g,"<mark style='background-color:#FEF3C7' class='px-1 rounded'>$1</mark>"),Object.entries({yellow:"#FEF3C7",green:"#D1FAE5",blue:"#E0F2FE",red:"#FFE4E6",purple:"#EDE9FE"}).forEach(([c,h])=>{const y=new RegExp(`\\[${c}\\]([\\s\\S]+?)\\[\\/${c}\\]`,"gi");r=r.replace(y,`<mark style="background-color:${h}" class="px-1 rounded">$1</mark>`)}),r=r.replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&lt;mark /g,"<mark ").replace(/&lt;\/mark&gt;/g,"</mark>"),i.jsx("span",{dangerouslySetInnerHTML:{__html:r}})}const Et=[{id:"CKD-5001",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Easy",vignetteTitle:"Definition (KDIGO)",stem:"Which SINGLE statement best defines **CKD** according to KDIGO?",options:[{key:"A",text:"eGFR < 60 mL/min/1.73 m² at any single time point"},{key:"B",text:"Any abnormal serum creatinine once"},{key:"C",text:"Kidney damage markers or eGFR < 60 for ≥ 3 months"},{key:"D",text:"Albuminuria alone regardless of duration"},{key:"E",text:"Only structural abnormalities on imaging"}],correct:"C",explanation_detail:["**CKD** = **markers of kidney damage** (e.g., albuminuria, structural changes) **or eGFR &lt; 60**, **present for ≥ 3 months**.","A single low eGFR (A) may reflect AKI; duration matters."]},{id:"CKD-5002",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Medium",vignetteTitle:"Staging by eGFR",stem:"A 78-year-old has eGFR 38 mL/min/1.73 m² for 6 months. Which SINGLE **G-stage** is correct?",options:[{key:"A",text:"G1 (≥90)"},{key:"B",text:"G2 (60–89)"},{key:"C",text:"G3a (45–59)"},{key:"D",text:"G3b (30–44)"},{key:"E",text:"G4 (15–29)"}],correct:"D",explanation_detail:["KDIGO eGFR stages: **G1 ≥90**, **G2 60–89**, **G3a 45–59**, **G3b 30–44**, **G4 15–29**, **G5 &lt;15 or dialysis**."]},{id:"CKD-5003",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Medium",vignetteTitle:"Albuminuria categories",stem:"UACR is 220 mg/g (≈ 25 mg/mmol) on two occasions. Which SINGLE **A-category** applies?",options:[{key:"A",text:"A1: normal to mildly increased (&lt;30 mg/g)"},{key:"B",text:"A2: moderately increased (30–300 mg/g)"},{key:"C",text:"A3: severely increased (&gt;300 mg/g)"},{key:"D",text:"Unclassified; UACR not used in CKD staging"},{key:"E",text:"A3 if diabetic"}],correct:"B",explanation_detail:["Albuminuria categories: **A1 &lt;30**, **A2 30–300**, **A3 &gt;300 mg/g**. These add prognostic weight alongside eGFR."]},{id:"CKD-5004",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Hard",vignetteTitle:"Renoprotective therapies",stem:"An 80-year-old with CKD G3b A3 and type 2 diabetes is on maximally tolerated ACE inhibitor. Potassium is 4.7 mmol/L, eGFR 38. Which SINGLE **add-on** most reduces CKD progression and CV events?",options:[{key:"A",text:"Add SGLT2 inhibitor (e.g., dapagliflozin)"},{key:"B",text:"Start NSAID for osteoarthritis pain"},{key:"C",text:"Add thiazolidinedione (pioglitazone) for kidneys"},{key:"D",text:"Dual ACEi + ARB"},{key:"E",text:"Stop ACEi if creatinine rises by any amount"}],correct:"A",explanation_detail:["**SGLT2 inhibitors** reduce CKD progression and CV events across eGFR ranges when albuminuria is present. ","[red]Avoid[/red] **dual ACEi/ARB**; **NSAIDs** accelerate nephropathy; a modest creatinine rise (&lt;30%) after ACEi start is expected."]},{id:"CKD-5005",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Medium",vignetteTitle:"Anemia of CKD",stem:"A 76-year-old with CKD G4 has Hb 9.6 g/dL, ferritin 180 μg/L, TSAT 28% after IV iron repletion. Which SINGLE next step is most appropriate?",options:[{key:"A",text:"Start ESA (erythropoiesis-stimulating agent)"},{key:"B",text:"Give more IV iron until ferritin &gt; 800 μg/L"},{key:"C",text:"Transfuse 2 units PRBC routinely"},{key:"D",text:"No action; target Hb &lt; 9 g/dL"},{key:"E",text:"High-dose vitamin C"}],correct:"A",explanation_detail:["After **iron repletion**, consider **ESA** when **Hb persistently &lt;10 g/dL**, individualizing risks/benefits and avoiding Hb &gt;11.5–12."]},{id:"CKD-5006",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Medium",vignetteTitle:"Metformin in CKD",stem:"A 74-year-old with T2DM and CKD has eGFR 34. Which SINGLE metformin plan is appropriate?",options:[{key:"A",text:"Continue usual dose; no change at any eGFR"},{key:"B",text:"Reduce dose and monitor; stop if eGFR &lt;30"},{key:"C",text:"Stop at eGFR &lt;60"},{key:"D",text:"Increase dose to improve glycemic control"},{key:"E",text:"Metformin is contraindicated in all CKD"}],correct:"B",explanation_detail:["Most guidance: **review/reduce at eGFR 30–44**, **contraindicated &lt;30**; monitor for intercurrent illness/contrast exposures."]},{id:"CKD-5007",topic:"Geriatrics • Chronic kidney disease (CKD)",difficulty:"Medium",vignetteTitle:"Mineral bone disorder (CKD-MBD)",stem:"CKD G4 patient has persistent hyperphosphatemia despite diet. Which SINGLE measure is appropriate next?",options:[{key:"A",text:"Start phosphate binder with meals"},{key:"B",text:"High-calcium supplements anytime"},{key:"C",text:"No action; phosphate is unrelated to outcomes"},{key:"D",text:"Stop vitamin D completely in all CKD"},{key:"E",text:"Thiazide diuretic for phosphate control"}],correct:"A",explanation_detail:["CKD-MBD care: **dietary phosphate restriction**, then **binders** if persistent elevation; consider vitamin D analogs per PTH and Ca/PO₄ balance."]}];function Iv(o){const r=[...o];for(let d=r.length-1;d>0;d--){const c=Math.floor(Math.random()*(d+1));[r[d],r[c]]=[r[c],r[d]]}return r}function Lv(o=768){const[r,d]=p.useState(()=>typeof window<"u"?window.innerWidth<o:!1);return p.useEffect(()=>{const c=()=>d(window.innerWidth<o);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[o]),r}function Vh({open:o,onClose:r,title:d,children:c,maxW:h="max-w-2xl",overlayClass:y="bg-black/30"}){return o?i.jsxs("div",{className:"fixed inset-0 z-[60]",children:[i.jsx("div",{className:`absolute inset-0 ${y}`,onClick:r}),i.jsx("div",{className:"absolute inset-0 overflow-auto",children:i.jsx("div",{className:`mx-auto ${h} p-4`,children:i.jsxs("div",{className:"relative rounded-2xl bg-white shadow-xl border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsx("h3",{className:"font-semibold text-slate-900",children:d}),i.jsx("button",{onClick:r,className:"px-2 py-1 rounded-lg text-slate-600 hover:bg-slate-100",children:"✕"})]}),i.jsx("div",{className:"p-4",children:c})]})})})]}):null}function zv({open:o,onClose:r,order:d,currentIdx:c,setCurrentIdx:h,answers:y}){return i.jsx(Vh,{open:o,onClose:r,title:"Questions",maxW:"max-w-lg",children:i.jsx("ol",{className:"space-y-3",children:d.map((w,x)=>{const g=Et[w],f=y[g.id],k=f?f===g.correct?"correct":"incorrect":"unanswered",E=x===c?"ring-2 ring-purple-300":k==="correct"?"ring-2 ring-emerald-300":k==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>{h(x),r()},className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${E}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",x+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:g.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:g.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:g.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${k==="correct"?"bg-emerald-500":k==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},g.id)})})})}function Hv({answers:o,startedAt:r,endedAt:d,order:c,onReview:h,onRestart:y}){const w=c.length,x=c.reduce((A,L)=>A+(o[Et[L].id]===Et[L].correct?1:0),0),g=Math.round(x/Math.max(w,1)*100),f=Math.max(0,(d||Date.now())-(r||Date.now())),k=Math.floor(f/6e4),E=Math.round(f%6e4/1e3),j=c.filter(A=>o[Et[A].id]&&o[Et[A].id]!==Et[A].correct);return i.jsx("div",{className:"mx-auto max-w-[900px] px-4 py-8",children:i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"Results — CKD"}),i.jsxs("div",{className:"mt-4 grid sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Score"}),i.jsxs("p",{className:"text-2xl font-bold",children:[x," / ",w]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Percentage"}),i.jsxs("p",{className:"text-2xl font-bold",children:[g,"%"]})]}),i.jsxs("div",{className:"rounded-xl border p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[k,"m ",E,"s"]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("p",{className:"font-semibold mb-2",children:"Review incorrect questions"}),j.length===0?i.jsx("p",{className:"text-slate-600",children:"You aced it 🎯"}):i.jsx("ul",{className:"space-y-2",children:j.map(A=>{const L=Et[A];return i.jsx("li",{children:i.jsxs("button",{onClick:()=>h(A),className:"text-left w-full rounded-lg border px-3 py-2 hover:bg-slate-50",children:[i.jsxs("span",{className:"font-medium mr-2",children:["Q",c.indexOf(A)+1,"."]}),L.stem.replace(/<[^>]*>/g,"")]})},L.id)})})]}),i.jsxs("div",{className:"mt-6 flex gap-2",children:[i.jsx("button",{onClick:y,className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:"Restart"}),i.jsx(Ee,{to:"/diseases/geriatrics",className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Back to Geriatrics"})]})]})})}function Ov(){const o=Lv(),[r,d]=p.useState(Et.map((T,U)=>U)),[c,h]=p.useState(!1),[y,w]=p.useState(null),[x,g]=p.useState(null),[f,k]=p.useState(!1),[E,j]=p.useState(!1),[A,L]=p.useState(0),[X,Z]=p.useState({}),[q,se]=p.useState({}),[te,J]=p.useState(!1),K=p.useRef(null),_=Et[r[A]],ae=Et.length,ee=(A+1)/Math.max(ae,1)*100;p.useEffect(()=>{if(!te)return;const T=()=>{const U=K.current;if(!U)return;const B=window.getSelection&&window.getSelection();if(!(!B||B.rangeCount===0))try{const O=B.getRangeAt(0);if(!U.contains(O.commonAncestorContainer)||String(O).trim().length===0)return;const N=document.createElement("mark");N.className="bg-yellow-200 rounded px-0.5",O.surroundContents(N),B.removeAllRanges()}catch{}};return document.addEventListener("mouseup",T),()=>document.removeEventListener("mouseup",T)},[te]);const R=()=>{const T=K.current;T&&T.querySelectorAll("mark").forEach(U=>{const B=U.parentNode;for(;U.firstChild;)B.insertBefore(U.firstChild,U);B.removeChild(U)})};p.useEffect(()=>{const T=U=>{U.key==="ArrowRight"&&A<ae-1&&L(B=>B+1),U.key==="ArrowLeft"&&A>0&&L(B=>B-1)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[A,ae]);const ie=T=>{const U=T==="random"?Iv(Et.map((B,O)=>O)):Et.map((B,O)=>O);d(U),L(0),Z({}),se({}),h(!0),w(Date.now()),k(!1)},ue=()=>{g(Date.now()),k(!0)};return f?i.jsx(Hv,{answers:X,startedAt:y,endedAt:x,order:r,onReview:T=>{k(!1),L(r.indexOf(T)>=0?r.indexOf(T):0)},onRestart:()=>ie("number")}):i.jsxs("div",{className:"min-h-screen bg-white text-slate-900",children:[i.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200",children:i.jsxs("div",{className:"mx-auto max-w-[1100px] px-4 py-3 flex items-center justify-between",children:[i.jsx(Ee,{to:"/",className:"text-2xl font-extrabold text-purple-700",children:"Mediwise"}),i.jsxs("div",{className:"flex items-center gap-4 w-[320px]",children:[i.jsxs("span",{className:"text-sm text-slate-600 whitespace-nowrap",children:["Question ",Math.min(A+1,ae)," of ",ae]}),i.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${ee}%`}})})]}),i.jsx("button",{onClick:ue,className:"rounded-xl px-4 py-2 border border-slate-200 hover:bg-slate-50 text-slate-700",children:"End Session"})]})}),i.jsx("button",{onClick:()=>j(T=>!T),className:["fixed z-50 h-10 w-10 rounded-xl shadow-sm border bg-white flex items-center justify-center text-slate-600 hover:bg-slate-50 transition-all",o?"right-4 bottom-20":"top-[120px]"].join(" "),style:o?{}:{left:E?316:12},title:E?"Hide questions":"Show questions",children:E?"‹":"›"}),i.jsx("div",{className:"mx-auto max-w-[1100px] px-2 md:px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("aside",{className:["hidden md:block","fixed top-[64px] left-0 z-40 h-[calc(100vh-64px)] w-[300px]","bg-white border-r border-slate-200 shadow","transition-transform",E?"translate-x-0":"-translate-x-[310px]"].join(" "),children:i.jsxs("div",{className:"h-full overflow-y-auto",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200",children:[i.jsx("p",{className:"font-semibold",children:"Questions"}),i.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," ","Correct"]}),i.jsxs("span",{className:"flex items-center gap-1 text-rose-700",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," ","Incorrect"]}),i.jsxs("span",{className:"flex items-center gap-1 text-slate-500",children:[i.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-300"})," ","Unanswered"]})]})]}),i.jsx("ol",{className:"p-3 space-y-3",children:r.map((T,U)=>{const B=Et[T],O=X[B.id],N=O?O===B.correct?"correct":"incorrect":"unanswered",V=U===A?"ring-2 ring-purple-300":N==="correct"?"ring-2 ring-emerald-300":N==="incorrect"?"ring-2 ring-rose-300":"";return i.jsx("button",{onClick:()=>L(U),className:`w-full text-left rounded-xl border border-slate-200 bg-white hover:bg-slate-50 p-3 ${V}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"font-medium",children:["Q",U+1]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:B.stem.replace(/<[^>]*>/g,"")}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("span",{className:"text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:B.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:B.difficulty})]})]}),i.jsx("span",{className:`mt-1 h-2 w-2 rounded-full ${N==="correct"?"bg-emerald-500":N==="incorrect"?"bg-rose-500":"bg-slate-300"}`})]})},B.id)})})]})}),i.jsx("div",{className:`transition-all ${E&&!o?"md:pl-[320px]":"ml-0"}`,children:i.jsxs("div",{className:"mx-auto md:pr-[56px]",children:[i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[i.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:_.vignetteTitle||"Clinical Vignette"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"mr-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5",children:_.topic}),i.jsx("span",{className:"text-xs rounded-full bg-amber-100 text-amber-700 px-2 py-0.5",children:_.difficulty})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["ID: ",_.id]})]}),i.jsxs("div",{className:"p-6 space-y-5",ref:K,children:[i.jsx("div",{className:"text-[15px] leading-relaxed",dangerouslySetInnerHTML:{__html:_.stem}}),i.jsx("div",{className:"space-y-3",children:_.options.map(T=>{const U=X[_.id],B=!!q[_.id],O=T.key===_.correct,N=B?O?"border-emerald-300 bg-emerald-50":U===T.key?"border-rose-300 bg-rose-50":"border-slate-200 bg-white":"border-slate-200 bg-white hover:bg-slate-50";return i.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-4 py-3 cursor-pointer ${N}`,children:[i.jsx("input",{type:"radio",name:`ans-${_.id}`,className:"h-4 w-4 text-purple-600",checked:U===T.key,onChange:()=>Z(V=>({...V,[_.id]:T.key})),disabled:B}),i.jsxs("span",{className:"text-[15px]",children:[i.jsxs("span",{className:"font-medium",children:[T.key,"."]})," ",T.text]})]},T.key)})}),i.jsx("div",{className:"pt-2 flex flex-wrap gap-2",children:q[_.id]?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:A>=ae-1?ue:()=>L(T=>T+1),className:"rounded-xl bg-purple-600 text-white px-4 py-2",children:A>=ae-1?"Finish & View Results →":"Next Question →"}),i.jsx("button",{onClick:()=>A>0&&L(T=>T-1),disabled:A===0,className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"← Previous"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>se(T=>({...T,[_.id]:!0})),disabled:!X[_.id],className:"rounded-xl bg-purple-600 text-white px-4 py-2 disabled:opacity-50",children:"Submit Answer"}),i.jsx("button",{onClick:()=>Z(T=>({...T,[_.id]:void 0})),className:"rounded-xl border px-4 py-2 hover:bg-slate-50",children:"Clear"})]})}),q[_.id]&&i.jsx("div",{className:"mt-2",children:i.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[i.jsx("p",{className:"font-semibold text-slate-900 mb-2",children:"Explanation"}),i.jsx("div",{className:"space-y-2 text-slate-800",children:_.explanation_detail?.map((T,U)=>i.jsx("p",{className:"leading-relaxed",children:i.jsx(Bv,{text:T})},U))})]})})]})]}),i.jsxs("div",{className:"fixed md:hidden right-4 bottom-4 flex gap-2",children:[i.jsx("button",{title:"Toggle highlight mode",onClick:()=>J(T=>!T),className:`h-10 w-10 rounded-lg border shadow-sm ${te?"border-purple-400 bg-purple-50 text-purple-700":"border-slate-200 bg-white text-slate-700"}`,children:"🖍️"}),i.jsx("button",{title:"Clear highlights",onClick:R,className:"h-10 w-10 rounded-lg border border-slate-200 bg-white shadow-sm",children:"🧽"})]})]})})]})}),i.jsx(zv,{open:o&&E,onClose:()=>j(!1),order:r,currentIdx:A,setCurrentIdx:L,answers:X}),i.jsx(Gv,{open:!c,onPick:ie})]})}function Gv({open:o,onPick:r}){return p.useEffect(()=>{if(o){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>document.body.style.overflow=d}},[o]),o?i.jsxs(Vh,{open:o,onClose:()=>{},title:"Start CKD Question Bank",maxW:"max-w-lg",overlayClass:"bg-white",children:[i.jsx("p",{className:"text-slate-600 mb-4",children:"How would you like to order the questions?"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>r("random"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"Randomised"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Shuffle questions for exam-style practice."})]}),i.jsxs("button",{onClick:()=>r("number"),className:"rounded-xl border border-slate-200 bg-white hover:bg-slate-50 px-4 py-3 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900",children:"By question number"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Go in sequence (Q1, Q2, Q3 …)."})]})]})]}):null}function Fv(){return i.jsxs(my,{children:[i.jsx(fe,{path:"/",element:i.jsx(Ky,{})}),i.jsx(fe,{path:"/plabable",element:i.jsx(Zy,{})}),i.jsx(fe,{path:"/plabable/acute-emergency",element:i.jsx(sb,{})}),i.jsx(fe,{path:"/diseases/cardiovascular",element:i.jsx(ob,{})}),i.jsx(fe,{path:"/diseases/respiratory",element:i.jsx(lb,{})}),i.jsx(fe,{path:"/diseases/gastrointestinal",element:i.jsx(cb,{})}),i.jsx(fe,{path:"/diseases/renal",element:i.jsx(db,{})}),i.jsx(fe,{path:"/diseases/endocrine",element:i.jsx(ub,{})}),i.jsx(fe,{path:"/diseases/neurology",element:i.jsx(mb,{})}),i.jsx(fe,{path:"/diseases/msk",element:i.jsx(hb,{})}),i.jsx(fe,{path:"/diseases/hematology",element:i.jsx(pb,{})}),i.jsx(fe,{path:"/diseases/oncology",element:i.jsx(gb,{})}),i.jsx(fe,{path:"/diseases/infectious",element:i.jsx(fb,{})}),i.jsx(fe,{path:"/diseases/allergy-immunology",element:i.jsx(yb,{})}),i.jsx(fe,{path:"/diseases/psychiatry",element:i.jsx(bb,{})}),i.jsx(fe,{path:"/diseases/dermatology",element:i.jsx(xb,{})}),i.jsx(fe,{path:"/diseases/reproductive",element:i.jsx(vb,{})}),i.jsx(fe,{path:"/diseases/pediatrics",element:i.jsx(wb,{})}),i.jsx(fe,{path:"/diseases/ophthalmology",element:i.jsx(kb,{})}),i.jsx(fe,{path:"/diseases/ent",element:i.jsx(Cb,{})}),i.jsx(fe,{path:"/diseases/geriatrics",element:i.jsx(Sb,{})}),i.jsx(fe,{path:"/diseases/emergency",element:i.jsx(Nb,{})}),i.jsx(fe,{path:"/diseases/toxicology",element:i.jsx(jb,{})}),i.jsx(fe,{path:"/diseases/palliative",element:i.jsx(Eb,{})}),i.jsx(fe,{path:"/diseases/geriatrics/dementia-alzheimers",element:i.jsx(Hb,{})}),i.jsx(fe,{path:"/diseases/geriatrics/vascular-dementia",element:i.jsx(Kb,{})}),i.jsx(fe,{path:"/diseases/geriatrics/dementia-lewy-bodies",element:i.jsx(rx,{})}),i.jsx(fe,{path:"/diseases/geriatrics/frontotemporal-dementia",element:i.jsx(yx,{})}),i.jsx(fe,{path:"/diseases/geriatrics/delirium",element:i.jsx(Ex,{})}),i.jsx(fe,{path:"/diseases/geriatrics/parkinsons-disease",element:i.jsx(Ox,{})}),i.jsx(fe,{path:"/diseases/geriatrics/stroke-tia",element:i.jsx(Kx,{})}),i.jsx(fe,{path:"/diseases/geriatrics/copd",element:i.jsx(iv,{})}),i.jsx(fe,{path:"/diseases/geriatrics/urinary-incontinence",element:i.jsx(mv,{})}),i.jsx(fe,{path:"/diseases/geriatrics/heart-failure-hfpef",element:i.jsx(bv,{})}),i.jsx(fe,{path:"/diseases/geriatrics/pressure-ulcers",element:i.jsx(Sv,{})}),i.jsx(fe,{path:"/diseases/geriatrics/frailty",element:i.jsx(Rv,{})}),i.jsx(fe,{path:"/diseases/geriatrics/ckd",element:i.jsx(Ov,{})})]})}kf.createRoot(document.getElementById("root")).render(i.jsx(vh.StrictMode,{children:i.jsx(Iy,{children:i.jsx(Fv,{})})}));
